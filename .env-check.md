# üîç Guide de v√©rification des variables d'environnement

## ‚úÖ Confirmation du chargement

Les variables d'environnement sont bien charg√©es depuis le fichier `.env` gr√¢ce √† :

1. **Import de dotenv** au d√©but de chaque fichier serveur :
   ```typescript
   import dotenv from "dotenv";
   dotenv.config();
   ```

2. **Chargement confirm√©** par les logs du serveur :
   ```
   [dotenv@17.0.1] injecting env (29) from .env
   ```

## üìã Utilisation dans le code

### C√¥t√© Serveur (process.env)
- `DATABASE_URL` ‚Üí `server/db.ts`
- `GOOGLE_MAPS_API_KEY` ‚Üí `server/distanceService.ts`, `server/routes.ts`
- `STRIPE_SECRET_KEY` ‚Üí `server/routes.ts`
- `JWT_SECRET` ‚Üí `server/auth.ts`
- `SESSION_SECRET` ‚Üí `server/routes.ts`
- `SENDGRID_API_KEY` ‚Üí `server/emailService.ts`

### C√¥t√© Client (import.meta.env)
- `VITE_STRIPE_PUBLIC_KEY` ‚Üí `client/src/lib/stripe.ts`
- `VITE_API_URL` ‚Üí Configuration API client

## üöÄ Pour le d√©ploiement VPS

1. **Cr√©ez votre `.env` de production** :
   ```bash
   cp .env.example .env
   # √âditez avec vos vraies cl√©s
   ```

2. **Variables minimales requises** :
   - `DATABASE_URL` : PostgreSQL locale ou cloud
   - `GOOGLE_MAPS_API_KEY` : Pour calcul distances
   - `VITE_STRIPE_PUBLIC_KEY` : Cl√© publique Stripe
   - `STRIPE_SECRET_KEY` : Cl√© secr√®te Stripe

3. **Build avec variables** :
   ```bash
   # Les variables VITE_ sont int√©gr√©es au build
   npm run build
   ```

4. **D√©marrage production** :
   ```bash
   NODE_ENV=production node dist/server/index.js
   ```

## üîß D√©pannage

Si une variable n'est pas charg√©e :
1. V√©rifiez que le fichier `.env` existe
2. V√©rifiez la syntaxe : `VARIABLE=valeur` (pas d'espaces)
3. Red√©marrez le serveur apr√®s modification
4. Utilisez `tsx test-env-loading.ts` pour v√©rifier