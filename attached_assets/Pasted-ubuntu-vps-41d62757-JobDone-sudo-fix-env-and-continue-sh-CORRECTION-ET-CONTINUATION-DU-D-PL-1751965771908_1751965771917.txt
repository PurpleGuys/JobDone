ubuntu@vps-41d62757:~/JobDone$ sudo ./fix-env-and-continue.sh
🔧 CORRECTION ET CONTINUATION DU DÉPLOIEMENT

► Chargement correct des variables d'environnement
.env: line 48: Bennes: command not found
ubuntu@vps-41d62757:~/JobDone$ sudo chmod +x ./fix-env-and-continue.sh
ubuntu@vps-41d62757:~/JobDone$ sudo ./fix-env-and-continue.sh
🔧 CORRECTION ET CONTINUATION DU DÉPLOIEMENT

► Chargement correct des variables d'environnement
.env: line 48: Bennes: command not found
ubuntu@vps-41d62757:~/JobDone$ ^C
ubuntu@vps-41d62757:~/JobDone$ sudo ./fix-env-and-continue.sh
🔧 CORRECTION ET CONTINUATION DU DÉPLOIEMENT

► Chargement correct des variables d'environnement
.env: line 48: Bennes: command not found
ubuntu@vps-41d62757:~/JobDone$ sudo ./fix-env-jobdone.sh
sudo: ./fix-env-jobdone.sh: command not found
ubuntu@vps-41d62757:~/JobDone$ sudo git pull
remote: Enumerating objects: 8, done.
remote: Counting objects: 100% (8/8), done.
remote: Compressing objects: 100% (5/5), done.
remote: Total 7 (delta 2), reused 7 (delta 2), pack-reused 0 (from 0)
Unpacking objects: 100% (7/7), 4.20 KiB | 859.00 KiB/s, done.
From https://github.com/PurpleGuys/JobDone
   164ca61..378392b  main       -> origin/main
Updating 164ca61..378392b
Fast-forward
 VERIFIER-ENV-VPS.md      | 70 ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 fix-env-jobdone.sh       | 88 ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 fix-env-vps-immediate.sh | 74 ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 3 files changed, 232 insertions(+)
 create mode 100644 VERIFIER-ENV-VPS.md
 create mode 100755 fix-env-jobdone.sh
 create mode 100755 fix-env-vps-immediate.sh
ubuntu@vps-41d62757:~/JobDone$ sudo ./fix-env-jobdone.sh
🔧 CORRECTION DU DÉPLOIEMENT JOBDONE

► Vérification du fichier .env
✓ Fichier .env trouvé

► Vérification des clés Stripe :
✓ Clés de production Stripe trouvées
STRIPE_WEBHOOK_SECRET=whsec_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
STRIPE_SECRET_KEY="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"
VITE_STRIPE_PUBLIC_KEY="pk_live_51RTkOEH7j6Qmye8ANaVnmmha9hqIUhENTbJo94UZ9D7Ia3hRu7jFbVcBtfO4lJvLiluHxqdproixaCIglmZORP0h00IWlpRCiS"

► Nettoyage du cache et rebuild

> rest-express@1.0.0 build
> vite build && esbuild server/index.ts --platform=node --packages=external --bundle --format=esm --outdir=dist

vite v5.4.19 building for production...
✓ 3090 modules transformed.
../dist/public/index.html                            1.23 kB │ gzip:   0.66 kB
../dist/public/assets/index-BE7dMkpN.css            97.69 kB │ gzip:  16.28 kB
../dist/public/assets/stripe-yVypDYKo.js            12.44 kB │ gzip:   4.71 kB
../dist/public/assets/purify.es-BOcia5MP.js         22.01 kB │ gzip:   8.49 kB
../dist/public/assets/vendor-Bjk0m85c.js           140.30 kB │ gzip:  45.06 kB
../dist/public/assets/index.es-CD03FzTL.js         148.92 kB │ gzip:  49.76 kB
../dist/public/assets/html2canvas.esm-BTH0Ap93.js  199.17 kB │ gzip:  46.50 kB
../dist/public/assets/jspdf.es.min-CGtyrWaE.js     356.21 kB │ gzip: 115.65 kB
../dist/public/assets/index-fXTgmz_H.js            913.68 kB │ gzip: 232.30 kB
✓ built in 27.32s

  dist/index.js  246.0kb

⚡ Done in 39ms
✓ Build réussi

► Vérification du build
dist/public/assets/stripe-yVypDYKo.js:import{g as e,R as t}from"./vendor-Bjk0m85c.js";var n={exports:{}};function r(){}function o(){}o.resetWarningCache=r;n.exports=function(){function e(e,t,n,r,o,i){if("SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"!==i){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:r};return n.PropTypes=n,n}();const i=e(n.exports);function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach(function(t){s(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var r,o,i=[],c=!0,a=!1;try{for(n=n.call(e);!(c=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);c=!0);}catch(u){a=!0,o=u}finally{try{c||null==n.return||n.return()}finally{if(a)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var d=function(e,n,r){var o=!!r,i=t.useRef(r);t.useEffect(function(){i.current=r},[r]),t.useEffect(function(){if(!o||!e)return function(){};var t=function(){i.current&&i.current.apply(i,arguments)};return e.on(n,t),function(){e.off(n,t)}},[o,n,e,i])},m=function(e){var n=t.useRef(e);return t.useEffect(function(){n.current=e},[e]),n.current},y=function(e){return null!==e&&"object"===u(e)},h="[object Object]",v=function e(t,n){if(!y(t)||!y(n))return t===n;var r=Array.isArray(t);if(r!==Array.isArray(n))return!1;var o=Object.prototype.toString.call(t)===h;if(o!==(Object.prototype.toString.call(n)===h))return!1;if(!o&&!r)return t===n;var i=Object.keys(t),c=Object.keys(n);if(i.length!==c.length)return!1;for(var a={},u=0;u<i.length;u+=1)a[i[u]]=!0;for(var s=0;s<c.length;s+=1)a[c[s]]=!0;var l=Object.keys(a);if(l.length!==i.length)return!1;var p=t,f=n;return l.every(function(t){return e(p[t],f[t])})},g=function(e,t,n){return y(e)?Object.keys(e).reduce(function(r,o){var i=!y(t)||!v(e[o],t[o]);return n.includes(o)?(i&&console.warn("Unsupported prop change: options.".concat(o," is not a mutable property.")),r):i?a(a({},r||{}),{},s({},o,e[o])):r},null):null},b="Invalid prop `stripe` supplied to `Elements`. We recommend using the `loadStripe` utility from `@stripe/stripe-js`. See https://stripe.com/docs/stripe-js/react#elements-props-stripe for details.",E=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:b;if(null===e||y(t=e)&&"function"==typeof t.elements&&"function"==typeof t.createToken&&"function"==typeof t.createPaymentMethod&&"function"==typeof t.confirmCardPayment)return e;throw new Error(n)},w=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:b;if(function(e){return y(e)&&"function"==typeof e.then}(e))return{tag:"async",stripePromise:Promise.resolve(e).then(function(e){return E(e,t)})};var n=E(e,t);return null===n?{tag:"empty"}:{tag:"sync",stripe:n}},j=t.createContext(null);j.displayName="ElementsContext";var C=function(e,t){if(!e)throw new Error("Could not find Elements context; You need to wrap the part of your app that ".concat(t," in an <Elements> provider."));return e},S=function(e){var n=e.stripe,r=e.options,o=e.children,i=t.useMemo(function(){return w(n)},[n]),c=p(t.useState(function(){return{stripe:"sync"===i.tag?i.stripe:null,elements:"sync"===i.tag?i.stripe.elements(r):null}}),2),a=c[0],u=c[1];t.useEffect(function(){var e=!0,t=function(e){u(function(t){return t.stripe?t:{stripe:e,elements:e.elements(r)}})};return"async"!==i.tag||a.stripe?"sync"!==i.tag||a.stripe||t(i.stripe):i.stripePromise.then(function(n){n&&e&&t(n)}),function(){e=!1}},[i,a,r]);var s=m(n);t.useEffect(function(){null!==s&&s!==n&&console.warn("Unsupported prop change on Elements: You cannot change the `stripe` prop after setting it.")},[s,n]);var l=m(r);return t.useEffect(function(){if(a.elements){var e=g(r,l,["clientSecret","fonts"]);e&&a.elements.update(e)}},[r,l,a.elements]),t.useEffect(function(){var e;(e=a.stripe)&&e._registerWrapper&&e.registerAppInfo&&(e._registerWrapper({name:"react-stripe-js",version:"3.7.0"}),e.registerAppInfo({name:"react-stripe-js",version:"3.7.0",url:"https://stripe.com/docs/stripe-js/react"}))},[a.stripe]),t.createElement(j.Provider,{value:a},o)};S.propTypes={stripe:i.any,options:i.object};var k=function(){var e,n;return(e="calls useElements()",n=t.useContext(j),C(n,e)).elements};i.func.isRequired;var O=t.createContext(null);O.displayName="CheckoutSdkContext";t.createContext(null).displayName="CheckoutContext",i.any,i.shape({fetchClientSecret:i.func.isRequired,elementsOptions:i.object}).isRequired;var P=function(e){var n=t.useContext(O),r=t.useContext(j);if(n&&r)throw new Error("You cannot wrap the part of your app that ".concat(e," in both <CheckoutProvider> and <Elements> providers."));return n?function(e,t){if(!e)throw new Error("Could not find CheckoutProvider context; You need to wrap the part of your app that ".concat(t," in an <CheckoutProvider> provider."));return e}(n,e):C(r,e)},x=["mode"],A=function(e,n){var r,o="".concat((r=e).charAt(0).toUpperCase()+r.slice(1),"Element"),c=n?function(e){P("mounts <".concat(o,">"));var n=e.id,r=e.className;return t.createElement("div",{id:n,className:r})}:function(n){var r,i=n.id,c=n.className,a=n.options,u=void 0===a?{}:a,s=n.onBlur,f=n.onFocus,y=n.onReady,h=n.onChange,v=n.onEscape,b=n.onClick,E=n.onLoadError,w=n.onLoaderStart,j=n.onNetworksChange,C=n.onConfirm,S=n.onCancel,k=n.onShippingAddressChange,O=n.onShippingRateChange,A=P("mounts <".concat(o,">")),R="elements"in A?A.elements:null,T="checkoutSdk"in A?A.checkoutSdk:null,_=p(t.useState(null),2),N=_[0],I=_[1],L=t.useRef(null),B=t.useRef(null);d(N,"blur",s),d(N,"focus",f),d(N,"escape",v),d(N,"click",b),d(N,"loaderror",E),d(N,"loaderstart",w),d(N,"networkschange",j),d(N,"confirm",C),d(N,"cancel",S),d(N,"shippingaddresschange",k),d(N,"shippingratechange",O),d(N,"change",h),y&&(r="expressCheckout"===e?y:function(){y(N)}),d(N,"ready",r),t.useLayoutEffect(function(){if(null===L.current&&null!==B.current&&(R||T)){var t=null;if(T)switch(e){case"payment":t=T.createPaymentElement(u);break;case"address":if(!("mode"in u))throw new Error("You must supply options.mode. mode must be 'billing' or 'shipping'.");var n=u.mode,r=l(u,x);if("shipping"===n)t=T.createShippingAddressElement(r);else{if("billing"!==n)throw new Error("Invalid options.mode. mode must be 'billing' or 'shipping'.");t=T.createBillingAddressElement(r)}break;case"expressCheckout":t=T.createExpressCheckoutElement(u);break;case"currencySelector":t=T.createCurrencySelectorElement();break;default:throw new Error("Invalid Element type ".concat(o,". You must use either the <PaymentElement />, <AddressElement options={{mode: 'shipping'}} />, <AddressElement options={{mode: 'billing'}} />, or <ExpressCheckoutElement />."))}else R&&(t=R.create(e,u));L.current=t,I(t),t&&t.mount(B.current)}},[R,T,u]);var q=m(u);return t.useEffect(function(){if(L.current){var e=g(u,q,["paymentRequest"]);e&&"update"in L.current&&L.current.update(e)}},[u,q]),t.useLayoutEffect(function(){return function(){if(L.current&&"function"==typeof L.current.destroy)try{L.current.destroy(),L.current=null}catch(e){}}},[]),t.createElement("div",{id:i,className:c,ref:B})};return c.propTypes={id:i.string,className:i.string,onChange:i.func,onBlur:i.func,onFocus:i.func,onReady:i.func,onEscape:i.func,onClick:i.func,onLoadError:i.func,onLoaderStart:i.func,onNetworksChange:i.func,onConfirm:i.func,onCancel:i.func,onShippingAddressChange:i.func,onShippingRateChange:i.func,options:i.object},c.displayName=o,c.__elementType=e,c},R="undefined"==typeof window;t.createContext(null).displayName="EmbeddedCheckoutProviderContext";var T=function(){return P("calls useStripe()").stripe};A("auBankAccount",R),A("card",R),A("cardNumber",R),A("cardExpiry",R),A("cardCvc",R),A("fpxBank",R),A("iban",R),A("idealBank",R),A("p24Bank",R),A("epsBank",R);var _=A("payment",R);A("expressCheckout",R),A("currencySelector",R),A("paymentRequestButton",R),A("linkAuthentication",R),A("address",R),A("shippingAddress",R),A("paymentMethodMessaging",R),A("affirmMessage",R),A("afterpayClearpayMessage",R);var N,I="basil",L="https://js.stripe.com",B="".concat(L,"/").concat(I,"/stripe.js"),q=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,W=/^https:\/\/js\.stripe\.com\/(v3|[a-z]+)\/stripe\.js(\?.*)?$/,D=function(e){return q.test(e)||W.test(e)},M=function(e){var t=document.createElement("script");t.src="".concat(B).concat("");var n=document.head||document.body;if(!n)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return n.appendChild(t),t},Y=null,U=null,F=null,$=function(e){return null!==Y?Y:(Y=new Promise(function(t,n){if("undefined"!=typeof window&&"undefined"!=typeof document)if(window.Stripe)t(window.Stripe);else try{var r=function(){for(var e=document.querySelectorAll('script[src^="'.concat(L,'"]')),t=0;t<e.length;t++){var n=e[t];if(D(n.src))return n}return null}();if(r&&e);else if(r){if(r&&null!==F&&null!==U){var o;r.removeEventListener("load",F),r.removeEventListener("error",U),null===(o=r.parentNode)||void 0===o||o.removeChild(r),r=M()}}else r=M();F=function(e,t){return function(){window.Stripe?e(window.Stripe):t(new Error("Stripe.js not available"))}}(t,n),U=function(e){return function(t){e(new Error("Failed to load Stripe.js",{cause:t}))}}(n),r.addEventListener("load",F),r.addEventListener("error",U)}catch(i){return void n(i)}else t(null)})).catch(function(e){return Y=null,Promise.reject(e)})},z=!1,H=function(){return N||(N=$(null).catch(function(e){return N=null,Promise.reject(e)}))};Promise.resolve().then(function(){return H()}).catch(function(e){z||console.warn(e)});var V=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];z=!0;var r=Date.now();return H().then(function(e){return function(e,t,n){if(null===e)return null;var r=t[0].match(/^pk_test/),o=function(e){return 3===e?"v3":e}(e.version),i=I;r&&o!==i&&console.warn("Stripe.js@".concat(o," was loaded on the page, but @stripe/stripe-js@").concat("7.4.0"," expected Stripe.js@").concat(i,". This may result in unexpected behavior. For more information, see https://docs.stripe.com/sdks/stripejs-versioning"));var c=e.apply(void 0,t);return function(e,t){e&&e._registerWrapper&&e._registerWrapper({name:"stripe-js",version:"7.4.0",startTime:t})}(c,n),c}(e,t,r)})};export{S as E,i as P,k as a,_ as b,V as l,T as u};
dist/public/assets/index-fXTgmz_H.js: */function sd(){let e,t,s=0,n="";for(;s<arguments.length;)(e=arguments[s++])&&(t=nd(e))&&(n&&(n+=" "),n+=t);return n}const nd=e=>{if("string"==typeof e)return e;let t,s="";for(let n=0;n<e.length;n++)e[n]&&(t=nd(e[n]))&&(s&&(s+=" "),s+=t);return s};function rd(e,...t){let s,n,r,a=function(o){const l=t.reduce((e,t)=>t(e),e());return s=(e=>({cache:Jc(e.cacheSize),parseClassName:Xc(e),...$c(e)}))(l),n=s.cache.get,r=s.cache.set,a=i,i(o)};function i(e){const t=n(e);if(t)return t;const a=((e,t)=>{const{parseClassName:s,getClassGroupId:n,getConflictingClassGroupIds:r}=t,a=[],i=e.trim().split(td);let o="";for(let l=i.length-1;l>=0;l-=1){const e=i[l],{modifiers:t,hasImportantModifier:c,baseClassName:d,maybePostfixModifierPosition:u}=s(e);let m=Boolean(u),p=n(m?d.substring(0,u):d);if(!p){if(!m){o=e+(o.length>0?" "+o:o);continue}if(p=n(d),!p){o=e+(o.length>0?" "+o:o);continue}m=!1}const h=ed(t).join(":"),x=c?h+"!":h,f=x+p;if(a.includes(f))continue;a.push(f);const v=r(p,m);for(let s=0;s<v.length;++s){const e=v[s];a.push(x+e)}o=e+(o.length>0?" "+o:o)}return o})(e,s);return r(e,a),a}return function(){return a(sd.apply(null,arguments))}}const ad=e=>{const t=t=>t[e]||[];return t.isThemeGetter=!0,t},id=/^\[(?:([a-z-]+):)?(.+)\]$/i,od=/^\d+\/\d+$/,ld=new Set(["px","full","screen"]),cd=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,dd=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,ud=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,md=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,pd=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,hd=e=>fd(e)||ld.has(e)||od.test(e),xd=e=>Ed(e,"length",Dd),fd=e=>Boolean(e)&&!Number.isNaN(Number(e)),vd=e=>Ed(e,"number",fd),gd=e=>Boolean(e)&&Number.isInteger(Number(e)),yd=e=>e.endsWith("%")&&fd(e.slice(0,-1)),bd=e=>id.test(e),jd=e=>cd.test(e),Nd=new Set(["length","size","percentage"]),wd=e=>Ed(e,Nd,Td),kd=e=>Ed(e,"position",Td),Cd=new Set(["image","url"]),Sd=e=>Ed(e,Cd,Od),_d=e=>Ed(e,"",Ad),Pd=()=>!0,Ed=(e,t,s)=>{const n=id.exec(e);return!!n&&(n[1]?"string"==typeof t?n[1]===t:t.has(n[1]):s(n[2]))},Dd=e=>dd.test(e)&&!ud.test(e),Td=()=>!1,Ad=e=>md.test(e),Od=e=>pd.test(e),Rd=rd(()=>{const e=ad("colors"),t=ad("spacing"),s=ad("blur"),n=ad("brightness"),r=ad("borderColor"),a=ad("borderRadius"),i=ad("borderSpacing"),o=ad("borderWidth"),l=ad("contrast"),c=ad("grayscale"),d=ad("hueRotate"),u=ad("invert"),m=ad("gap"),p=ad("gradientColorStops"),h=ad("gradientColorStopPositions"),x=ad("inset"),f=ad("margin"),v=ad("opacity"),g=ad("padding"),y=ad("saturate"),b=ad("scale"),j=ad("sepia"),N=ad("skew"),w=ad("space"),k=ad("translate"),C=()=>["auto",bd,t],S=()=>[bd,t],_=()=>["",hd,xd],P=()=>["auto",fd,bd],E=()=>["","0",bd],D=()=>[fd,bd];return{cacheSize:500,separator:":",theme:{colors:[Pd],spacing:[hd,xd],blur:["none","",jd,bd],brightness:D(),borderColor:[e],borderRadius:["none","","full",jd,bd],borderSpacing:S(),borderWidth:_(),contrast:D(),grayscale:E(),hueRotate:D(),invert:E(),gap:S(),gradientColorStops:[e],gradientColorStopPositions:[yd,xd],inset:C(),margin:C(),opacity:D(),padding:S(),saturate:D(),scale:D(),sepia:E(),skew:D(),space:S(),translate:S()},classGroups:{aspect:[{aspect:["auto","square","video",bd]}],container:["container"],columns:[{columns:[jd]}],"break-after":[{"break-after":["auto","avoid","all","avoid-page","page","left","right","column"]}],"break-before":[{"break-before":["auto","avoid","all","avoid-page","page","left","right","column"]}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top",bd]}],overflow:[{overflow:["auto","hidden","clip","visible","scroll"]}],"overflow-x":[{"overflow-x":["auto","hidden","clip","visible","scroll"]}],"overflow-y":[{"overflow-y":["auto","hidden","clip","visible","scroll"]}],overscroll:[{overscroll:["auto","contain","none"]}],"overscroll-x":[{"overscroll-x":["auto","contain","none"]}],"overscroll-y":[{"overscroll-y":["auto","contain","none"]}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[x]}],"inset-x":[{"inset-x":[x]}],"inset-y":[{"inset-y":[x]}],start:[{start:[x]}],end:[{end:[x]}],top:[{top:[x]}],right:[{right:[x]}],bottom:[{bottom:[x]}],left:[{left:[x]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",gd,bd]}],basis:[{basis:C()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",bd]}],grow:[{grow:E()}],shrink:[{shrink:E()}],order:[{order:["first","last","none",gd,bd]}],"grid-cols":[{"grid-cols":[Pd]}],"col-start-end":[{col:["auto",{span:["full",gd,bd]},bd]}],"col-start":[{"col-start":P()}],"col-end":[{"col-end":P()}],"grid-rows":[{"grid-rows":[Pd]}],"row-start-end":[{row:["auto",{span:[gd,bd]},bd]}],"row-start":[{"row-start":P()}],"row-end":[{"row-end":P()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",bd]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",bd]}],gap:[{gap:[m]}],"gap-x":[{"gap-x":[m]}],"gap-y":[{"gap-y":[m]}],"justify-content":[{justify:["normal","start","end","center","between","around","evenly","stretch"]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal","start","end","center","between","around","evenly","stretch","baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":["start","end","center","between","around","evenly","stretch","baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[g]}],px:[{px:[g]}],py:[{py:[g]}],ps:[{ps:[g]}],pe:[{pe:[g]}],pt:[{pt:[g]}],pr:[{pr:[g]}],pb:[{pb:[g]}],pl:[{pl:[g]}],m:[{m:[f]}],mx:[{mx:[f]}],my:[{my:[f]}],ms:[{ms:[f]}],me:[{me:[f]}],mt:[{mt:[f]}],mr:[{mr:[f]}],mb:[{mb:[f]}],ml:[{ml:[f]}],"space-x":[{"space-x":[w]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[w]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",bd,t]}],"min-w":[{"min-w":[bd,t,"min","max","fit"]}],"max-w":[{"max-w":[bd,t,"none","full","min","max","fit","prose",{screen:[jd]},jd]}],h:[{h:[bd,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[bd,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[bd,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[bd,t,"auto","min","max","fit"]}],"font-size":[{text:["base",jd,xd]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",vd]}],"font-family":[{font:[Pd]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",bd]}],"line-clamp":[{"line-clamp":["none",fd,vd]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",hd,bd]}],"list-image":[{"list-image":["none",bd]}],"list-style-type":[{list:["none","disc","decimal",bd]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[v]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[v]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:["solid","dashed","dotted","double","none","wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",hd,xd]}],"underline-offset":[{"underline-offset":["auto",hd,bd]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:S()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",bd]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",bd]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[v]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top",kd]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",wd]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},Sd]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[h]}],"gradient-via-pos":[{via:[h]}],"gradient-to-pos":[{to:[h]}],"gradient-from":[{from:[p]}],"gradient-via":[{via:[p]}],"gradient-to":[{to:[p]}],rounded:[{rounded:[a]}],"rounded-s":[{"rounded-s":[a]}],"rounded-e":[{"rounded-e":[a]}],"rounded-t":[{"rounded-t":[a]}],"rounded-r":[{"rounded-r":[a]}],"rounded-b":[{"rounded-b":[a]}],"rounded-l":[{"rounded-l":[a]}],"rounded-ss":[{"rounded-ss":[a]}],"rounded-se":[{"rounded-se":[a]}],"rounded-ee":[{"rounded-ee":[a]}],"rounded-es":[{"rounded-es":[a]}],"rounded-tl":[{"rounded-tl":[a]}],"rounded-tr":[{"rounded-tr":[a]}],"rounded-br":[{"rounded-br":[a]}],"rounded-bl":[{"rounded-bl":[a]}],"border-w":[{border:[o]}],"border-w-x":[{"border-x":[o]}],"border-w-y":[{"border-y":[o]}],"border-w-s":[{"border-s":[o]}],"border-w-e":[{"border-e":[o]}],"border-w-t":[{"border-t":[o]}],"border-w-r":[{"border-r":[o]}],"border-w-b":[{"border-b":[o]}],"border-w-l":[{"border-l":[o]}],"border-opacity":[{"border-opacity":[v]}],"border-style":[{border:["solid","dashed","dotted","double","none","hidden"]}],"divide-x":[{"divide-x":[o]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[o]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[v]}],"divide-style":[{divide:["solid","dashed","dotted","double","none"]}],"border-color":[{border:[r]}],"border-color-x":[{"border-x":[r]}],"border-color-y":[{"border-y":[r]}],"border-color-s":[{"border-s":[r]}],"border-color-e":[{"border-e":[r]}],"border-color-t":[{"border-t":[r]}],"border-color-r":[{"border-r":[r]}],"border-color-b":[{"border-b":[r]}],"border-color-l":[{"border-l":[r]}],"divide-color":[{divide:[r]}],"outline-style":[{outline:["","solid","dashed","dotted","double","none"]}],"outline-offset":[{"outline-offset":[hd,bd]}],"outline-w":[{outline:[hd,xd]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:_()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[v]}],"ring-offset-w":[{"ring-offset":[hd,xd]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",jd,_d]}],"shadow-color":[{shadow:[Pd]}],opacity:[{opacity:[v]}],"mix-blend":[{"mix-blend":["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"]}],filter:[{filter:["","none"]}],blur:[{blur:[s]}],brightness:[{brightness:[n]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",jd,bd]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[u]}],saturate:[{saturate:[y]}],sepia:[{sepia:[j]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[s]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[u]}],"backdrop-opacity":[{"backdrop-opacity":[v]}],"backdrop-saturate":[{"backdrop-saturate":[y]}],"backdrop-sepia":[{"backdrop-sepia":[j]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[i]}],"border-spacing-x":[{"border-spacing-x":[i]}],"border-spacing-y":[{"border-spacing-y":[i]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",bd]}],duration:[{duration:D()}],ease:[{ease:["linear","in","out","in-out",bd]}],delay:[{delay:D()}],animate:[{animate:["none","spin","ping","pulse","bounce",bd]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[b]}],"scale-x":[{"scale-x":[b]}],"scale-y":[{"scale-y":[b]}],rotate:[{rotate:[gd,bd]}],"translate-x":[{"translate-x":[k]}],"translate-y":[{"translate-y":[k]}],"skew-x":[{"skew-x":[N]}],"skew-y":[{"skew-y":[N]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",bd]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",bd]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":S()}],"scroll-mx":[{"scroll-mx":S()}],"scroll-my":[{"scroll-my":S()}],"scroll-ms":[{"scroll-ms":S()}],"scroll-me":[{"scroll-me":S()}],"scroll-mt":[{"scroll-mt":S()}],"scroll-mr":[{"scroll-mr":S()}],"scroll-mb":[{"scroll-mb":S()}],"scroll-ml":[{"scroll-ml":S()}],"scroll-p":[{"scroll-p":S()}],"scroll-px":[{"scroll-px":S()}],"scroll-py":[{"scroll-py":S()}],"scroll-ps":[{"scroll-ps":S()}],"scroll-pe":[{"scroll-pe":S()}],"scroll-pt":[{"scroll-pt":S()}],"scroll-pr":[{"scroll-pr":S()}],"scroll-pb":[{"scroll-pb":S()}],"scroll-pl":[{"scroll-pl":S()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",bd]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[hd,xd,vd]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}});function Fd(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Rd(vl(e))}var Id=function(e,t){var s={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(s[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(s[n[r]]=e[n[r]])}return s},Md=cl,Ld=hr.forwardRef(function(e,t){var s=e.className,n=Id(e,["className"]);return Fr.jsx(dl,{ref:t,className:Fd("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",s),...n})});Ld.displayName=dl.displayName;var qd=bl("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),zd=hr.forwardRef(function(e,t){var s=e.className,n=e.variant,r=Id(e,["className","variant"]);return Fr.jsx(ul,{ref:t,className:Fd(qd({variant:n}),s),...r})});zd.displayName=ul.displayName,hr.forwardRef(function(e,t){var s=e.className,n=Id(e,["className"]);return Fr.jsx(hl,{ref:t,className:Fd("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",s),...n})}).displayName=hl.displayName;var Vd=hr.forwardRef(function(e,t){var s=e.className,n=Id(e,["className"]);return Fr.jsx(xl,{ref:t,className:Fd("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",s),"toast-close":"",...n,children:Fr.jsx(Vc,{className:"h-4 w-4"})})});Vd.displayName=xl.displayName;var Bd=hr.forwardRef(function(e,t){var s=e.className,n=Id(e,["className"]);return Fr.jsx(ml,{ref:t,className:Fd("text-sm font-semibold",s),...n})});Bd.displayName=ml.displayName;var $d=hr.forwardRef(function(e,t){var s=e.className,n=Id(e,["className"]);return Fr.jsx(pl,{ref:t,className:Fd("text-sm opacity-90",s),...n})});$d.displayName=pl.displayName;function Wd(){var e=Ui().toasts;return Fr.jsxs(Md,{children:[e.map(function(e){var t=e.id,s=e.title,n=e.description,r=e.action,a=function(e,t){var s={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(s[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(s[n[r]]=e[n[r]])}return s}(e,["id","title","description","action"]);return Fr.jsxs(zd,{...a,children:[Fr.jsxs("div",{className:"grid gap-1",children:[s&&Fr.jsx(Bd,{children:s}),n&&Fr.jsx($d,{children:n})]}),r,Fr.jsx(Vd,{})]},t)}),Fr.jsx(Ld,{})]})}var Ud=fr[" useId ".trim().toString()]||(()=>{}),Kd=0;function Hd(e){const[t,s]=hr.useState(Ud());return bo(()=>{s(e=>e??String(Kd++))},[e]),t?`radix-${t}`:""}const Zd=["top","right","bottom","left"],Qd=Math.min,Gd=Math.max,Yd=Math.round,Jd=Math.floor,Xd=e=>({x:e,y:e}),eu={left:"right",right:"left",bottom:"top",top:"bottom"},tu={start:"end",end:"start"};function su(e,t,s){return Gd(e,Qd(t,s))}function nu(e,t){return"function"==typeof e?e(t):e}function ru(e){return e.split("-")[0]}function au(e){return e.split("-")[1]}function iu(e){return"x"===e?"y":"x"}function ou(e){return"y"===e?"height":"width"}const lu=new Set(["top","bottom"]);function cu(e){return lu.has(ru(e))?"y":"x"}function du(e){return iu(cu(e))}function uu(e){return e.replace(/start|end/g,e=>tu[e])}const mu=["left","right"],pu=["right","left"],hu=["top","bottom"],xu=["bottom","top"];function fu(e,t,s,n){const r=au(e);let a=function(e,t,s){switch(e){case"top":case"bottom":return s?t?pu:mu:t?mu:pu;case"left":case"right":return t?hu:xu;default:return[]}}(ru(e),"start"===s,n);return r&&(a=a.map(e=>e+"-"+r),t&&(a=a.concat(a.map(uu)))),a}function vu(e){return e.replace(/left|right|bottom|top/g,e=>eu[e])}function gu(e){return"number"!=typeof e?function(e){return{top:0,right:0,bottom:0,left:0,...e}}(e):{top:e,right:e,bottom:e,left:e}}function yu(e){const{x:t,y:s,width:n,height:r}=e;return{width:n,height:r,top:s,left:t,right:t+n,bottom:s+r,x:t,y:s}}function bu(e,t,s){let{reference:n,floating:r}=e;const a=cu(t),i=du(t),o=ou(i),l=ru(t),c="y"===a,d=n.x+n.width/2-r.width/2,u=n.y+n.height/2-r.height/2,m=n[o]/2-r[o]/2;let p;switch(l){case"top":p={x:d,y:n.y-r.height};break;case"bottom":p={x:d,y:n.y+n.height};break;case"right":p={x:n.x+n.width,y:u};break;case"left":p={x:n.x-r.width,y:u};break;default:p={x:n.x,y:n.y}}switch(au(t)){case"start":p[i]-=m*(s&&c?-1:1);break;case"end":p[i]+=m*(s&&c?-1:1)}return p}async function ju(e,t){var s;void 0===t&&(t={});const{x:n,y:r,platform:a,rects:i,elements:o,strategy:l}=e,{boundary:c="clippingAncestors",rootBoundary:d="viewport",elementContext:u="floating",altBoundary:m=!1,padding:p=0}=nu(t,e),h=gu(p),x=o[m?"floating"===u?"reference":"floating":u],f=yu(await a.getClippingRect({element:null==(s=await(null==a.isElement?void 0:a.isElement(x)))||s?x:x.contextElement||await(null==a.getDocumentElement?void 0:a.getDocumentElement(o.floating)),boundary:c,rootBoundary:d,strategy:l})),v="floating"===u?{x:n,y:r,width:i.floating.width,height:i.floating.height}:i.reference,g=await(null==a.getOffsetParent?void 0:a.getOffsetParent(o.floating)),y=await(null==a.isElement?void 0:a.isElement(g))&&await(null==a.getScale?void 0:a.getScale(g))||{x:1,y:1},b=yu(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:o,rect:v,offsetParent:g,strategy:l}):v);return{top:(f.top-b.top+h.top)/y.y,bottom:(b.bottom-f.bottom+h.bottom)/y.y,left:(f.left-b.left+h.left)/y.x,right:(b.right-f.right+h.right)/y.x}}function Nu(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function wu(e){return Zd.some(t=>e[t]>=0)}const ku=new Set(["left","top"]);function Cu(){return"undefined"!=typeof window}function Su(e){return Eu(e)?(e.nodeName||"").toLowerCase():"#document"}function _u(e){var t;return(null==e||null==(t=e.ownerDocument)?void 0:t.defaultView)||window}function Pu(e){var t;return null==(t=(Eu(e)?e.ownerDocument:e.document)||window.document)?void 0:t.documentElement}function Eu(e){return!!Cu()&&(e instanceof Node||e instanceof _u(e).Node)}function Du(e){return!!Cu()&&(e instanceof Element||e instanceof _u(e).Element)}function Tu(e){return!!Cu()&&(e instanceof HTMLElement||e instanceof _u(e).HTMLElement)}function Au(e){return!(!Cu()||"undefined"==typeof ShadowRoot)&&(e instanceof ShadowRoot||e instanceof _u(e).ShadowRoot)}const Ou=new Set(["inline","contents"]);function Ru(e){const{overflow:t,overflowX:s,overflowY:n,display:r}=Ku(e);return/auto|scroll|overlay|hidden|clip/.test(t+n+s)&&!Ou.has(r)}const Fu=new Set(["table","td","th"]);function Iu(e){return Fu.has(Su(e))}const Mu=[":popover-open",":modal"];function Lu(e){return Mu.some(t=>{try{return e.matches(t)}catch(s){return!1}})}const qu=["transform","translate","scale","rotate","perspective"],zu=["transform","translate","scale","rotate","perspective","filter"],Vu=["paint","layout","strict","content"];function Bu(e){const t=$u(),s=Du(e)?Ku(e):e;return qu.some(e=>!!s[e]&&"none"!==s[e])||!!s.containerType&&"normal"!==s.containerType||!t&&!!s.backdropFilter&&"none"!==s.backdropFilter||!t&&!!s.filter&&"none"!==s.filter||zu.some(e=>(s.willChange||"").includes(e))||Vu.some(e=>(s.contain||"").includes(e))}function $u(){return!("undefined"==typeof CSS||!CSS.supports)&&CSS.supports("-webkit-backdrop-filter","none")}const Wu=new Set(["html","body","#document"]);function Uu(e){return Wu.has(Su(e))}function Ku(e){return _u(e).getComputedStyle(e)}function Hu(e){return Du(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Zu(e){if("html"===Su(e))return e;const t=e.assignedSlot||e.parentNode||Au(e)&&e.host||Pu(e);return Au(t)?t.host:t}function Qu(e){const t=Zu(e);return Uu(t)?e.ownerDocument?e.ownerDocument.body:e.body:Tu(t)&&Ru(t)?t:Qu(t)}function Gu(e,t,s){var n;void 0===t&&(t=[]),void 0===s&&(s=!0);const r=Qu(e),a=r===(null==(n=e.ownerDocument)?void 0:n.body),i=_u(r);if(a){const e=Yu(i);return t.concat(i,i.visualViewport||[],Ru(r)?r:[],e&&s?Gu(e):[])}return t.concat(r,Gu(r,[],s))}function Yu(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function Ju(e){const t=Ku(e);let s=parseFloat(t.width)||0,n=parseFloat(t.height)||0;const r=Tu(e),a=r?e.offsetWidth:s,i=r?e.offsetHeight:n,o=Yd(s)!==a||Yd(n)!==i;return o&&(s=a,n=i),{width:s,height:n,$:o}}function Xu(e){return Du(e)?e:e.contextElement}function em(e){const t=Xu(e);if(!Tu(t))return Xd(1);const s=t.getBoundingClientRect(),{width:n,height:r,$:a}=Ju(t);let i=(a?Yd(s.width):s.width)/n,o=(a?Yd(s.height):s.height)/r;return i&&Number.isFinite(i)||(i=1),o&&Number.isFinite(o)||(o=1),{x:i,y:o}}const tm=Xd(0);function sm(e){const t=_u(e);return $u()&&t.visualViewport?{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}:tm}function nm(e,t,s,n){void 0===t&&(t=!1),void 0===s&&(s=!1);const r=e.getBoundingClientRect(),a=Xu(e);let i=Xd(1);t&&(n?Du(n)&&(i=em(n)):i=em(e));const o=function(e,t,s){return void 0===t&&(t=!1),!(!s||t&&s!==_u(e))&&t}(a,s,n)?sm(a):Xd(0);let l=(r.left+o.x)/i.x,c=(r.top+o.y)/i.y,d=r.width/i.x,u=r.height/i.y;if(a){const e=_u(a),t=n&&Du(n)?_u(n):n;let s=e,r=Yu(s);for(;r&&n&&t!==s;){const e=em(r),t=r.getBoundingClientRect(),n=Ku(r),a=t.left+(r.clientLeft+parseFloat(n.paddingLeft))*e.x,i=t.top+(r.clientTop+parseFloat(n.paddingTop))*e.y;l*=e.x,c*=e.y,d*=e.x,u*=e.y,l+=a,c+=i,s=_u(r),r=Yu(s)}}return yu({width:d,height:u,x:l,y:c})}function rm(e,t){const s=Hu(e).scrollLeft;return t?t.left+s:nm(Pu(e)).left+s}function am(e,t,s){void 0===s&&(s=!1);const n=e.getBoundingClientRect();return{x:n.left+t.scrollLeft-(s?0:rm(e,n)),y:n.top+t.scrollTop}}const im=new Set(["absolute","fixed"]);function om(e,t,s){let n;if("viewport"===t)n=function(e,t){const s=_u(e),n=Pu(e),r=s.visualViewport;let a=n.clientWidth,i=n.clientHeight,o=0,l=0;if(r){a=r.width,i=r.height;const e=$u();(!e||e&&"fixed"===t)&&(o=r.offsetLeft,l=r.offsetTop)}return{width:a,height:i,x:o,y:l}}(e,s);else if("document"===t)n=function(e){const t=Pu(e),s=Hu(e),n=e.ownerDocument.body,r=Gd(t.scrollWidth,t.clientWidth,n.scrollWidth,n.clientWidth),a=Gd(t.scrollHeight,t.clientHeight,n.scrollHeight,n.clientHeight);let i=-s.scrollLeft+rm(e);const o=-s.scrollTop;return"rtl"===Ku(n).direction&&(i+=Gd(t.clientWidth,n.clientWidth)-r),{width:r,height:a,x:i,y:o}}(Pu(e));else if(Du(t))n=function(e,t){const s=nm(e,!0,"fixed"===t),n=s.top+e.clientTop,r=s.left+e.clientLeft,a=Tu(e)?em(e):Xd(1);return{width:e.clientWidth*a.x,height:e.clientHeight*a.y,x:r*a.x,y:n*a.y}}(t,s);else{const s=sm(e);n={x:t.x-s.x,y:t.y-s.y,width:t.width,height:t.height}}return yu(n)}function lm(e,t){const s=Zu(e);return!(s===t||!Du(s)||Uu(s))&&("fixed"===Ku(s).position||lm(s,t))}function cm(e,t,s){const n=Tu(t),r=Pu(t),a="fixed"===s,i=nm(e,!0,a,t);let o={scrollLeft:0,scrollTop:0};const l=Xd(0);function c(){l.x=rm(r)}if(n||!n&&!a)if(("body"!==Su(t)||Ru(r))&&(o=Hu(t)),n){const e=nm(t,!0,a,t);l.x=e.x+t.clientLeft,l.y=e.y+t.clientTop}else r&&c();a&&!n&&r&&c();const d=!r||n||a?Xd(0):am(r,o);return{x:i.left+o.scrollLeft-l.x-d.x,y:i.top+o.scrollTop-l.y-d.y,width:i.width,height:i.height}}function dm(e){return"static"===Ku(e).position}function um(e,t){if(!Tu(e)||"fixed"===Ku(e).position)return null;if(t)return t(e);let s=e.offsetParent;return Pu(e)===s&&(s=s.ownerDocument.body),s}function mm(e,t){const s=_u(e);if(Lu(e))return s;if(!Tu(e)){let t=Zu(e);for(;t&&!Uu(t);){if(Du(t)&&!dm(t))return t;t=Zu(t)}return s}let n=um(e,t);for(;n&&Iu(n)&&dm(n);)n=um(n,t);return n&&Uu(n)&&dm(n)&&!Bu(n)?s:n||function(e){let t=Zu(e);for(;Tu(t)&&!Uu(t);){if(Bu(t))return t;if(Lu(t))return null;t=Zu(t)}return null}(e)||s}const pm={convertOffsetParentRelativeRectToViewportRelativeRect:function(e){let{elements:t,rect:s,offsetParent:n,strategy:r}=e;const a="fixed"===r,i=Pu(n),o=!!t&&Lu(t.floating);if(n===i||o&&a)return s;let l={scrollLeft:0,scrollTop:0},c=Xd(1);const d=Xd(0),u=Tu(n);if((u||!u&&!a)&&(("body"!==Su(n)||Ru(i))&&(l=Hu(n)),Tu(n))){const e=nm(n);c=em(n),d.x=e.x+n.clientLeft,d.y=e.y+n.clientTop}const m=!i||u||a?Xd(0):am(i,l,!0);return{width:s.width*c.x,height:s.height*c.y,x:s.x*c.x-l.scrollLeft*c.x+d.x+m.x,y:s.y*c.y-l.scrollTop*c.y+d.y+m.y}},getDocumentElement:Pu,getClippingRect:function(e){let{element:t,boundary:s,rootBoundary:n,strategy:r}=e;const a=[..."clippingAncestors"===s?Lu(t)?[]:function(e,t){const s=t.get(e);if(s)return s;let n=Gu(e,[],!1).filter(e=>Du(e)&&"body"!==Su(e)),r=null;const a="fixed"===Ku(e).position;let i=a?Zu(e):e;for(;Du(i)&&!Uu(i);){const t=Ku(i),s=Bu(i);s||"fixed"!==t.position||(r=null),(a?!s&&!r:!s&&"static"===t.position&&r&&im.has(r.position)||Ru(i)&&!s&&lm(e,i))?n=n.filter(e=>e!==i):r=t,i=Zu(i)}return t.set(e,n),n}(t,this._c):[].concat(s),n],i=a[0],o=a.reduce((e,s)=>{const n=om(t,s,r);return e.top=Gd(n.top,e.top),e.right=Qd(n.right,e.right),e.bottom=Qd(n.bottom,e.bottom),e.left=Gd(n.left,e.left),e},om(t,i,r));return{width:o.right-o.left,height:o.bottom-o.top,x:o.left,y:o.top}},getOffsetParent:mm,getElementRects:async function(e){const t=this.getOffsetParent||mm,s=this.getDimensions,n=await s(e.floating);return{reference:cm(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}},getClientRects:function(e){return Array.from(e.getClientRects())},getDimensions:function(e){const{width:t,height:s}=Ju(e);return{width:t,height:s}},getScale:em,isElement:Du,isRTL:function(e){return"rtl"===Ku(e).direction}};function hm(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function xm(e,t,s,n){void 0===n&&(n={});const{ancestorScroll:r=!0,ancestorResize:a=!0,elementResize:i="function"==typeof ResizeObserver,layoutShift:o="function"==typeof IntersectionObserver,animationFrame:l=!1}=n,c=Xu(e),d=r||a?[...c?Gu(c):[],...Gu(t)]:[];d.forEach(e=>{r&&e.addEventListener("scroll",s,{passive:!0}),a&&e.addEventListener("resize",s)});const u=c&&o?function(e,t){let s,n=null;const r=Pu(e);function a(){var e;clearTimeout(s),null==(e=n)||e.disconnect(),n=null}return function i(o,l){void 0===o&&(o=!1),void 0===l&&(l=1),a();const c=e.getBoundingClientRect(),{left:d,top:u,width:m,height:p}=c;if(o||t(),!m||!p)return;const h={rootMargin:-Jd(u)+"px "+-Jd(r.clientWidth-(d+m))+"px "+-Jd(r.clientHeight-(u+p))+"px "+-Jd(d)+"px",threshold:Gd(0,Qd(1,l))||1};let x=!0;function f(t){const n=t[0].intersectionRatio;if(n!==l){if(!x)return i();n?i(!1,n):s=setTimeout(()=>{i(!1,1e-7)},1e3)}1!==n||hm(c,e.getBoundingClientRect())||i(),x=!1}try{n=new IntersectionObserver(f,{...h,root:r.ownerDocument})}catch(v){n=new IntersectionObserver(f,h)}n.observe(e)}(!0),a}(c,s):null;let m,p=-1,h=null;i&&(h=new ResizeObserver(e=>{let[n]=e;n&&n.target===c&&h&&(h.unobserve(t),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var e;null==(e=h)||e.observe(t)})),s()}),c&&!l&&h.observe(c),h.observe(t));let x=l?nm(e):null;return l&&function t(){const n=nm(e);x&&!hm(x,n)&&s();x=n,m=requestAnimationFrame(t)}(),s(),()=>{var e;d.forEach(e=>{r&&e.removeEventListener("scroll",s),a&&e.removeEventListener("resize",s)}),null==u||u(),null==(e=h)||e.disconnect(),h=null,l&&cancelAnimationFrame(m)}}const fm=function(e){return void 0===e&&(e=0),{name:"offset",options:e,async fn(t){var s,n;const{x:r,y:a,placement:i,middlewareData:o}=t,l=await async function(e,t){const{placement:s,platform:n,elements:r}=e,a=await(null==n.isRTL?void 0:n.isRTL(r.floating)),i=ru(s),o=au(s),l="y"===cu(s),c=ku.has(i)?-1:1,d=a&&l?-1:1,u=nu(t,e);let{mainAxis:m,crossAxis:p,alignmentAxis:h}="number"==typeof u?{mainAxis:u,crossAxis:0,alignmentAxis:null}:{mainAxis:u.mainAxis||0,crossAxis:u.crossAxis||0,alignmentAxis:u.alignmentAxis};return o&&"number"==typeof h&&(p="end"===o?-1*h:h),l?{x:p*d,y:m*c}:{x:m*c,y:p*d}}(t,e);return i===(null==(s=o.offset)?void 0:s.placement)&&null!=(n=o.arrow)&&n.alignmentOffset?{}:{x:r+l.x,y:a+l.y,data:{...l,placement:i}}}}},vm=function(e){return void 0===e&&(e={}),{name:"shift",options:e,async fn(t){const{x:s,y:n,placement:r}=t,{mainAxis:a=!0,crossAxis:i=!1,limiter:o={fn:e=>{let{x:t,y:s}=e;return{x:t,y:s}}},...l}=nu(e,t),c={x:s,y:n},d=await ju(t,l),u=cu(ru(r)),m=iu(u);let p=c[m],h=c[u];if(a){const e="y"===m?"bottom":"right";p=su(p+d["y"===m?"top":"left"],p,p-d[e])}if(i){const e="y"===u?"bottom":"right";h=su(h+d["y"===u?"top":"left"],h,h-d[e])}const x=o.fn({...t,[m]:p,[u]:h});return{...x,data:{x:x.x-s,y:x.y-n,enabled:{[m]:a,[u]:i}}}}}},gm=function(e){return void 0===e&&(e={}),{name:"flip",options:e,async fn(t){var s,n;const{placement:r,middlewareData:a,rects:i,initialPlacement:o,platform:l,elements:c}=t,{mainAxis:d=!0,crossAxis:u=!0,fallbackPlacements:m,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:h="none",flipAlignment:x=!0,...f}=nu(e,t);if(null!=(s=a.arrow)&&s.alignmentOffset)return{};const v=ru(r),g=cu(o),y=ru(o)===o,b=await(null==l.isRTL?void 0:l.isRTL(c.floating)),j=m||(y||!x?[vu(o)]:function(e){const t=vu(e);return[uu(e),t,uu(t)]}(o)),N="none"!==h;!m&&N&&j.push(...fu(o,x,h,b));const w=[o,...j],k=await ju(t,f),C=[];let S=(null==(n=a.flip)?void 0:n.overflows)||[];if(d&&C.push(k[v]),u){const e=function(e,t,s){void 0===s&&(s=!1);const n=au(e),r=du(e),a=ou(r);let i="x"===r?n===(s?"end":"start")?"right":"left":"start"===n?"bottom":"top";return t.reference[a]>t.floating[a]&&(i=vu(i)),[i,vu(i)]}(r,i,b);C.push(k[e[0]],k[e[1]])}if(S=[...S,{placement:r,overflows:C}],!C.every(e=>e<=0)){var _,P;const e=((null==(_=a.flip)?void 0:_.index)||0)+1,t=w[e];if(t){if(!("alignment"===u&&g!==cu(t))||S.every(e=>e.overflows[0]>0&&cu(e.placement)===g))return{data:{index:e,overflows:S},reset:{placement:t}}}let s=null==(P=S.filter(e=>e.overflows[0]<=0).sort((e,t)=>e.overflows[1]-t.overflows[1])[0])?void 0:P.placement;if(!s)switch(p){case"bestFit":{var E;const e=null==(E=S.filter(e=>{if(N){const t=cu(e.placement);return t===g||"y"===t}return!0}).map(e=>[e.placement,e.overflows.filter(e=>e>0).reduce((e,t)=>e+t,0)]).sort((e,t)=>e[1]-t[1])[0])?void 0:E[0];e&&(s=e);break}case"initialPlacement":s=o}if(r!==s)return{reset:{placement:s}}}return{}}}},ym=function(e){return void 0===e&&(e={}),{name:"size",options:e,async fn(t){var s,n;const{placement:r,rects:a,platform:i,elements:o}=t,{apply:l=()=>{},...c}=nu(e,t),d=await ju(t,c),u=ru(r),m=au(r),p="y"===cu(r),{width:h,height:x}=a.floating;let f,v;"top"===u||"bottom"===u?(f=u,v=m===(await(null==i.isRTL?void 0:i.isRTL(o.floating))?"start":"end")?"left":"right"):(v=u,f="end"===m?"top":"bottom");const g=x-d.top-d.bottom,y=h-d.left-d.right,b=Qd(x-d[f],g),j=Qd(h-d[v],y),N=!t.middlewareData.shift;let w=b,k=j;if(null!=(s=t.middlewareData.shift)&&s.enabled.x&&(k=y),null!=(n=t.middlewareData.shift)&&n.enabled.y&&(w=g),N&&!m){const e=Gd(d.left,0),t=Gd(d.right,0),s=Gd(d.top,0),n=Gd(d.bottom,0);p?k=h-2*(0!==e||0!==t?e+t:Gd(d.left,d.right)):w=x-2*(0!==s||0!==n?s+n:Gd(d.top,d.bottom))}await l({...t,availableWidth:k,availableHeight:w});const C=await i.getDimensions(o.floating);return h!==C.width||x!==C.height?{reset:{rects:!0}}:{}}}},bm=function(e){return void 0===e&&(e={}),{name:"hide",options:e,async fn(t){const{rects:s}=t,{strategy:n="referenceHidden",...r}=nu(e,t);switch(n){case"referenceHidden":{const e=Nu(await ju(t,{...r,elementContext:"reference"}),s.reference);return{data:{referenceHiddenOffsets:e,referenceHidden:wu(e)}}}case"escaped":{const e=Nu(await ju(t,{...r,altBoundary:!0}),s.floating);return{data:{escapedOffsets:e,escaped:wu(e)}}}default:return{}}}}},jm=e=>({name:"arrow",options:e,async fn(t){const{x:s,y:n,placement:r,rects:a,platform:i,elements:o,middlewareData:l}=t,{element:c,padding:d=0}=nu(e,t)||{};if(null==c)return{};const u=gu(d),m={x:s,y:n},p=du(r),h=ou(p),x=await i.getDimensions(c),f="y"===p,v=f?"top":"left",g=f?"bottom":"right",y=f?"clientHeight":"clientWidth",b=a.reference[h]+a.reference[p]-m[p]-a.floating[h],j=m[p]-a.reference[p],N=await(null==i.getOffsetParent?void 0:i.getOffsetParent(c));let w=N?N[y]:0;w&&await(null==i.isElement?void 0:i.isElement(N))||(w=o.floating[y]||a.floating[h]);const k=b/2-j/2,C=w/2-x[h]/2-1,S=Qd(u[v],C),_=Qd(u[g],C),P=S,E=w-x[h]-_,D=w/2-x[h]/2+k,T=su(P,D,E),A=!l.arrow&&null!=au(r)&&D!==T&&a.reference[h]/2-(D<P?S:_)-x[h]/2<0,O=A?D<P?D-P:D-E:0;return{[p]:m[p]+O,data:{[p]:T,centerOffset:D-T-O,...A&&{alignmentOffset:O}},reset:A}}}),Nm=function(e){return void 0===e&&(e={}),{options:e,fn(t){const{x:s,y:n,placement:r,rects:a,middlewareData:i}=t,{offset:o=0,mainAxis:l=!0,crossAxis:c=!0}=nu(e,t),d={x:s,y:n},u=cu(r),m=iu(u);let p=d[m],h=d[u];const x=nu(o,t),f="number"==typeof x?{mainAxis:x,crossAxis:0}:{mainAxis:0,crossAxis:0,...x};if(l){const e="y"===m?"height":"width",t=a.reference[m]-a.floating[e]+f.mainAxis,s=a.reference[m]+a.reference[e]-f.mainAxis;p<t?p=t:p>s&&(p=s)}if(c){var v,g;const e="y"===m?"width":"height",t=ku.has(ru(r)),s=a.reference[u]-a.floating[e]+(t&&(null==(v=i.offset)?void 0:v[u])||0)+(t?0:f.crossAxis),n=a.reference[u]+a.reference[e]+(t?0:(null==(g=i.offset)?void 0:g[u])||0)-(t?f.crossAxis:0);h<s?h=s:h>n&&(h=n)}return{[m]:p,[u]:h}}}},wm=(e,t,s)=>{const n=new Map,r={platform:pm,...s},a={...r.platform,_c:n};return(async(e,t,s)=>{const{placement:n="bottom",strategy:r="absolute",middleware:a=[],platform:i}=s,o=a.filter(Boolean),l=await(null==i.isRTL?void 0:i.isRTL(t));let c=await i.getElementRects({reference:e,floating:t,strategy:r}),{x:d,y:u}=bu(c,n,l),m=n,p={},h=0;for(let x=0;x<o.length;x++){const{name:s,fn:a}=o[x],{x:f,y:v,data:g,reset:y}=await a({x:d,y:u,initialPlacement:n,placement:m,strategy:r,middlewareData:p,rects:c,platform:i,elements:{reference:e,floating:t}});d=null!=f?f:d,u=null!=v?v:u,p={...p,[s]:{...p[s],...g}},y&&h<=50&&(h++,"object"==typeof y&&(y.placement&&(m=y.placement),y.rects&&(c=!0===y.rects?await i.getElementRects({reference:e,floating:t,strategy:r}):y.rects),({x:d,y:u}=bu(c,m,l))),x=-1)}return{x:d,y:u,placement:m,strategy:r,middlewareData:p}})(e,t,{...r,platform:a})};var km="undefined"!=typeof document?hr.useLayoutEffect:function(){};function Cm(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if("function"==typeof e&&e.toString()===t.toString())return!0;let s,n,r;if(e&&t&&"object"==typeof e){if(Array.isArray(e)){if(s=e.length,s!==t.length)return!1;for(n=s;0!==n--;)if(!Cm(e[n],t[n]))return!1;return!0}if(r=Object.keys(e),s=r.length,s!==Object.keys(t).length)return!1;for(n=s;0!==n--;)if(!{}.hasOwnProperty.call(t,r[n]))return!1;for(n=s;0!==n--;){const s=r[n];if(("_owner"!==s||!e.$$typeof)&&!Cm(e[s],t[s]))return!1}return!0}return e!=e&&t!=t}function Sm(e){if("undefined"==typeof window)return 1;return(e.ownerDocument.defaultView||window).devicePixelRatio||1}function _m(e,t){const s=Sm(e);return Math.round(t*s)/s}function Pm(e){const t=hr.useRef(e);return km(()=>{t.current=e}),t}const Em=e=>({name:"arrow",options:e,fn(t){const{element:s,padding:n}="function"==typeof e?e(t):e;return s&&(r=s,{}.hasOwnProperty.call(r,"current"))?null!=s.current?jm({element:s.current,padding:n}).fn(t):{}:s?jm({element:s,padding:n}).fn(t):{};var r}}),Dm=(e,t)=>({...fm(e),options:[e,t]}),Tm=(e,t)=>({...vm(e),options:[e,t]}),Am=(e,t)=>({...Nm(e),options:[e,t]}),Om=(e,t)=>({...gm(e),options:[e,t]}),Rm=(e,t)=>({...ym(e),options:[e,t]}),Fm=(e,t)=>({...bm(e),options:[e,t]}),Im=(e,t)=>({...Em(e),options:[e,t]});var Mm=hr.forwardRef((e,t)=>{const{children:s,width:n=10,height:r=5,...a}=e;return Fr.jsx(ao.svg,{...a,ref:t,width:n,height:r,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?s:Fr.jsx("polygon",{points:"0,0 30,0 15,10"})})});Mm.displayName="Arrow";var Lm=Mm;function qm(e){const[t,s]=hr.useState(void 0);return bo(()=>{if(e){s({width:e.offsetWidth,height:e.offsetHeight});const t=new ResizeObserver(t=>{if(!Array.isArray(t))return;if(!t.length)return;const n=t[0];let r,a;if("borderBoxSize"in n){const e=n.borderBoxSize,t=Array.isArray(e)?e[0]:e;r=t.inlineSize,a=t.blockSize}else r=e.offsetWidth,a=e.offsetHeight;s({width:r,height:a})});return t.observe(e,{box:"border-box"}),()=>t.unobserve(e)}s(void 0)},[e]),t}var zm="Popper",[Vm,Bm]=Gi(zm),[$m,Wm]=Vm(zm),Um=e=>{const{__scopePopper:t,children:s}=e,[n,r]=hr.useState(null);return Fr.jsx($m,{scope:t,anchor:n,onAnchorChange:r,children:s})};Um.displayName=zm;var Km="PopperAnchor",Hm=hr.forwardRef((e,t)=>{const{__scopePopper:s,virtualRef:n,...r}=e,a=Wm(Km,s),i=hr.useRef(null),o=Qi(t,i);return hr.useEffect(()=>{a.onAnchorChange((null==n?void 0:n.current)||i.current)}),n?null:Fr.jsx(ao.div,{...r,ref:o})});Hm.displayName=Km;var Zm="PopperContent",[Qm,Gm]=Vm(Zm),Ym=hr.forwardRef((e,t)=>{var s,n,r,a,i,o;const{__scopePopper:l,side:c="bottom",sideOffset:d=0,align:u="center",alignOffset:m=0,arrowPadding:p=0,avoidCollisions:h=!0,collisionBoundary:x=[],collisionPadding:f=0,sticky:v="partial",hideWhenDetached:g=!1,updatePositionStrategy:y="optimized",onPlaced:b,...j}=e,N=Wm(Zm,l),[w,k]=hr.useState(null),C=Qi(t,e=>k(e)),[S,_]=hr.useState(null),P=qm(S),E=(null==P?void 0:P.width)??0,D=(null==P?void 0:P.height)??0,T=c+("center"!==u?"-"+u:""),A="number"==typeof f?f:{top:0,right:0,bottom:0,left:0,...f},O=Array.isArray(x)?x:[x],R=O.length>0,F={padding:A,boundary:O.filter(tp),altBoundary:R},{refs:I,floatingStyles:M,placement:L,isPositioned:q,middlewareData:z}=function(e){void 0===e&&(e={});const{placement:t="bottom",strategy:s="absolute",middleware:n=[],platform:r,elements:{reference:a,floating:i}={},transform:o=!0,whileElementsMounted:l,open:c}=e,[d,u]=hr.useState({x:0,y:0,strategy:s,placement:t,middlewareData:{},isPositioned:!1}),[m,p]=hr.useState(n);Cm(m,n)||p(n);const[h,x]=hr.useState(null),[f,v]=hr.useState(null),g=hr.useCallback(e=>{e!==N.current&&(N.current=e,x(e))},[]),y=hr.useCallback(e=>{e!==w.current&&(w.current=e,v(e))},[]),b=a||h,j=i||f,N=hr.useRef(null),w=hr.useRef(null),k=hr.useRef(d),C=null!=l,S=Pm(l),_=Pm(r),P=Pm(c),E=hr.useCallback(()=>{if(!N.current||!w.current)return;const e={placement:t,strategy:s,middleware:m};_.current&&(e.platform=_.current),wm(N.current,w.current,e).then(e=>{const t={...e,isPositioned:!1!==P.current};D.current&&!Cm(k.current,t)&&(k.current=t,xr.flushSync(()=>{u(t)}))})},[m,t,s,_,P]);km(()=>{!1===c&&k.current.isPositioned&&(k.current.isPositioned=!1,u(e=>({...e,isPositioned:!1})))},[c]);const D=hr.useRef(!1);km(()=>(D.current=!0,()=>{D.current=!1}),[]),km(()=>{if(b&&(N.current=b),j&&(w.current=j),b&&j){if(S.current)return S.current(b,j,E);E()}},[b,j,E,S,C]);const T=hr.useMemo(()=>({reference:N,floating:w,setReference:g,setFloating:y}),[g,y]),A=hr.useMemo(()=>({reference:b,floating:j}),[b,j]),O=hr.useMemo(()=>{const e={position:s,left:0,top:0};if(!A.floating)return e;const t=_m(A.floating,d.x),n=_m(A.floating,d.y);return o?{...e,transform:"translate("+t+"px, "+n+"px)",...Sm(A.floating)>=1.5&&{willChange:"transform"}}:{position:s,left:t,top:n}},[s,o,A.floating,d.x,d.y]);return hr.useMemo(()=>({...d,update:E,refs:T,elements:A,floatingStyles:O}),[d,E,T,A,O])}({strategy:"fixed",placement:T,whileElementsMounted:(...e)=>xm(...e,{animationFrame:"always"===y}),elements:{reference:N.anchor},middleware:[Dm({mainAxis:d+D,alignmentAxis:m}),h&&Tm({mainAxis:!0,crossAxis:!1,limiter:"partial"===v?Am():void 0,...F}),h&&Om({...F}),Rm({...F,apply:({elements:e,rects:t,availableWidth:s,availableHeight:n})=>{const{width:r,height:a}=t.reference,i=e.floating.style;i.setProperty("--radix-popper-available-width",`${s}px`),i.setProperty("--radix-popper-available-height",`${n}px`),i.setProperty("--radix-popper-anchor-width",`${r}px`),i.setProperty("--radix-popper-anchor-height",`${a}px`)}}),S&&Im({element:S,padding:p}),sp({arrowWidth:E,arrowHeight:D}),g&&Fm({strategy:"referenceHidden",...F})]}),[V,B]=np(L),$=oo(b);bo(()=>{q&&(null==$||$())},[q,$]);const W=null==(s=z.arrow)?void 0:s.x,U=null==(n=z.arrow)?void 0:n.y,K=0!==(null==(r=z.arrow)?void 0:r.centerOffset),[H,Z]=hr.useState();return bo(()=>{w&&Z(window.getComputedStyle(w).zIndex)},[w]),Fr.jsx("div",{ref:I.setFloating,"data-radix-popper-content-wrapper":"",style:{...M,transform:q?M.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:H,"--radix-popper-transform-origin":[null==(a=z.transformOrigin)?void 0:a.x,null==(i=z.transformOrigin)?void 0:i.y].join(" "),...(null==(o=z.hide)?void 0:o.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:Fr.jsx(Qm,{scope:l,placedSide:V,onArrowChange:_,arrowX:W,arrowY:U,shouldHideArrow:K,children:Fr.jsx(ao.div,{"data-side":V,"data-align":B,...j,ref:C,style:{...j.style,animation:q?void 0:"none"}})})})});Ym.displayName=Zm;var Jm="PopperArrow",Xm={top:"bottom",right:"left",bottom:"top",left:"right"},ep=hr.forwardRef(function(e,t){const{__scopePopper:s,...n}=e,r=Gm(Jm,s),a=Xm[r.placedSide];return Fr.jsx("span",{ref:r.onArrowChange,style:{position:"absolute",left:r.arrowX,top:r.arrowY,[a]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[r.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[r.placedSide],visibility:r.shouldHideArrow?"hidden":void 0},children:Fr.jsx(Lm,{...n,ref:t,style:{...n.style,display:"block"}})})});function tp(e){return null!==e}ep.displayName=Jm;var sp=e=>({name:"transformOrigin",options:e,fn(t){var s,n,r;const{placement:a,rects:i,middlewareData:o}=t,l=0!==(null==(s=o.arrow)?void 0:s.centerOffset),c=l?0:e.arrowWidth,d=l?0:e.arrowHeight,[u,m]=np(a),p={start:"0%",center:"50%",end:"100%"}[m],h=((null==(n=o.arrow)?void 0:n.x)??0)+c/2,x=((null==(r=o.arrow)?void 0:r.y)??0)+d/2;let f="",v="";return"bottom"===u?(f=l?p:`${h}px`,v=-d+"px"):"top"===u?(f=l?p:`${h}px`,v=`${i.floating.height+d}px`):"right"===u?(f=-d+"px",v=l?p:`${x}px`):"left"===u&&(f=`${i.floating.width+d}px`,v=l?p:`${x}px`),{data:{x:f,y:v}}}});function np(e){const[t,s="center"]=e.split("-");return[t,s]}var rp=Um,ap=Hm,ip=Ym,op=ep,[lp,cp]=Gi("Tooltip",[Bm]),dp=Bm(),up="TooltipProvider",mp=700,pp="tooltip.open",[hp,xp]=lp(up),fp=e=>{const{__scopeTooltip:t,delayDuration:s=mp,skipDelayDuration:n=300,disableHoverableContent:r=!1,children:a}=e,i=hr.useRef(!0),o=hr.useRef(!1),l=hr.useRef(0);return hr.useEffect(()=>{const e=l.current;return()=>window.clearTimeout(e)},[]),Fr.jsx(hp,{scope:t,isOpenDelayedRef:i,delayDuration:s,onOpen:hr.useCallback(()=>{window.clearTimeout(l.current),i.current=!1},[]),onClose:hr.useCallback(()=>{window.clearTimeout(l.current),l.current=window.setTimeout(()=>i.current=!0,n)},[n]),isPointerInTransitRef:o,onPointerInTransitChange:hr.useCallback(e=>{o.current=e},[]),disableHoverableContent:r,children:a})};fp.displayName=up;var vp="Tooltip",[gp,yp]=lp(vp),bp="TooltipTrigger";hr.forwardRef((e,t)=>{const{__scopeTooltip:s,...n}=e,r=yp(bp,s),a=xp(bp,s),i=dp(s),o=Qi(t,hr.useRef(null),r.onTriggerChange),l=hr.useRef(!1),c=hr.useRef(!1),d=hr.useCallback(()=>l.current=!1,[]);return hr.useEffect(()=>()=>document.removeEventListener("pointerup",d),[d]),Fr.jsx(ap,{asChild:!0,...i,children:Fr.jsx(ao.button,{"aria-describedby":r.open?r.contentId:void 0,"data-state":r.stateAttribute,...n,ref:o,onPointerMove:Ki(e.onPointerMove,e=>{"touch"!==e.pointerType&&(c.current||a.isPointerInTransitRef.current||(r.onTriggerEnter(),c.current=!0))}),onPointerLeave:Ki(e.onPointerLeave,()=>{r.onTriggerLeave(),c.current=!1}),onPointerDown:Ki(e.onPointerDown,()=>{r.open&&r.onClose(),l.current=!0,document.addEventListener("pointerup",d,{once:!0})}),onFocus:Ki(e.onFocus,()=>{l.current||r.onOpen()}),onBlur:Ki(e.onBlur,r.onClose),onClick:Ki(e.onClick,r.onClose)})})}).displayName=bp;var[jp,Np]=lp("TooltipPortal",{forceMount:void 0}),wp="TooltipContent",kp=hr.forwardRef((e,t)=>{const s=Np(wp,e.__scopeTooltip),{forceMount:n=s.forceMount,side:r="top",...a}=e,i=yp(wp,e.__scopeTooltip);return Fr.jsx(No,{present:n||i.open,children:i.disableHoverableContent?Fr.jsx(Ep,{side:r,...a,ref:t}):Fr.jsx(Cp,{side:r,...a,ref:t})})}),Cp=hr.forwardRef((e,t)=>{const s=yp(wp,e.__scopeTooltip),n=xp(wp,e.__scopeTooltip),r=hr.useRef(null),a=Qi(t,r),[i,o]=hr.useState(null),{trigger:l,onClose:c}=s,d=r.current,{onPointerInTransitChange:u}=n,m=hr.useCallback(()=>{o(null),u(!1)},[u]),p=hr.useCallback((e,t)=>{const s=e.currentTarget,n={x:e.clientX,y:e.clientY},r=function(e,t,s=5){const n=[];switch(t){case"top":n.push({x:e.x-s,y:e.y+s},{x:e.x+s,y:e.y+s});break;case"bottom":n.push({x:e.x-s,y:e.y-s},{x:e.x+s,y:e.y-s});break;case"left":n.push({x:e.x+s,y:e.y-s},{x:e.x+s,y:e.y+s});break;case"right":n.push({x:e.x-s,y:e.y-s},{x:e.x-s,y:e.y+s})}return n}(n,function(e,t){const s=Math.abs(t.top-e.y),n=Math.abs(t.bottom-e.y),r=Math.abs(t.right-e.x),a=Math.abs(t.left-e.x);switch(Math.min(s,n,r,a)){case a:return"left";case r:return"right";case s:return"top";case n:return"bottom";default:throw new Error("unreachable")}}(n,s.getBoundingClientRect())),a=function(e){const t=e.slice();return t.sort((e,t)=>e.x<t.x?-1:e.x>t.x?1:e.y<t.y?-1:e.y>t.y?1:0),function(e){if(e.length<=1)return e.slice();const t=[];for(let n=0;n<e.length;n++){const s=e[n];for(;t.length>=2;){const e=t[t.length-1],n=t[t.length-2];if(!((e.x-n.x)*(s.y-n.y)>=(e.y-n.y)*(s.x-n.x)))break;t.pop()}t.push(s)}t.pop();const s=[];for(let n=e.length-1;n>=0;n--){const t=e[n];for(;s.length>=2;){const e=s[s.length-1],n=s[s.length-2];if(!((e.x-n.x)*(t.y-n.y)>=(e.y-n.y)*(t.x-n.x)))break;s.pop()}s.push(t)}return s.pop(),1===t.length&&1===s.length&&t[0].x===s[0].x&&t[0].y===s[0].y?t:t.concat(s)}(t)}([...r,...function(e){const{top:t,right:s,bottom:n,left:r}=e;return[{x:r,y:t},{x:s,y:t},{x:s,y:n},{x:r,y:n}]}(t.getBoundingClientRect())]);o(a),u(!0)},[u]);return hr.useEffect(()=>()=>m(),[m]),hr.useEffect(()=>{if(l&&d){const e=e=>p(e,d),t=e=>p(e,l);return l.addEventListener("pointerleave",e),d.addEventListener("pointerleave",t),()=>{l.removeEventListener("pointerleave",e),d.removeEventListener("pointerleave",t)}}},[l,d,p,m]),hr.useEffect(()=>{if(i){const e=e=>{const t=e.target,s={x:e.clientX,y:e.clientY},n=(null==l?void 0:l.contains(t))||(null==d?void 0:d.contains(t)),r=!function(e,t){const{x:s,y:n}=e;let r=!1;for(let a=0,i=t.length-1;a<t.length;i=a++){const e=t[a],o=t[i],l=e.x,c=e.y,d=o.x,u=o.y;c>n!=u>n&&s<(d-l)*(n-c)/(u-c)+l&&(r=!r)}return r}(s,i);n?m():r&&(m(),c())};return document.addEventListener("pointermove",e),()=>document.removeEventListener("pointermove",e)}},[l,d,i,c,m]),Fr.jsx(Ep,{...e,ref:a})}),[Sp,_p]=lp(vp,{isInside:!1}),Pp=so("TooltipContent"),Ep=hr.forwardRef((e,t)=>{const{__scopeTooltip:s,children:n,"aria-label":r,onEscapeKeyDown:a,onPointerDownOutside:i,...o}=e,l=yp(wp,s),c=dp(s),{onClose:d}=l;return hr.useEffect(()=>(document.addEventListener(pp,d),()=>document.removeEventListener(pp,d)),[d]),hr.useEffect(()=>{if(l.trigger){const e=e=>{const t=e.target;(null==t?void 0:t.contains(l.trigger))&&d()};return window.addEventListener("scroll",e,{capture:!0}),()=>window.removeEventListener("scroll",e,{capture:!0})}},[l.trigger,d]),Fr.jsx(ho,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:a,onPointerDownOutside:i,onFocusOutside:e=>e.preventDefault(),onDismiss:d,children:Fr.jsxs(ip,{"data-state":l.stateAttribute,...c,...o,ref:t,style:{...o.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[Fr.jsx(Pp,{children:n}),Fr.jsx(Sp,{scope:s,isInside:!0,children:Fr.jsx(Po,{id:l.contentId,role:"tooltip",children:r||n})})]})})});kp.displayName=wp;var Dp="TooltipArrow";hr.forwardRef((e,t)=>{const{__scopeTooltip:s,...n}=e,r=dp(s);return _p(Dp,s).isInside?null:Fr.jsx(op,{...r,...n,ref:t})}).displayName=Dp;var Tp=kp,Ap=fp;hr.forwardRef(function(e,t){var s=e.className,n=e.sideOffset,r=void 0===n?4:n,a=function(e,t){var s={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(s[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(s[n[r]]=e[n[r]])}return s}(e,["className","sideOffset"]);return Fr.jsx(Tp,{ref:t,sideOffset:r,className:Fd("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]",s),...a})}).displayName=Tp.displayName;var Op=function(e,t,s,n){return new(s||(s=Promise))(function(r,a){function i(e){try{l(n.next(e))}catch(t){a(t)}}function o(e){try{l(n.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof s?t:new s(function(e){e(t)})).then(i,o)}l((n=n.apply(e,t||[])).next())})},Rp=function(e,t){var s,n,r,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=o(0),i.throw=o(1),i.return=o(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(o){return function(l){return function(o){if(s)throw new TypeError("Generator is already executing.");for(;i&&(i=0,o[0]&&(a=0)),a;)try{if(s=1,n&&(r=2&o[0]?n.return:o[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,o[1])).done)return r;switch(n=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(r=a.trys,(r=r.length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){a.label=o[1];break}if(6===o[0]&&a.label<r[1]){a.label=r[1],r=o;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(o);break}r[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(l){o=[6,l],n=0}finally{s=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}};function Fp(){var e=Pi({queryKey:["/api/auth/me"],retry:!1,staleTime:3e5,refetchOnWindowFocus:!1,refetchOnMount:!0,refetchInterval:!1,enabled:!0}),t=e.data;return{user:t,isLoading:e.isLoading,isAuthenticated:!!t,error:e.error}}function Ip(){var e=this,t=Ni(),s=Ui().toast;return Ei({mutationFn:function(){return Op(e,void 0,void 0,function(){var e,t;return Rp(this,function(s){switch(s.label){case 0:return e=localStorage.getItem("session_token"),t={},e&&(t["x-session-token"]=e),[4,Oi("POST","/api/auth/logout",{})];case 1:return[2,s.sent().json()]}})})},onSuccess:function(){localStorage.removeItem("auth_token"),localStorage.removeItem("session_token"),t.setQueryData(["/api/auth/me"],null),t.clear(),s({title:"Déconnexion réussie",description:"À bientôt !"})},onError:function(e){localStorage.removeItem("auth_token"),localStorage.removeItem("session_token"),t.clear(),s({title:"Déconnexion",description:"Vous avez été déconnecté"})}})}var Mp=bl("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),Lp=hr.forwardRef(function(e,t){var s=e.className,n=e.variant,r=e.size,a=e.asChild,i=void 0!==a&&a,o=function(e,t){var s={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(s[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(s[n[r]]=e[n[r]])}return s}(e,["className","variant","size","asChild"]),l=i?Xi:"button";return Fr.jsx(l,{className:Fd(Mp({variant:n,size:r,className:s})),ref:t,...o})});Lp.displayName="Button";var qp="focusScope.autoFocusOnMount",zp="focusScope.autoFocusOnUnmount",Vp={bubbles:!1,cancelable:!0},Bp=hr.forwardRef((e,t)=>{const{loop:s=!1,trapped:n=!1,onMountAutoFocus:r,onUnmountAutoFocus:a,...i}=e,[o,l]=hr.useState(null),c=oo(r),d=oo(a),u=hr.useRef(null),m=Qi(t,e=>l(e)),p=hr.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;hr.useEffect(()=>{if(n){let e=function(e){if(p.paused||!o)return;const t=e.target;o.contains(t)?u.current=t:Kp(u.current,{select:!0})},t=function(e){if(p.paused||!o)return;const t=e.relatedTarget;null!==t&&(o.contains(t)||Kp(u.current,{select:!0}))},s=function(e){if(document.activeElement===document.body)for(const t of e)t.removedNodes.length>0&&Kp(o)};document.addEventListener("focusin",e),document.addEventListener("focusout",t);const n=new MutationObserver(s);return o&&n.observe(o,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",e),document.removeEventListener("focusout",t),n.disconnect()}}},[n,o,p.paused]),hr.useEffect(()=>{if(o){Hp.add(p);const t=document.activeElement;if(!o.contains(t)){const s=new CustomEvent(qp,Vp);o.addEventListener(qp,c),o.dispatchEvent(s),s.defaultPrevented||(!function(e,{select:t=!1}={}){const s=document.activeElement;for(const n of e)if(Kp(n,{select:t}),document.activeElement!==s)return}((e=$p(o),e.filter(e=>"A"!==e.tagName)),{select:!0}),document.activeElement===t&&Kp(o))}return()=>{o.removeEventListener(qp,c),setTimeout(()=>{const e=new CustomEvent(zp,Vp);o.addEventListener(zp,d),o.dispatchEvent(e),e.defaultPrevented||Kp(t??document.body,{select:!0}),o.removeEventListener(zp,d),Hp.remove(p)},0)}}var e},[o,c,d,p]);const h=hr.useCallback(e=>{if(!s&&!n)return;if(p.paused)return;const t="Tab"===e.key&&!e.altKey&&!e.ctrlKey&&!e.metaKey,r=document.activeElement;if(t&&r){const t=e.currentTarget,[n,a]=function(e){const t=$p(e),s=Wp(t,e),n=Wp(t.reverse(),e);return[s,n]}(t);n&&a?e.shiftKey||r!==a?e.shiftKey&&r===n&&(e.preventDefault(),s&&Kp(a,{select:!0})):(e.preventDefault(),s&&Kp(n,{select:!0})):r===t&&e.preventDefault()}},[s,n,p.paused]);return Fr.jsx(ao.div,{tabIndex:-1,...i,ref:m,onKeyDown:h})});function $p(e){const t=[],s=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:e=>{const t="INPUT"===e.tagName&&"hidden"===e.type;return e.disabled||e.hidden||t?NodeFilter.FILTER_SKIP:e.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;s.nextNode();)t.push(s.currentNode);return t}function Wp(e,t){for(const s of e)if(!Up(s,{upTo:t}))return s}function Up(e,{upTo:t}){if("hidden"===getComputedStyle(e).visibility)return!0;for(;e;){if(void 0!==t&&e===t)return!1;if("none"===getComputedStyle(e).display)return!0;e=e.parentElement}return!1}function Kp(e,{select:t=!1}={}){if(e&&e.focus){const s=document.activeElement;e.focus({preventScroll:!0}),e!==s&&function(e){return e instanceof HTMLInputElement&&"select"in e}(e)&&t&&e.select()}}Bp.displayName="FocusScope";var Hp=function(){let e=[];return{add(t){const s=e[0];t!==s&&(null==s||s.pause()),e=Zp(e,t),e.unshift(t)},remove(t){var s;e=Zp(e,t),null==(s=e[0])||s.resume()}}}();function Zp(e,t){const s=[...e],n=s.indexOf(t);return-1!==n&&s.splice(n,1),s}var Qp=0;function Gp(){hr.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??Yp()),document.body.insertAdjacentElement("beforeend",e[1]??Yp()),Qp++,()=>{1===Qp&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),Qp--}},[])}function Yp(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var Jp=function(){return Jp=Object.assign||function(e){for(var t,s=1,n=arguments.length;s<n;s++)for(var r in t=arguments[s])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},Jp.apply(this,arguments)};function Xp(e,t){var s={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(s[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(s[n[r]]=e[n[r]])}return s}function eh(e,t,s,n){return new(s||(s=Promise))(function(r,a){function i(e){try{l(n.next(e))}catch(t){a(t)}}function o(e){try{l(n.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof s?t:new s(function(e){e(t)})).then(i,o)}l((n=n.apply(e,t||[])).next())})}"function"==typeof SuppressedError&&SuppressedError;var th="right-scroll-bar-position",sh="width-before-scroll-bar";function nh(e,t){return"function"==typeof e?e(t):e&&(e.current=t),e}var rh="undefined"!=typeof window?hr.useLayoutEffect:hr.useEffect,ah=new WeakMap;function ih(e,t){var s,n,r,a=(s=null,n=function(t){return e.forEach(function(e){return nh(e,t)})},(r=hr.useState(function(){return{value:s,callback:n,facade:{get current(){return r.value},set current(e){var t=r.value;t!==e&&(r.value=e,r.callback(e,t))}}}})[0]).callback=n,r.facade);return rh(function(){var t=ah.get(a);if(t){var s=new Set(t),n=new Set(e),r=a.current;s.forEach(function(e){n.has(e)||nh(e,null)}),n.forEach(function(e){s.has(e)||nh(e,r)})}ah.set(a,e)},[e]),a}function oh(e){return e}var lh=function(e){var t=e.sideCar,s=Xp(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=t.read();if(!n)throw new Error("Sidecar medium not found");return hr.createElement(n,Jp({},s))};lh.isSideCarExport=!0;var ch=function(e){void 0===e&&(e={});var t=function(e,t){void 0===t&&(t=oh);var s=[],n=!1;return{read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return s.length?s[s.length-1]:e},useMedium:function(e){var r=t(e,n);return s.push(r),function(){s=s.filter(function(e){return e!==r})}},assignSyncMedium:function(e){for(n=!0;s.length;){var t=s;s=[],t.forEach(e)}s={push:function(t){return e(t)},filter:function(){return s}}},assignMedium:function(e){n=!0;var t=[];if(s.length){var r=s;s=[],r.forEach(e),t=s}var a=function(){var s=t;t=[],s.forEach(e)},i=function(){return Promise.resolve().then(a)};i(),s={push:function(e){t.push(e),i()},filter:function(e){return t=t.filter(e),s}}}}}(null);return t.options=Jp({async:!0,ssr:!1},e),t}(),dh=function(){},uh=hr.forwardRef(function(e,t){var s=hr.useRef(null),n=hr.useState({onScrollCapture:dh,onWheelCapture:dh,onTouchMoveCapture:dh}),r=n[0],a=n[1],i=e.forwardProps,o=e.children,l=e.className,c=e.removeScrollBar,d=e.enabled,u=e.shards,m=e.sideCar,p=e.noRelative,h=e.noIsolation,x=e.inert,f=e.allowPinchZoom,v=e.as,g=void 0===v?"div":v,y=e.gapMode,b=Xp(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),j=m,N=ih([s,t]),w=Jp(Jp({},b),r);return hr.createElement(hr.Fragment,null,d&&hr.createElement(j,{sideCar:ch,removeScrollBar:c,shards:u,noRelative:p,noIsolation:h,inert:x,setCallbacks:a,allowPinchZoom:!!f,lockRef:s,gapMode:y}),i?hr.cloneElement(hr.Children.only(o),Jp(Jp({},w),{ref:N})):hr.createElement(g,Jp({},w,{className:l,ref:N}),o))});uh.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1},uh.classNames={fullWidth:sh,zeroRight:th};function mh(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=function(){if("undefined"!=typeof __webpack_nonce__)return __webpack_nonce__}();return t&&e.setAttribute("nonce",t),e}var ph=function(){var e=0,t=null;return{add:function(s){var n,r;0==e&&(t=mh())&&(r=s,(n=t).styleSheet?n.styleSheet.cssText=r:n.appendChild(document.createTextNode(r)),function(e){(document.head||document.getElementsByTagName("head")[0]).appendChild(e)}(t)),e++},remove:function(){! --e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},hh=function(){var e,t=(e=ph(),function(t,s){hr.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&s])});return function(e){var s=e.styles,n=e.dynamic;return t(s,n),null}},xh={left:0,top:0,right:0,gap:0},fh=function(e){return parseInt(e||"",10)||0},vh=function(e){if(void 0===e&&(e="margin"),"undefined"==typeof window)return xh;var t=function(e){var t=window.getComputedStyle(document.body),s=t["padding"===e?"paddingLeft":"marginLeft"],n=t["padding"===e?"paddingTop":"marginTop"],r=t["padding"===e?"paddingRight":"marginRight"];return[fh(s),fh(n),fh(r)]}(e),s=document.documentElement.clientWidth,n=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,n-s+t[2]-t[0])}},gh=hh(),yh="data-scroll-locked",bh=function(e,t,s,n){var r=e.left,a=e.top,i=e.right,o=e.gap;return void 0===s&&(s="margin"),"\n  .".concat("with-scroll-bars-hidden"," {\n   overflow: hidden ").concat(n,";\n   padding-right: ").concat(o,"px ").concat(n,";\n  }\n  body[").concat(yh,"] {\n    overflow: hidden ").concat(n,";\n    overscroll-behavior: contain;\n    ").concat([t&&"position: relative ".concat(n,";"),"margin"===s&&"\n    padding-left: ".concat(r,"px;\n    padding-top: ").concat(a,"px;\n    padding-right: ").concat(i,"px;\n    margin-left:0;\n    margin-top:0;\n    margin-right: ").concat(o,"px ").concat(n,";\n    "),"padding"===s&&"padding-right: ".concat(o,"px ").concat(n,";")].filter(Boolean).join(""),"\n  }\n  \n  .").concat(th," {\n    right: ").concat(o,"px ").concat(n,";\n  }\n  \n  .").concat(sh," {\n    margin-right: ").concat(o,"px ").concat(n,";\n  }\n  \n  .").concat(th," .").concat(th," {\n    right: 0 ").concat(n,";\n  }\n  \n  .").concat(sh," .").concat(sh," {\n    margin-right: 0 ").concat(n,";\n  }\n  \n  body[").concat(yh,"] {\n    ").concat("--removed-body-scroll-bar-size",": ").concat(o,"px;\n  }\n")},jh=function(){var e=parseInt(document.body.getAttribute(yh)||"0",10);return isFinite(e)?e:0},Nh=function(e){var t=e.noRelative,s=e.noImportant,n=e.gapMode,r=void 0===n?"margin":n;hr.useEffect(function(){return document.body.setAttribute(yh,(jh()+1).toString()),function(){var e=jh()-1;e<=0?document.body.removeAttribute(yh):document.body.setAttribute(yh,e.toString())}},[]);var a=hr.useMemo(function(){return vh(r)},[r]);return hr.createElement(gh,{styles:bh(a,!t,r,s?"":"!important")})},wh=!1;if("undefined"!=typeof window)try{var kh=Object.defineProperty({},"passive",{get:function(){return wh=!0,!0}});window.addEventListener("test",kh,kh),window.removeEventListener("test",kh,kh)}catch($R){wh=!1}var Ch=!!wh&&{passive:!1},Sh=function(e,t){if(!(e instanceof Element))return!1;var s=window.getComputedStyle(e);return"hidden"!==s[t]&&!(s.overflowY===s.overflowX&&!function(e){return"TEXTAREA"===e.tagName}(e)&&"visible"===s[t])},_h=function(e,t){var s=t.ownerDocument,n=t;do{if("undefined"!=typeof ShadowRoot&&n instanceof ShadowRoot&&(n=n.host),Ph(e,n)){var r=Eh(e,n);if(r[1]>r[2])return!0}n=n.parentNode}while(n&&n!==s.body);return!1},Ph=function(e,t){return"v"===e?function(e){return Sh(e,"overflowY")}(t):function(e){return Sh(e,"overflowX")}(t)},Eh=function(e,t){return"v"===e?[(s=t).scrollTop,s.scrollHeight,s.clientHeight]:function(e){return[e.scrollLeft,e.scrollWidth,e.clientWidth]}(t);var s},Dh=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},Th=function(e){return[e.deltaX,e.deltaY]},Ah=function(e){return e&&"current"in e?e.current:e},Oh=function(e){return"\n  .block-interactivity-".concat(e," {pointer-events: none;}\n  .allow-interactivity-").concat(e," {pointer-events: all;}\n")},Rh=0,Fh=[];function Ih(e){for(var t=null;null!==e;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const Mh=(Lh=function(e){var t=hr.useRef([]),s=hr.useRef([0,0]),n=hr.useRef(),r=hr.useState(Rh++)[0],a=hr.useState(hh)[0],i=hr.useRef(e);hr.useEffect(function(){i.current=e},[e]),hr.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(r));var t=function(e,t,s){if(s||2===arguments.length)for(var n,r=0,a=t.length;r<a;r++)!n&&r in t||(n||(n=Array.prototype.slice.call(t,0,r)),n[r]=t[r]);return e.concat(n||Array.prototype.slice.call(t))}([e.lockRef.current],(e.shards||[]).map(Ah),!0).filter(Boolean);return t.forEach(function(e){return e.classList.add("allow-interactivity-".concat(r))}),function(){document.body.classList.remove("block-interactivity-".concat(r)),t.forEach(function(e){return e.classList.remove("allow-interactivity-".concat(r))})}}},[e.inert,e.lockRef.current,e.shards]);var o=hr.useCallback(function(e,t){if("touches"in e&&2===e.touches.length||"wheel"===e.type&&e.ctrlKey)return!i.current.allowPinchZoom;var r,a=Dh(e),o=s.current,l="deltaX"in e?e.deltaX:o[0]-a[0],c="deltaY"in e?e.deltaY:o[1]-a[1],d=e.target,u=Math.abs(l)>Math.abs(c)?"h":"v";if("touches"in e&&"h"===u&&"range"===d.type)return!1;var m=_h(u,d);if(!m)return!0;if(m?r=u:(r="v"===u?"h":"v",m=_h(u,d)),!m)return!1;if(!n.current&&"changedTouches"in e&&(l||c)&&(n.current=r),!r)return!0;var p=n.current||r;return function(e,t,s,n){var r=function(e,t){return"h"===e&&"rtl"===t?-1:1}(e,window.getComputedStyle(t).direction),a=r*n,i=s.target,o=t.contains(i),l=!1,c=a>0,d=0,u=0;do{if(!i)break;var m=Eh(e,i),p=m[0],h=m[1]-m[2]-r*p;(p||h)&&Ph(e,i)&&(d+=h,u+=p);var x=i.parentNode;i=x&&x.nodeType===Node.DOCUMENT_FRAGMENT_NODE?x.host:x}while(!o&&i!==document.body||o&&(t.contains(i)||t===i));return(c&&Math.abs(d)<1||!c&&Math.abs(u)<1)&&(l=!0),l}(p,t,e,"h"===p?l:c)},[]),l=hr.useCallback(function(e){var s=e;if(Fh.length&&Fh[Fh.length-1]===a){var n="deltaY"in s?Th(s):Dh(s),r=t.current.filter(function(e){return e.name===s.type&&(e.target===s.target||s.target===e.shadowParent)&&(t=e.delta,r=n,t[0]===r[0]&&t[1]===r[1]);var t,r})[0];if(r&&r.should)s.cancelable&&s.preventDefault();else if(!r){var l=(i.current.shards||[]).map(Ah).filter(Boolean).filter(function(e){return e.contains(s.target)});(l.length>0?o(s,l[0]):!i.current.noIsolation)&&s.cancelable&&s.preventDefault()}}},[]),c=hr.useCallback(function(e,s,n,r){var a={name:e,delta:s,target:n,should:r,shadowParent:Ih(n)};t.current.push(a),setTimeout(function(){t.current=t.current.filter(function(e){return e!==a})},1)},[]),d=hr.useCallback(function(e){s.current=Dh(e),n.current=void 0},[]),u=hr.useCallback(function(t){c(t.type,Th(t),t.target,o(t,e.lockRef.current))},[]),m=hr.useCallback(function(t){c(t.type,Dh(t),t.target,o(t,e.lockRef.current))},[]);hr.useEffect(function(){return Fh.push(a),e.setCallbacks({onScrollCapture:u,onWheelCapture:u,onTouchMoveCapture:m}),document.addEventListener("wheel",l,Ch),document.addEventListener("touchmove",l,Ch),document.addEventListener("touchstart",d,Ch),function(){Fh=Fh.filter(function(e){return e!==a}),document.removeEventListener("wheel",l,Ch),document.removeEventListener("touchmove",l,Ch),document.removeEventListener("touchstart",d,Ch)}},[]);var p=e.removeScrollBar,h=e.inert;return hr.createElement(hr.Fragment,null,h?hr.createElement(a,{styles:Oh(r)}):null,p?hr.createElement(Nh,{noRelative:e.noRelative,gapMode:e.gapMode}):null)},ch.useMedium(Lh),lh);var Lh,qh=hr.forwardRef(function(e,t){return hr.createElement(uh,Jp({},e,{ref:t,sideCar:Mh}))});qh.classNames=uh.classNames;var zh=new WeakMap,Vh=new WeakMap,Bh={},$h=0,Wh=function(e){return e&&(e.host||Wh(e.parentNode))},Uh=function(e,t,s,n){var r=function(e,t){return t.map(function(t){if(e.contains(t))return t;var s=Wh(t);return s&&e.contains(s)?s:(console.error("aria-hidden",t,"in not contained inside",e,". Doing nothing"),null)}).filter(function(e){return Boolean(e)})}(t,Array.isArray(e)?e:[e]);Bh[s]||(Bh[s]=new WeakMap);var a=Bh[s],i=[],o=new Set,l=new Set(r),c=function(e){e&&!o.has(e)&&(o.add(e),c(e.parentNode))};r.forEach(c);var d=function(e){e&&!l.has(e)&&Array.prototype.forEach.call(e.children,function(e){if(o.has(e))d(e);else try{var t=e.getAttribute(n),r=null!==t&&"false"!==t,l=(zh.get(e)||0)+1,c=(a.get(e)||0)+1;zh.set(e,l),a.set(e,c),i.push(e),1===l&&r&&Vh.set(e,!0),1===c&&e.setAttribute(s,"true"),r||e.setAttribute(n,"true")}catch(u){console.error("aria-hidden: cannot operate on ",e,u)}})};return d(t),o.clear(),$h++,function(){i.forEach(function(e){var t=zh.get(e)-1,r=a.get(e)-1;zh.set(e,t),a.set(e,r),t||(Vh.has(e)||e.removeAttribute(n),Vh.delete(e)),r||e.removeAttribute(s)}),--$h||(zh=new WeakMap,zh=new WeakMap,Vh=new WeakMap,Bh={})}},Kh=function(e,t,s){void 0===s&&(s="data-aria-hidden");var n=Array.from(Array.isArray(e)?e:[e]),r=function(e){return"undefined"==typeof document?null:(Array.isArray(e)?e[0]:e).ownerDocument.body}(e);return r?(n.push.apply(n,Array.from(r.querySelectorAll("[aria-live], script"))),Uh(n,r,s,"aria-hidden")):function(){return null}},Hh="Dialog",[Zh,Qh]=Gi(Hh),[Gh,Yh]=Zh(Hh),Jh=e=>{const{__scopeDialog:t,children:s,open:n,defaultOpen:r,onOpenChange:a,modal:i=!0}=e,o=hr.useRef(null),l=hr.useRef(null),[c,d]=Co({prop:n,defaultProp:r??!1,onChange:a,caller:Hh});return Fr.jsx(Gh,{scope:t,triggerRef:o,contentRef:l,contentId:Hd(),titleId:Hd(),descriptionId:Hd(),open:c,onOpenChange:d,onOpenToggle:hr.useCallback(()=>d(e=>!e),[d]),modal:i,children:s})};Jh.displayName=Hh;var Xh="DialogTrigger",ex=hr.forwardRef((e,t)=>{const{__scopeDialog:s,...n}=e,r=Yh(Xh,s),a=Qi(t,r.triggerRef);return Fr.jsx(ao.button,{type:"button","aria-haspopup":"dialog","aria-expanded":r.open,"aria-controls":r.contentId,"data-state":bx(r.open),...n,ref:a,onClick:Ki(e.onClick,r.onOpenToggle)})});ex.displayName=Xh;var tx="DialogPortal",[sx,nx]=Zh(tx,{forceMount:void 0}),rx=e=>{const{__scopeDialog:t,forceMount:s,children:n,container:r}=e,a=Yh(tx,t);return Fr.jsx(sx,{scope:t,forceMount:s,children:hr.Children.map(n,e=>Fr.jsx(No,{present:s||a.open,children:Fr.jsx(jo,{asChild:!0,container:r,children:e})}))})};rx.displayName=tx;var ax="DialogOverlay",ix=hr.forwardRef((e,t)=>{const s=nx(ax,e.__scopeDialog),{forceMount:n=s.forceMount,...r}=e,a=Yh(ax,e.__scopeDialog);return a.modal?Fr.jsx(No,{present:n||a.open,children:Fr.jsx(lx,{...r,ref:t})}):null});ix.displayName=ax;var ox=Ji("DialogOverlay.RemoveScroll"),lx=hr.forwardRef((e,t)=>{const{__scopeDialog:s,...n}=e,r=Yh(ax,s);return Fr.jsx(qh,{as:ox,allowPinchZoom:!0,shards:[r.contentRef],children:Fr.jsx(ao.div,{"data-state":bx(r.open),...n,ref:t,style:{pointerEvents:"auto",...n.style}})})}),cx="DialogContent",dx=hr.forwardRef((e,t)=>{const s=nx(cx,e.__scopeDialog),{forceMount:n=s.forceMount,...r}=e,a=Yh(cx,e.__scopeDialog);return Fr.jsx(No,{present:n||a.open,children:a.modal?Fr.jsx(ux,{...r,ref:t}):Fr.jsx(mx,{...r,ref:t})})});dx.displayName=cx;var ux=hr.forwardRef((e,t)=>{const s=Yh(cx,e.__scopeDialog),n=hr.useRef(null),r=Qi(t,s.contentRef,n);return hr.useEffect(()=>{const e=n.current;if(e)return Kh(e)},[]),Fr.jsx(px,{...e,ref:r,trapFocus:s.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Ki(e.onCloseAutoFocus,e=>{var t;e.preventDefault(),null==(t=s.triggerRef.current)||t.focus()}),onPointerDownOutside:Ki(e.onPointerDownOutside,e=>{const t=e.detail.originalEvent,s=0===t.button&&!0===t.ctrlKey;(2===t.button||s)&&e.preventDefault()}),onFocusOutside:Ki(e.onFocusOutside,e=>e.preventDefault())})}),mx=hr.forwardRef((e,t)=>{const s=Yh(cx,e.__scopeDialog),n=hr.useRef(!1),r=hr.useRef(!1);return Fr.jsx(px,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:t=>{var a,i;null==(a=e.onCloseAutoFocus)||a.call(e,t),t.defaultPrevented||(n.current||null==(i=s.triggerRef.current)||i.focus(),t.preventDefault()),n.current=!1,r.current=!1},onInteractOutside:t=>{var a,i;null==(a=e.onInteractOutside)||a.call(e,t),t.defaultPrevented||(n.current=!0,"pointerdown"===t.detail.originalEvent.type&&(r.current=!0));const o=t.target;(null==(i=s.triggerRef.current)?void 0:i.contains(o))&&t.preventDefault(),"focusin"===t.detail.originalEvent.type&&r.current&&t.preventDefault()}})}),px=hr.forwardRef((e,t)=>{const{__scopeDialog:s,trapFocus:n,onOpenAutoFocus:r,onCloseAutoFocus:a,...i}=e,o=Yh(cx,s),l=hr.useRef(null),c=Qi(t,l);return Gp(),Fr.jsxs(Fr.Fragment,{children:[Fr.jsx(Bp,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:r,onUnmountAutoFocus:a,children:Fr.jsx(ho,{role:"dialog",id:o.contentId,"aria-describedby":o.descriptionId,"aria-labelledby":o.titleId,"data-state":bx(o.open),...i,ref:c,onDismiss:()=>o.onOpenChange(!1)})}),Fr.jsxs(Fr.Fragment,{children:[Fr.jsx(kx,{titleId:o.titleId}),Fr.jsx(Cx,{contentRef:l,descriptionId:o.descriptionId})]})]})}),hx="DialogTitle",xx=hr.forwardRef((e,t)=>{const{__scopeDialog:s,...n}=e,r=Yh(hx,s);return Fr.jsx(ao.h2,{id:r.titleId,...n,ref:t})});xx.displayName=hx;var fx="DialogDescription",vx=hr.forwardRef((e,t)=>{const{__scopeDialog:s,...n}=e,r=Yh(fx,s);return Fr.jsx(ao.p,{id:r.descriptionId,...n,ref:t})});vx.displayName=fx;var gx="DialogClose",yx=hr.forwardRef((e,t)=>{const{__scopeDialog:s,...n}=e,r=Yh(gx,s);return Fr.jsx(ao.button,{type:"button",...n,ref:t,onClick:Ki(e.onClick,()=>r.onOpenChange(!1))})});function bx(e){return e?"open":"closed"}yx.displayName=gx;var jx="DialogTitleWarning",[Nx,wx]=function(e,t){const s=hr.createContext(t),n=e=>{const{children:t,...n}=e,r=hr.useMemo(()=>n,Object.values(n));return Fr.jsx(s.Provider,{value:r,children:t})};return n.displayName=e+"Provider",[n,function(n){const r=hr.useContext(s);if(r)return r;if(void 0!==t)return t;throw new Error(`\`${n}\` must be used within \`${e}\``)}]}(jx,{contentName:cx,titleName:hx,docsSlug:"dialog"}),kx=({titleId:e})=>{const t=wx(jx),s=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.\n\nIf you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.\n\nFor more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return hr.useEffect(()=>{if(e){document.getElementById(e)||console.error(s)}},[s,e]),null},Cx=({contentRef:e,descriptionId:t})=>{const s=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${wx("DialogDescriptionWarning").contentName}}.`;return hr.useEffect(()=>{var n;const r=null==(n=e.current)?void 0:n.getAttribute("aria-describedby");if(t&&r){document.getElementById(t)||console.warn(s)}},[s,e,t]),null},Sx=ix,_x=dx,Px=xx,Ex=vx,Dx=yx,Tx=function(e,t){var s={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(s[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(s[n[r]]=e[n[r]])}return s},Ax=Jh,Ox=ex,Rx=rx,Fx=hr.forwardRef(function(e,t){var s=e.className,n=Tx(e,["className"]);return Fr.jsx(Sx,{ref:t,className:Fd("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...n})});Fx.displayName=Sx.displayName;var Ix=hr.forwardRef(function(e,t){var s=e.className,n=e.children,r=Tx(e,["className","children"]);return Fr.jsxs(Rx,{children:[Fr.jsx(Fx,{}),Fr.jsxs(_x,{ref:t,className:Fd("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...r,children:[n,Fr.jsxs(Dx,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[Fr.jsx(Vc,{className:"h-4 w-4"}),Fr.jsx("span",{className:"sr-only",children:"Close"})]})]})]})});Ix.displayName=_x.displayName;var Mx=function(e){var t=e.className,s=Tx(e,["className"]);return Fr.jsx("div",{className:Fd("flex flex-col space-y-1.5 text-center sm:text-left",t),...s})};Mx.displayName="DialogHeader";var Lx=hr.forwardRef(function(e,t){var s=e.className,n=Tx(e,["className"]);return Fr.jsx(Px,{ref:t,className:Fd("text-lg font-semibold leading-none tracking-tight",s),...n})});Lx.displayName=Px.displayName;var qx=hr.forwardRef(function(e,t){var s=e.className,n=Tx(e,["className"]);return Fr.jsx(Ex,{ref:t,className:Fd("text-sm text-muted-foreground",s),...n})});qx.displayName=Ex.displayName;var zx=hr.forwardRef(function(e,t){var s=e.className,n=e.type,r=function(e,t){var s={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(s[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(s[n[r]]=e[n[r]])}return s}(e,["className","type"]);return Fr.jsx("input",{type:n,className:Fd("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:t,...r})});zx.displayName="Input";var Vx=hr.forwardRef((e,t)=>Fr.jsx(ao.label,{...e,ref:t,onMouseDown:t=>{var s;t.target.closest("button, input, select, textarea")||(null==(s=e.onMouseDown)||s.call(e,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));Vx.displayName="Label";var Bx=Vx,$x=bl("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Wx=hr.forwardRef(function(e,t){var s=e.className,n=function(e,t){var s={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(s[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(s[n[r]]=e[n[r]])}return s}(e,["className"]);return Fr.jsx(Bx,{ref:t,className:Fd($x(),s),...n})});Wx.displayName=Bx.displayName;var Ux=hr.forwardRef(function(e,t){var s=e.className,n=function(e,t){var s={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(s[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(s[n[r]]=e[n[r]])}return s}(e,["className"]);return Fr.jsx("textarea",{className:Fd("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:t,...n})});Ux.displayName="Textarea";var Kx=bl("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Hx(e){var t=e.className,s=e.variant,n=function(e,t){var s={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(s[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(s[n[r]]=e[n[r]])}return s}(e,["className","variant"]);return Fr.jsx("div",{className:Fd(Kx({variant:s}),t),...n})}var Zx="horizontal",Qx=["horizontal","vertical"],Gx=hr.forwardRef((e,t)=>{const{decorative:s,orientation:n=Zx,...r}=e,a=function(e){return Qx.includes(e)}(n)?n:Zx,i=s?{role:"none"}:{"aria-orientation":"vertical"===a?a:void 0,role:"separator"};return Fr.jsx(ao.div,{"data-orientation":a,...i,...r,ref:t})});Gx.displayName="Separator";var Yx=Gx,Jx=hr.forwardRef(function(e,t){var s=e.className,n=e.orientation,r=void 0===n?"horizontal":n,a=e.decorative,i=void 0===a||a,o=function(e,t){var s={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(s[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(s[n[r]]=e[n[r]])}return s}(e,["className","orientation","decorative"]);return Fr.jsx(Yx,{ref:t,decorative:i,orientation:r,className:Fd("shrink-0 bg-border","horizontal"===r?"h-[1px] w-full":"h-full w-[1px]",s),...o})});Jx.displayName=Yx.displayName;var Xx=function(e,t,s,n){return new(s||(s=Promise))(function(t,r){function a(e){try{o(n.next(e))}catch(t){r(t)}}function i(e){try{o(n.throw(e))}catch(t){r(t)}}function o(e){var n;e.done?t(e.value):(n=e.value,n instanceof s?n:new s(function(e){e(n)})).then(a,i)}o((n=n.apply(e,[])).next())})},ef=function(e,t){var s,n,r,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=o(0),i.throw=o(1),i.return=o(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(o){return function(l){return function(o){if(s)throw new TypeError("Generator is already executing.");for(;i&&(i=0,o[0]&&(a=0)),a;)try{if(s=1,n&&(r=2&o[0]?n.return:o[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,o[1])).done)return r;switch(n=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(r=a.trys,(r=r.length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){a.label=o[1];break}if(6===o[0]&&a.label<r[1]){a.label=r[1],r=o;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(o);break}r[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(l){o=[6,l],n=0}finally{s=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}};function tf(e){var t,s,n,r,a=this,i=e.order,o=hr.useState(!1),l=o[0],c=o[1],d=hr.useState(""),u=d[0],m=d[1],p=hr.useState(""),h=p[0],x=p[1],f=Ui().toast,v=Ni(),g=Ei({mutationFn:function(e){return Xx(a,0,void 0,function(){return ef(this,function(t){switch(t.label){case 0:return[4,Oi("PUT","/api/admin/orders/".concat(i.id,"/confirm-delivery"),e)];case 1:return[2,t.sent()]}})})},onSuccess:function(){f({title:"Date confirmée",description:"La date de livraison a été confirmée et l'e-mail de validation envoyé."}),c(!1),m(""),x(""),v.invalidateQueries({queryKey:["/api/admin/orders"]})},onError:function(e){f({title:"Erreur",description:e.message||"Erreur lors de la confirmation de la date",variant:"destructive"})}}),y=Ei({mutationFn:function(){return Xx(a,0,void 0,function(){return ef(this,function(e){switch(e.label){case 0:return[4,Oi("POST","/api/admin/orders/".concat(i.id,"/resend-confirmation"))];case 1:return[2,e.sent()]}})})},onSuccess:function(){f({title:"E-mail envoyé",description:"L'e-mail de confirmation a été renvoyé avec succès."})},onError:function(e){f({title:"Erreur",description:e.message||"Erreur lors de l'envoi de l'e-mail",variant:"destructive"})}}),b=function(e){return e?("string"==typeof e?new Date(e):e).toLocaleString("fr-FR",{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):"Non définie"};return Fr.jsxs("div",{className:"space-y-4",children:[Fr.jsxs("div",{className:"flex items-center justify-between",children:[Fr.jsxs("div",{children:[Fr.jsx("h3",{className:"text-lg font-semibold",children:i.orderNumber}),Fr.jsxs("p",{className:"text-sm text-muted-foreground",children:[i.customerFirstName," ",i.customerLastName," • ",i.customerEmail]})]}),(t=i.status,s={pending:{label:"En attente",variant:"secondary",icon:Zl},confirmed:{label:"Confirmé",variant:"default",icon:Ul},delivered:{label:"Livré",variant:"default",icon:Ul},completed:{label:"Terminé",variant:"default",icon:Ul},cancelled:{label:"Annulé",variant:"destructive",icon:Wl}},n=s[t]||s.pending,r=n.icon,Fr.jsxs(Hx,{variant:n.variant,className:"flex items-center gap-1",children:[Fr.jsx(r,{className:"h-3 w-3"}),n.label]}))]}),Fr.jsx(Jx,{}),Fr.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[Fr.jsxs("div",{className:"space-y-2",children:[Fr.jsxs(Wx,{className:"text-sm font-medium flex items-center gap-2",children:[Fr.jsx(Il,{className:"h-4 w-4"}),"Date estimée"]}),Fr.jsx("p",{className:"text-sm",children:b(i.estimatedDeliveryDate)})]}),Fr.jsxs("div",{className:"space-y-2",children:[Fr.jsxs(Wx,{className:"text-sm font-medium flex items-center gap-2",children:[Fr.jsx(Ul,{className:"h-4 w-4"}),"Date confirmée"]}),Fr.jsx("p",{className:"text-sm",children:i.confirmedDeliveryDate?b(i.confirmedDeliveryDate):"Non confirmée"})]})]}),Fr.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[Fr.jsxs("div",{className:"flex items-center gap-2",children:[Fr.jsx(xc,{className:"h-4 w-4"}),Fr.jsx("span",{className:"text-sm",children:"E-mail de confirmation:"}),Fr.jsx(Hx,{variant:i.confirmationEmailSent?"default":"secondary",children:i.confirmationEmailSent?"Envoyé":"Non envoyé"})]}),Fr.jsxs("div",{className:"flex items-center gap-2",children:[Fr.jsx(xc,{className:"h-4 w-4"}),Fr.jsx("span",{className:"text-sm",children:"E-mail de validation:"}),Fr.jsx(Hx,{variant:i.validationEmailSent?"default":"secondary",children:i.validationEmailSent?"Envoyé":"Non envoyé"})]})]}),i.adminNotes&&Fr.jsxs("div",{className:"space-y-2",children:[Fr.jsxs(Wx,{className:"text-sm font-medium flex items-center gap-2",children:[Fr.jsx(ac,{className:"h-4 w-4"}),"Notes administrateur"]}),Fr.jsx("p",{className:"text-sm bg-muted p-2 rounded",children:i.adminNotes})]}),i.adminValidatedBy&&i.adminValidatedAt&&Fr.jsxs("div",{className:"space-y-2",children:[Fr.jsxs(Wx,{className:"text-sm font-medium flex items-center gap-2",children:[Fr.jsx(qc,{className:"h-4 w-4"}),"Validé par"]}),Fr.jsxs("p",{className:"text-sm",children:["Admin ID: ",i.adminValidatedBy," • ",b(i.adminValidatedAt)]})]}),Fr.jsx(Jx,{}),Fr.jsxs("div",{className:"flex flex-wrap gap-2",children:["pending"===i.status&&Fr.jsxs(Ax,{open:l,onOpenChange:c,children:[Fr.jsx(Ox,{asChild:!0,children:Fr.jsxs(Lp,{size:"sm",children:[Fr.jsx(Il,{className:"h-4 w-4 mr-2"}),"Confirmer la livraison"]})}),Fr.jsxs(Ix,{children:[Fr.jsx(Mx,{children:Fr.jsx(Lx,{children:"Confirmer la date de livraison"})}),Fr.jsxs("div",{className:"space-y-4",children:[Fr.jsxs("div",{children:[Fr.jsx(Wx,{htmlFor:"confirmedDate",children:"Date et heure de livraison"}),Fr.jsx(zx,{id:"confirmedDate",type:"datetime-local",value:u,onChange:function(e){return m(e.target.value)}})]}),Fr.jsxs("div",{children:[Fr.jsx(Wx,{htmlFor:"adminNotes",children:"Notes pour le client (optionnel)"}),Fr.jsx(Ux,{id:"adminNotes",placeholder:"Instructions spéciales, informations importantes...",value:h,onChange:function(e){return x(e.target.value)}})]}),Fr.jsxs("div",{className:"flex justify-end gap-2",children:[Fr.jsx(Lp,{variant:"outline",onClick:function(){return c(!1)},children:"Annuler"}),Fr.jsx(Lp,{onClick:function(){u?g.mutate({confirmedDate:u,adminNotes:h}):f({title:"Erreur",description:"Veuillez sélectionner une date de livraison",variant:"destructive"})},disabled:g.isPending,children:g.isPending?"Confirmation...":"Confirmer et envoyer"})]})]})]})]}),Fr.jsxs(Lp,{variant:"outline",size:"sm",onClick:function(){return y.mutate()},disabled:y.isPending,children:[Fr.jsx(xc,{className:"h-4 w-4 mr-2"}),y.isPending?"Envoi...":"Renvoyer confirmation"]})]})]})}var sf=function(e,t){var s={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(s[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(s[n[r]]=e[n[r]])}return s},nf=hr.forwardRef(function(e,t){var s=e.className,n=sf(e,["className"]);return Fr.jsx("div",{ref:t,className:Fd("rounded-lg border bg-card text-card-foreground shadow-sm",s),...n})});nf.displayName="Card";var rf=hr.forwardRef(function(e,t){var s=e.className,n=sf(e,["className"]);return Fr.jsx("div",{ref:t,className:Fd("flex flex-col space-y-1.5 p-6",s),...n})});rf.displayName="CardHeader";var af=hr.forwardRef(function(e,t){var s=e.className,n=sf(e,["className"]);return Fr.jsx("div",{ref:t,className:Fd("text-2xl font-semibold leading-none tracking-tight",s),...n})});af.displayName="CardTitle";var of=hr.forwardRef(function(e,t){var s=e.className,n=sf(e,["className"]);return Fr.jsx("div",{ref:t,className:Fd("text-sm text-muted-foreground",s),...n})});of.displayName="CardDescription";var lf=hr.forwardRef(function(e,t){var s=e.className,n=sf(e,["className"]);return Fr.jsx("div",{ref:t,className:Fd("p-6 pt-0",s),...n})});function cf(e){const t=hr.useRef({value:e,previous:e});return hr.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}lf.displayName="CardContent",hr.forwardRef(function(e,t){var s=e.className,n=sf(e,["className"]);return Fr.jsx("div",{ref:t,className:Fd("flex items-center p-6 pt-0",s),...n})}).displayName="CardFooter";var df="Switch",[uf,mf]=Gi(df),[pf,hf]=uf(df),xf=hr.forwardRef((e,t)=>{const{__scopeSwitch:s,name:n,checked:r,defaultChecked:a,required:i,disabled:o,value:l="on",onCheckedChange:c,form:d,...u}=e,[m,p]=hr.useState(null),h=Qi(t,e=>p(e)),x=hr.useRef(!1),f=!m||(d||!!m.closest("form")),[v,g]=Co({prop:r,defaultProp:a??!1,onChange:c,caller:df});return Fr.jsxs(pf,{scope:s,checked:v,disabled:o,children:[Fr.jsx(ao.button,{type:"button",role:"switch","aria-checked":v,"aria-required":i,"data-state":yf(v),"data-disabled":o?"":void 0,disabled:o,value:l,...u,ref:h,onClick:Ki(e.onClick,e=>{g(e=>!e),f&&(x.current=e.isPropagationStopped(),x.current||e.stopPropagation())})}),f&&Fr.jsx(gf,{control:m,bubbles:!x.current,name:n,value:l,checked:v,required:i,disabled:o,form:d,style:{transform:"translateX(-100%)"}})]})});xf.displayName=df;var ff="SwitchThumb",vf=hr.forwardRef((e,t)=>{const{__scopeSwitch:s,...n}=e,r=hf(ff,s);return Fr.jsx(ao.span,{"data-state":yf(r.checked),"data-disabled":r.disabled?"":void 0,...n,ref:t})});vf.displayName=ff;var gf=hr.forwardRef(({__scopeSwitch:e,control:t,checked:s,bubbles:n=!0,...r},a)=>{const i=hr.useRef(null),o=Qi(i,a),l=cf(s),c=qm(t);return hr.useEffect(()=>{const e=i.current;if(!e)return;const t=window.HTMLInputElement.prototype,r=Object.getOwnPropertyDescriptor(t,"checked").set;if(l!==s&&r){const t=new Event("click",{bubbles:n});r.call(e,s),e.dispatchEvent(t)}},[l,s,n]),Fr.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:s,...r,tabIndex:-1,ref:o,style:{...r.style,...c,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});function yf(e){return e?"checked":"unchecked"}gf.displayName="SwitchBubbleInput";var bf=xf,jf=vf;const Nf=hr.forwardRef(({className:e,...t},s)=>Fr.jsx(bf,{className:Fd("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...t,ref:s,children:Fr.jsx(jf,{className:Fd("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));function wf(e,[t,s]){return Math.min(s,Math.max(t,e))}Nf.displayName=bf.displayName;var kf=hr.createContext(void 0);function Cf(e){const t=hr.useContext(kf);return e||t||"ltr"}var Sf=[" ","Enter","ArrowUp","ArrowDown"],_f=[" ","Enter"],Pf="Select",[Ef,Df,Tf]=ro(Pf),[Af,Of]=Gi(Pf,[Tf,Bm]),Rf=Bm(),[Ff,If]=Af(Pf),[Mf,Lf]=Af(Pf),qf=e=>{const{__scopeSelect:t,children:s,open:n,defaultOpen:r,onOpenChange:a,value:i,defaultValue:o,onValueChange:l,dir:c,name:d,autoComplete:u,disabled:m,required:p,form:h}=e,x=Rf(t),[f,v]=hr.useState(null),[g,y]=hr.useState(null),[b,j]=hr.useState(!1),N=Cf(c),[w,k]=Co({prop:n,defaultProp:r??!1,onChange:a,caller:Pf}),[C,S]=Co({prop:i,defaultProp:o,onChange:l,caller:Pf}),_=hr.useRef(null),P=!f||(h||!!f.closest("form")),[E,D]=hr.useState(new Set),T=Array.from(E).map(e=>e.props.value).join(";");return Fr.jsx(rp,{...x,children:Fr.jsxs(Ff,{required:p,scope:t,trigger:f,onTriggerChange:v,valueNode:g,onValueNodeChange:y,valueNodeHasChildren:b,onValueNodeHasChildrenChange:j,contentId:Hd(),value:C,onValueChange:S,open:w,onOpenChange:k,dir:N,triggerPointerDownPosRef:_,disabled:m,children:[Fr.jsx(Ef.Provider,{scope:t,children:Fr.jsx(Mf,{scope:e.__scopeSelect,onNativeOptionAdd:hr.useCallback(e=>{D(t=>new Set(t).add(e))},[]),onNativeOptionRemove:hr.useCallback(e=>{D(t=>{const s=new Set(t);return s.delete(e),s})},[]),children:s})}),P?Fr.jsxs(Cv,{"aria-hidden":!0,required:p,tabIndex:-1,name:d,autoComplete:u,value:C,onChange:e=>S(e.target.value),disabled:m,form:h,children:[void 0===C?Fr.jsx("option",{value:""}):null,Array.from(E)]},T):null]})})};qf.displayName=Pf;var zf="SelectTrigger",Vf=hr.forwardRef((e,t)=>{const{__scopeSelect:s,disabled:n=!1,...r}=e,a=Rf(s),i=If(zf,s),o=i.disabled||n,l=Qi(t,i.onTriggerChange),c=Df(s),d=hr.useRef("touch"),[u,m,p]=_v(e=>{const t=c().filter(e=>!e.disabled),s=t.find(e=>e.value===i.value),n=Pv(t,e,s);void 0!==n&&i.onValueChange(n.value)}),h=e=>{o||(i.onOpenChange(!0),p()),e&&(i.triggerPointerDownPosRef.current={x:Math.round(e.pageX),y:Math.round(e.pageY)})};return Fr.jsx(ap,{asChild:!0,...a,children:Fr.jsx(ao.button,{type:"button",role:"combobox","aria-controls":i.contentId,"aria-expanded":i.open,"aria-required":i.required,"aria-autocomplete":"none",dir:i.dir,"data-state":i.open?"open":"closed",disabled:o,"data-disabled":o?"":void 0,"data-placeholder":Sv(i.value)?"":void 0,...r,ref:l,onClick:Ki(r.onClick,e=>{e.currentTarget.focus(),"mouse"!==d.current&&h(e)}),onPointerDown:Ki(r.onPointerDown,e=>{d.current=e.pointerType;const t=e.target;t.hasPointerCapture(e.pointerId)&&t.releasePointerCapture(e.pointerId),0===e.button&&!1===e.ctrlKey&&"mouse"===e.pointerType&&(h(e),e.preventDefault())}),onKeyDown:Ki(r.onKeyDown,e=>{const t=""!==u.current;e.ctrlKey||e.altKey||e.metaKey||1!==e.key.length||m(e.key),t&&" "===e.key||Sf.includes(e.key)&&(h(),e.preventDefault())})})})});Vf.displayName=zf;var Bf="SelectValue",$f=hr.forwardRef((e,t)=>{const{__scopeSelect:s,className:n,style:r,children:a,placeholder:i="",...o}=e,l=If(Bf,s),{onValueNodeHasChildrenChange:c}=l,d=void 0!==a,u=Qi(t,l.onValueNodeChange);return bo(()=>{c(d)},[c,d]),Fr.jsx(ao.span,{...o,ref:u,style:{pointerEvents:"none"},children:Sv(l.value)?Fr.jsx(Fr.Fragment,{children:i}):a})});$f.displayName=Bf;var Wf=hr.forwardRef((e,t)=>{const{__scopeSelect:s,children:n,...r}=e;return Fr.jsx(ao.span,{"aria-hidden":!0,...r,ref:t,children:n||"▼"})});Wf.displayName="SelectIcon";var Uf=e=>Fr.jsx(jo,{asChild:!0,...e});Uf.displayName="SelectPortal";var Kf="SelectContent",Hf=hr.forwardRef((e,t)=>{const s=If(Kf,e.__scopeSelect),[n,r]=hr.useState();if(bo(()=>{r(new DocumentFragment)},[]),!s.open){const t=n;return t?xr.createPortal(Fr.jsx(Qf,{scope:e.__scopeSelect,children:Fr.jsx(Ef.Slot,{scope:e.__scopeSelect,children:Fr.jsx("div",{children:e.children})})}),t):null}return Fr.jsx(Jf,{...e,ref:t})});Hf.displayName=Kf;var Zf=10,[Qf,Gf]=Af(Kf),Yf=Ji("SelectContent.RemoveScroll"),Jf=hr.forwardRef((e,t)=>{const{__scopeSelect:s,position:n="item-aligned",onCloseAutoFocus:r,onEscapeKeyDown:a,onPointerDownOutside:i,side:o,sideOffset:l,align:c,alignOffset:d,arrowPadding:u,collisionBoundary:m,collisionPadding:p,sticky:h,hideWhenDetached:x,avoidCollisions:f,...v}=e,g=If(Kf,s),[y,b]=hr.useState(null),[j,N]=hr.useState(null),w=Qi(t,e=>b(e)),[k,C]=hr.useState(null),[S,_]=hr.useState(null),P=Df(s),[E,D]=hr.useState(!1),T=hr.useRef(!1);hr.useEffect(()=>{if(y)return Kh(y)},[y]),Gp();const A=hr.useCallback(e=>{const[t,...s]=P().map(e=>e.ref.current),[n]=s.slice(-1),r=document.activeElement;for(const a of e){if(a===r)return;if(null==a||a.scrollIntoView({block:"nearest"}),a===t&&j&&(j.scrollTop=0),a===n&&j&&(j.scrollTop=j.scrollHeight),null==a||a.focus(),document.activeElement!==r)return}},[P,j]),O=hr.useCallback(()=>A([k,y]),[A,k,y]);hr.useEffect(()=>{E&&O()},[E,O]);const{onOpenChange:R,triggerPointerDownPosRef:F}=g;hr.useEffect(()=>{if(y){let e={x:0,y:0};const t=t=>{var s,n;e={x:Math.abs(Math.round(t.pageX)-((null==(s=F.current)?void 0:s.x)??0)),y:Math.abs(Math.round(t.pageY)-((null==(n=F.current)?void 0:n.y)??0))}},s=s=>{e.x<=10&&e.y<=10?s.preventDefault():y.contains(s.target)||R(!1),document.removeEventListener("pointermove",t),F.current=null};return null!==F.current&&(document.addEventListener("pointermove",t),document.addEventListener("pointerup",s,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",t),document.removeEventListener("pointerup",s,{capture:!0})}}},[y,R,F]),hr.useEffect(()=>{const e=()=>R(!1);return window.addEventListener("blur",e),window.addEventListener("resize",e),()=>{window.removeEventListener("blur",e),window.removeEventListener("resize",e)}},[R]);const[I,M]=_v(e=>{const t=P().filter(e=>!e.disabled),s=t.find(e=>e.ref.current===document.activeElement),n=Pv(t,e,s);n&&setTimeout(()=>n.ref.current.focus())}),L=hr.useCallback((e,t,s)=>{const n=!T.current&&!s;(void 0!==g.value&&g.value===t||n)&&(C(e),n&&(T.current=!0))},[g.value]),q=hr.useCallback(()=>null==y?void 0:y.focus(),[y]),z=hr.useCallback((e,t,s)=>{const n=!T.current&&!s;(void 0!==g.value&&g.value===t||n)&&_(e)},[g.value]),V="popper"===n?ev:Xf,B=V===ev?{side:o,sideOffset:l,align:c,alignOffset:d,arrowPadding:u,collisionBoundary:m,collisionPadding:p,sticky:h,hideWhenDetached:x,avoidCollisions:f}:{};return Fr.jsx(Qf,{scope:s,content:y,viewport:j,onViewportChange:N,itemRefCallback:L,selectedItem:k,onItemLeave:q,itemTextRefCallback:z,focusSelectedItem:O,selectedItemText:S,position:n,isPositioned:E,searchRef:I,children:Fr.jsx(qh,{as:Yf,allowPinchZoom:!0,children:Fr.jsx(Bp,{asChild:!0,trapped:g.open,onMountAutoFocus:e=>{e.preventDefault()},onUnmountAutoFocus:Ki(r,e=>{var t;null==(t=g.trigger)||t.focus({preventScroll:!0}),e.preventDefault()}),children:Fr.jsx(ho,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:a,onPointerDownOutside:i,onFocusOutside:e=>e.preventDefault(),onDismiss:()=>g.onOpenChange(!1),children:Fr.jsx(V,{role:"listbox",id:g.contentId,"data-state":g.open?"open":"closed",dir:g.dir,onContextMenu:e=>e.preventDefault(),...v,...B,onPlaced:()=>D(!0),ref:w,style:{display:"flex",flexDirection:"column",outline:"none",...v.style},onKeyDown:Ki(v.onKeyDown,e=>{const t=e.ctrlKey||e.altKey||e.metaKey;if("Tab"===e.key&&e.preventDefault(),t||1!==e.key.length||M(e.key),["ArrowUp","ArrowDown","Home","End"].includes(e.key)){let t=P().filter(e=>!e.disabled).map(e=>e.ref.current);if(["ArrowUp","End"].includes(e.key)&&(t=t.slice().reverse()),["ArrowUp","ArrowDown"].includes(e.key)){const s=e.target,n=t.indexOf(s);t=t.slice(n+1)}setTimeout(()=>A(t)),e.preventDefault()}})})})})})})});Jf.displayName="SelectContentImpl";var Xf=hr.forwardRef((e,t)=>{const{__scopeSelect:s,onPlaced:n,...r}=e,a=If(Kf,s),i=Gf(Kf,s),[o,l]=hr.useState(null),[c,d]=hr.useState(null),u=Qi(t,e=>d(e)),m=Df(s),p=hr.useRef(!1),h=hr.useRef(!0),{viewport:x,selectedItem:f,selectedItemText:v,focusSelectedItem:g}=i,y=hr.useCallback(()=>{if(a.trigger&&a.valueNode&&o&&c&&x&&f&&v){const e=a.trigger.getBoundingClientRect(),t=c.getBoundingClientRect(),s=a.valueNode.getBoundingClientRect(),r=v.getBoundingClientRect();if("rtl"!==a.dir){const n=r.left-t.left,a=s.left-n,i=e.left-a,l=e.width+i,c=Math.max(l,t.width),d=window.innerWidth-Zf,u=wf(a,[Zf,Math.max(Zf,d-c)]);o.style.minWidth=l+"px",o.style.left=u+"px"}else{const n=t.right-r.right,a=window.innerWidth-s.right-n,i=window.innerWidth-e.right-a,l=e.width+i,c=Math.max(l,t.width),d=window.innerWidth-Zf,u=wf(a,[Zf,Math.max(Zf,d-c)]);o.style.minWidth=l+"px",o.style.right=u+"px"}const i=m(),l=window.innerHeight-2*Zf,d=x.scrollHeight,u=window.getComputedStyle(c),h=parseInt(u.borderTopWidth,10),g=parseInt(u.paddingTop,10),y=parseInt(u.borderBottomWidth,10),b=h+g+d+parseInt(u.paddingBottom,10)+y,j=Math.min(5*f.offsetHeight,b),N=window.getComputedStyle(x),w=parseInt(N.paddingTop,10),k=parseInt(N.paddingBottom,10),C=e.top+e.height/2-Zf,S=l-C,_=f.offsetHeight/2,P=h+g+(f.offsetTop+_),E=b-P;if(P<=C){const e=i.length>0&&f===i[i.length-1].ref.current;o.style.bottom="0px";const t=c.clientHeight-x.offsetTop-x.offsetHeight,s=P+Math.max(S,_+(e?k:0)+t+y);o.style.height=s+"px"}else{const e=i.length>0&&f===i[0].ref.current;o.style.top="0px";const t=Math.max(C,h+x.offsetTop+(e?w:0)+_)+E;o.style.height=t+"px",x.scrollTop=P-C+x.offsetTop}o.style.margin=`${Zf}px 0`,o.style.minHeight=j+"px",o.style.maxHeight=l+"px",null==n||n(),requestAnimationFrame(()=>p.current=!0)}},[m,a.trigger,a.valueNode,o,c,x,f,v,a.dir,n]);bo(()=>y(),[y]);const[b,j]=hr.useState();bo(()=>{c&&j(window.getComputedStyle(c).zIndex)},[c]);const N=hr.useCallback(e=>{e&&!0===h.current&&(y(),null==g||g(),h.current=!1)},[y,g]);return Fr.jsx(tv,{scope:s,contentWrapper:o,shouldExpandOnScrollRef:p,onScrollButtonChange:N,children:Fr.jsx("div",{ref:l,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:b},children:Fr.jsx(ao.div,{...r,ref:u,style:{boxSizing:"border-box",maxHeight:"100%",...r.style}})})})});Xf.displayName="SelectItemAlignedPosition";var ev=hr.forwardRef((e,t)=>{const{__scopeSelect:s,align:n="start",collisionPadding:r=Zf,...a}=e,i=Rf(s);return Fr.jsx(ip,{...i,...a,ref:t,align:n,collisionPadding:r,style:{boxSizing:"border-box",...a.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});ev.displayName="SelectPopperPosition";var[tv,sv]=Af(Kf,{}),nv="SelectViewport",rv=hr.forwardRef((e,t)=>{const{__scopeSelect:s,nonce:n,...r}=e,a=Gf(nv,s),i=sv(nv,s),o=Qi(t,a.onViewportChange),l=hr.useRef(0);return Fr.jsxs(Fr.Fragment,{children:[Fr.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),Fr.jsx(Ef.Slot,{scope:s,children:Fr.jsx(ao.div,{"data-radix-select-viewport":"",role:"presentation",...r,ref:o,style:{position:"relative",flex:1,overflow:"hidden auto",...r.style},onScroll:Ki(r.onScroll,e=>{const t=e.currentTarget,{contentWrapper:s,shouldExpandOnScrollRef:n}=i;if((null==n?void 0:n.current)&&s){const e=Math.abs(l.current-t.scrollTop);if(e>0){const n=window.innerHeight-2*Zf,r=parseFloat(s.style.minHeight),a=parseFloat(s.style.height),i=Math.max(r,a);if(i<n){const r=i+e,a=Math.min(n,r),o=r-a;s.style.height=a+"px","0px"===s.style.bottom&&(t.scrollTop=o>0?o:0,s.style.justifyContent="flex-end")}}}l.current=t.scrollTop})})})]})});rv.displayName=nv;var av="SelectGroup",[iv,ov]=Af(av);hr.forwardRef((e,t)=>{const{__scopeSelect:s,...n}=e,r=Hd();return Fr.jsx(iv,{scope:s,id:r,children:Fr.jsx(ao.div,{role:"group","aria-labelledby":r,...n,ref:t})})}).displayName=av;var lv="SelectLabel",cv=hr.forwardRef((e,t)=>{const{__scopeSelect:s,...n}=e,r=ov(lv,s);return Fr.jsx(ao.div,{id:r.id,...n,ref:t})});cv.displayName=lv;var dv="SelectItem",[uv,mv]=Af(dv),pv=hr.forwardRef((e,t)=>{const{__scopeSelect:s,value:n,disabled:r=!1,textValue:a,...i}=e,o=If(dv,s),l=Gf(dv,s),c=o.value===n,[d,u]=hr.useState(a??""),[m,p]=hr.useState(!1),h=Qi(t,e=>{var t;return null==(t=l.itemRefCallback)?void 0:t.call(l,e,n,r)}),x=Hd(),f=hr.useRef("touch"),v=()=>{r||(o.onValueChange(n),o.onOpenChange(!1))};if(""===n)throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return Fr.jsx(uv,{scope:s,value:n,disabled:r,textId:x,isSelected:c,onItemTextChange:hr.useCallback(e=>{u(t=>t||((null==e?void 0:e.textContent)??"").trim())},[]),children:Fr.jsx(Ef.ItemSlot,{scope:s,value:n,disabled:r,textValue:d,children:Fr.jsx(ao.div,{role:"option","aria-labelledby":x,"data-highlighted":m?"":void 0,"aria-selected":c&&m,"data-state":c?"checked":"unchecked","aria-disabled":r||void 0,"data-disabled":r?"":void 0,tabIndex:r?void 0:-1,...i,ref:h,onFocus:Ki(i.onFocus,()=>p(!0)),onBlur:Ki(i.onBlur,()=>p(!1)),onClick:Ki(i.onClick,()=>{"mouse"!==f.current&&v()}),onPointerUp:Ki(i.onPointerUp,()=>{"mouse"===f.current&&v()}),onPointerDown:Ki(i.onPointerDown,e=>{f.current=e.pointerType}),onPointerMove:Ki(i.onPointerMove,e=>{var t;f.current=e.pointerType,r?null==(t=l.onItemLeave)||t.call(l):"mouse"===f.current&&e.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Ki(i.onPointerLeave,e=>{var t;e.currentTarget===document.activeElement&&(null==(t=l.onItemLeave)||t.call(l))}),onKeyDown:Ki(i.onKeyDown,e=>{var t;""!==(null==(t=l.searchRef)?void 0:t.current)&&" "===e.key||(_f.includes(e.key)&&v()," "===e.key&&e.preventDefault())})})})})});pv.displayName=dv;var hv="SelectItemText",xv=hr.forwardRef((e,t)=>{const{__scopeSelect:s,className:n,style:r,...a}=e,i=If(hv,s),o=Gf(hv,s),l=mv(hv,s),c=Lf(hv,s),[d,u]=hr.useState(null),m=Qi(t,e=>u(e),l.onItemTextChange,e=>{var t;return null==(t=o.itemTextRefCallback)?void 0:t.call(o,e,l.value,l.disabled)}),p=null==d?void 0:d.textContent,h=hr.useMemo(()=>Fr.jsx("option",{value:l.value,disabled:l.disabled,children:p},l.value),[l.disabled,l.value,p]),{onNativeOptionAdd:x,onNativeOptionRemove:f}=c;return bo(()=>(x(h),()=>f(h)),[x,f,h]),Fr.jsxs(Fr.Fragment,{children:[Fr.jsx(ao.span,{id:l.textId,...a,ref:m}),l.isSelected&&i.valueNode&&!i.valueNodeHasChildren?xr.createPortal(a.children,i.valueNode):null]})});xv.displayName=hv;var fv="SelectItemIndicator",vv=hr.forwardRef((e,t)=>{const{__scopeSelect:s,...n}=e;return mv(fv,s).isSelected?Fr.jsx(ao.span,{"aria-hidden":!0,...n,ref:t}):null});vv.displayName=fv;var gv="SelectScrollUpButton",yv=hr.forwardRef((e,t)=>{const s=Gf(gv,e.__scopeSelect),n=sv(gv,e.__scopeSelect),[r,a]=hr.useState(!1),i=Qi(t,n.onScrollButtonChange);return bo(()=>{if(s.viewport&&s.isPositioned){let e=function(){const e=t.scrollTop>0;a(e)};const t=s.viewport;return e(),t.addEventListener("scroll",e),()=>t.removeEventListener("scroll",e)}},[s.viewport,s.isPositioned]),r?Fr.jsx(Nv,{...e,ref:i,onAutoScroll:()=>{const{viewport:e,selectedItem:t}=s;e&&t&&(e.scrollTop=e.scrollTop-t.offsetHeight)}}):null});yv.displayName=gv;var bv="SelectScrollDownButton",jv=hr.forwardRef((e,t)=>{const s=Gf(bv,e.__scopeSelect),n=sv(bv,e.__scopeSelect),[r,a]=hr.useState(!1),i=Qi(t,n.onScrollButtonChange);return bo(()=>{if(s.viewport&&s.isPositioned){let e=function(){const e=t.scrollHeight-t.clientHeight,s=Math.ceil(t.scrollTop)<e;a(s)};const t=s.viewport;return e(),t.addEventListener("scroll",e),()=>t.removeEventListener("scroll",e)}},[s.viewport,s.isPositioned]),r?Fr.jsx(Nv,{...e,ref:i,onAutoScroll:()=>{const{viewport:e,selectedItem:t}=s;e&&t&&(e.scrollTop=e.scrollTop+t.offsetHeight)}}):null});jv.displayName=bv;var Nv=hr.forwardRef((e,t)=>{const{__scopeSelect:s,onAutoScroll:n,...r}=e,a=Gf("SelectScrollButton",s),i=hr.useRef(null),o=Df(s),l=hr.useCallback(()=>{null!==i.current&&(window.clearInterval(i.current),i.current=null)},[]);return hr.useEffect(()=>()=>l(),[l]),bo(()=>{var e;const t=o().find(e=>e.ref.current===document.activeElement);null==(e=null==t?void 0:t.ref.current)||e.scrollIntoView({block:"nearest"})},[o]),Fr.jsx(ao.div,{"aria-hidden":!0,...r,ref:t,style:{flexShrink:0,...r.style},onPointerDown:Ki(r.onPointerDown,()=>{null===i.current&&(i.current=window.setInterval(n,50))}),onPointerMove:Ki(r.onPointerMove,()=>{var e;null==(e=a.onItemLeave)||e.call(a),null===i.current&&(i.current=window.setInterval(n,50))}),onPointerLeave:Ki(r.onPointerLeave,()=>{l()})})}),wv=hr.forwardRef((e,t)=>{const{__scopeSelect:s,...n}=e;return Fr.jsx(ao.div,{"aria-hidden":!0,...n,ref:t})});wv.displayName="SelectSeparator";var kv="SelectArrow";hr.forwardRef((e,t)=>{const{__scopeSelect:s,...n}=e,r=Rf(s),a=If(kv,s),i=Gf(kv,s);return a.open&&"popper"===i.position?Fr.jsx(op,{...r,...n,ref:t}):null}).displayName=kv;var Cv=hr.forwardRef(({__scopeSelect:e,value:t,...s},n)=>{const r=hr.useRef(null),a=Qi(n,r),i=cf(t);return hr.useEffect(()=>{const e=r.current;if(!e)return;const s=window.HTMLSelectElement.prototype,n=Object.getOwnPropertyDescriptor(s,"value").set;if(i!==t&&n){const s=new Event("change",{bubbles:!0});n.call(e,t),e.dispatchEvent(s)}},[i,t]),Fr.jsx(ao.select,{...s,style:{...So,...s.style},ref:a,defaultValue:t})});function Sv(e){return""===e||void 0===e}function _v(e){const t=oo(e),s=hr.useRef(""),n=hr.useRef(0),r=hr.useCallback(e=>{const r=s.current+e;t(r),function e(t){s.current=t,window.clearTimeout(n.current),""!==t&&(n.current=window.setTimeout(()=>e(""),1e3))}(r)},[t]),a=hr.useCallback(()=>{s.current="",window.clearTimeout(n.current)},[]);return hr.useEffect(()=>()=>window.clearTimeout(n.current),[]),[s,r,a]}function Pv(e,t,s){const n=t.length>1&&Array.from(t).every(e=>e===t[0])?t[0]:t,r=s?e.indexOf(s):-1;let a=(i=e,o=Math.max(r,0),i.map((e,t)=>i[(o+t)%i.length]));var i,o;1===n.length&&(a=a.filter(e=>e!==s));const l=a.find(e=>e.textValue.toLowerCase().startsWith(n.toLowerCase()));return l!==s?l:void 0}Cv.displayName="SelectBubbleInput";var Ev=Vf,Dv=Wf,Tv=Uf,Av=Hf,Ov=rv,Rv=cv,Fv=pv,Iv=xv,Mv=vv,Lv=yv,qv=jv,zv=wv,Vv=function(e,t){var s={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(s[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(s[n[r]]=e[n[r]])}return s},Bv=qf,$v=$f,Wv=hr.forwardRef(function(e,t){var s=e.className,n=e.children,r=Vv(e,["className","children"]);return Fr.jsxs(Ev,{ref:t,className:Fd("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",s),...r,children:[n,Fr.jsx(Dv,{asChild:!0,children:Fr.jsx(zl,{className:"h-4 w-4 opacity-50"})})]})});Wv.displayName=Ev.displayName;var Uv=hr.forwardRef(function(e,t){var s=e.className,n=Vv(e,["className"]);return Fr.jsx(Lv,{ref:t,className:Fd("flex cursor-default items-center justify-center py-1",s),...n,children:Fr.jsx($l,{className:"h-4 w-4"})})});Uv.displayName=Lv.displayName;var Kv=hr.forwardRef(function(e,t){var s=e.className,n=Vv(e,["className"]);return Fr.jsx(qv,{ref:t,className:Fd("flex cursor-default items-center justify-center py-1",s),...n,children:Fr.jsx(zl,{className:"h-4 w-4"})})});Kv.displayName=qv.displayName;var Hv=hr.forwardRef(function(e,t){var s=e.className,n=e.children,r=e.position,a=void 0===r?"popper":r,i=Vv(e,["className","children","position"]);return Fr.jsx(Tv,{children:Fr.jsxs(Av,{ref:t,className:Fd("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]","popper"===a&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",s),position:a,...i,children:[Fr.jsx(Uv,{}),Fr.jsx(Ov,{className:Fd("p-1","popper"===a&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:n}),Fr.jsx(Kv,{})]})})});Hv.displayName=Av.displayName,hr.forwardRef(function(e,t){var s=e.className,n=Vv(e,["className"]);return Fr.jsx(Rv,{ref:t,className:Fd("py-1.5 pl-8 pr-2 text-sm font-semibold",s),...n})}).displayName=Rv.displayName;var Zv=hr.forwardRef(function(e,t){var s=e.className,n=e.children,r=Vv(e,["className","children"]);return Fr.jsxs(Fv,{ref:t,className:Fd("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...r,children:[Fr.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:Fr.jsx(Mv,{children:Fr.jsx(ql,{className:"h-4 w-4"})})}),Fr.jsx(Iv,{children:n})]})});Zv.displayName=Fv.displayName,hr.forwardRef(function(e,t){var s=e.className,n=Vv(e,["className"]);return Fr.jsx(zv,{ref:t,className:Fd("-mx-1 my-1 h-px bg-muted",s),...n})}).displayName=zv.displayName;var Qv=function(e,t){var s={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(s[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(s[n[r]]=e[n[r]])}return s},Gv=hr.forwardRef(function(e,t){var s=e.className,n=Qv(e,["className"]);return Fr.jsx("div",{className:"relative w-full overflow-auto",children:Fr.jsx("table",{ref:t,className:Fd("w-full caption-bottom text-sm",s),...n})})});Gv.displayName="Table";var Yv=hr.forwardRef(function(e,t){var s=e.className,n=Qv(e,["className"]);return Fr.jsx("thead",{ref:t,className:Fd("[&_tr]:border-b",s),...n})});Yv.displayName="TableHeader";var Jv=hr.forwardRef(function(e,t){var s=e.className,n=Qv(e,["className"]);return Fr.jsx("tbody",{ref:t,className:Fd("[&_tr:last-child]:border-0",s),...n})});Jv.displayName="TableBody",hr.forwardRef(function(e,t){var s=e.className,n=Qv(e,["className"]);return Fr.jsx("tfoot",{ref:t,className:Fd("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",s),...n})}).displayName="TableFooter";var Xv=hr.forwardRef(function(e,t){var s=e.className,n=Qv(e,["className"]);return Fr.jsx("tr",{ref:t,className:Fd("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",s),...n})});Xv.displayName="TableRow";var eg=hr.forwardRef(function(e,t){var s=e.className,n=Qv(e,["className"]);return Fr.jsx("th",{ref:t,className:Fd("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",s),...n})});eg.displayName="TableHead";var tg=hr.forwardRef(function(e,t){var s=e.className,n=Qv(e,["className"]);return Fr.jsx("td",{ref:t,className:Fd("p-4 align-middle [&:has([role=checkbox])]:pr-0",s),...n})});function sg({clients:e}){const t=hr.useRef(null),s=hr.useRef(null),n=hr.useRef([]),[r,a]=hr.useState(!1),[i,o]=hr.useState(null),{data:l,error:c}=Pi({queryKey:["/api/maps/config"],retry:!1});hr.useEffect(()=>{c&&o("Impossible de récupérer la configuration Google Maps")},[c]),hr.useEffect(()=>{if(!(null==l?void 0:l.apiKey))return;const e=document.createElement("script");return e.src=`https://maps.googleapis.com/maps/api/js?key=${l.apiKey}&libraries=geometry,places`,e.async=!0,e.defer=!0,e.onload=()=>a(!0),e.onerror=()=>o("Erreur de chargement de l'API Google Maps"),document.querySelector('script[src*="maps.googleapis.com"]')?a(!0):document.head.appendChild(e),()=>{e.parentNode&&e.parentNode.removeChild(e)}},[l]),hr.useEffect(()=>{r&&t.current&&(null==e?void 0:e.length)&&d()},[r,e]);const d=async()=>{if(!t.current)return;const r=new google.maps.Map(t.current,{zoom:6,center:{lat:46.603354,lng:1.888334},mapTypeId:google.maps.MapTypeId.ROADMAP,styles:[{featureType:"poi.business",stylers:[{visibility:"off"}]},{featureType:"transit",elementType:"labels.icon",stylers:[{visibility:"off"}]}]});s.current=r,n.current.forEach(e=>e.setMap(null)),n.current=[];const a=new google.maps.LatLngBounds;let i=0;for(const t of e){if(!t.address||!t.city)continue;const e=`${t.address}, ${t.postalCode||""} ${t.city}, France`;try{const s=await u(e);if(s){const e=new google.maps.Marker({position:s,map:r,title:t.companyName||`${t.firstName} ${t.lastName}`,icon:{url:"data:image/svg+xml;charset=UTF-8,"+encodeURIComponent('\n                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n                  <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z" fill="#dc2626" stroke="#ffffff" stroke-width="2"/>\n                  <circle cx="12" cy="10" r="3" fill="#ffffff"/>\n                </svg>\n              '),scaledSize:new google.maps.Size(24,24),anchor:new google.maps.Point(12,24)}}),o=new google.maps.InfoWindow({content:`\n              <div class="p-3 max-w-xs">\n                <h3 class="font-semibold text-gray-800">${t.companyName||"Particulier"}</h3>\n                <p class="text-sm text-gray-600">${t.firstName} ${t.lastName}</p>\n                <p class="text-sm text-gray-500 mt-1">${t.address}</p>\n                <p class="text-sm text-gray-500">${t.postalCode||""} ${t.city}</p>\n                ${t.phone?`<p class="text-sm text-blue-600 mt-1">📞 ${t.phone}</p>`:""}\n                ${t.siret?`<p class="text-xs text-gray-400 mt-1">SIRET: ${t.siret}</p>`:""}\n              </div>\n            `});e.addListener("click",()=>{o.open(r,e)}),n.current.push(e),a.extend(s),i++}}catch(o){console.warn("Erreur géocodage pour:",e,o)}}i>0&&(1===i?(r.setCenter(a.getCenter()),r.setZoom(12)):(r.fitBounds(a),r.panToBounds(a)))},u=e=>new Promise(t=>{(new google.maps.Geocoder).geocode({address:e},(e,s)=>{"OK"===s&&e&&e[0]?t(e[0].geometry.location):t(null)})});return i?Fr.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center p-8",children:[Fr.jsx(fc,{className:"h-12 w-12 text-red-500 mb-4"}),Fr.jsx("h3",{className:"text-lg font-medium text-gray-700 mb-2",children:"Erreur de chargement"}),Fr.jsx("p",{className:"text-gray-500",children:i})]}):r?Fr.jsx("div",{ref:t,className:"w-full h-full"}):Fr.jsxs("div",{className:"flex flex-col items-center justify-center h-full",children:[Fr.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-red-600 border-t-transparent rounded-full mb-4"}),Fr.jsx("p",{className:"text-gray-600",children:"Chargement de la carte..."})]})}function ng(){const[e,t]=hr.useState(null),[s,n]=hr.useState(!1),{toast:r}=Ui(),{data:a,isLoading:i}=Pi({queryKey:["/api/admin/users"],select:e=>(e||[]).filter(e=>e.address&&e.city&&"user"===e.role)});hr.useEffect(()=>{"undefined"!=typeof window&&(null==a?void 0:a.length)>0&&o()},[a]);const o=()=>{n(!0)},{totalClients:l,citiesCount:c,companiesCount:d}={totalClients:(null==a?void 0:a.length)||0,citiesCount:new Set(null==a?void 0:a.map(e=>e.city)).size,companiesCount:null==a?void 0:a.filter(e=>e.companyName).length},u=(null==a?void 0:a.reduce((e,t)=>{const s=t.city;return e[s]||(e[s]=[]),e[s].push(t),e},{}))||{};return i?Fr.jsx("div",{className:"flex items-center justify-center h-64",children:Fr.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-red-600 border-t-transparent rounded-full"})}):Fr.jsxs("div",{className:"space-y-6",children:[Fr.jsxs(nf,{children:[Fr.jsxs(rf,{children:[Fr.jsxs(af,{className:"flex items-center gap-2",children:[Fr.jsx(fc,{className:"h-5 w-5 text-red-600"}),"Répartition Géographique des Clients"]}),Fr.jsx(of,{children:"Visualisation des adresses d'entreprises de vos clients"})]}),Fr.jsxs(lf,{children:[Fr.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[Fr.jsx("div",{className:"bg-blue-50 p-4 rounded-lg",children:Fr.jsxs("div",{className:"flex items-center justify-between",children:[Fr.jsxs("div",{children:[Fr.jsx("p",{className:"text-sm text-blue-600",children:"Total Clients"}),Fr.jsx("p",{className:"text-2xl font-bold text-blue-700",children:l})]}),Fr.jsx(zc,{className:"h-8 w-8 text-blue-500"})]})}),Fr.jsx("div",{className:"bg-green-50 p-4 rounded-lg",children:Fr.jsxs("div",{className:"flex items-center justify-between",children:[Fr.jsxs("div",{children:[Fr.jsx("p",{className:"text-sm text-green-600",children:"Villes Couvertes"}),Fr.jsx("p",{className:"text-2xl font-bold text-green-700",children:c})]}),Fr.jsx(fc,{className:"h-8 w-8 text-green-500"})]})}),Fr.jsx("div",{className:"bg-purple-50 p-4 rounded-lg",children:Fr.jsxs("div",{className:"flex items-center justify-between",children:[Fr.jsxs("div",{children:[Fr.jsx("p",{className:"text-sm text-purple-600",children:"Entreprises"}),Fr.jsx("p",{className:"text-2xl font-bold text-purple-700",children:d})]}),Fr.jsx(Sc,{className:"h-8 w-8 text-purple-500"})]})})]}),Fr.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden mb-6",children:[Fr.jsxs("div",{className:"p-4 border-b border-gray-200",children:[Fr.jsxs("h3",{className:"text-lg font-semibold text-gray-800 flex items-center gap-2",children:[Fr.jsx(fc,{className:"h-5 w-5 text-red-600"}),"Carte Interactive des Clients"]}),Fr.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Localisation géographique des entreprises clientes"})]}),Fr.jsx("div",{id:"google-map",className:"w-full h-96 bg-gray-100 flex items-center justify-center",children:a&&a.length>0?Fr.jsx(sg,{clients:a}):Fr.jsxs("div",{className:"text-center",children:[Fr.jsx(fc,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),Fr.jsx("p",{className:"text-gray-500",children:"Aucune adresse client disponible pour la cartographie"})]})})]}),Fr.jsxs("div",{className:"space-y-4",children:[Fr.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Répartition par Ville"}),Fr.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Object.entries(u).map(([e,t])=>Fr.jsxs(nf,{className:"border-l-4 border-l-red-500",children:[Fr.jsx(rf,{className:"pb-2",children:Fr.jsxs(af,{className:"text-lg flex items-center justify-between",children:[e,Fr.jsx(Hx,{variant:"secondary",children:t.length})]})}),Fr.jsx(lf,{children:Fr.jsxs("div",{className:"space-y-2",children:[t.slice(0,3).map(e=>Fr.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[Fr.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full"}),Fr.jsxs("div",{className:"flex-1",children:[Fr.jsx("div",{className:"font-medium",children:e.companyName||`${e.firstName} ${e.lastName}`}),Fr.jsx("div",{className:"text-gray-500 text-xs",children:e.address})]})]},e.id)),t.length>3&&Fr.jsxs("div",{className:"text-xs text-gray-500 mt-2",children:["+",t.length-3," autres clients"]})]})})]},e))})]})]})]}),Fr.jsxs(nf,{children:[Fr.jsx(rf,{children:Fr.jsx(af,{children:"Liste Détaillée des Adresses"})}),Fr.jsx(lf,{children:Fr.jsx("div",{className:"rounded-md border",children:Fr.jsxs(Gv,{children:[Fr.jsx(Yv,{children:Fr.jsxs(Xv,{children:[Fr.jsx(eg,{children:"Client"}),Fr.jsx(eg,{children:"Entreprise"}),Fr.jsx(eg,{children:"Adresse Complète"}),Fr.jsx(eg,{children:"Contact"})]})}),Fr.jsx(Jv,{children:null==a?void 0:a.map(e=>Fr.jsxs(Xv,{children:[Fr.jsxs(tg,{children:[Fr.jsxs("div",{className:"font-medium",children:[e.firstName," ",e.lastName]}),Fr.jsx("div",{className:"text-sm text-gray-500",children:e.email})]}),Fr.jsx(tg,{children:e.companyName?Fr.jsxs("div",{children:[Fr.jsx("div",{className:"font-medium",children:e.companyName}),e.siret&&Fr.jsxs("div",{className:"text-sm text-gray-500",children:["SIRET: ",e.siret]})]}):Fr.jsx("span",{className:"text-gray-400",children:"Particulier"})}),Fr.jsx(tg,{children:Fr.jsxs("div",{className:"space-y-1",children:[Fr.jsx("div",{children:e.address}),Fr.jsxs("div",{className:"text-sm text-gray-500",children:[e.postalCode," ",e.city]})]})}),Fr.jsx(tg,{children:e.phone&&Fr.jsxs("div",{className:"flex items-center gap-1 text-sm",children:[Fr.jsx(bc,{className:"h-3 w-3"}),e.phone]})})]},e.id))})]})})})]})]})}function rg(){const[e,t]=hr.useState(""),[s,n]=hr.useState("all"),[r,a]=hr.useState("all"),[i,o]=hr.useState(null),[l,c]=hr.useState(!1),[d,u]=hr.useState(!1),{toast:m}=Ui(),{data:p,isLoading:h,refetch:x}=Pi({queryKey:["/api/admin/users"],select:e=>e||[]}),f=Ei({mutationFn:async e=>(await Oi("POST","/api/admin/users",e)).json(),onSuccess:()=>{m({title:"Utilisateur créé",description:"L'utilisateur a été créé avec succès."}),u(!1),x()},onError:e=>{m({title:"Erreur",description:e.message||"Impossible de créer l'utilisateur.",variant:"destructive"})}}),v=Ei({mutationFn:async({userId:e,userData:t})=>(await Oi("PUT",`/api/admin/users/${e}`,t)).json(),onSuccess:()=>{m({title:"Utilisateur mis à jour",description:"Les informations de l'utilisateur ont été mises à jour."}),c(!1),o(null),x()},onError:e=>{m({title:"Erreur",description:e.message||"Impossible de mettre à jour l'utilisateur.",variant:"destructive"})}}),g=Ei({mutationFn:async e=>(await Oi("POST",`/api/admin/users/${e}/verify`,{})).json(),onSuccess:()=>{m({title:"Utilisateur vérifié",description:"L'utilisateur a été vérifié manuellement."}),x()},onError:e=>{m({title:"Erreur",description:e.message||"Impossible de vérifier l'utilisateur.",variant:"destructive"})}}),y=Ei({mutationFn:async e=>{await Oi("DELETE",`/api/admin/users/${e}`)},onSuccess:()=>{m({title:"Utilisateur supprimé",description:"L'utilisateur a été supprimé avec succès."}),x()},onError:e=>{m({title:"Erreur",description:e.message||"Impossible de supprimer l'utilisateur.",variant:"destructive"})}}),b=Ei({mutationFn:async({userId:e,enabled:t})=>(await Oi("PATCH",`/api/admin/users/${e}/notifications`,{notifyOnInactivity:t})).json(),onSuccess:()=>{m({title:"Paramètres mis à jour",description:"Les paramètres de notification ont été modifiés."}),x()},onError:e=>{m({title:"Erreur",description:e.message||"Impossible de modifier les paramètres de notification.",variant:"destructive"})}}),j=(null==p?void 0:p.filter(t=>{var n,a,i,o;const l=(null==(n=t.email)?void 0:n.toLowerCase().includes(e.toLowerCase()))||(null==(a=t.firstName)?void 0:a.toLowerCase().includes(e.toLowerCase()))||(null==(i=t.lastName)?void 0:i.toLowerCase().includes(e.toLowerCase()))||(null==(o=t.companyName)?void 0:o.toLowerCase().includes(e.toLowerCase())),c="all"===s||t.role===s,d="all"===r||"verified"===r&&t.isVerified||"unverified"===r&&!t.isVerified||"active"===r&&t.isActive||"inactive"===r&&!t.isActive;return l&&c&&d}))||[],N=e=>{switch(e){case"admin":return"bg-red-100 text-red-800";case"user":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}},w=e=>{switch(e){case"admin":return"Administrateur";case"user":return"Utilisateur";default:return e}};return h?Fr.jsx("div",{className:"flex items-center justify-center h-64",children:Fr.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-red-600 border-t-transparent rounded-full"})}):Fr.jsxs(nf,{children:[Fr.jsx(rf,{children:Fr.jsxs("div",{className:"flex justify-between items-center",children:[Fr.jsxs("div",{children:[Fr.jsxs(af,{className:"flex items-center gap-2",children:[Fr.jsx(zc,{className:"h-5 w-5 text-red-600"}),"Gestion des Utilisateurs"]}),Fr.jsxs(of,{children:["Gérez tous les comptes utilisateurs - Total: ",(null==p?void 0:p.length)||0," utilisateurs"]})]}),Fr.jsxs("div",{className:"flex gap-2",children:[Fr.jsxs(Lp,{onClick:()=>{window.open("/api/admin/users/export","_blank")},variant:"outline",className:"border-green-600 text-green-600 hover:bg-green-50",children:[Fr.jsx(ac,{className:"h-4 w-4 mr-2"}),"Exporter Excel"]}),Fr.jsxs(Lp,{onClick:()=>u(!0),className:"bg-red-600 hover:bg-red-700",children:[Fr.jsx(jc,{className:"h-4 w-4 mr-2"}),"Créer un utilisateur"]})]})]})}),Fr.jsxs(lf,{children:[Fr.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[Fr.jsx("div",{className:"flex-1",children:Fr.jsxs("div",{className:"relative",children:[Fr.jsx(Cc,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),Fr.jsx(zx,{placeholder:"Rechercher par email, nom, entreprise...",value:e,onChange:e=>t(e.target.value),className:"pl-10"})]})}),Fr.jsxs("div",{className:"flex gap-2",children:[Fr.jsxs(Bv,{value:s,onValueChange:n,children:[Fr.jsx(Wv,{className:"w-48",children:Fr.jsx($v,{placeholder:"Filtrer par rôle"})}),Fr.jsxs(Hv,{children:[Fr.jsx(Zv,{value:"all",children:"Tous les rôles"}),Fr.jsx(Zv,{value:"admin",children:"Administrateurs"}),Fr.jsx(Zv,{value:"user",children:"Utilisateurs"})]})]}),Fr.jsxs(Bv,{value:r,onValueChange:a,children:[Fr.jsx(Wv,{className:"w-48",children:Fr.jsx($v,{placeholder:"Filtrer par statut"})}),Fr.jsxs(Hv,{children:[Fr.jsx(Zv,{value:"all",children:"Tous les statuts"}),Fr.jsx(Zv,{value:"verified",children:"Vérifiés"}),Fr.jsx(Zv,{value:"unverified",children:"Non vérifiés"}),Fr.jsx(Zv,{value:"active",children:"Actifs"}),Fr.jsx(Zv,{value:"inactive",children:"Inactifs"})]})]})]})]}),Fr.jsx("div",{className:"rounded-md border",children:Fr.jsxs(Gv,{children:[Fr.jsx(Yv,{children:Fr.jsxs(Xv,{children:[Fr.jsx(eg,{children:"Utilisateur"}),Fr.jsx(eg,{children:"Contact"}),Fr.jsx(eg,{children:"Entreprise"}),Fr.jsx(eg,{children:"Rôle"}),Fr.jsx(eg,{children:"Statut"}),Fr.jsx(eg,{children:"Notifications"}),Fr.jsx(eg,{children:"Inscription"}),Fr.jsx(eg,{children:"Actions"})]})}),Fr.jsx(Jv,{children:j.map(e=>Fr.jsxs(Xv,{children:[Fr.jsx(tg,{children:Fr.jsxs("div",{className:"flex items-center gap-3",children:[Fr.jsx("div",{className:"w-8 h-8 bg-red-100 rounded-full flex items-center justify-center",children:Fr.jsx(zc,{className:"h-4 w-4 text-red-600"})}),Fr.jsxs("div",{children:[Fr.jsxs("div",{className:"font-medium",children:[e.firstName," ",e.lastName]}),Fr.jsx("div",{className:"text-sm text-gray-500",children:e.email})]})]})}),Fr.jsx(tg,{children:Fr.jsxs("div",{className:"space-y-1",children:[e.phone&&Fr.jsxs("div",{className:"flex items-center gap-1 text-sm",children:[Fr.jsx(bc,{className:"h-3 w-3"}),e.phone]}),e.address&&Fr.jsxs("div",{className:"flex items-center gap-1 text-sm text-gray-500",children:[Fr.jsx(fc,{className:"h-3 w-3"}),e.city]})]})}),Fr.jsx(tg,{children:e.companyName?Fr.jsxs("div",{children:[Fr.jsx("div",{className:"font-medium",children:e.companyName}),e.siret&&Fr.jsxs("div",{className:"text-sm text-gray-500",children:["SIRET: ",e.siret]})]}):Fr.jsx("span",{className:"text-gray-400",children:"Particulier"})}),Fr.jsx(tg,{children:Fr.jsx(Hx,{className:N(e.role),children:w(e.role)})}),Fr.jsx(tg,{children:Fr.jsxs("div",{className:"space-y-1",children:[Fr.jsx(Hx,{variant:e.isVerified?"default":"destructive",children:e.isVerified?Fr.jsxs(Fr.Fragment,{children:[Fr.jsx(Mc,{className:"h-3 w-3 mr-1"}),"Vérifié"]}):Fr.jsxs(Fr.Fragment,{children:[Fr.jsx(Lc,{className:"h-3 w-3 mr-1"}),"Non vérifié"]})}),Fr.jsx(Hx,{variant:e.isActive?"default":"secondary",children:e.isActive?Fr.jsxs(Fr.Fragment,{children:[Fr.jsx(mc,{className:"h-3 w-3 mr-1"}),"Actif"]}):Fr.jsxs(Fr.Fragment,{children:[Fr.jsx(pc,{className:"h-3 w-3 mr-1"}),"Inactif"]})})]})}),Fr.jsx(tg,{children:Fr.jsxs("div",{className:"flex items-center gap-3",children:[Fr.jsxs("div",{className:"flex items-center gap-2",children:[e.notifyOnInactivity?Fr.jsx(El,{className:"h-4 w-4 text-green-600"}):Fr.jsx(Pl,{className:"h-4 w-4 text-gray-400"}),Fr.jsx(Nf,{checked:e.notifyOnInactivity||!1,onCheckedChange:t=>b.mutate({userId:e.id,enabled:t}),disabled:b.isPending})]}),Fr.jsx("span",{className:"text-xs text-gray-500",children:e.notifyOnInactivity?"Activées":"Désactivées"})]})}),Fr.jsx(tg,{children:Fr.jsxs("div",{className:"flex items-center gap-1 text-sm text-gray-500",children:[Fr.jsx(Il,{className:"h-3 w-3"}),new Date(e.createdAt).toLocaleDateString()]})}),Fr.jsx(tg,{children:Fr.jsxs("div",{className:"flex items-center gap-2",children:[!e.isVerified&&Fr.jsxs(Lp,{size:"sm",variant:"outline",onClick:()=>g.mutate(e.id),disabled:g.isPending,children:[Fr.jsx(Mc,{className:"h-3 w-3 mr-1"}),"Vérifier"]}),Fr.jsxs(Lp,{size:"sm",variant:"outline",onClick:()=>{o(e),c(!0)},children:[Fr.jsx(Dc,{className:"h-3 w-3 mr-1"}),"Modifier"]}),Fr.jsxs(Lp,{size:"sm",variant:"outline",onClick:()=>{confirm(`Êtes-vous sûr de vouloir supprimer l'utilisateur ${e.email} ?`)&&y.mutate(e.id)},disabled:y.isPending,children:[Fr.jsx(Ac,{className:"h-3 w-3 mr-1"}),"Supprimer"]})]})})]},e.id))})]})}),0===j.length&&Fr.jsx("div",{className:"text-center py-8 text-gray-500",children:"Aucun utilisateur trouvé avec les critères sélectionnés"})]}),Fr.jsx(Ax,{open:d,onOpenChange:u,children:Fr.jsxs(Ix,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[Fr.jsxs(Mx,{children:[Fr.jsx(Lx,{children:"Créer un nouvel utilisateur"}),Fr.jsx(qx,{children:"Créez un nouveau compte utilisateur avec tous les détails nécessaires."})]}),Fr.jsxs("form",{onSubmit:e=>{e.preventDefault();const t=new FormData(e.target),s={email:t.get("email"),password:t.get("password"),firstName:t.get("firstName"),lastName:t.get("lastName"),phone:t.get("phone"),role:t.get("role"),companyName:t.get("companyName"),siret:t.get("siret"),address:t.get("address"),city:t.get("city"),postalCode:t.get("postalCode"),isVerified:"on"===t.get("isVerified"),isActive:"on"===t.get("isActive")};f.mutate(s)},className:"space-y-4",children:[Fr.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[Fr.jsxs("div",{className:"space-y-2",children:[Fr.jsx("label",{className:"text-sm font-medium",children:"Email *"}),Fr.jsx(zx,{name:"email",type:"email",required:!0})]}),Fr.jsxs("div",{className:"space-y-2",children:[Fr.jsx("label",{className:"text-sm font-medium",children:"Mot de passe *"}),Fr.jsx(zx,{name:"password",type:"password",required:!0})]}),Fr.jsxs("div",{className:"space-y-2",children:[Fr.jsx("label",{className:"text-sm font-medium",children:"Prénom *"}),Fr.jsx(zx,{name:"firstName",required:!0})]}),Fr.jsxs("div",{className:"space-y-2",children:[Fr.jsx("label",{className:"text-sm font-medium",children:"Nom *"}),Fr.jsx(zx,{name:"lastName",required:!0})]}),Fr.jsxs("div",{className:"space-y-2",children:[Fr.jsx("label",{className:"text-sm font-medium",children:"Téléphone"}),Fr.jsx(zx,{name:"phone"})]}),Fr.jsxs("div",{className:"space-y-2",children:[Fr.jsx("label",{className:"text-sm font-medium",children:"Rôle"}),Fr.jsxs(Bv,{name:"role",defaultValue:"user",children:[Fr.jsx(Wv,{children:Fr.jsx($v,{})}),Fr.jsxs(Hv,{children:[Fr.jsx(Zv,{value:"user",children:"Utilisateur"}),Fr.jsx(Zv,{value:"admin",children:"Administrateur"})]})]})]})]}),Fr.jsxs("div",{className:"space-y-4",children:[Fr.jsx("h4",{className:"font-medium",children:"Informations entreprise"}),Fr.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[Fr.jsxs("div",{className:"space-y-2",children:[Fr.jsx("label",{className:"text-sm font-medium",children:"Nom de l'entreprise"}),Fr.jsx(zx,{name:"companyName"})]}),Fr.jsxs("div",{className:"space-y-2",children:[Fr.jsx("label",{className:"text-sm font-medium",children:"SIRET"}),Fr.jsx(zx,{name:"siret"})]})]}),Fr.jsxs("div",{className:"space-y-2",children:[Fr.jsx("label",{className:"text-sm font-medium",children:"Adresse"}),Fr.jsx(zx,{name:"address"})]}),Fr.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[Fr.jsxs("div",{className:"space-y-2",children:[Fr.jsx("label",{className:"text-sm font-medium",children:"Ville"}),Fr.jsx(zx,{name:"city"})]}),Fr.jsxs("div",{className:"space-y-2",children:[Fr.jsx("label",{className:"text-sm font-medium",children:"Code postal"}),Fr.jsx(zx,{name:"postalCode"})]})]})]}),Fr.jsxs("div",{className:"space-y-4",children:[Fr.jsx("h4",{className:"font-medium",children:"Paramètres du compte"}),Fr.jsxs("div",{className:"flex items-center space-x-4",children:[Fr.jsxs("div",{className:"flex items-center space-x-2",children:[Fr.jsx("input",{type:"checkbox",name:"isVerified",className:"rounded",defaultChecked:!0}),Fr.jsx("label",{className:"text-sm font-medium",children:"Compte vérifié"})]}),Fr.jsxs("div",{className:"flex items-center space-x-2",children:[Fr.jsx("input",{type:"checkbox",name:"isActive",className:"rounded",defaultChecked:!0}),Fr.jsx("label",{className:"text-sm font-medium",children:"Compte actif"})]})]})]}),Fr.jsxs("div",{className:"flex justify-end space-x-2",children:[Fr.jsx(Lp,{type:"button",variant:"outline",onClick:()=>u(!1),children:"Annuler"}),Fr.jsx(Lp,{type:"submit",disabled:f.isPending,children:f.isPending?"Création...":"Créer l'utilisateur"})]})]})]})}),Fr.jsx(Ax,{open:l,onOpenChange:c,children:Fr.jsxs(Ix,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[Fr.jsxs(Mx,{children:[Fr.jsx(Lx,{children:"Modifier l'utilisateur"}),Fr.jsxs(qx,{children:["Modifiez les informations de l'utilisateur ",null==i?void 0:i.email,"."]})]}),i&&Fr.jsxs("form",{onSubmit:e=>{if(e.preventDefault(),!i)return;const t=new FormData(e.target),s={email:t.get("email"),firstName:t.get("firstName"),lastName:t.get("lastName"),phone:t.get("phone"),role:t.get("role"),companyName:t.get("companyName"),siret:t.get("siret"),address:t.get("address"),city:t.get("city"),postalCode:t.get("postalCode"),isVerified:"on"===t.get("isVerified"),isActive:"on"===t.get("isActive")};v.mutate({userId:i.id,userData:s})},className:"space-y-4",children:[Fr.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[Fr.jsxs("div",{className:"space-y-2",children:[Fr.jsx("label",{className:"text-sm font-medium",children:"Email *"}),Fr.jsx(zx,{name:"email",type:"email",defaultValue:i.email,required:!0})]}),Fr.jsxs("div",{className:"space-y-2",children:[Fr.jsx("label",{className:"text-sm font-medium",children:"Prénom *"}),Fr.jsx(zx,{name:"firstName",defaultValue:i.firstName,required:!0})]}),Fr.jsxs("div",{className:"space-y-2",children:[Fr.jsx("label",{className:"text-sm font-medium",children:"Nom *"}),Fr.jsx(zx,{name:"lastName",defaultValue:i.lastName,required:!0})]}),Fr.jsxs("div",{className:"space-y-2",children:[Fr.jsx("label",{className:"text-sm font-medium",children:"Téléphone"}),Fr.jsx(zx,{name:"phone",defaultValue:i.phone})]}),Fr.jsxs("div",{className:"space-y-2",children:[Fr.jsx("label",{className:"text-sm font-medium",children:"Rôle"}),Fr.jsxs(Bv,{name:"role",defaultValue:i.role,children:[Fr.jsx(Wv,{children:Fr.jsx($v,{})}),Fr.jsxs(Hv,{children:[Fr.jsx(Zv,{value:"user",children:"Utilisateur"}),Fr.jsx(Zv,{value:"admin",children:"Administrateur"})]})]})]})]}),Fr.jsxs("div",{className:"space-y-4",children:[Fr.jsx("h4",{className:"font-medium",children:"Informations entreprise"}),Fr.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[Fr.jsxs("div",{className:"space-y-2",children:[Fr.jsx("label",{className:"text-sm font-medium",children:"Nom de l'entreprise"}),Fr.jsx(zx,{name:"companyName",defaultValue:i.companyName})]}),Fr.jsxs("div",{className:"space-y-2",children:[Fr.jsx("label",{className:"text-sm font-medium",children:"SIRET"}),Fr.jsx(zx,{name:"siret",defaultValue:i.siret})]})]}),Fr.jsxs("div",{className:"space-y-2",children:[Fr.jsx("label",{className:"text-sm font-medium",children:"Adresse"}),Fr.jsx(zx,{name:"address",defaultValue:i.address})]}),Fr.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[Fr.jsxs("div",{className:"space-y-2",children:[Fr.jsx("label",{className:"text-sm font-medium",children:"Ville"}),Fr.jsx(zx,{name:"city",defaultValue:i.city})]}),Fr.jsxs("div",{className:"space-y-2",children:[Fr.jsx("label",{className:"text-sm font-medium",children:"Code postal"}),Fr.jsx(zx,{name:"postalCode",defaultValue:i.postalCode})]})]})]}),Fr.jsxs("div",{className:"space-y-4",children:[Fr.jsx("h4",{className:"font-medium",children:"Paramètres du compte"}),Fr.jsxs("div",{className:"flex items-center space-x-4",children:[Fr.jsxs("div",{className:"flex items-center space-x-2",children:[Fr.jsx("input",{type:"checkbox",name:"isVerified",className:"rounded",defaultChecked:i.isVerified}),Fr.jsx("label",{className:"text-sm font-medium",children:"Compte vérifié"})]}),Fr.jsxs("div",{className:"flex items-center space-x-2",children:[Fr.jsx("input",{type:"checkbox",name:"isActive",className:"rounded",defaultChecked:i.isActive}),Fr.jsx("label",{className:"text-sm font-medium",children:"Compte actif"})]})]})]}),Fr.jsxs("div",{className:"flex justify-end space-x-2",children:[Fr.jsx(Lp,{type:"button",variant:"outline",onClick:()=>c(!1),children:"Annuler"}),Fr.jsx(Lp,{type:"submit",disabled:v.isPending,children:v.isPending?"Mise à jour...":"Mettre à jour"})]})]})]})})]})}function ag({allOrders:e}){const[t,s]=hr.useState("all"),[n,r]=hr.useState(""),[a,i]=hr.useState(null),{toast:o}=Ui(),l=Ei({mutationFn:async({orderId:e,newStatus:t})=>{await Oi("PUT",`/api/admin/orders/${e}/status`,{status:t})},onSuccess:()=>{Ri.invalidateQueries({queryKey:["/api/admin/orders"]}),Ri.invalidateQueries({queryKey:["/api/admin/stats"]}),o({title:"Statut mis à jour",description:"Le statut de la commande a été mis à jour avec succès."})},onError:e=>{o({title:"Erreur",description:"Impossible de mettre à jour le statut de la commande.",variant:"destructive"})}}),c=(null==e?void 0:e.filter(e=>{var s,r,a,i;const o="all"===t||e.status===t,l=(null==(s=e.orderNumber)?void 0:s.toLowerCase().includes(n.toLowerCase()))||(null==(r=e.customerFirstName)?void 0:r.toLowerCase().includes(n.toLowerCase()))||(null==(a=e.customerLastName)?void 0:a.toLowerCase().includes(n.toLowerCase()))||(null==(i=e.customerEmail)?void 0:i.toLowerCase().includes(n.toLowerCase()));return o&&l}))||[],d=e=>{switch(e){case"delivered":return"bg-green-100 text-green-800";case"confirmed":return"bg-blue-100 text-blue-800";case"pending":return"bg-yellow-100 text-yellow-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},u=e=>{switch(e){case"delivered":return"Livrée";case"confirmed":return"Confirmée";case"pending":return"En attente";case"cancelled":return"Annulée";default:return e}};return Fr.jsxs(nf,{children:[Fr.jsx(rf,{children:Fr.jsx("div",{className:"flex justify-between items-center",children:Fr.jsxs("div",{children:[Fr.jsxs(af,{className:"flex items-center gap-2",children:[Fr.jsx(Pc,{className:"h-5 w-5 text-red-600"}),"Gestion des Commandes"]}),Fr.jsxs(of,{children:["Gérez toutes les commandes de bennes - Total: ",(null==e?void 0:e.length)||0," commandes"]})]})})}),Fr.jsxs(lf,{children:[Fr.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[Fr.jsx("div",{className:"flex-1",children:Fr.jsxs("div",{className:"relative",children:[Fr.jsx(Cc,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),Fr.jsx(zx,{placeholder:"Rechercher par numéro, nom, email...",value:n,onChange:e=>r(e.target.value),className:"pl-10"})]})}),Fr.jsx("div",{className:"flex gap-2",children:Fr.jsxs(Bv,{value:t,onValueChange:s,children:[Fr.jsx(Wv,{className:"w-48",children:Fr.jsx($v,{placeholder:"Filtrer par statut"})}),Fr.jsxs(Hv,{children:[Fr.jsx(Zv,{value:"all",children:"Tous les statuts"}),Fr.jsx(Zv,{value:"pending",children:"En attente"}),Fr.jsx(Zv,{value:"confirmed",children:"Confirmées"}),Fr.jsx(Zv,{value:"delivered",children:"Livrées"}),Fr.jsx(Zv,{value:"cancelled",children:"Annulées"})]})]})})]}),Fr.jsx("div",{className:"rounded-md border",children:Fr.jsxs(Gv,{children:[Fr.jsx(Yv,{children:Fr.jsxs(Xv,{children:[Fr.jsx(eg,{children:"Numéro"}),Fr.jsx(eg,{children:"Client"}),Fr.jsx(eg,{children:"Adresse"}),Fr.jsx(eg,{children:"Montant"}),Fr.jsx(eg,{children:"Paiement"}),Fr.jsx(eg,{children:"Statut"}),Fr.jsx(eg,{children:"Date"}),Fr.jsx(eg,{children:"Actions"})]})}),Fr.jsx(Jv,{children:c.length>0?c.map(e=>Fr.jsxs(Xv,{children:[Fr.jsx(tg,{className:"font-medium",children:e.orderNumber}),Fr.jsx(tg,{children:Fr.jsxs("div",{children:[Fr.jsxs("p",{className:"font-medium",children:[e.customerFirstName," ",e.customerLastName]}),Fr.jsx("p",{className:"text-sm text-gray-500",children:e.customerEmail})]})}),Fr.jsx(tg,{children:Fr.jsxs("div",{children:[Fr.jsx("p",{children:e.deliveryStreet}),Fr.jsxs("p",{className:"text-sm text-gray-500",children:[e.deliveryPostalCode," ",e.deliveryCity]})]})}),Fr.jsxs(tg,{className:"font-medium",children:[e.totalTTC,"€"]}),Fr.jsx(tg,{children:Fr.jsx(Hx,{variant:"paid"===e.paymentStatus?"default":"secondary",children:"paid"===e.paymentStatus?"Payé":e.paymentStatus})}),Fr.jsx(tg,{children:Fr.jsx(Hx,{className:d(e.status),children:u(e.status)})}),Fr.jsx(tg,{children:new Date(e.createdAt).toLocaleDateString("fr-FR")}),Fr.jsx(tg,{children:Fr.jsx("div",{className:"flex gap-2",children:Fr.jsxs(Ax,{children:[Fr.jsx(Ox,{asChild:!0,children:Fr.jsx(Lp,{variant:"outline",size:"sm",onClick:()=>i(e),children:Fr.jsx(nc,{className:"h-4 w-4"})})}),Fr.jsxs(Ix,{className:"max-w-2xl",children:[Fr.jsx(Mx,{children:Fr.jsxs(Lx,{children:["Détails de la commande ",e.orderNumber]})}),Fr.jsx(ig,{order:e,onStatusUpdate:l})]})]})})})]},e.id)):Fr.jsx(Xv,{children:Fr.jsx(tg,{colSpan:8,className:"text-center py-8",children:Fr.jsxs("div",{className:"flex flex-col items-center gap-2",children:[Fr.jsx(Pc,{className:"h-8 w-8 text-gray-400"}),Fr.jsx("p",{className:"text-gray-500",children:n||"all"!==t?"Aucune commande ne correspond aux critères de recherche":"Aucune commande trouvée"})]})})})})]})})]})]})}function ig({order:e,onStatusUpdate:t,isAdmin:s=!1}){var n;const[r,a]=hr.useState(e.status);return Fr.jsxs("div",{className:"space-y-6",children:[Fr.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[Fr.jsxs("div",{children:[Fr.jsx("h3",{className:"font-semibold mb-2",children:"Informations Client"}),Fr.jsxs("div",{className:"space-y-2 text-sm",children:[Fr.jsxs("p",{children:[Fr.jsx("span",{className:"font-medium",children:"Nom:"})," ",e.customerFirstName," ",e.customerLastName]}),Fr.jsxs("p",{children:[Fr.jsx("span",{className:"font-medium",children:"Email:"})," ",e.customerEmail]}),Fr.jsxs("p",{children:[Fr.jsx("span",{className:"font-medium",children:"Téléphone:"})," ",e.customerPhone]})]})]}),Fr.jsxs("div",{children:[Fr.jsx("h3",{className:"font-semibold mb-2",children:"Adresse de Livraison"}),Fr.jsxs("div",{className:"space-y-2 text-sm",children:[Fr.jsx("p",{children:e.deliveryStreet}),Fr.jsxs("p",{children:[e.deliveryPostalCode," ",e.deliveryCity]}),Fr.jsx("p",{children:e.deliveryCountry}),e.deliveryNotes&&Fr.jsxs("p",{children:[Fr.jsx("span",{className:"font-medium",children:"Notes:"})," ",e.deliveryNotes]})]})]})]}),Fr.jsxs("div",{children:[Fr.jsx("h3",{className:"font-semibold mb-2",children:"Détails de la Commande"}),Fr.jsxs("div",{className:"space-y-2 text-sm",children:[Fr.jsxs("p",{children:[Fr.jsx("span",{className:"font-medium",children:"Numéro:"})," ",e.orderNumber]}),Fr.jsxs("p",{children:[Fr.jsx("span",{className:"font-medium",children:"Durée:"})," ",e.durationDays," jours"]}),Fr.jsxs("p",{children:[Fr.jsx("span",{className:"font-medium",children:"Types de déchets:"})," ",null==(n=e.wasteTypes)?void 0:n.join(", ")]}),Fr.jsxs("p",{children:[Fr.jsx("span",{className:"font-medium",children:"Date de création:"})," ",new Date(e.createdAt).toLocaleString("fr-FR")]})]})]}),Fr.jsxs("div",{children:[Fr.jsx("h3",{className:"font-semibold mb-2",children:"Détails Financiers"}),Fr.jsxs("div",{className:"space-y-2 text-sm",children:[Fr.jsxs("p",{children:[Fr.jsx("span",{className:"font-medium",children:"Prix de base:"})," ",e.basePrice,"€"]}),Fr.jsxs("p",{children:[Fr.jsx("span",{className:"font-medium",children:"Prix durée:"})," ",e.durationPrice,"€"]}),Fr.jsxs("p",{children:[Fr.jsx("span",{className:"font-medium",children:"Frais de livraison:"})," ",e.deliveryFee,"€"]}),Fr.jsxs("p",{children:[Fr.jsx("span",{className:"font-medium",children:"Total HT:"})," ",e.totalHT,"€"]}),Fr.jsxs("p",{children:[Fr.jsx("span",{className:"font-medium",children:"TVA:"})," ",e.vat,"€"]}),Fr.jsxs("p",{className:"font-bold",children:[Fr.jsx("span",{className:"font-medium",children:"Total TTC:"})," ",e.totalTTC,"€"]})]})]}),s&&Fr.jsxs("div",{className:"border-t pt-4",children:[Fr.jsx("h3",{className:"font-semibold mb-2",children:"Gestion du Statut"}),Fr.jsxs("div",{className:"flex items-center gap-4",children:[Fr.jsxs(Bv,{value:r,onValueChange:a,children:[Fr.jsx(Wv,{className:"w-48",children:Fr.jsx($v,{})}),Fr.jsxs(Hv,{children:[Fr.jsx(Zv,{value:"pending",children:"En attente"}),Fr.jsx(Zv,{value:"confirmed",children:"Confirmée"}),Fr.jsx(Zv,{value:"delivered",children:"Livrée"}),Fr.jsx(Zv,{value:"cancelled",children:"Annulée"})]})]}),Fr.jsx(Lp,{onClick:()=>{r!==e.status&&t.mutate({orderId:e.id,newStatus:r})},disabled:r===e.status||t.isPending,className:"bg-red-600 hover:bg-red-700",children:t.isPending?"Mise à jour...":"Mettre à jour"})]})]}),s&&Fr.jsxs("div",{className:"border-t pt-4",children:[Fr.jsx("h3",{className:"font-semibold mb-4",children:"Gestion Post-Commande"}),Fr.jsx(tf,{order:e})]})]})}function og(){var e;const{user:t}=Fp(),s="admin"===(null==t?void 0:t.role),{data:n}=Pi({queryKey:["/api/admin/stats"],enabled:s}),{data:r}=Pi({queryKey:["/api/admin/orders"],enabled:s}),{data:a}=Pi({queryKey:["/api/orders/my-orders"],enabled:!s});return Fr.jsxs("div",{className:"space-y-6",children:[Fr.jsxs("div",{children:[Fr.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Tableau de bord"}),Fr.jsxs("p",{className:"text-gray-600",children:["Bienvenue ",null==t?void 0:t.firstName,", voici un aperçu de votre activité"]})]}),s&&Fr.jsxs("div",{className:"space-y-6",children:[Fr.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[Fr.jsxs(nf,{className:"border-red-200",children:[Fr.jsxs(rf,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[Fr.jsx(af,{className:"text-sm font-medium",children:"Commandes Aujourd'hui"}),Fr.jsx(Pc,{className:"h-4 w-4 text-red-600"})]}),Fr.jsxs(lf,{children:[Fr.jsx("div",{className:"text-2xl font-bold text-red-700",children:(null==n?void 0:n.todayOrders)||0}),Fr.jsxs("p",{className:"text-xs text-gray-600",children:[(null==n?void 0:n.ordersGrowth)?n.ordersGrowth>0?`+${n.ordersGrowth}%`:`${n.ordersGrowth}%`:"0%"," par rapport à hier"]})]})]}),Fr.jsxs(nf,{className:"border-red-200",children:[Fr.jsxs(rf,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[Fr.jsx(af,{className:"text-sm font-medium",children:"Chiffre d'Affaires"}),Fr.jsx(tc,{className:"h-4 w-4 text-red-600"})]}),Fr.jsxs(lf,{children:[Fr.jsxs("div",{className:"text-2xl font-bold text-red-700",children:[(null==n?void 0:n.monthlyRevenue)||"0"," €"]}),Fr.jsxs("p",{className:"text-xs text-gray-600",children:[(null==n?void 0:n.revenueGrowth)?n.revenueGrowth>0?`+${n.revenueGrowth}%`:`${n.revenueGrowth}%`:"0%"," par rapport au mois dernier"]})]})]}),Fr.jsxs(nf,{className:"border-red-200",children:[Fr.jsxs(rf,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[Fr.jsx(af,{className:"text-sm font-medium",children:"Bennes Louées"}),Fr.jsx(Fc,{className:"h-4 w-4 text-red-600"})]}),Fr.jsxs(lf,{children:[Fr.jsx("div",{className:"text-2xl font-bold text-red-700",children:(null==n?void 0:n.rentedDumpsters)||0}),Fr.jsx("p",{className:"text-xs text-gray-600",children:"En cours de location"})]})]}),Fr.jsxs(nf,{className:"border-red-200",children:[Fr.jsxs(rf,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[Fr.jsx(af,{className:"text-sm font-medium",children:"Clients Actifs"}),Fr.jsx(zc,{className:"h-4 w-4 text-red-600"})]}),Fr.jsxs(lf,{children:[Fr.jsx("div",{className:"text-2xl font-bold text-red-700",children:(null==n?void 0:n.activeCustomers)||0}),Fr.jsx("p",{className:"text-xs text-gray-600",children:"+12% ce mois-ci"})]})]})]}),Fr.jsx(ag,{allOrders:r})]}),!s&&Fr.jsxs("div",{className:"space-y-6",children:[Fr.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[Fr.jsxs(nf,{className:"border-red-200",children:[Fr.jsx(rf,{children:Fr.jsxs(af,{className:"text-lg flex items-center gap-2",children:[Fr.jsx(Pc,{className:"h-5 w-5 text-red-600"}),"Mes Commandes"]})}),Fr.jsxs(lf,{children:[Fr.jsx("div",{className:"text-3xl font-bold text-red-700",children:(null==a?void 0:a.length)||0}),Fr.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"Commandes passées"})]})]}),Fr.jsxs(nf,{className:"border-red-200",children:[Fr.jsx(rf,{children:Fr.jsxs(af,{className:"text-lg flex items-center gap-2",children:[Fr.jsx(Fc,{className:"h-5 w-5 text-red-600"}),"En Cours"]})}),Fr.jsxs(lf,{children:[Fr.jsx("div",{className:"text-3xl font-bold text-red-700",children:(null==(e=null==a?void 0:a.filter(e=>"active"===e.status))?void 0:e.length)||0}),Fr.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"Locations actives"})]})]}),Fr.jsxs(nf,{className:"border-red-200",children:[Fr.jsx(rf,{children:Fr.jsxs(af,{className:"text-lg flex items-center gap-2",children:[Fr.jsx(gc,{className:"h-5 w-5 text-red-600"}),"Déchets Traités"]})}),Fr.jsxs(lf,{children:[Fr.jsx("div",{className:"text-3xl font-bold text-red-700",children:"2.4t"}),Fr.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"Déchets recyclés"})]})]})]}),Fr.jsxs(nf,{children:[Fr.jsxs(rf,{children:[Fr.jsx(af,{children:"Commandes Récentes"}),Fr.jsx(of,{children:"Vos dernières réservations de bennes"})]}),Fr.jsx(lf,{children:a&&a.length>0?Fr.jsx("div",{className:"space-y-4",children:a.slice(0,5).map(e=>Fr.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[Fr.jsxs("div",{className:"flex items-center space-x-3",children:[Fr.jsx("div",{className:"w-10 h-10 bg-red-100 rounded-lg flex items-center justify-center",children:Fr.jsx(Fc,{className:"h-5 w-5 text-red-600"})}),Fr.jsxs("div",{children:[Fr.jsxs("p",{className:"font-medium",children:["Commande #",e.orderNumber]}),Fr.jsx("p",{className:"text-sm text-gray-500",children:new Date(e.createdAt).toLocaleDateString("fr-FR")})]})]}),Fr.jsxs("div",{className:"text-right",children:[Fr.jsx(Hx,{variant:"completed"===e.status?"default":"secondary",className:"completed"===e.status?"bg-red-100 text-red-700":"",children:"completed"===e.status?"Terminée":"active"===e.status?"En cours":"pending"===e.status?"En attente":e.status}),Fr.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:[e.totalPrice," €"]})]})]},e.id))}):Fr.jsxs("div",{className:"text-center py-8",children:[Fr.jsx(Fc,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),Fr.jsx("p",{className:"text-gray-500",children:"Aucune commande pour le moment"}),Fr.jsx("p",{className:"text-sm text-gray-400",children:"Commencez par réserver votre première benne"})]})})]})]})]})}function lg(){const{user:e}=Fp(),t="admin"===(null==e?void 0:e.role),[s,n]=hr.useState(1),[r,a]=hr.useState(25),[i,o]=hr.useState("all"),[l,c]=hr.useState("all"),[d,u]=hr.useState(""),[m,p]=hr.useState("date_desc"),[h,x]=hr.useState(null),{toast:f}=Ui(),{data:v,isLoading:g}=Pi({queryKey:t?["/api/admin/orders"]:["/api/orders/my-orders"],enabled:!!e}),y=Ei({mutationFn:async({orderId:e,newStatus:t})=>{await Oi("PUT",`/api/admin/orders/${e}/status`,{status:t})},onSuccess:()=>{Ri.invalidateQueries({queryKey:["/api/admin/orders"]}),Ri.invalidateQueries({queryKey:["/api/admin/stats"]}),f({title:"Statut mis à jour",description:"Le statut de la commande a été mis à jour avec succès."})},onError:e=>{f({title:"Erreur",description:"Impossible de mettre à jour le statut de la commande.",variant:"destructive"})}}),b=(null==v?void 0:v.filter(e=>{var t,s,n,r,a;const o="all"===i||e.status===i,c="all"===l||e.paymentStatus===l,u=!d||(null==(t=e.orderNumber)?void 0:t.toLowerCase().includes(d.toLowerCase()))||(null==(s=e.customerFirstName)?void 0:s.toLowerCase().includes(d.toLowerCase()))||(null==(n=e.customerLastName)?void 0:n.toLowerCase().includes(d.toLowerCase()))||(null==(r=e.customerEmail)?void 0:r.toLowerCase().includes(d.toLowerCase()))||(null==(a=e.deliveryCity)?void 0:a.toLowerCase().includes(d.toLowerCase()));return o&&c&&u}))||[],j=[...b].sort((e,t)=>{switch(m){case"date_desc":return new Date(t.createdAt).getTime()-new Date(e.createdAt).getTime();case"date_asc":return new Date(e.createdAt).getTime()-new Date(t.createdAt).getTime();case"amount_desc":return parseFloat(t.totalTTC)-parseFloat(e.totalTTC);case"amount_asc":return parseFloat(e.totalTTC)-parseFloat(t.totalTTC);case"status":return e.status.localeCompare(t.status);default:return 0}}),N=j.length,w=Math.ceil(N/r),k=(s-1)*r,C=j.slice(k,k+r),S=e=>{switch(e){case"delivered":return"bg-green-100 text-green-800";case"confirmed":return"bg-blue-100 text-blue-800";case"pending":return"bg-yellow-100 text-yellow-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},_=e=>{switch(e){case"delivered":return"Livrée";case"confirmed":return"Confirmée";case"pending":return"En attente";case"cancelled":return"Annulée";default:return e}},P=e=>{switch(e){case"paid":return"bg-green-100 text-green-800";case"pending":return"bg-yellow-100 text-yellow-800";case"failed":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return g?Fr.jsx("div",{className:"flex items-center justify-center h-64",children:Fr.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-red-600 border-t-transparent rounded-full"})}):Fr.jsxs("div",{className:"space-y-6",children:[Fr.jsx("div",{className:"flex justify-between items-center",children:Fr.jsxs("div",{children:[Fr.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:t?"Toutes les Commandes":"Mes Commandes"}),Fr.jsxs("p",{className:"text-gray-600",children:["Historique complet - ",N," commande",N>1?"s":""," au total"]})]})}),Fr.jsx(nf,{children:Fr.jsx(lf,{className:"p-6",children:Fr.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 xl:grid-cols-6 gap-4",children:[Fr.jsx("div",{className:"lg:col-span-2",children:Fr.jsxs("div",{className:"relative",children:[Fr.jsx(Cc,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),Fr.jsx(zx,{placeholder:"Rechercher commande, client, ville...",value:d,onChange:e=>u(e.target.value),className:"pl-10"})]})}),Fr.jsxs(Bv,{value:i,onValueChange:o,children:[Fr.jsx(Wv,{children:Fr.jsx($v,{placeholder:"Statut"})}),Fr.jsxs(Hv,{children:[Fr.jsx(Zv,{value:"all",children:"Tous les statuts"}),Fr.jsx(Zv,{value:"pending",children:"En attente"}),Fr.jsx(Zv,{value:"confirmed",children:"Confirmées"}),Fr.jsx(Zv,{value:"delivered",children:"Livrées"}),Fr.jsx(Zv,{value:"cancelled",children:"Annulées"})]})]}),Fr.jsxs(Bv,{value:l,onValueChange:c,children:[Fr.jsx(Wv,{children:Fr.jsx($v,{placeholder:"Paiement"})}),Fr.jsxs(Hv,{children:[Fr.jsx(Zv,{value:"all",children:"Tous les paiements"}),Fr.jsx(Zv,{value:"paid",children:"Payé"}),Fr.jsx(Zv,{value:"pending",children:"En attente"}),Fr.jsx(Zv,{value:"failed",children:"Échoué"})]})]}),Fr.jsxs(Bv,{value:m,onValueChange:p,children:[Fr.jsx(Wv,{children:Fr.jsx($v,{placeholder:"Trier par"})}),Fr.jsxs(Hv,{children:[Fr.jsx(Zv,{value:"date_desc",children:"Plus récent"}),Fr.jsx(Zv,{value:"date_asc",children:"Plus ancien"}),Fr.jsx(Zv,{value:"amount_desc",children:"Montant élevé"}),Fr.jsx(Zv,{value:"amount_asc",children:"Montant faible"}),Fr.jsx(Zv,{value:"status",children:"Statut"})]})]}),Fr.jsxs(Bv,{value:r.toString(),onValueChange:e=>{a(parseInt(e)),n(1)},children:[Fr.jsx(Wv,{children:Fr.jsx($v,{})}),Fr.jsxs(Hv,{children:[Fr.jsx(Zv,{value:"10",children:"10 par page"}),Fr.jsx(Zv,{value:"25",children:"25 par page"}),Fr.jsx(Zv,{value:"50",children:"50 par page"}),Fr.jsx(Zv,{value:"100",children:"100 par page"})]})]})]})})}),Fr.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[Fr.jsx(nf,{children:Fr.jsxs(lf,{className:"p-4",children:[Fr.jsx("div",{className:"text-2xl font-bold text-red-600",children:b.filter(e=>"paid"===e.paymentStatus).length}),Fr.jsx("p",{className:"text-sm text-gray-600",children:"Commandes payées"})]})}),Fr.jsx(nf,{children:Fr.jsxs(lf,{className:"p-4",children:[Fr.jsx("div",{className:"text-2xl font-bold text-blue-600",children:b.filter(e=>"delivered"===e.status).length}),Fr.jsx("p",{className:"text-sm text-gray-600",children:"Bennes livrées"})]})}),Fr.jsx(nf,{children:Fr.jsxs(lf,{className:"p-4",children:[Fr.jsxs("div",{className:"text-2xl font-bold text-green-600",children:[b.reduce((e,t)=>e+parseFloat(t.totalTTC||0),0).toFixed(2),"€"]}),Fr.jsx("p",{className:"text-sm text-gray-600",children:"Chiffre d'affaires"})]})}),Fr.jsx(nf,{children:Fr.jsxs(lf,{className:"p-4",children:[Fr.jsx("div",{className:"text-2xl font-bold text-purple-600",children:new Set(b.map(e=>e.customerEmail)).size}),Fr.jsx("p",{className:"text-sm text-gray-600",children:"Clients uniques"})]})})]}),Fr.jsx(nf,{children:Fr.jsx(lf,{className:"p-0",children:Fr.jsx("div",{className:"overflow-x-auto",children:Fr.jsxs(Gv,{children:[Fr.jsx(Yv,{children:Fr.jsxs(Xv,{children:[Fr.jsx(eg,{children:"Numéro"}),Fr.jsx(eg,{children:"Client"}),Fr.jsx(eg,{children:"Adresse"}),Fr.jsx(eg,{children:"Service"}),Fr.jsx(eg,{children:"Montant"}),Fr.jsx(eg,{children:"Paiement"}),Fr.jsx(eg,{children:"Statut"}),Fr.jsx(eg,{children:"Date"}),Fr.jsx(eg,{children:"Actions"})]})}),Fr.jsx(Jv,{children:C.length>0?C.map(e=>Fr.jsxs(Xv,{children:[Fr.jsx(tg,{className:"font-medium",children:e.orderNumber}),Fr.jsx(tg,{children:Fr.jsxs("div",{children:[Fr.jsxs("p",{className:"font-medium",children:[e.customerFirstName," ",e.customerLastName]}),Fr.jsx("p",{className:"text-sm text-gray-500",children:e.customerEmail}),e.customerPhone&&Fr.jsx("p",{className:"text-sm text-gray-500",children:e.customerPhone})]})}),Fr.jsx(tg,{children:Fr.jsxs("div",{children:[Fr.jsx("p",{children:e.deliveryStreet}),Fr.jsxs("p",{className:"text-sm text-gray-500",children:[e.deliveryPostalCode," ",e.deliveryCity]})]})}),Fr.jsx(tg,{children:Fr.jsxs("div",{children:[Fr.jsxs("p",{className:"font-medium",children:["Service #",e.serviceId]}),Fr.jsxs("p",{className:"text-sm text-gray-500",children:[e.durationDays," jour",e.durationDays>1?"s":""]}),e.wasteTypes&&e.wasteTypes.length>0&&Fr.jsx("p",{className:"text-sm text-gray-500",children:e.wasteTypes.join(", ")})]})}),Fr.jsx(tg,{children:Fr.jsxs("div",{children:[Fr.jsxs("p",{className:"font-bold",children:[e.totalTTC,"€"]}),Fr.jsx("p",{className:"text-sm text-gray-500",children:"TTC"})]})}),Fr.jsx(tg,{children:Fr.jsx(Hx,{className:P(e.paymentStatus),children:"paid"===e.paymentStatus?"Payé":"pending"===e.paymentStatus?"En attente":"failed"===e.paymentStatus?"Échoué":e.paymentStatus})}),Fr.jsx(tg,{children:Fr.jsx(Hx,{className:S(e.status),children:_(e.status)})}),Fr.jsx(tg,{children:Fr.jsxs("div",{children:[Fr.jsx("p",{children:new Date(e.createdAt).toLocaleDateString("fr-FR")}),Fr.jsx("p",{className:"text-sm text-gray-500",children:new Date(e.createdAt).toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"})})]})}),Fr.jsx(tg,{children:Fr.jsxs("div",{className:"flex gap-2",children:[Fr.jsxs(Ax,{children:[Fr.jsx(Ox,{asChild:!0,children:Fr.jsx(Lp,{variant:"outline",size:"sm",onClick:()=>x(e),children:Fr.jsx(nc,{className:"h-4 w-4"})})}),Fr.jsxs(Ix,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[Fr.jsx(Mx,{children:Fr.jsxs(Lx,{children:["Détails de la commande ",e.orderNumber]})}),Fr.jsx(ig,{order:e,onStatusUpdate:y,isAdmin:t})]})]}),"pending"===e.status&&e.deliveryDate&&Fr.jsxs(Fr.Fragment,{children:[Fr.jsx(bg,{order:e,onSuccess:()=>{Ri.invalidateQueries({queryKey:["/api/admin/orders"]}),f({title:"Date confirmée",description:"La date de livraison a été confirmée et l'email envoyé au client."})}}),Fr.jsx(jg,{order:e,onSuccess:()=>{Ri.invalidateQueries({queryKey:["/api/admin/orders"]}),f({title:"Proposition envoyée",description:"La nouvelle date a été proposée au client par email."})}})]}),t&&Fr.jsx(Ng,{order:e,onSuccess:()=>{Ri.invalidateQueries({queryKey:["/api/admin/orders"]}),Ri.invalidateQueries({queryKey:["/api/admin/stats"]}),f({title:"Commande supprimée",description:"La commande a été supprimée avec succès."})}})]})})]},e.id)):Fr.jsx(Xv,{children:Fr.jsx(tg,{colSpan:9,className:"text-center py-8",children:Fr.jsxs("div",{className:"flex flex-col items-center gap-2",children:[Fr.jsx(Pc,{className:"h-8 w-8 text-gray-400"}),Fr.jsx("p",{className:"text-gray-500",children:d||"all"!==i||"all"!==l?"Aucune commande ne correspond aux critères de recherche":"Aucune commande trouvée"})]})})})})]})})})}),w>1&&Fr.jsx(nf,{children:Fr.jsx(lf,{className:"p-4",children:Fr.jsxs("div",{className:"flex items-center justify-between",children:[Fr.jsxs("div",{className:"text-sm text-gray-600",children:["Affichage de ",k+1," à ",Math.min(k+r,N)," sur ",N," commandes"]}),Fr.jsxs("div",{className:"flex items-center gap-2",children:[Fr.jsx(Lp,{variant:"outline",size:"sm",onClick:()=>n(Math.max(1,s-1)),disabled:1===s,children:"Précédent"}),Fr.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:Math.min(5,w)},(e,t)=>{let r;return r=w<=5||s<=3?t+1:s>=w-2?w-4+t:s-2+t,Fr.jsx(Lp,{variant:r===s?"default":"outline",size:"sm",onClick:()=>n(r),className:r===s?"bg-red-600 hover:bg-red-700":"",children:r},r)})}),Fr.jsx(Lp,{variant:"outline",size:"sm",onClick:()=>n(Math.min(w,s+1)),disabled:s===w,children:"Suivant"})]})]})})})]})}function cg(){return Fr.jsxs("div",{className:"space-y-6",children:[Fr.jsxs("div",{children:[Fr.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Ma Configuration"}),Fr.jsx("p",{className:"text-gray-600",children:"Paramètres du compte et préférences"})]}),Fr.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[Fr.jsxs(nf,{children:[Fr.jsx(rf,{children:Fr.jsxs(af,{className:"flex items-center gap-2",children:[Fr.jsx(Sc,{className:"h-5 w-5"}),"Profil"]})}),Fr.jsx(lf,{children:Fr.jsx("p",{className:"text-sm text-gray-600",children:"Informations personnelles"})})]}),Fr.jsxs(nf,{children:[Fr.jsx(rf,{children:Fr.jsxs(af,{className:"flex items-center gap-2",children:[Fr.jsx(Rc,{className:"h-5 w-5"}),"Sécurité"]})}),Fr.jsx(lf,{children:Fr.jsx("p",{className:"text-sm text-gray-600",children:"Mot de passe et authentification"})})]}),Fr.jsxs(nf,{children:[Fr.jsx(rf,{children:Fr.jsxs(af,{className:"flex items-center gap-2",children:[Fr.jsx(Zl,{className:"h-5 w-5"}),"Notifications"]})}),Fr.jsx(lf,{children:Fr.jsx("p",{className:"text-sm text-gray-600",children:"Préférences de notification"})})]})]})]})}function dg(){return Fr.jsxs("div",{className:"space-y-6",children:[Fr.jsxs("div",{children:[Fr.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Mes Activités"}),Fr.jsx("p",{className:"text-gray-600",children:"Journal d'activité de votre compte"})]}),Fr.jsx(nf,{children:Fr.jsx(lf,{className:"p-6",children:Fr.jsx("p",{className:"text-gray-500",children:"Journal d'activité à venir..."})})})]})}function ug(){const[e,t]=hr.useState("daily"),[s,n]=hr.useState(null),[r,a]=hr.useState({}),[i,o]=hr.useState(!1),[l,c]=hr.useState(null),[d,u]=hr.useState({name:"",volume:"",basePrice:"",description:"",maxWeight:"",wasteTypes:[]}),{data:m}=Pi({queryKey:["/api/services"]}),{data:p,refetch:h}=Pi({queryKey:["/api/admin/rental-pricing"]}),x=async e=>{try{const t=localStorage.getItem("auth_token"),s=await fetch("/api/admin/rental-pricing",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify({serviceId:e.serviceId,dailyRate:e.dailyRate,billingStartDay:e.billingStartDay,maxTonnage:e.maxTonnage,isActive:!0})});if(!s.ok)throw new Error(`Erreur ${s.status}: ${s.statusText}`);h(),n(null),a({})}catch(t){console.error("Erreur lors de la sauvegarde:",t)}},f=!1,v=()=>{n(null),a({})},g=(e,t,s)=>{a({...r,[e]:{...r[e],[t]:s}})},y=async e=>{try{const t=localStorage.getItem("auth_token"),s=await fetch("/api/admin/services",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify(e)});if(!s.ok)throw new Error(`Erreur ${s.status}: ${s.statusText}`);(await fetch("/api/services")).ok&&window.location.reload(),o(!1),u({name:"",volume:"",basePrice:"",description:"",maxWeight:"",wasteTypes:[]})}catch(t){console.error("Erreur lors de l'ajout:",t)}},b=async e=>{try{const t=localStorage.getItem("auth_token"),s=await fetch(`/api/admin/services/${e}`,{method:"DELETE",headers:{Authorization:`Bearer ${t}`}});if(!s.ok)throw new Error(`Erreur ${s.status}: ${s.statusText}`);window.location.reload()}catch(t){console.error("Erreur lors de la suppression:",t)}},j=async e=>{try{const t=localStorage.getItem("auth_token"),s=await fetch(`/api/admin/rental-pricing/${e}`,{method:"DELETE",headers:{Authorization:`Bearer ${t}`}});if(!s.ok)throw new Error(`Erreur ${s.status}: ${s.statusText}`);h()}catch(t){console.error("Erreur lors de la suppression du tarif:",t)}};return Fr.jsxs("div",{className:"space-y-6",children:[Fr.jsxs("div",{className:"flex justify-between items-center",children:[Fr.jsxs("div",{children:[Fr.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Prix de Location"}),Fr.jsx("p",{className:"text-gray-600",children:"Configuration des tarifs de location par équipement"})]}),Fr.jsxs("button",{onClick:()=>o(!0),className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 flex items-center gap-2",children:[Fr.jsx(gc,{className:"h-4 w-4"}),"Ajouter une benne"]})]}),Fr.jsx("div",{className:"border-b border-gray-200",children:Fr.jsx("nav",{className:"-mb-px flex space-x-8",children:Fr.jsx("button",{onClick:()=>t("daily"),className:"py-2 px-1 border-b-2 font-medium text-sm "+("daily"===e?"border-red-500 text-red-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"Prix journalier"})})}),"daily"===e&&Fr.jsxs(nf,{children:[Fr.jsxs(rf,{children:[Fr.jsxs(af,{className:"flex items-center gap-2",children:[Fr.jsx(Xl,{className:"h-5 w-5 text-red-600"}),"Tarifs Journaliers"]}),Fr.jsx(of,{children:"Définissez les prix de location quotidiens pour chaque type d'équipement"})]}),Fr.jsxs(lf,{children:[Fr.jsx("div",{className:"overflow-x-auto",children:Fr.jsxs("table",{className:"w-full border-collapse",children:[Fr.jsx("thead",{children:Fr.jsxs("tr",{className:"border-b",children:[Fr.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-900",children:"Équipement"}),Fr.jsxs("th",{className:"text-left py-3 px-4 font-medium text-gray-900",children:["Prix / Jour",Fr.jsxs("div",{className:"group relative inline-block ml-2",children:[Fr.jsx("span",{className:"text-gray-400 cursor-help",children:"ⓘ"}),Fr.jsx("div",{className:"invisible group-hover:visible absolute bottom-full mb-2 left-1/2 transform -translate-x-1/2 bg-gray-800 text-white text-xs rounded py-1 px-2 whitespace-nowrap",children:"Tarif appliqué par jour de location (€/jour)"})]})]}),Fr.jsxs("th",{className:"text-left py-3 px-4 font-medium text-gray-900",children:["Début de Facturation",Fr.jsxs("div",{className:"group relative inline-block ml-2",children:[Fr.jsx("span",{className:"text-gray-400 cursor-help",children:"ⓘ"}),Fr.jsx("div",{className:"invisible group-hover:visible absolute bottom-full mb-2 left-1/2 transform -translate-x-1/2 bg-gray-800 text-white text-xs rounded py-1 px-2 whitespace-nowrap",children:"Jour à partir duquel le tarif est appliqué (0 = dès le premier jour)"})]})]}),Fr.jsxs("th",{className:"text-left py-3 px-4 font-medium text-gray-900",children:["Tonnage Max",Fr.jsxs("div",{className:"group relative inline-block ml-2",children:[Fr.jsx("span",{className:"text-gray-400 cursor-help",children:"ⓘ"}),Fr.jsx("div",{className:"invisible group-hover:visible absolute bottom-full mb-2 left-1/2 transform -translate-x-1/2 bg-gray-800 text-white text-xs rounded py-1 px-2 whitespace-nowrap",children:"Capacité maximale en tonnes pour le calcul des coûts de traitement"})]})]}),Fr.jsx("th",{className:"text-right py-3 px-4 font-medium text-gray-900",children:"Actions"})]})}),Fr.jsx("tbody",{children:null==m?void 0:m.map(e=>{const t=s===e.id,i=(o=e.id,null==p?void 0:p.find(e=>e.serviceId===o));var o;const l=r[e.id];return Fr.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[Fr.jsx("td",{className:"py-4 px-4",children:Fr.jsxs("div",{className:"flex items-center gap-3",children:[Fr.jsx("div",{className:"w-10 h-10 bg-red-100 rounded-lg flex items-center justify-center",children:Fr.jsx(Fc,{className:"h-5 w-5 text-red-600"})}),Fr.jsxs("div",{children:[Fr.jsx("p",{className:"font-medium text-gray-900",children:e.name}),Fr.jsxs("p",{className:"text-sm text-gray-500",children:[e.volume,"m³"]})]})]})}),Fr.jsx("td",{className:"py-4 px-4",children:t?Fr.jsxs("div",{className:"flex items-center gap-2",children:[Fr.jsx("input",{type:"number",step:"0.01",min:"0",value:(null==l?void 0:l.dailyRate)||"",onChange:t=>g(e.id,"dailyRate",t.target.value),className:"w-24 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500",placeholder:"0.00"}),Fr.jsx("span",{className:"text-gray-500",children:"€/jour"})]}):Fr.jsx("span",{className:"text-gray-900",children:i?`${i.dailyRate} €/jour`:"-"})}),Fr.jsx("td",{className:"py-4 px-4",children:t?Fr.jsxs("div",{className:"flex items-center gap-2",children:[Fr.jsx("input",{type:"number",min:"0",value:(null==l?void 0:l.billingStartDay)||"",onChange:t=>g(e.id,"billingStartDay",t.target.value),className:"w-20 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500",placeholder:"0"}),Fr.jsx("span",{className:"text-gray-500",children:"jour(s)"})]}):Fr.jsx("span",{className:"text-gray-900",children:i?`${i.billingStartDay} jour(s)`:"-"})}),Fr.jsx("td",{className:"py-4 px-4",children:t?Fr.jsxs("div",{className:"flex items-center gap-2",children:[Fr.jsx("input",{type:"number",min:"0",step:"0.1",value:(null==l?void 0:l.maxTonnage)||"",onChange:t=>g(e.id,"maxTonnage",t.target.value),className:"w-20 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500",placeholder:"0.0"}),Fr.jsx("span",{className:"text-gray-500",children:"tonnes"})]}):Fr.jsx("span",{className:"text-gray-900",children:i?`${i.maxTonnage} tonnes`:"-"})}),Fr.jsx("td",{className:"py-4 px-4 text-right",children:t?Fr.jsxs("div",{className:"flex items-center justify-end gap-2",children:[Fr.jsx("button",{onClick:()=>(e=>{const t=r[e];t&&x({serviceId:e,dailyRate:t.dailyRate,billingStartDay:parseInt(t.billingStartDay),maxTonnage:t.maxTonnage})})(e.id),disabled:f,className:"px-3 py-1 bg-red-600 text-white rounded-md hover:bg-red-700 disabled:opacity-50",children:"Valider"}),Fr.jsx("button",{onClick:v,className:"px-3 py-1 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400",children:"Annuler"})]}):Fr.jsxs("div",{className:"flex items-center justify-end gap-2",children:[Fr.jsx("button",{onClick:()=>(e=>{var t;const s=null==p?void 0:p.find(t=>t.serviceId===e);n(e),a({...r,[e]:{dailyRate:(null==s?void 0:s.dailyRate)||"0",billingStartDay:(null==(t=null==s?void 0:s.billingStartDay)?void 0:t.toString())||"0",maxTonnage:(null==s?void 0:s.maxTonnage)||"0"}})})(e.id),className:"px-3 py-1 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Modifier"}),Fr.jsx("button",{onClick:()=>c(e),className:"px-3 py-1 bg-green-600 text-white rounded-md hover:bg-green-700",title:"Gérer les photos",children:"Photos"}),i&&Fr.jsx("button",{onClick:()=>((e,t)=>{confirm(`Êtes-vous sûr de vouloir supprimer le tarif pour "${t}" ?`)&&j(e)})(e.id,e.name),className:"px-3 py-1 bg-orange-600 text-white rounded-md hover:bg-orange-700",title:"Supprimer le tarif",children:"Suppr. tarif"}),Fr.jsx("button",{onClick:()=>((e,t)=>{confirm(`Êtes-vous sûr de vouloir supprimer la benne "${t}" ? Cette action est irréversible.`)&&b(e)})(e.id,e.name),className:"px-3 py-1 bg-red-600 text-white rounded-md hover:bg-red-700",title:"Supprimer la benne",children:"Suppr. benne"})]})})]},e.id)})})]})}),m&&0===m.length&&Fr.jsxs("div",{className:"text-center py-8",children:[Fr.jsx(Fc,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),Fr.jsx("p",{className:"text-gray-500",children:"Aucun équipement disponible"}),Fr.jsx("p",{className:"text-sm text-gray-400",children:"Ajoutez des équipements pour configurer les tarifs"})]})]})]}),i&&Fr.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:Fr.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[Fr.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Ajouter une nouvelle benne"}),Fr.jsxs("div",{className:"space-y-4",children:[Fr.jsxs("div",{children:[Fr.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nom de la benne"}),Fr.jsx("input",{type:"text",value:d.name,onChange:e=>u({...d,name:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500",placeholder:"Ex: Benne 20m³"})]}),Fr.jsxs("div",{children:[Fr.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Volume (m³)"}),Fr.jsx("input",{type:"number",min:"1",value:d.volume,onChange:e=>u({...d,volume:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500",placeholder:"Ex: 20"})]}),Fr.jsxs("div",{children:[Fr.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Prix de base (€)"}),Fr.jsx("input",{type:"number",step:"0.01",min:"0",value:d.basePrice,onChange:e=>u({...d,basePrice:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500",placeholder:"Ex: 350.00"})]}),Fr.jsxs("div",{children:[Fr.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),Fr.jsx("textarea",{value:d.description,onChange:e=>u({...d,description:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500",placeholder:"Ex: Idéale pour gros travaux de construction",rows:3})]}),Fr.jsxs("div",{children:[Fr.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Poids maximum (tonnes)"}),Fr.jsx("input",{type:"number",min:"1",value:d.maxWeight,onChange:e=>u({...d,maxWeight:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500",placeholder:"Ex: 10"})]})]}),Fr.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[Fr.jsx("button",{onClick:()=>{o(!1),u({name:"",volume:"",basePrice:"",description:"",maxWeight:"",wasteTypes:[]})},className:"px-4 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400",children:"Annuler"}),Fr.jsx("button",{onClick:()=>{const e={name:d.name,volume:parseInt(d.volume),basePrice:d.basePrice,description:d.description,maxWeight:parseInt(d.maxWeight)||null,wasteTypes:d.wasteTypes,isActive:!0};y(e)},disabled:!d.name||!d.volume||!d.basePrice,className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Ajouter"})]})]})}),l&&Fr.jsx(wg,{service:l,onClose:()=>c(null)})]})}function mg(){const[e,t]=hr.useState("kilometric"),{toast:s}=Ui(),{data:n,isLoading:r,refetch:a}=Pi({queryKey:["/api/admin/transport-pricing"],select:e=>e||{pricePerKm:"0",minimumFlatRate:"0",hourlyRate:"0",immediateLoadingEnabled:!0}}),i=Ei({mutationFn:async e=>(await Oi("PUT","/api/admin/transport-pricing",e)).json(),onSuccess:()=>{s({title:"Tarifs mis à jour",description:"Les tarifs de transport ont été sauvegardés avec succès."}),a()},onError:e=>{s({title:"Erreur",description:"Impossible de sauvegarder les tarifs de transport.",variant:"destructive"})}});return r?Fr.jsxs("div",{className:"space-y-6",children:[Fr.jsxs("div",{children:[Fr.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Prix de Transport"}),Fr.jsx("p",{className:"text-gray-600",children:"Configuration des tarifs de transport"})]}),Fr.jsx(nf,{children:Fr.jsx(lf,{className:"p-6",children:Fr.jsxs("div",{className:"animate-pulse space-y-4",children:[Fr.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/4"}),Fr.jsx("div",{className:"h-10 bg-gray-200 rounded"})]})})})]}):Fr.jsxs("div",{className:"space-y-6",children:[Fr.jsxs("div",{className:"flex items-center justify-between",children:[Fr.jsxs("div",{children:[Fr.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Prix de Transport"}),Fr.jsx("p",{className:"text-gray-600",children:"Configuration des tarifs de transport et chargement"})]}),Fr.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[Fr.jsx(cc,{className:"h-4 w-4"}),Fr.jsx("span",{children:"API gratuite pour calcul de distances"})]})]}),Fr.jsxs(nf,{children:[Fr.jsx("div",{className:"border-b border-gray-200",children:Fr.jsxs("nav",{className:"-mb-px flex",children:[Fr.jsx("button",{onClick:()=>t("kilometric"),className:"px-6 py-3 border-b-2 font-medium text-sm "+("kilometric"===e?"border-[rgb(220, 38, 38)] text-[rgb(220, 38, 38)]":"border-transparent text-gray-500 hover:text-gray-700"),children:"Tarification kilométrique"}),Fr.jsx("button",{onClick:()=>t("immediate"),className:"px-6 py-3 border-b-2 font-medium text-sm "+("immediate"===e?"border-[rgb(220, 38, 38)] text-[rgb(220, 38, 38)]":"border-transparent text-gray-500 hover:text-gray-700"),children:"Chargement immédiat"})]})}),Fr.jsxs(lf,{className:"p-6",children:["kilometric"===e&&Fr.jsxs("div",{className:"space-y-6",children:[Fr.jsxs("div",{className:"flex items-start gap-3 p-4 bg-blue-50 rounded-lg",children:[Fr.jsx(cc,{className:"h-5 w-5 text-blue-500 mt-0.5"}),Fr.jsxs("div",{className:"text-sm text-blue-700",children:[Fr.jsx("p",{className:"font-medium",children:"Tarification kilométrique"}),Fr.jsx("p",{children:"Configurez le prix par kilomètre pour les trajets aller-retour depuis votre site d'activité. Un prix forfaitaire minimum peut être appliqué."})]})]}),Fr.jsxs("form",{onSubmit:async e=>{var t,s;e.preventDefault();const r=new FormData(e.currentTarget);i.mutate({pricePerKm:(null==(t=r.get("pricePerKm"))?void 0:t.toString())||"0",minimumFlatRate:(null==(s=r.get("minimumFlatRate"))?void 0:s.toString())||"0",hourlyRate:(null==n?void 0:n.hourlyRate)||"0",immediateLoadingEnabled:null==n?void 0:n.immediateLoadingEnabled})},className:"space-y-6",children:[Fr.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[Fr.jsxs("div",{children:[Fr.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Prix par kilomètre (aller-retour)"}),Fr.jsxs("div",{className:"relative",children:[Fr.jsx("input",{type:"number",name:"pricePerKm",step:"0.01",min:"0",defaultValue:(null==n?void 0:n.pricePerKm)||"0",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[rgb(220, 38, 38)] focus:border-transparent pr-12",placeholder:"0.00"}),Fr.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3",children:Fr.jsx("span",{className:"text-gray-500 text-sm",children:"€/km"})})]})]}),Fr.jsxs("div",{children:[Fr.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Prix forfaitaire minimum"}),Fr.jsxs("div",{className:"relative",children:[Fr.jsx("input",{type:"number",name:"minimumFlatRate",step:"0.01",min:"0",defaultValue:(null==n?void 0:n.minimumFlatRate)||"0",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[rgb(220, 38, 38)] focus:border-transparent pr-8",placeholder:"0.00"}),Fr.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3",children:Fr.jsx("span",{className:"text-gray-500 text-sm",children:"€"})})]})]})]}),Fr.jsx("div",{className:"flex justify-end",children:Fr.jsx("button",{type:"submit",disabled:i.isPending,className:"px-6 py-2 bg-[rgb(220, 38, 38)] text-white rounded-md hover:bg-[rgb(185, 28, 28)] focus:outline-none focus:ring-2 focus:ring-[rgb(220, 38, 38)] focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",children:i.isPending?"Sauvegarde...":"Sauvegarder les tarifs"})})]})]}),"immediate"===e&&Fr.jsxs("div",{className:"space-y-6",children:[Fr.jsxs("div",{className:"flex items-start gap-3 p-4 bg-orange-50 rounded-lg",children:[Fr.jsx(cc,{className:"h-5 w-5 text-orange-500 mt-0.5"}),Fr.jsxs("div",{className:"text-sm text-orange-700",children:[Fr.jsx("p",{className:"font-medium",children:"Chargement immédiat"}),Fr.jsx("p",{children:"Configurez le tarif horaire appliqué pour chaque heure de présence du véhicule chez le client. Facturation minimale d'une heure. Cette option est automatiquement désactivée si le prix horaire est fixé à 0 €."})]})]}),Fr.jsxs("form",{onSubmit:async e=>{var t;e.preventDefault();const s=(null==(t=new FormData(e.currentTarget).get("hourlyRate"))?void 0:t.toString())||"0";i.mutate({pricePerKm:(null==n?void 0:n.pricePerKm)||"0",minimumFlatRate:(null==n?void 0:n.minimumFlatRate)||"0",hourlyRate:s,immediateLoadingEnabled:"0"!==s&&"0.00"!==s})},className:"space-y-6",children:[Fr.jsxs("div",{className:"max-w-md",children:[Fr.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Prix horaire"}),Fr.jsxs("div",{className:"relative",children:[Fr.jsx("input",{type:"number",name:"hourlyRate",step:"0.01",min:"0",defaultValue:(null==n?void 0:n.hourlyRate)||"0",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[rgb(220, 38, 38)] focus:border-transparent pr-12",placeholder:"0.00"}),Fr.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3",children:Fr.jsx("span",{className:"text-gray-500 text-sm",children:"€/h"})})]})]}),Fr.jsxs("div",{className:"flex items-center gap-3 p-4 bg-gray-50 rounded-lg",children:[Fr.jsx("div",{className:"h-3 w-3 rounded-full "+(null==n||n.immediateLoadingEnabled,"bg-red-500")}),Fr.jsxs("span",{className:"text-sm text-gray-700",children:[Fr.jsx("strong",{children:"Statut:"})," ",(null==n?void 0:n.immediateLoadingEnabled)?"Activé":"Désactivé",!(null==n?void 0:n.immediateLoadingEnabled)&&" (prix horaire = 0 €)"]})]}),Fr.jsx("div",{className:"flex justify-end",children:Fr.jsx("button",{type:"submit",disabled:i.isPending,className:"px-6 py-2 bg-[rgb(220, 38, 38)] text-white rounded-md hover:bg-[rgb(185, 28, 28)] focus:outline-none focus:ring-2 focus:ring-[rgb(220, 38, 38)] focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",children:i.isPending?"Sauvegarde...":"Sauvegarder les tarifs"})})]})]})]})]})]})}function pg(){const{toast:e}=Ui(),[t,s]=hr.useState(!1),[n,r]=hr.useState(null),[a,i]=hr.useState(""),[o,l]=hr.useState(null),c=[{code:"D1",description:"Dépôt sur ou dans le sol (par exemple, mise en décharge)"},{code:"D2",description:"Traitement en milieu terrestre (par exemple, biodégradation de déchets liquides ou de boues dans les sols)"},{code:"D3",description:"Injection en profondeur (par exemple, injection de déchets pompables dans des puits, des dômes de sel ou des failles géologiques naturelles)"},{code:"D4",description:"Lagunage (par exemple, déversement de déchets liquides ou de boues dans des puits, des étangs ou des bassins)"},{code:"D5",description:"Mise en décharge spécialement aménagée (par exemple, placement dans des alvéoles étanches séparées, recouvertes et isolées les unes des autres et de l'environnement)"},{code:"D6",description:"Rejet dans le milieu aquatique, sauf l'immersion"},{code:"D7",description:"Immersion, y compris enfouissement dans le sous-sol marin"},{code:"D8",description:"Traitement biologique non spécifié ailleurs, aboutissant à des composés ou à des mélanges qui sont éliminés selon un des procédés numérotés D 1 à D 12"},{code:"D9",description:"Traitement physico-chimique non spécifié ailleurs, aboutissant à des composés ou à des mélanges qui sont éliminés selon l'un des procédés numérotés D 1 à D 12"},{code:"D10",description:"Incinération à terre"},{code:"D11",description:"Incinération en mer"},{code:"D12",description:"Stockage permanent (par exemple, placement de conteneurs dans une mine)"},{code:"D13",description:"Regroupement ou mélange préalablement à l'une des opérations numérotées D 1 à D 12"},{code:"D14",description:"Reconditionnement préalablement à l'une des opérations numérotées D 1 à D 13"},{code:"D15",description:"Stockage préalablement à l'une des opérations numérotées D 1 à D 14 (à l'exclusion du stockage temporaire, avant collecte, sur le site de production des déchets)"},{code:"R1",description:"Utilisation principale comme combustible ou autre moyen de produire de l'énergie"},{code:"R2",description:"Récupération ou régénération des solvants"},{code:"R3",description:"Recyclage ou récupération des substances organiques qui ne sont pas utilisées comme solvants (y compris les opérations de compostage et autres transformations biologiques)"},{code:"R4",description:"Recyclage ou récupération des métaux et des composés métalliques"},{code:"R5",description:"Recyclage ou récupération d'autres matières inorganiques"},{code:"R6",description:"Régénération des acides ou des bases"},{code:"R7",description:"Récupération des produits servant à capter les polluants"},{code:"R8",description:"Récupération des produits provenant des catalyseurs"},{code:"R9",description:"Régénération ou autres réemplois des huiles"},{code:"R10",description:"Epandage sur le sol au profit de l'agriculture ou de l'écologie"},{code:"R11",description:"Utilisation de déchets résiduels obtenus à partir de l'une des opérations numérotées R1 à R10"},{code:"R12",description:"Echange de déchets en vue de les soumettre à l'une des opérations numérotées R1 à R11"}],{data:d}=Pi({queryKey:["/api/admin/company-activities"],select:e=>e||null}),{data:u,refetch:m}=Pi({queryKey:["/api/admin/waste-types"],select:e=>e||[]}),{data:p,isLoading:h,refetch:x}=Pi({queryKey:["/api/admin/treatment-pricing"],select:e=>e||[]}),f=Ei({mutationFn:async e=>(await Oi("POST","/api/admin/waste-types",e)).json(),onSuccess:e=>{r(e.id),s(!0),m()},onError:()=>{e({title:"Erreur",description:"Impossible de créer le type de matière.",variant:"destructive"})}}),v=Ei({mutationFn:async e=>{console.log("Données envoyées pour création:",e);const t=await Oi("POST","/api/admin/treatment-pricing",e);if(!t.ok){const e=await t.json();throw new Error(e.message||`Erreur ${t.status}`)}return t.json()},onSuccess:t=>{console.log("Tarif créé avec succès:",t),e({title:"Tarif configuré",description:"Le tarif de traitement a été sauvegardé avec succès."}),s(!1),r(null),i(""),l(null),x()},onError:t=>{console.error("Erreur lors de la création du tarif:",t),e({title:"Erreur de sauvegarde",description:t.message||"Impossible de sauvegarder le tarif de traitement.",variant:"destructive"})}}),g=Ei({mutationFn:async e=>(await Oi("PUT",`/api/admin/treatment-pricing/${e.id}`,e)).json(),onSuccess:()=>{e({title:"Tarif modifié",description:"Le tarif de traitement a été modifié avec succès."}),s(!1),r(null),i(""),l(null),x()},onError:()=>{e({title:"Erreur",description:"Impossible de modifier le tarif de traitement.",variant:"destructive"})}});return Ei({mutationFn:async e=>(await Oi("DELETE",`/api/admin/treatment-pricing/${e}`)).json(),onSuccess:()=>{e({title:"Tarif supprimé",description:"Le tarif de traitement a été supprimé avec succès."}),x()},onError:()=>{e({title:"Erreur",description:"Impossible de supprimer le tarif de traitement.",variant:"destructive"})}}),h?Fr.jsxs("div",{className:"space-y-6",children:[Fr.jsxs("div",{children:[Fr.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Prix de Traitement"}),Fr.jsx("p",{className:"text-gray-600",children:"Configuration des tarifs de traitement par matière"})]}),Fr.jsx(nf,{children:Fr.jsx(lf,{className:"p-6",children:Fr.jsxs("div",{className:"animate-pulse space-y-4",children:[Fr.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/4"}),Fr.jsx("div",{className:"h-10 bg-gray-200 rounded"})]})})})]}):Fr.jsxs("div",{className:"space-y-6",children:[Fr.jsxs("div",{className:"flex items-center justify-between",children:[Fr.jsxs("div",{children:[Fr.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Prix de Traitement"}),Fr.jsx("p",{className:"text-gray-600",children:"Configuration des tarifs par tonne pour chaque matière sélectionnée"})]}),Fr.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[Fr.jsx(cc,{className:"h-4 w-4"}),Fr.jsx("span",{children:"Codes D1-D15 et R1-R12 disponibles"})]})]}),Fr.jsxs(nf,{children:[Fr.jsx(rf,{children:Fr.jsxs(af,{className:"flex items-center justify-between",children:[Fr.jsx("span",{children:"Types de matières"}),Fr.jsxs("div",{className:"flex gap-2",children:[Fr.jsxs("button",{onClick:()=>{const t=((null==d?void 0:d.wasteTypes)||[]).filter(e=>{const t=null==u?void 0:u.find(t=>t.name===e);return t&&(null==p?void 0:p.find(e=>e.wasteTypeId===t.id))}).length;e({title:"Configuration enregistrée",description:`${t} tarif(s) de traitement configuré(s) et sauvegardé(s).`})},className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2",children:[Fr.jsx(kc,{className:"h-4 w-4 inline mr-2"}),"Sauvegarder"]}),Fr.jsxs("button",{onClick:()=>s(!t),className:"px-4 py-2 bg-[rgb(220, 38, 38)] text-white rounded-md hover:bg-[rgb(185, 28, 28)] focus:outline-none focus:ring-2 focus:ring-[rgb(220, 38, 38)] focus:ring-offset-2",children:[Fr.jsx(jc,{className:"h-4 w-4 inline mr-2"}),"Ajouter une matière"]})]})]})}),Fr.jsxs(lf,{children:[Fr.jsx("p",{className:"text-gray-600 mb-6",children:'Les matières sélectionnées dans "Mes activités" apparaissent automatiquement ici pour configuration des tarifs.'}),(()=>{const e=(null==d?void 0:d.wasteTypes)||[];return 0===e.length?Fr.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-6 text-center",children:[Fr.jsx(Rc,{className:"h-8 w-8 text-yellow-600 mx-auto mb-2"}),Fr.jsx("p",{className:"text-yellow-800 font-medium",children:"Aucune matière sélectionnée"}),Fr.jsx("p",{className:"text-sm text-yellow-700 mt-1",children:'Configurez vos activités dans "Mes activités" pour sélectionner les matières à traiter.'})]}):Fr.jsx("div",{className:"space-y-4",children:e.map(e=>{const t=null==u?void 0:u.find(t=>t.name===e),s=t?null==p?void 0:p.find(e=>e.wasteTypeId===t.id):null;return Fr.jsxs(nf,{className:"border-2",children:[Fr.jsx(rf,{className:"pb-3",children:Fr.jsxs("div",{className:"flex items-center justify-between",children:[Fr.jsx(af,{className:"text-lg",children:e}),s?Fr.jsx(Hx,{className:"bg-green-100 text-green-800 border-green-300",children:"Configuré"}):Fr.jsx(Hx,{variant:"secondary",children:"À configurer"})]})}),Fr.jsx(lf,{children:Fr.jsxs("form",{onSubmit:n=>{var r,a,i;n.preventDefault();const o=new FormData(n.currentTarget);if(!t)return void f.mutate({name:e,description:'Matière de "Mes activités"'});const l={wasteTypeId:t.id,pricePerTon:(null==(r=o.get("pricePerTon"))?void 0:r.toString())||"0",treatmentType:(null==(a=o.get("treatmentType"))?void 0:a.toString())||"",treatmentCode:(null==(i=o.get("treatmentCode"))?void 0:i.toString())||"",outletAddress:"",isManualTreatment:!1,isActive:!0};s?g.mutate({id:s.id,...l}):v.mutate(l)},className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[Fr.jsxs("div",{children:[Fr.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Prix par tonne (€)"}),Fr.jsx("input",{type:"number",name:"pricePerTon",step:"0.01",min:"0",required:!0,defaultValue:(null==s?void 0:s.pricePerTon)||"",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-red-500 focus:border-red-500",placeholder:"0.00"})]}),Fr.jsxs("div",{children:[Fr.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type de traitement"}),Fr.jsx("input",{type:"text",name:"treatmentType",required:!0,defaultValue:(null==s?void 0:s.treatmentType)||"",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-red-500 focus:border-red-500",placeholder:"Ex: Recyclage, Incinération..."})]}),Fr.jsxs("div",{children:[Fr.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Code de traitement"}),Fr.jsxs("select",{name:"treatmentCode",required:!0,defaultValue:(null==s?void 0:s.treatmentCode)||"",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-red-500 focus:border-red-500",children:[Fr.jsx("option",{value:"",children:"Sélectionner un code"}),c.map(e=>Fr.jsxs("option",{value:e.code,children:[e.code," - ",e.description.substring(0,30),"..."]},e.code))]})]}),Fr.jsx("div",{className:"md:col-span-3 flex justify-end",children:Fr.jsx("button",{type:"submit",disabled:v.isPending||g.isPending||f.isPending,className:"px-6 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 disabled:opacity-50 font-medium",children:v.isPending||g.isPending?"Sauvegarde...":s?"Mettre à jour":"Configurer"})})]})})]},e)})})})()]})]}),Fr.jsxs(nf,{children:[Fr.jsx(rf,{children:Fr.jsxs(af,{className:"flex items-center gap-2",children:[Fr.jsx(cc,{className:"h-5 w-5 text-blue-500"}),"Codes exutoires disponibles"]})}),Fr.jsx(lf,{children:Fr.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[Fr.jsxs("div",{children:[Fr.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Codes D (Élimination)"}),Fr.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:c.filter(e=>e.code.startsWith("D")).map(e=>Fr.jsxs("div",{className:"text-sm",children:[Fr.jsx("span",{className:"font-mono bg-red-50 text-red-700 px-2 py-1 rounded mr-2",children:e.code}),Fr.jsx("span",{className:"text-gray-600",children:e.description})]},e.code))})]}),Fr.jsxs("div",{children:[Fr.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Codes R (Valorisation)"}),Fr.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:c.filter(e=>e.code.startsWith("R")).map(e=>Fr.jsxs("div",{className:"text-sm",children:[Fr.jsx("span",{className:"font-mono bg-red-50 text-red-700 px-2 py-1 rounded mr-2",children:e.code}),Fr.jsx("span",{className:"text-gray-600",children:e.description})]},e.code))})]})]})})]})]})}function hg(){const{toast:e}=Ui(),[t,s]=hr.useState(null),[n,r]=hr.useState(!1),{data:a}=Pi({queryKey:["/api/services"],select:e=>e||[]}),{data:i}=Pi({queryKey:["/api/admin/rental-pricing"],select:e=>e||[]}),{data:o}=Pi({queryKey:["/api/admin/transport-pricing"],select:e=>e||{pricePerKm:"0",minimumFlatRate:"0",hourlyRate:"0",immediateLoadingEnabled:!1}}),{data:l}=Pi({queryKey:["/api/admin/treatment-pricing"],select:e=>e||[]}),{data:c}=Pi({queryKey:["/api/admin/waste-types"],select:e=>e||[]});return Fr.jsxs("div",{className:"space-y-6",children:[Fr.jsxs("div",{className:"flex items-center justify-between",children:[Fr.jsxs("div",{children:[Fr.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Simulateur de Prix"}),Fr.jsx("p",{className:"text-gray-600",children:"Simulation et calcul automatique des tarifs complets"})]}),Fr.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[Fr.jsx(Al,{className:"h-4 w-4"}),Fr.jsx("span",{children:"Calculs en temps réel"})]})]}),Fr.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[Fr.jsxs(nf,{children:[Fr.jsx(rf,{children:Fr.jsx(af,{children:"Paramètres de simulation"})}),Fr.jsx(lf,{children:Fr.jsxs("form",{onSubmit:async t=>{var n,c,d,u,m;t.preventDefault(),r(!0);const p=new FormData(t.currentTarget),h=parseInt((null==(n=p.get("serviceId"))?void 0:n.toString())||"0"),x=parseInt((null==(c=p.get("durationDays"))?void 0:c.toString())||"1"),f=parseFloat((null==(d=p.get("distance"))?void 0:d.toString())||"0"),v=parseFloat((null==(u=p.get("wasteWeight"))?void 0:u.toString())||"0"),g="true"===p.get("immediateLoading"),y=parseFloat((null==(m=p.get("immediateLoadingHours"))?void 0:m.toString())||"1");try{const t=null==a?void 0:a.find(e=>e.id===h),n=null==i?void 0:i.find(e=>{var t;return(null==(t=e.service)?void 0:t.id)===h});let r=0;if(t&&n){const e=parseFloat(n.dailyRate||"0"),t=parseInt(n.billingStartDay||"0");r=e*Math.max(0,x-t)}let c=0;if(f>0){const e=parseFloat((null==o?void 0:o.pricePerKm)||"0"),t=parseFloat((null==o?void 0:o.minimumFlatRate)||"0"),s=f*e*2;c=Math.max(s,t)}let d=0;if(g&&(null==o?void 0:o.immediateLoadingEnabled)){d=parseFloat((null==o?void 0:o.hourlyRate)||"0")*y}let u=0;const m=p.getAll("wasteTypes");if(v>0&&m.length>0&&l){const e=v/1e3;for(const t of m){const s=l.find(e=>{var s;return(null==(s=e.wasteType)?void 0:s.id)===parseInt(t.toString())});if(s){u+=e*parseFloat(s.pricePerTon||"0")}}}const b=r+c+d+u;s({service:t,durationDays:x,distance:f,wasteWeight:v,breakdown:{rental:r,transport:c,immediateLoading:d,treatment:u,total:b},details:{servicePricing:n,transportPricing:o,immediateLoadingHours:g?y:0}}),e({title:"Simulation calculée",description:`Prix total estimé: ${b.toFixed(2)} €`})}catch(b){e({title:"Erreur de calcul",description:"Impossible de calculer la simulation de prix.",variant:"destructive"})}finally{r(!1)}},className:"space-y-6",children:[Fr.jsxs("div",{children:[Fr.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Service/Équipement *"}),Fr.jsxs("select",{name:"serviceId",required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[rgb(220, 38, 38)] focus:border-transparent",children:[Fr.jsx("option",{value:"",children:"Sélectionner un service"}),null==a?void 0:a.map(e=>Fr.jsxs("option",{value:e.id,children:[e.name," - ",e.volume,"m³"]},e.id))]})]}),Fr.jsxs("div",{children:[Fr.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Durée de location (jours) *"}),Fr.jsx("input",{type:"number",name:"durationDays",min:"1",defaultValue:"7",required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[rgb(220, 38, 38)] focus:border-transparent"})]}),Fr.jsxs("div",{children:[Fr.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Distance de transport (km)"}),Fr.jsx("input",{type:"number",name:"distance",step:"0.1",min:"0",defaultValue:"10",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[rgb(220, 38, 38)] focus:border-transparent",placeholder:"Distance aller simple"})]}),Fr.jsxs("div",{children:[Fr.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Types de déchets acceptés"}),Fr.jsx("div",{className:"space-y-2 max-h-32 overflow-y-auto border border-gray-300 rounded-md p-3",children:null==c?void 0:c.map(e=>Fr.jsxs("div",{className:"flex items-center",children:[Fr.jsx("input",{type:"checkbox",name:"wasteTypes",value:e.id,className:"h-4 w-4 text-[rgb(220, 38, 38)] focus:ring-[rgb(220, 38, 38)] border-gray-300 rounded"}),Fr.jsxs("label",{className:"ml-2 block text-sm text-gray-900",children:[e.name,e.description&&Fr.jsx("span",{className:"text-gray-500 text-xs block",children:e.description})]})]},e.id))})]}),Fr.jsxs("div",{children:[Fr.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Poids estimé des déchets (kg)"}),Fr.jsx("input",{type:"number",name:"wasteWeight",step:"10",min:"0",defaultValue:"2000",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[rgb(220, 38, 38)] focus:border-transparent"})]}),(null==o?void 0:o.immediateLoadingEnabled)&&Fr.jsxs("div",{className:"space-y-3",children:[Fr.jsxs("div",{className:"flex items-center",children:[Fr.jsx("input",{type:"checkbox",name:"immediateLoading",value:"true",className:"h-4 w-4 text-[rgb(220, 38, 38)] focus:ring-[rgb(220, 38, 38)] border-gray-300 rounded"}),Fr.jsx("label",{className:"ml-2 block text-sm text-gray-900",children:"Chargement immédiat"})]}),Fr.jsxs("div",{children:[Fr.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Heures de présence du véhicule"}),Fr.jsx("input",{type:"number",name:"immediateLoadingHours",step:"0.5",min:"1",defaultValue:"1",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[rgb(220, 38, 38)] focus:border-transparent"})]})]}),Fr.jsx("button",{type:"submit",disabled:n,className:"w-full px-4 py-2 bg-[rgb(220, 38, 38)] text-white rounded-md hover:bg-[rgb(185, 28, 28)] focus:outline-none focus:ring-2 focus:ring-[rgb(220, 38, 38)] focus:ring-offset-2 disabled:opacity-50",children:n?"Calcul en cours...":"Calculer le prix"})]})})]}),Fr.jsxs(nf,{children:[Fr.jsx(rf,{children:Fr.jsx(af,{children:"Résultats de la simulation"})}),Fr.jsx(lf,{children:t?Fr.jsxs("div",{className:"space-y-6",children:[Fr.jsx("div",{className:"bg-[rgb(220, 38, 38)] bg-opacity-10 rounded-lg p-4",children:Fr.jsxs("div",{className:"text-center",children:[Fr.jsxs("div",{className:"text-2xl font-bold text-[rgb(220, 38, 38)]",children:[t.breakdown.total.toFixed(2)," €"]}),Fr.jsx("div",{className:"text-sm text-gray-600",children:"Prix total estimé"})]})}),Fr.jsxs("div",{className:"space-y-3",children:[Fr.jsx("h4",{className:"font-medium text-gray-900",children:"Détail des coûts"}),t.breakdown.rental>0&&Fr.jsxs("div",{className:"flex justify-between py-2 border-b border-gray-100",children:[Fr.jsxs("span",{className:"text-gray-600",children:["Location (",t.durationDays," jours)"]}),Fr.jsxs("span",{className:"font-medium",children:[t.breakdown.rental.toFixed(2)," €"]})]}),t.breakdown.transport>0&&Fr.jsxs("div",{className:"flex justify-between py-2 border-b border-gray-100",children:[Fr.jsxs("span",{className:"text-gray-600",children:["Transport (",t.distance," km aller-retour)"]}),Fr.jsxs("span",{className:"font-medium",children:[t.breakdown.transport.toFixed(2)," €"]})]}),t.breakdown.immediateLoading>0&&Fr.jsxs("div",{className:"flex justify-between py-2 border-b border-gray-100",children:[Fr.jsxs("span",{className:"text-gray-600",children:["Chargement immédiat (",t.details.immediateLoadingHours,"h)"]}),Fr.jsxs("span",{className:"font-medium",children:[t.breakdown.immediateLoading.toFixed(2)," €"]})]}),t.breakdown.treatment>0&&Fr.jsxs("div",{className:"flex justify-between py-2 border-b border-gray-100",children:[Fr.jsxs("span",{className:"text-gray-600",children:["Traitement (",t.wasteWeight," tonnes)"]}),Fr.jsxs("span",{className:"font-medium",children:[t.breakdown.treatment.toFixed(2)," €"]})]})]}),t.service&&Fr.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[Fr.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Service sélectionné"}),Fr.jsxs("div",{className:"text-sm space-y-1",children:[Fr.jsxs("div",{children:[Fr.jsx("strong",{children:"Nom:"})," ",t.service.name]}),Fr.jsxs("div",{children:[Fr.jsx("strong",{children:"Volume:"})," ",t.service.volume,"m³"]}),t.service.description&&Fr.jsxs("div",{children:[Fr.jsx("strong",{children:"Description:"})," ",t.service.description]})]})]}),Fr.jsxs("div",{className:"text-xs text-gray-500 bg-yellow-50 p-3 rounded",children:[Fr.jsx("strong",{children:"Note:"})," Cette simulation est indicative et basée sur les tarifs actuellement configurés. Les prix réels peuvent varier selon les conditions spécifiques du projet."]})]}):Fr.jsxs("div",{className:"text-center py-12 text-gray-500",children:[Fr.jsx(Al,{className:"mx-auto h-12 w-12 text-gray-300 mb-4"}),Fr.jsx("p",{children:"Remplissez le formulaire pour voir la simulation de prix"})]})})]})]}),Fr.jsxs(nf,{children:[Fr.jsx(rf,{children:Fr.jsx(af,{children:"Informations tarifaires actuelles"})}),Fr.jsx(lf,{children:Fr.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 text-sm",children:[Fr.jsxs("div",{className:"bg-blue-50 p-3 rounded",children:[Fr.jsx("div",{className:"font-medium text-blue-900",children:"Transport"}),Fr.jsxs("div",{className:"text-blue-700",children:[(null==o?void 0:o.pricePerKm)||"0"," €/km",(null==o?void 0:o.minimumFlatRate)&&"0"!==o.minimumFlatRate&&Fr.jsxs("div",{children:["Min: ",o.minimumFlatRate," €"]})]})]}),Fr.jsxs("div",{className:"bg-red-50 p-3 rounded",children:[Fr.jsx("div",{className:"font-medium text-red-900",children:"Services"}),Fr.jsxs("div",{className:"text-red-700",children:[(null==a?void 0:a.length)||0," équipement(s) configuré(s)"]})]}),Fr.jsxs("div",{className:"bg-purple-50 p-3 rounded",children:[Fr.jsx("div",{className:"font-medium text-purple-900",children:"Traitement"}),Fr.jsxs("div",{className:"text-purple-700",children:[(null==l?void 0:l.length)||0," tarif(s) configuré(s)"]})]}),Fr.jsxs("div",{className:"bg-orange-50 p-3 rounded",children:[Fr.jsx("div",{className:"font-medium text-orange-900",children:"Chargement immédiat"}),Fr.jsx("div",{className:"text-orange-700",children:(null==o?void 0:o.immediateLoadingEnabled)?`${o.hourlyRate} €/h`:"Désactivé"})]})]})})]})]})}function xg(){const{toast:e}=Ui(),[t,s]=hr.useState(null),[n,r]=hr.useState(!1),[a,i]=hr.useState([]),[o,l]=hr.useState(!1),[c,d]=hr.useState(!1),{data:u,refetch:m}=Pi({queryKey:["/api/admin/company-activities"],select:e=>e||null}),p={multibenne:["6m3","7m3","8m3","10m3"],ampliroll:["3m3","5m3","7m3","10m3","15m3","20m3","30m3","35m3"],caissePalette:["373L","650L"],rolls:["500L","700L","1100L"],contenantAlimentaire:["100L","120L","240L","400L","660L","20L","40L","60L","80L"],bac:["20L","40L","60L","80L","100L","120L","240L","360L","450L","550L","770L","1000L","1100L"],bennesFermees:["15m3","30m3"]};hr.useEffect(()=>{s(u||{collecteBenne:!1,collecteBac:!1,collecteVrac:!1,collecteBigBag:!1,collecteSacGravats:!1,collecteHuileFriture:!1,collecteDechetsBureaux:!1,wasteTypes:[],equipmentMultibenne:[],equipmentAmpliroll:[],equipmentCaissePalette:[],equipmentRolls:[],equipmentContenantAlimentaire:[],equipmentBac:[],equipmentBennesFermees:[],prixForfaitEnabled:!1})},[u]);const h=(e,t)=>{s(s=>({...s,[e]:t}))};hr.useEffect(()=>{const e=setTimeout(()=>{(null==t?void 0:t.industrialSiteAddress)&&(async e=>{if(e.length<3)return i([]),void l(!1);d(!0);try{const t=await fetch(`/api/places/autocomplete?input=${encodeURIComponent(e)}`),s=await t.json();s.suggestions&&(i(s.suggestions),l(!0))}catch(t){console.error("Erreur autocomplétion:",t),i([])}finally{d(!1)}})(t.industrialSiteAddress)},300);return()=>clearTimeout(e)},[null==t?void 0:t.industrialSiteAddress]);const x=(e,s)=>{const n=(null==t?void 0:t[e])||[],r=n.includes(s)?n.filter(e=>e!==s):[...n,s];h(e,r)};return t?Fr.jsxs("div",{className:"space-y-6",children:[Fr.jsxs("div",{className:"flex items-center justify-between",children:[Fr.jsxs("div",{children:[Fr.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Mes activités"}),Fr.jsx("p",{className:"text-gray-600",children:"Configurez les activités de votre entreprise"})]}),Fr.jsx("button",{onClick:async()=>{r(!0);try{const s=u?"PUT":"POST";if(!(await Oi(s,"/api/admin/company-activities",t)))throw new Error("Erreur lors de la sauvegarde");e({title:"Activités sauvegardées",description:"La configuration de vos activités a été mise à jour avec succès."}),m()}catch(s){e({title:"Erreur",description:"Impossible de sauvegarder les activités.",variant:"destructive"})}finally{r(!1)}},disabled:n,className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 disabled:opacity-50",children:n?"Sauvegarde...":"Sauvegarder"})]}),Fr.jsxs("div",{className:"space-y-8",children:[Fr.jsxs(nf,{children:[Fr.jsxs(rf,{children:[Fr.jsx(af,{children:"Mes services"}),Fr.jsx("p",{className:"text-sm text-gray-600",children:"Définissez les services que vous proposez. Vous pouvez sélectionner plusieurs choix."})]}),Fr.jsx(lf,{className:"space-y-4",children:[{key:"collecteBenne",label:"Collecte en Benne"},{key:"collecteBac",label:"Collecte en Bac, Rolls ou Caisse palette"},{key:"collecteVrac",label:"Collecte en vrac"},{key:"collecteBigBag",label:"Collecte Big Bag"},{key:"collecteSacGravats",label:"Collecte sac gravats"},{key:"collecteHuileFriture",label:"Collecte huile de friture"},{key:"collecteDechetsBureaux",label:"Collecte de déchets de bureaux"}].map(e=>Fr.jsxs("div",{className:"flex items-center space-x-3",children:[Fr.jsx("input",{type:"checkbox",checked:t[e.key]||!1,onChange:t=>h(e.key,t.target.checked),className:"h-4 w-4 text-[rgb(220, 38, 38)] focus:ring-[rgb(220, 38, 38)] border-gray-300 rounded"}),Fr.jsx("label",{className:"text-sm text-gray-700",children:e.label})]},e.key))})]}),Fr.jsxs(nf,{children:[Fr.jsxs(rf,{children:[Fr.jsx(af,{children:"Mes déchets"}),Fr.jsx("p",{className:"text-sm text-gray-600",children:"Définissez les déchets que vous collectez. Vous pouvez sélectionner plusieurs choix."})]}),Fr.jsx(lf,{children:Fr.jsx("div",{className:"space-y-3",children:Fr.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:["Papier","Carton","Plastique","Palettes","Encombrants tout venant","DIB (Déchet Industriel Banal)","Bois A","Ferrailles","Déchets verts","Textiles","Biodéchets alimentaires","Bois B","Déchets de chantiers en mélange","Gravats en mélange","Gravats propres inertes","Platre","Equipement informatique et imprimantes","Lampes","Electroménager","Cartouches d'encre","Chiffons souillés","Piles et accumulateurs","DASRI (Déchets activités soins à risque infectieux)","5 flux (papier/carton, métal, plastique, verre et bois)","7 flux (papier/carton, métal, plastique, verre, bois, gravats et plâtre)","Terre","Verre","Déchet Ultime"].map(e=>{var s;return Fr.jsxs("div",{className:"flex items-center space-x-3",children:[Fr.jsx("input",{type:"checkbox",checked:(null==(s=t.wasteTypes)?void 0:s.includes(e))||!1,onChange:()=>(e=>{const s=(null==t?void 0:t.wasteTypes)||[],n=s.includes(e)?s.filter(t=>t!==e):[...s,e];h("wasteTypes",n)})(e),className:"h-4 w-4 text-[rgb(220, 38, 38)] focus:ring-[rgb(220, 38, 38)] border-gray-300 rounded"}),Fr.jsx("label",{className:"text-sm text-gray-700",children:e})]},e)})})})})]}),Fr.jsxs(nf,{children:[Fr.jsxs(rf,{children:[Fr.jsx(af,{children:"Mes équipements"}),Fr.jsx("p",{className:"text-sm text-gray-600",children:"Définissez les équipements que vous utilisez. Vous pouvez sélectionner plusieurs choix."})]}),Fr.jsxs(lf,{className:"space-y-6",children:[Fr.jsxs("div",{children:[Fr.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Benne (Multibenne)"}),Fr.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:p.multibenne.map(e=>{var s;return Fr.jsxs("div",{className:"flex items-center space-x-2",children:[Fr.jsx("input",{type:"checkbox",checked:(null==(s=t.equipmentMultibenne)?void 0:s.includes(e))||!1,onChange:()=>x("equipmentMultibenne",e),className:"h-4 w-4 text-[rgb(220, 38, 38)] focus:ring-[rgb(220, 38, 38)] border-gray-300 rounded"}),Fr.jsx("label",{className:"text-sm text-gray-700",children:e})]},e)})})]}),Fr.jsxs("div",{children:[Fr.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Benne (Ampliroll)"}),Fr.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:p.ampliroll.map(e=>{var s;return Fr.jsxs("div",{className:"flex items-center space-x-2",children:[Fr.jsx("input",{type:"checkbox",checked:(null==(s=t.equipmentAmpliroll)?void 0:s.includes(e))||!1,onChange:()=>x("equipmentAmpliroll",e),className:"h-4 w-4 text-[rgb(220, 38, 38)] focus:ring-[rgb(220, 38, 38)] border-gray-300 rounded"}),Fr.jsx("label",{className:"text-sm text-gray-700",children:e})]},e)})})]}),Fr.jsxs("div",{children:[Fr.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Caisse Palette"}),Fr.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:p.caissePalette.map(e=>{var s;return Fr.jsxs("div",{className:"flex items-center space-x-2",children:[Fr.jsx("input",{type:"checkbox",checked:(null==(s=t.equipmentCaissePalette)?void 0:s.includes(e))||!1,onChange:()=>x("equipmentCaissePalette",e),className:"h-4 w-4 text-[rgb(220, 38, 38)] focus:ring-[rgb(220, 38, 38)] border-gray-300 rounded"}),Fr.jsx("label",{className:"text-sm text-gray-700",children:e})]},e)})})]}),Fr.jsxs("div",{children:[Fr.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Rolls"}),Fr.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:p.rolls.map(e=>{var s;return Fr.jsxs("div",{className:"flex items-center space-x-2",children:[Fr.jsx("input",{type:"checkbox",checked:(null==(s=t.equipmentRolls)?void 0:s.includes(e))||!1,onChange:()=>x("equipmentRolls",e),className:"h-4 w-4 text-[rgb(220, 38, 38)] focus:ring-[rgb(220, 38, 38)] border-gray-300 rounded"}),Fr.jsx("label",{className:"text-sm text-gray-700",children:e})]},e)})})]}),Fr.jsxs("div",{children:[Fr.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Contenant alimentaire"}),Fr.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:p.contenantAlimentaire.map(e=>{var s;return Fr.jsxs("div",{className:"flex items-center space-x-2",children:[Fr.jsx("input",{type:"checkbox",checked:(null==(s=t.equipmentContenantAlimentaire)?void 0:s.includes(e))||!1,onChange:()=>x("equipmentContenantAlimentaire",e),className:"h-4 w-4 text-[rgb(220, 38, 38)] focus:ring-[rgb(220, 38, 38)] border-gray-300 rounded"}),Fr.jsx("label",{className:"text-sm text-gray-700",children:e})]},e)})})]}),Fr.jsxs("div",{children:[Fr.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Bac"}),Fr.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:p.bac.map(e=>{var s;return Fr.jsxs("div",{className:"flex items-center space-x-2",children:[Fr.jsx("input",{type:"checkbox",checked:(null==(s=t.equipmentBac)?void 0:s.includes(e))||!1,onChange:()=>x("equipmentBac",e),className:"h-4 w-4 text-[rgb(220, 38, 38)] focus:ring-[rgb(220, 38, 38)] border-gray-300 rounded"}),Fr.jsx("label",{className:"text-sm text-gray-700",children:e})]},e)})})]}),Fr.jsxs("div",{children:[Fr.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Bennes Fermées"}),Fr.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:p.bennesFermees.map(e=>{var s;return Fr.jsxs("div",{className:"flex items-center space-x-2",children:[Fr.jsx("input",{type:"checkbox",checked:(null==(s=t.equipmentBennesFermees)?void 0:s.includes(e))||!1,onChange:()=>x("equipmentBennesFermees",e),className:"h-4 w-4 text-[rgb(220, 38, 38)] focus:ring-[rgb(220, 38, 38)] border-gray-300 rounded"}),Fr.jsx("label",{className:"text-sm text-gray-700",children:e})]},e)})})]})]})]}),Fr.jsxs(nf,{children:[Fr.jsxs(rf,{children:[Fr.jsx(af,{children:"Prix par forfait"}),Fr.jsx("p",{className:"text-sm text-gray-600",children:"Souhaitez-vous activer les prix forfaitaires ?"})]}),Fr.jsx(lf,{children:Fr.jsxs("div",{className:"flex items-center space-x-3",children:[Fr.jsx("input",{type:"checkbox",checked:t.prixForfaitEnabled||!1,onChange:e=>h("prixForfaitEnabled",e.target.checked),className:"h-4 w-4 text-[rgb(220, 38, 38)] focus:ring-[rgb(220, 38, 38)] border-gray-300 rounded"}),Fr.jsx("label",{className:"text-sm text-gray-700",children:"Activer les prix forfaitaires"})]})})]}),Fr.jsxs(nf,{children:[Fr.jsxs(rf,{children:[Fr.jsx(af,{children:"Adresse du site industriel"}),Fr.jsx("p",{className:"text-sm text-gray-600",children:"Configurez l'adresse de votre site industriel pour le calcul automatique des distances de transport (aller-retour)."})]}),Fr.jsxs(lf,{className:"space-y-4",children:[Fr.jsxs("div",{children:[Fr.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Adresse *"}),Fr.jsxs("div",{className:"relative",children:[Fr.jsx("input",{type:"text",value:t.industrialSiteAddress||"",onChange:e=>h("industrialSiteAddress",e.target.value),onFocus:()=>{var e;return(null==(e=t.industrialSiteAddress)?void 0:e.length)>=3&&l(!0)},onBlur:()=>setTimeout(()=>l(!1),200),placeholder:"123 Rue de l'Industrie",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-red-500"}),c&&Fr.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:Fr.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-red-500 border-t-transparent rounded-full"})}),o&&a.length>0&&Fr.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-200 rounded-md shadow-lg max-h-60 overflow-y-auto",children:a.map((e,t)=>Fr.jsxs("div",{className:"px-4 py-2 hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0",onClick:()=>(e=>{const t=e.description.split(", ");if(t.length>=3){const e=t[0],s=t[t.length-2],n=s.match(/(\d{5})/),r=s.replace(/\d{5}\s*/,"").trim();h("industrialSiteAddress",e),h("industrialSitePostalCode",n?n[1]:""),h("industrialSiteCity",r)}else h("industrialSiteAddress",e.description);l(!1),i([])})(e),children:[Fr.jsx("div",{className:"font-medium text-gray-900",children:e.main_text}),Fr.jsx("div",{className:"text-sm text-gray-500",children:e.secondary_text})]},t))})]})]}),Fr.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[Fr.jsxs("div",{children:[Fr.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Code postal *"}),Fr.jsx("input",{type:"text",value:t.industrialSitePostalCode||"",onChange:e=>h("industrialSitePostalCode",e.target.value),placeholder:"75001",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-red-500"})]}),Fr.jsxs("div",{children:[Fr.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ville *"}),Fr.jsx("input",{type:"text",value:t.industrialSiteCity||"",onChange:e=>h("industrialSiteCity",e.target.value),placeholder:"Paris",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-red-500"})]})]}),Fr.jsx("div",{className:"bg-blue-50 p-4 rounded-lg",children:Fr.jsxs("div",{className:"flex items-start",children:[Fr.jsx("div",{className:"flex-shrink-0",children:Fr.jsx("svg",{className:"w-5 h-5 text-blue-400",fill:"currentColor",viewBox:"0 0 20 20",children:Fr.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}),Fr.jsxs("div",{className:"ml-3",children:[Fr.jsx("h3",{className:"text-sm font-medium text-blue-800",children:"Calcul automatique des distances"}),Fr.jsx("div",{className:"mt-2 text-sm text-blue-700",children:Fr.jsx("p",{children:"Cette adresse sera utilisée pour calculer automatiquement la distance aller-retour entre votre site et l'adresse de livraison du client, permettant une tarification transport précise."})})]})]})})]})]})]})]}):Fr.jsx("div",{className:"flex items-center justify-center h-64",children:Fr.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-[rgb(220, 38, 38)] border-t-transparent rounded-full"})})}function fg(){var e,t;const{toast:s}=Ui(),[n,r]=hr.useState(!1),[a,i]=hr.useState(null),{data:o=[]}=Pi({queryKey:["/api/admin/bank-deposits"]}),{data:l=[]}=Pi({queryKey:["/api/services"]}),{data:c=[]}=Pi({queryKey:["/api/admin/waste-types"]}),d=Ei({mutationFn:e=>Oi("POST","/api/admin/bank-deposits",e),onSuccess:()=>{Ri.invalidateQueries({queryKey:["/api/admin/bank-deposits"]}),r(!1),s({title:"Empreinte bancaire créée",description:"La nouvelle empreinte bancaire a été ajoutée avec succès."})},onError:e=>{s({title:"Erreur",description:e.message,variant:"destructive"})}}),u=Ei({mutationFn:({id:e,...t})=>Oi("PUT",`/api/admin/bank-deposits/${e}`,t),onSuccess:()=>{Ri.invalidateQueries({queryKey:["/api/admin/bank-deposits"]}),r(!1),i(null),s({title:"Empreinte bancaire modifiée",description:"L'empreinte bancaire a été mise à jour avec succès."})},onError:e=>{s({title:"Erreur",description:e.message,variant:"destructive"})}}),m=Ei({mutationFn:e=>Oi("DELETE",`/api/admin/bank-deposits/${e}`),onSuccess:()=>{Ri.invalidateQueries({queryKey:["/api/admin/bank-deposits"]}),s({title:"Empreinte bancaire supprimée",description:"L'empreinte bancaire a été supprimée avec succès."})},onError:e=>{s({title:"Erreur",description:e.message,variant:"destructive"})}});return Fr.jsxs("div",{className:"space-y-6",children:[Fr.jsxs("div",{className:"flex justify-between items-center",children:[Fr.jsxs("div",{children:[Fr.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Empreintes bancaires"}),Fr.jsx("p",{className:"text-gray-600",children:"Gérez les empreintes bancaires par type de benne et de déchet"})]}),Fr.jsxs(Lp,{onClick:()=>r(!0),children:[Fr.jsx(jc,{className:"h-4 w-4 mr-2"}),"Nouvelle empreinte"]})]}),Fr.jsxs(nf,{children:[Fr.jsxs(rf,{children:[Fr.jsx(af,{children:"Liste des empreintes bancaires"}),Fr.jsx(of,{children:"Configuration des montants d'empreinte selon la benne et le type de déchet"})]}),Fr.jsx(lf,{children:Fr.jsxs(Gv,{children:[Fr.jsx(Yv,{children:Fr.jsxs(Xv,{children:[Fr.jsx(eg,{children:"Benne"}),Fr.jsx(eg,{children:"Type de déchet"}),Fr.jsx(eg,{children:"Montant (€)"}),Fr.jsx(eg,{children:"Description"}),Fr.jsx(eg,{children:"Statut"}),Fr.jsx(eg,{children:"Actions"})]})}),Fr.jsx(Jv,{children:o.map(e=>{var t,s;return Fr.jsxs(Xv,{children:[Fr.jsx(tg,{children:(null==(t=l.find(t=>t.id===e.serviceId))?void 0:t.name)||"N/A"}),Fr.jsx(tg,{children:(null==(s=c.find(t=>t.id===e.wasteTypeId))?void 0:s.name)||"N/A"}),Fr.jsxs(tg,{className:"font-medium",children:[Number(e.depositAmount).toFixed(2)," €"]}),Fr.jsx(tg,{children:e.description||"-"}),Fr.jsx(tg,{children:Fr.jsx(Hx,{variant:e.isActive?"default":"secondary",children:e.isActive?"Actif":"Inactif"})}),Fr.jsx(tg,{children:Fr.jsxs("div",{className:"flex space-x-2",children:[Fr.jsx(Lp,{variant:"outline",size:"sm",onClick:()=>{i(e),r(!0)},children:Fr.jsx(Dc,{className:"h-4 w-4"})}),Fr.jsx(Lp,{variant:"outline",size:"sm",onClick:()=>m.mutate(e.id),children:Fr.jsx(Ac,{className:"h-4 w-4"})})]})})]},e.id)})})]})})]}),Fr.jsx(Ax,{open:n,onOpenChange:r,children:Fr.jsxs(Ix,{children:[Fr.jsxs(Mx,{children:[Fr.jsxs(Lx,{children:[a?"Modifier":"Créer"," une empreinte bancaire"]}),Fr.jsx(qx,{children:"Configurez le montant de l'empreinte bancaire pour une combinaison benne/déchet"})]}),Fr.jsxs("form",{onSubmit:e=>{e.preventDefault();const t=new FormData(e.target),s={serviceId:Number(t.get("serviceId")),wasteTypeId:Number(t.get("wasteTypeId")),depositAmount:t.get("depositAmount"),description:t.get("description"),isActive:"on"===t.get("isActive")};a?u.mutate({id:a.id,...s}):d.mutate(s)},className:"space-y-4",children:[Fr.jsxs("div",{className:"space-y-2",children:[Fr.jsx("label",{className:"text-sm font-medium",children:"Type de benne"}),Fr.jsxs(Bv,{name:"serviceId",defaultValue:null==(e=null==a?void 0:a.serviceId)?void 0:e.toString(),children:[Fr.jsx(Wv,{children:Fr.jsx($v,{placeholder:"Sélectionnez une benne"})}),Fr.jsx(Hv,{children:l.map(e=>Fr.jsx(Zv,{value:e.id.toString(),children:e.name},e.id))})]})]}),Fr.jsxs("div",{className:"space-y-2",children:[Fr.jsx("label",{className:"text-sm font-medium",children:"Type de déchet"}),Fr.jsxs(Bv,{name:"wasteTypeId",defaultValue:null==(t=null==a?void 0:a.wasteTypeId)?void 0:t.toString(),children:[Fr.jsx(Wv,{children:Fr.jsx($v,{placeholder:"Sélectionnez un type de déchet"})}),Fr.jsx(Hv,{children:c.map(e=>Fr.jsx(Zv,{value:e.id.toString(),children:e.name},e.id))})]})]}),Fr.jsxs("div",{className:"space-y-2",children:[Fr.jsx("label",{className:"text-sm font-medium",children:"Montant de l'empreinte (€)"}),Fr.jsx(zx,{name:"depositAmount",type:"number",step:"0.01",placeholder:"0.00",defaultValue:null==a?void 0:a.depositAmount,required:!0})]}),Fr.jsxs("div",{className:"space-y-2",children:[Fr.jsx("label",{className:"text-sm font-medium",children:"Description"}),Fr.jsx(zx,{name:"description",placeholder:"Description de l'empreinte",defaultValue:(null==a?void 0:a.description)||""})]}),Fr.jsxs("div",{className:"flex items-center space-x-2",children:[Fr.jsx("input",{type:"checkbox",name:"isActive",className:"rounded border-gray-300",defaultChecked:(null==a?void 0:a.isActive)??!0}),Fr.jsx("label",{className:"text-sm font-medium",children:"Empreinte active"})]}),Fr.jsxs("div",{className:"flex justify-end space-x-2",children:[Fr.jsx(Lp,{type:"button",variant:"outline",onClick:()=>{r(!1),i(null)},children:"Annuler"}),Fr.jsx(Lp,{type:"submit",children:a?"Modifier":"Créer"})]})]})]})})]})}function vg(){const[e,t]=hr.useState("all"),[s,n]=hr.useState(""),{toast:r}=Ui(),{data:a=[],isLoading:i,refetch:o}=Pi({queryKey:["/api/admin/satisfaction-surveys"],select:e=>e||[]}),{data:l}=Pi({queryKey:["/api/admin/satisfaction-surveys/stats"],select:e=>e||{}}),c=a.filter(t=>{var n,r;const a="all"===e||"completed"===e&&t.completed||"pending"===e&&!t.completed||"expired"===e&&!t.completed&&new Date(t.expiresAt)<new Date,i=!s||(null==(n=t.orderId)?void 0:n.toString().includes(s))||(null==(r=t.customerName)?void 0:r.toLowerCase().includes(s.toLowerCase()));return a&&i}),d=e=>e.completed?Fr.jsx(Hx,{className:"bg-green-100 text-green-800",children:"Complété"}):new Date(e.expiresAt)<new Date?Fr.jsx(Hx,{variant:"destructive",children:"Expiré"}):Fr.jsx(Hx,{variant:"secondary",children:"En attente"});return i?Fr.jsx("div",{className:"flex items-center justify-center h-64",children:Fr.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-red-600 border-t-transparent rounded-full"})}):Fr.jsxs("div",{className:"space-y-6",children:[Fr.jsxs("div",{children:[Fr.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Questionnaires de Satisfaction"}),Fr.jsx("p",{className:"text-gray-600",children:"Gérez et analysez les retours clients envoyés 1 semaine après livraison"})]}),l&&Fr.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[Fr.jsx(nf,{children:Fr.jsx(lf,{className:"p-6",children:Fr.jsxs("div",{className:"flex items-center justify-between",children:[Fr.jsxs("div",{children:[Fr.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total questionnaires"}),Fr.jsx("p",{className:"text-3xl font-bold text-gray-900",children:l.totalSurveys||0})]}),Fr.jsx(ac,{className:"h-8 w-8 text-blue-600"})]})})}),Fr.jsx(nf,{children:Fr.jsx(lf,{className:"p-6",children:Fr.jsxs("div",{className:"flex items-center justify-between",children:[Fr.jsxs("div",{children:[Fr.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Taux de réponse"}),Fr.jsxs("p",{className:"text-3xl font-bold text-gray-900",children:[l.completionRate||0,"%"]})]}),Fr.jsx(Ll,{className:"h-8 w-8 text-green-600"})]})})}),Fr.jsx(nf,{children:Fr.jsx(lf,{className:"p-6",children:Fr.jsxs("div",{className:"flex items-center justify-between",children:[Fr.jsxs("div",{children:[Fr.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Note moyenne"}),Fr.jsxs("p",{className:"text-3xl font-bold text-gray-900",children:[l.averageOverallSatisfaction||0,"/5"]})]}),Fr.jsx(Tc,{className:"h-8 w-8 text-yellow-600"})]})})}),Fr.jsx(nf,{children:Fr.jsx(lf,{className:"p-6",children:Fr.jsxs("div",{className:"flex items-center justify-between",children:[Fr.jsxs("div",{children:[Fr.jsx("p",{className:"text-sm font-medium text-gray-600",children:"NPS moyen"}),Fr.jsxs("p",{className:"text-3xl font-bold text-gray-900",children:[l.averageNPS||0,"/10"]})]}),Fr.jsx(Oc,{className:"h-8 w-8 text-purple-600"})]})})})]}),Fr.jsx(nf,{children:Fr.jsx(lf,{className:"p-6",children:Fr.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[Fr.jsx("div",{className:"flex-1",children:Fr.jsx(zx,{placeholder:"Rechercher par numéro de commande ou nom client...",value:s,onChange:e=>n(e.target.value),className:"w-full"})}),Fr.jsxs(Bv,{value:e,onValueChange:t,children:[Fr.jsx(Wv,{className:"w-48",children:Fr.jsx($v,{})}),Fr.jsxs(Hv,{children:[Fr.jsx(Zv,{value:"all",children:"Tous les statuts"}),Fr.jsx(Zv,{value:"completed",children:"Complétés"}),Fr.jsx(Zv,{value:"pending",children:"En attente"}),Fr.jsx(Zv,{value:"expired",children:"Expirés"})]})]})]})})}),Fr.jsxs(nf,{children:[Fr.jsx(rf,{children:Fr.jsxs(af,{children:["Questionnaires (",c.length,")"]})}),Fr.jsx(lf,{children:0===c.length?Fr.jsxs("div",{className:"text-center py-12",children:[Fr.jsx(ac,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),Fr.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Aucun questionnaire trouvé"}),Fr.jsx("p",{className:"text-gray-600",children:"all"===e?"Aucun questionnaire n'a encore été envoyé":`Aucun questionnaire ${"completed"===e?"complété":"pending"===e?"en attente":"expiré"} trouvé`})]}):Fr.jsx("div",{className:"overflow-x-auto",children:Fr.jsxs(Gv,{children:[Fr.jsx(Yv,{children:Fr.jsxs(Xv,{children:[Fr.jsx(eg,{children:"Commande"}),Fr.jsx(eg,{children:"Client"}),Fr.jsx(eg,{children:"Envoyé le"}),Fr.jsx(eg,{children:"Statut"}),Fr.jsx(eg,{children:"Note globale"}),Fr.jsx(eg,{children:"NPS"}),Fr.jsx(eg,{children:"Actions"})]})}),Fr.jsx(Jv,{children:c.map(e=>{return Fr.jsxs(Xv,{children:[Fr.jsxs(tg,{className:"font-medium",children:["#",e.orderId]}),Fr.jsx(tg,{children:Fr.jsxs("div",{children:[Fr.jsx("div",{className:"font-medium",children:e.customerName||"N/A"}),Fr.jsx("div",{className:"text-sm text-gray-500",children:e.customerEmail||"N/A"})]})}),Fr.jsx(tg,{children:e.emailSent&&e.emailSentAt?new Date(e.emailSentAt).toLocaleDateString("fr-FR"):"Non envoyé"}),Fr.jsx(tg,{children:d(e)}),Fr.jsx(tg,{children:e.completed&&e.overallSatisfaction?(t=e.overallSatisfaction,Fr.jsxs("div",{className:"flex items-center gap-1",children:[[1,2,3,4,5].map(e=>Fr.jsx(Tc,{className:"h-4 w-4 "+(e<=t?"text-yellow-400 fill-yellow-400":"text-gray-300")},e)),Fr.jsxs("span",{className:"ml-2 text-sm text-gray-600",children:[t,"/5"]})]})):"-"}),Fr.jsx(tg,{children:e.completed&&null!==e.npsScore?`${e.npsScore}/10`:"-"}),Fr.jsx(tg,{children:Fr.jsx("div",{className:"flex items-center gap-2",children:e.completed?Fr.jsx(gg,{survey:e}):Fr.jsx(Lp,{variant:"outline",size:"sm",disabled:!0,children:Fr.jsx(nc,{className:"h-4 w-4"})})})})]},e.id);var t})})]})})})]})]})}function gg({survey:e}){const[t,s]=hr.useState(!1),n=e=>Fr.jsxs("div",{className:"flex items-center gap-2",children:[Fr.jsx("div",{className:"flex",children:[1,2,3,4,5].map(t=>Fr.jsx(Tc,{className:"h-4 w-4 "+(t<=e?"text-yellow-400 fill-yellow-400":"text-gray-300")},t))}),Fr.jsxs("span",{className:"text-sm font-medium",children:[e,"/5"]})]});return Fr.jsxs(Ax,{open:t,onOpenChange:s,children:[Fr.jsx(Ox,{asChild:!0,children:Fr.jsx(Lp,{variant:"outline",size:"sm",children:Fr.jsx(nc,{className:"h-4 w-4"})})}),Fr.jsxs(Ix,{className:"max-w-4xl max-h-[80vh] overflow-y-auto",children:[Fr.jsxs(Mx,{children:[Fr.jsxs(Lx,{children:["Détails du questionnaire - Commande #",e.orderId]}),Fr.jsxs(qx,{children:["Questionnaire complété le ",e.completedAt?(a=e.completedAt,new Date(a).toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})):"N/A"]})]}),Fr.jsxs("div",{className:"space-y-6",children:[Fr.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[Fr.jsxs("div",{children:[Fr.jsx("h4",{className:"font-semibold mb-2",children:"Informations client"}),Fr.jsxs("div",{className:"space-y-1 text-sm",children:[Fr.jsxs("p",{children:[Fr.jsx("span",{className:"font-medium",children:"Nom:"})," ",e.customerName||"N/A"]}),Fr.jsxs("p",{children:[Fr.jsx("span",{className:"font-medium",children:"Email:"})," ",e.customerEmail||"N/A"]})]})]}),Fr.jsxs("div",{children:[Fr.jsx("h4",{className:"font-semibold mb-2",children:"Métadonnées"}),Fr.jsxs("div",{className:"space-y-1 text-sm",children:[Fr.jsxs("p",{children:[Fr.jsx("span",{className:"font-medium",children:"IP:"})," ",e.ipAddress||"N/A"]}),Fr.jsxs("p",{children:[Fr.jsx("span",{className:"font-medium",children:"Navigateur:"})," ",e.userAgent?e.userAgent.substring(0,50)+"...":"N/A"]})]})]})]}),Fr.jsxs("div",{children:[Fr.jsx("h4",{className:"font-semibold mb-4",children:"Évaluations détaillées"}),Fr.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[Fr.jsxs("div",{className:"space-y-3",children:[Fr.jsxs("div",{className:"flex justify-between items-center",children:[Fr.jsx("span",{className:"text-sm",children:"Satisfaction globale"}),n(e.overallSatisfaction||0)]}),Fr.jsxs("div",{className:"flex justify-between items-center",children:[Fr.jsx("span",{className:"text-sm",children:"Qualité du service"}),n(e.serviceQuality||0)]}),Fr.jsxs("div",{className:"flex justify-between items-center",children:[Fr.jsx("span",{className:"text-sm",children:"Ponctualité livraison"}),n(e.deliveryTiming||0)]})]}),Fr.jsxs("div",{className:"space-y-3",children:[Fr.jsxs("div",{className:"flex justify-between items-center",children:[Fr.jsx("span",{className:"text-sm",children:"Ponctualité collecte"}),n(e.pickupTiming||0)]}),Fr.jsxs("div",{className:"flex justify-between items-center",children:[Fr.jsx("span",{className:"text-sm",children:"Service client"}),n(e.customerService||0)]}),Fr.jsxs("div",{className:"flex justify-between items-center",children:[Fr.jsx("span",{className:"text-sm",children:"Rapport qualité-prix"}),n(e.valueForMoney||0)]})]})]})]}),Fr.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[Fr.jsxs("div",{className:"text-center p-4 border rounded-lg",children:[Fr.jsx("h5",{className:"font-semibold mb-2",children:"Score NPS"}),Fr.jsxs("div",{className:"text-2xl font-bold "+(r=e.npsScore||0,r>=9?"text-green-600":r>=7?"text-yellow-600":"text-red-600"),children:[e.npsScore||0,"/10"]})]}),Fr.jsxs("div",{className:"text-center p-4 border rounded-lg",children:[Fr.jsx("h5",{className:"font-semibold mb-2",children:"Recommanderait"}),Fr.jsx("div",{className:"text-2xl font-bold "+(e.wouldRecommend?"text-green-600":"text-red-600"),children:e.wouldRecommend?"Oui":"Non"})]}),Fr.jsxs("div",{className:"text-center p-4 border rounded-lg",children:[Fr.jsx("h5",{className:"font-semibold mb-2",children:"Utiliserait à nouveau"}),Fr.jsx("div",{className:"text-2xl font-bold "+(e.wouldUseAgain?"text-green-600":"text-red-600"),children:e.wouldUseAgain?"Oui":"Non"})]})]}),Fr.jsxs("div",{className:"space-y-4",children:[e.positiveComments&&Fr.jsxs("div",{children:[Fr.jsx("h5",{className:"font-semibold mb-2 text-green-700",children:"Points positifs"}),Fr.jsx("div",{className:"p-3 bg-green-50 border border-green-200 rounded-lg",children:Fr.jsx("p",{className:"text-sm",children:e.positiveComments})})]}),e.negativeComments&&Fr.jsxs("div",{children:[Fr.jsx("h5",{className:"font-semibold mb-2 text-red-700",children:"Points d'amélioration"}),Fr.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg",children:Fr.jsx("p",{className:"text-sm",children:e.negativeComments})})]}),e.suggestions&&Fr.jsxs("div",{children:[Fr.jsx("h5",{className:"font-semibold mb-2 text-blue-700",children:"Suggestions"}),Fr.jsx("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg",children:Fr.jsx("p",{className:"text-sm",children:e.suggestions})})]})]})]})]})]});var r,a}function yg(){const[e,t]=hr.useState("dashboard");return Fr.jsx("div",{className:"min-h-screen bg-gray-50",children:Fr.jsxs("div",{className:"flex",children:[Fr.jsxs("div",{className:"w-64 bg-white shadow-lg",children:[Fr.jsx("div",{className:"p-6",children:Fr.jsxs("div",{className:"flex items-center space-x-3",children:[Fr.jsx("div",{className:"w-10 h-10 bg-red-600 rounded-lg flex items-center justify-center",children:Fr.jsx("span",{className:"text-white font-bold text-lg",children:"R"})}),Fr.jsxs("div",{children:[Fr.jsx("h2",{className:"text-xl font-bold text-red-700",children:"REMONDIS"}),Fr.jsx("p",{className:"text-xs text-gray-500",children:"Espace Client"})]})]})}),Fr.jsxs("nav",{className:"mt-6",children:[Fr.jsxs("div",{className:"px-4",children:[Fr.jsx("h3",{className:"text-xs font-semibold text-gray-400 uppercase tracking-wide mb-3",children:"PRINCIPAL"}),Fr.jsxs("ul",{className:"space-y-1",children:[Fr.jsx("li",{children:Fr.jsxs("button",{onClick:()=>t("dashboard"),className:"w-full flex items-center px-4 py-2 text-sm rounded-lg transition-colors "+("dashboard"===e?"bg-red-100 text-red-700 border-r-2 border-red-500":"text-gray-700 hover:bg-gray-100"),children:[Fr.jsx(Pc,{className:"mr-3 h-4 w-4"}),"Dashboard"]})}),Fr.jsx("li",{children:Fr.jsxs("button",{onClick:()=>t("orders"),className:"w-full flex items-center px-4 py-2 text-sm rounded-lg transition-colors "+("orders"===e?"bg-red-100 text-red-700 border-r-2 border-red-500":"text-gray-700 hover:bg-gray-100"),children:[Fr.jsx(Fc,{className:"mr-3 h-4 w-4"}),"Commandes"]})}),Fr.jsx("li",{children:Fr.jsxs("button",{onClick:()=>window.location.href="/admin/fids",className:"w-full flex items-center px-4 py-2 text-sm rounded-lg transition-colors text-gray-700 hover:bg-gray-100",children:[Fr.jsx(ac,{className:"mr-3 h-4 w-4"}),"Gestion des FID"]})}),Fr.jsx("li",{children:Fr.jsxs("button",{onClick:()=>t("users"),className:"w-full flex items-center px-4 py-2 text-sm rounded-lg transition-colors "+("users"===e?"bg-red-100 text-red-700 border-r-2 border-red-500":"text-gray-700 hover:bg-gray-100"),children:[Fr.jsx(Fc,{className:"mr-3 h-4 w-4"}),"Mes Commandes"]})})]})]}),Fr.jsxs("div",{className:"px-4 mt-8",children:[Fr.jsx("h3",{className:"text-xs font-semibold text-gray-400 uppercase tracking-wide mb-3",children:"ADMINISTRATION"}),Fr.jsxs("ul",{className:"space-y-1",children:[Fr.jsx("li",{children:Fr.jsxs("button",{onClick:()=>t("users"),className:"w-full flex items-center px-4 py-2 text-sm rounded-lg transition-colors "+("users"===e?"bg-red-100 text-red-700 border-r-2 border-red-500":"text-gray-700 hover:bg-gray-100"),children:[Fr.jsx(zc,{className:"mr-3 h-4 w-4"}),"Gestion Utilisateurs"]})}),Fr.jsx("li",{children:Fr.jsxs("button",{onClick:()=>t("client-map"),className:"w-full flex items-center px-4 py-2 text-sm rounded-lg transition-colors "+("client-map"===e?"bg-red-100 text-red-700 border-r-2 border-red-500":"text-gray-700 hover:bg-gray-100"),children:[Fr.jsx(fc,{className:"mr-3 h-4 w-4"}),"Carte des Clients"]})}),Fr.jsx("li",{children:Fr.jsxs("button",{onClick:()=>t("rental-pricing"),className:"w-full flex items-center px-4 py-2 text-sm rounded-lg transition-colors "+("rental-pricing"===e?"bg-red-100 text-red-700 border-r-2 border-red-500":"text-gray-700 hover:bg-gray-100"),children:[Fr.jsx(Xl,{className:"mr-3 h-4 w-4"}),"Prix de Location"]})}),Fr.jsx("li",{children:Fr.jsxs("button",{onClick:()=>t("transport-pricing"),className:"w-full flex items-center px-4 py-2 text-sm rounded-lg transition-colors "+("transport-pricing"===e?"bg-red-100 text-red-700 border-r-2 border-red-500":"text-gray-700 hover:bg-gray-100"),children:[Fr.jsx(Fc,{className:"mr-3 h-4 w-4"}),"Prix de Transport"]})}),Fr.jsx("li",{children:Fr.jsxs("button",{onClick:()=>t("treatment-pricing"),className:"w-full flex items-center px-4 py-2 text-sm rounded-lg transition-colors "+("treatment-pricing"===e?"bg-red-100 text-red-700 border-r-2 border-red-500":"text-gray-700 hover:bg-gray-100"),children:[Fr.jsx(gc,{className:"mr-3 h-4 w-4"}),"Prix de Traitement"]})}),Fr.jsx("li",{children:Fr.jsxs("button",{onClick:()=>t("price-simulator"),className:"w-full flex items-center px-4 py-2 text-sm rounded-lg transition-colors "+("price-simulator"===e?"bg-red-100 text-red-700 border-r-2 border-red-500":"text-gray-700 hover:bg-gray-100"),children:[Fr.jsx(Al,{className:"mr-3 h-4 w-4"}),"Simulateur de Prix"]})}),Fr.jsx("li",{children:Fr.jsxs("button",{onClick:()=>t("bank-deposits"),className:"w-full flex items-center px-4 py-2 text-sm rounded-lg transition-colors "+("bank-deposits"===e?"bg-red-100 text-red-700 border-r-2 border-red-500":"text-gray-700 hover:bg-gray-100"),children:[Fr.jsx(tc,{className:"mr-3 h-4 w-4"}),"Empreintes bancaires"]})}),Fr.jsx("li",{children:Fr.jsxs("button",{onClick:()=>t("my-activities"),className:"w-full flex items-center px-4 py-2 text-sm rounded-lg transition-colors "+("my-activities"===e?"bg-red-100 text-red-700 border-r-2 border-red-500":"text-gray-700 hover:bg-gray-100"),children:[Fr.jsx(Sc,{className:"mr-3 h-4 w-4"}),"Mes activités"]})}),Fr.jsx("li",{children:Fr.jsxs("button",{onClick:()=>t("satisfaction-surveys"),className:"w-full flex items-center px-4 py-2 text-sm rounded-lg transition-colors "+("satisfaction-surveys"===e?"bg-red-100 text-red-700 border-r-2 border-red-500":"text-gray-700 hover:bg-gray-100"),children:[Fr.jsx(ac,{className:"mr-3 h-4 w-4"}),"Questionnaires"]})})]})]})]})]}),Fr.jsx("div",{className:"flex-1 p-8",children:(()=>{switch(e){case"orders":return Fr.jsx(lg,{});case"users":return Fr.jsx(rg,{});case"client-map":return Fr.jsx(ng,{});case"configuration":return Fr.jsx(cg,{});case"activities":return Fr.jsx(dg,{});case"rental-pricing":return Fr.jsx(ug,{});case"transport-pricing":return Fr.jsx(mg,{});case"treatment-pricing":return Fr.jsx(pg,{});case"price-simulator":return Fr.jsx(hg,{});case"bank-deposits":return Fr.jsx(fg,{});case"my-activities":return Fr.jsx(xg,{});case"satisfaction-surveys":return Fr.jsx(vg,{});default:return Fr.jsx(og,{})}})()})]})})}function bg({order:e,onSuccess:t}){const[s,n]=hr.useState(!1),{toast:r}=Ui(),a=Ei({mutationFn:async()=>{await Oi("PUT",`/api/admin/orders/${e.id}/validate-delivery-date`,{confirmedDate:e.deliveryDate})},onSuccess:()=>{n(!1),t()},onError:e=>{r({title:"Erreur",description:"Impossible de confirmer la date de livraison.",variant:"destructive"})}});return Fr.jsxs(Ax,{open:s,onOpenChange:n,children:[Fr.jsx(Ox,{asChild:!0,children:Fr.jsx(Lp,{variant:"outline",size:"sm",className:"text-green-600 hover:text-green-700",children:Fr.jsx(Ol,{className:"h-4 w-4"})})}),Fr.jsxs(Ix,{children:[Fr.jsxs(Mx,{children:[Fr.jsx(Lx,{children:"Confirmer la date de livraison"}),Fr.jsxs(qx,{children:["Voulez-vous confirmer la date de livraison prévue pour le ",new Date(e.deliveryDate).toLocaleDateString("fr-FR")," ? Un email de confirmation sera envoyé au client."]})]}),Fr.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[Fr.jsx(Lp,{variant:"outline",onClick:()=>n(!1),children:"Annuler"}),Fr.jsx(Lp,{onClick:()=>a.mutate(),disabled:a.isPending,className:"bg-green-600 hover:bg-green-700",children:a.isPending?"Confirmation...":"Confirmer"})]})]})]})}function jg({order:e,onSuccess:t}){const[s,n]=hr.useState(!1),[r,a]=hr.useState(""),{toast:i}=Ui(),o=Ei({mutationFn:async t=>{await Oi("PUT",`/api/admin/orders/${e.id}/propose-delivery-date`,{proposedDate:t})},onSuccess:()=>{n(!1),a(""),t()},onError:e=>{i({title:"Erreur",description:"Impossible de proposer la nouvelle date.",variant:"destructive"})}});return Fr.jsxs(Ax,{open:s,onOpenChange:n,children:[Fr.jsx(Ox,{asChild:!0,children:Fr.jsx(Lp,{variant:"outline",size:"sm",className:"text-orange-600 hover:text-orange-700",children:Fr.jsx(Fl,{className:"h-4 w-4"})})}),Fr.jsxs(Ix,{children:[Fr.jsxs(Mx,{children:[Fr.jsx(Lx,{children:"Proposer une nouvelle date"}),Fr.jsxs(qx,{children:["Date actuelle : ",new Date(e.deliveryDate).toLocaleDateString("fr-FR"),Fr.jsx("br",{}),"Proposez une nouvelle date de livraison. Un email sera envoyé au client pour validation."]})]}),Fr.jsxs("div",{className:"space-y-4",children:[Fr.jsxs("div",{children:[Fr.jsx("label",{htmlFor:"newDate",className:"block text-sm font-medium mb-2",children:"Nouvelle date de livraison"}),Fr.jsx(zx,{id:"newDate",type:"datetime-local",value:r,onChange:e=>a(e.target.value),min:(new Date).toISOString().slice(0,16)})]}),Fr.jsxs("div",{className:"flex justify-end gap-2",children:[Fr.jsx(Lp,{variant:"outline",onClick:()=>n(!1),children:"Annuler"}),Fr.jsx(Lp,{onClick:()=>{r?o.mutate(r):i({title:"Erreur",description:"Veuillez sélectionner une nouvelle date.",variant:"destructive"})},disabled:o.isPending,className:"bg-orange-600 hover:bg-orange-700",children:o.isPending?"Envoi...":"Proposer"})]})]})]})]})}function Ng({order:e,onSuccess:t}){const[s,n]=hr.useState(!1),{toast:r}=Ui(),a=Ei({mutationFn:async()=>{await Oi("DELETE",`/api/admin/orders/${e.id}`)},onSuccess:()=>{n(!1),t()},onError:e=>{r({title:"Erreur",description:"Impossible de supprimer la commande.",variant:"destructive"})}});return Fr.jsxs(Ax,{open:s,onOpenChange:n,children:[Fr.jsx(Ox,{asChild:!0,children:Fr.jsx(Lp,{variant:"outline",size:"sm",className:"text-red-600 hover:text-red-700",children:Fr.jsx(Ac,{className:"h-4 w-4"})})}),Fr.jsxs(Ix,{children:[Fr.jsxs(Mx,{children:[Fr.jsx(Lx,{children:"Supprimer la commande"}),Fr.jsxs(qx,{children:["Êtes-vous sûr de vouloir supprimer définitivement la commande ",e.orderNumber," ?",Fr.jsx("br",{}),Fr.jsx("strong",{children:"Cette action est irréversible."})]})]}),Fr.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mt-4",children:Fr.jsxs("div",{className:"flex items-start",children:[Fr.jsx(Rc,{className:"h-5 w-5 text-red-600 mt-0.5 mr-3"}),Fr.jsxs("div",{children:[Fr.jsx("h4",{className:"font-medium text-red-800",children:"Attention"}),Fr.jsx("p",{className:"text-sm text-red-700 mt-1",children:"La suppression de cette commande supprimera également :"}),Fr.jsxs("ul",{className:"text-sm text-red-700 mt-2 ml-4 list-disc",children:[Fr.jsx("li",{children:"Toutes les données de facturation"}),Fr.jsx("li",{children:"L'historique des paiements"}),Fr.jsx("li",{children:"Les notes administratives"})]})]})]})}),Fr.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[Fr.jsx(Lp,{variant:"outline",onClick:()=>n(!1),children:"Annuler"}),Fr.jsx(Lp,{onClick:()=>a.mutate(),disabled:a.isPending,className:"bg-red-600 hover:bg-red-700",children:a.isPending?"Suppression...":"Supprimer définitivement"})]})]})]})}function wg({service:e,onClose:t}){const[s,n]=hr.useState([]),[r,a]=hr.useState(!1),[i,o]=hr.useState(!1),l=hr.useRef(null),{toast:c}=Ui(),d=[{value:"face",label:"Vue de face",description:"Photo frontale de la benne"},{value:"side_right",label:"Côté droit",description:"Vue du côté droit"},{value:"side_left",label:"Côté gauche",description:"Vue du côté gauche"},{value:"with_person",label:"Avec personne",description:"Photo avec une personne pour l'échelle"},{value:"back",label:"Vue arrière",description:"Photo arrière de la benne"}],{data:u,refetch:m}=Pi({queryKey:[`/api/admin/services/${e.id}/images`],enabled:!!e.id});hr.useEffect(()=>{u&&n(u)},[u]);const p=async(t,s="face")=>{if(t&&0!==t.length){a(!0);try{for(let n=0;n<t.length;n++){const r=t[n];if(!r.type.startsWith("image/")){c({title:"Format non supporté",description:`Le fichier ${r.name} n'est pas une image.`,variant:"destructive"});continue}if(r.size>5242880){c({title:"Fichier trop volumineux",description:`Le fichier ${r.name} dépasse 5MB.`,variant:"destructive"});continue}const a=new FormData;a.append("image",r),a.append("imageType",s),a.append("serviceId",e.id.toString());const i=await fetch("/api/admin/services/images/upload",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`},body:a});if(!i.ok)throw new Error("Erreur lors de l'upload");await i.json();c({title:"Photo ajoutée",description:`La photo ${r.name} a été ajoutée avec succès.`})}m()}catch(n){c({title:"Erreur d'upload",description:"Impossible d'uploader les photos.",variant:"destructive"})}finally{a(!1)}}},h=e=>{e.preventDefault(),e.stopPropagation(),"dragenter"===e.type||"dragover"===e.type?o(!0):"dragleave"===e.type&&o(!1)};return Fr.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:Fr.jsxs("div",{className:"bg-white rounded-lg w-full max-w-4xl max-h-[90vh] overflow-hidden",children:[Fr.jsxs("div",{className:"p-6 border-b flex justify-between items-center",children:[Fr.jsxs("div",{children:[Fr.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Gérer les photos"}),Fr.jsxs("p",{className:"text-gray-600",children:[e.name," - ",e.volume,"m³"]})]}),Fr.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-100 rounded-lg",children:Fr.jsx(Vc,{className:"h-5 w-5"})})]}),Fr.jsxs("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-120px)]",children:[Fr.jsxs("div",{className:"mb-6",children:[Fr.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ajouter des photos"}),Fr.jsxs("div",{className:"border-2 border-dashed rounded-lg p-6 text-center transition-colors "+(i?"border-red-500 bg-red-50":"border-gray-300 hover:border-red-400"),onDragEnter:h,onDragLeave:h,onDragOver:h,onDrop:e=>{e.preventDefault(),e.stopPropagation(),o(!1),e.dataTransfer.files&&e.dataTransfer.files[0]&&p(e.dataTransfer.files)},children:[Fr.jsx(Ml,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),Fr.jsx("p",{className:"text-gray-600 mb-2",children:"Glissez-déposez vos photos ici ou"}),Fr.jsx("button",{onClick:()=>{var e;return null==(e=l.current)?void 0:e.click()},disabled:r,className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 disabled:opacity-50",children:r?"Upload en cours...":"Sélectionner des fichiers"}),Fr.jsx("input",{ref:l,type:"file",multiple:!0,accept:"image/*",onChange:e=>e.target.files&&p(e.target.files),className:"hidden"}),Fr.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Formats supportés: JPG, PNG, WebP (max 5MB par fichier)"})]})]}),Fr.jsxs("div",{className:"mb-6",children:[Fr.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Photos actuelles"}),s&&s.length>0?Fr.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:s.map(e=>{var t,s,n,r;return Fr.jsxs("div",{className:"border rounded-lg overflow-hidden",children:[Fr.jsxs("div",{className:"aspect-video bg-gray-100 relative",children:[Fr.jsx("img",{src:e.imagePath.startsWith("@assets/")?`/src/assets/${e.imagePath.replace("@assets/","")}`:e.imagePath.startsWith("/uploads/")?`http://localhost:5000${e.imagePath}`:`https://via.placeholder.com/400x225/3b82f6/ffffff?text=${encodeURIComponent((null==(t=d.find(t=>t.value===e.imageType))?void 0:t.label)||e.imageType)}`,alt:e.altText||`Photo ${e.imageType}`,className:"w-full h-full object-cover",onError:e=>{e.target.src=`https://via.placeholder.com/400x225/dc2626/ffffff?text=${encodeURIComponent("Image non trouvée")}`}}),e.isMain&&Fr.jsx("div",{className:"absolute top-2 left-2 bg-green-500 text-white px-2 py-1 rounded text-xs",children:"Principale"})]}),Fr.jsxs("div",{className:"p-3",children:[Fr.jsx("div",{className:"flex justify-between items-start mb-2",children:Fr.jsxs("div",{children:[Fr.jsx("p",{className:"font-medium text-sm",children:(null==(s=d.find(t=>t.value===e.imageType))?void 0:s.label)||e.imageType}),Fr.jsx("p",{className:"text-xs text-gray-500",children:null==(n=d.find(t=>t.value===e.imageType))?void 0:n.description}),Fr.jsx("p",{className:"text-xs text-blue-600 mt-1",children:(null==(r=e.imagePath.split("/").pop())?void 0:r.split("_")[0])||"Image uploadée"})]})}),Fr.jsxs("div",{className:"flex gap-2",children:[!e.isMain&&Fr.jsx("button",{onClick:()=>(async e=>{try{if(!(await fetch(`/api/admin/services/images/${e}/set-main`,{method:"PUT",headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`}})).ok)throw new Error("Erreur lors de la mise à jour");c({title:"Photo principale définie",description:"Cette photo est maintenant la photo principale."}),m()}catch(t){c({title:"Erreur",description:"Impossible de définir la photo principale.",variant:"destructive"})}})(e.id),className:"px-2 py-1 bg-green-600 text-white rounded text-xs hover:bg-green-700",children:"Définir principale"}),Fr.jsx("button",{onClick:()=>(async e=>{try{if(!(await fetch(`/api/admin/services/images/${e}`,{method:"DELETE",headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`}})).ok)throw new Error("Erreur lors de la suppression");c({title:"Photo supprimée",description:"La photo a été supprimée avec succès."}),m()}catch(t){c({title:"Erreur",description:"Impossible de supprimer la photo.",variant:"destructive"})}})(e.id),className:"px-2 py-1 bg-red-600 text-white rounded text-xs hover:bg-red-700",children:"Supprimer"})]})]})]},e.id)})}):Fr.jsxs("div",{className:"text-center py-8",children:[Fr.jsx(lc,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),Fr.jsx("p",{className:"text-gray-500",children:"Aucune photo pour cette benne"}),Fr.jsx("p",{className:"text-sm text-gray-400",children:"Ajoutez des photos pour améliorer la présentation"})]})]}),Fr.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[Fr.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"Types de photos recommandés"}),Fr.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 text-sm",children:d.map(e=>Fr.jsxs("div",{className:"flex items-center gap-2",children:[Fr.jsx("div",{className:"w-2 h-2 bg-blue-400 rounded-full"}),Fr.jsxs("span",{className:"text-blue-800",children:[Fr.jsxs("strong",{children:[e.label,":"]})," ",e.description]})]},e.value))})]})]}),Fr.jsx("div",{className:"p-6 border-t bg-gray-50",children:Fr.jsx("div",{className:"flex justify-end",children:Fr.jsx("button",{onClick:t,className:"px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700",children:"Fermer"})})})]})})}function kg(){const{user:e,isAuthenticated:t}=Fp();return hr.useEffect(()=>{t||(window.location.href="/auth")},[t]),e&&"admin"===e.role?Fr.jsx(yg,{}):Fr.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:Fr.jsxs("div",{className:"max-w-md mx-auto text-center",children:[Fr.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:Fr.jsx("span",{className:"text-red-600 text-2xl",children:"🚫"})}),Fr.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Accès refusé"}),Fr.jsx("p",{className:"text-gray-600 mb-6",children:"Vous devez être administrateur pour accéder à cette page."}),Fr.jsx("button",{onClick:()=>window.location.href="/",className:"bg-red-600 text-white px-6 py-2 rounded-lg hover:bg-red-700 transition-colors",children:"Retour à l'accueil"})]})})}tg.displayName="TableCell",hr.forwardRef(function(e,t){var s=e.className,n=Qv(e,["className"]);return Fr.jsx("caption",{ref:t,className:Fd("mt-4 text-sm text-muted-foreground",s),...n})}).displayName="TableCaption";const Cg={},Sg=function(e,t,s){let n=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const e=document.querySelector("meta[property=csp-nonce]"),s=(null==e?void 0:e.nonce)||(null==e?void 0:e.getAttribute("nonce"));n=Promise.allSettled(t.map(e=>{if((e=function(e){return"/"+e}(e))in Cg)return;Cg[e]=!0;const t=e.endsWith(".css"),n=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${n}`))return;const r=document.createElement("link");return r.rel=t?"stylesheet":"modulepreload",t||(r.as="script"),r.crossOrigin="",r.href=e,s&&r.setAttribute("nonce",s),document.head.appendChild(r),t?new Promise((t,s)=>{r.addEventListener("load",t),r.addEventListener("error",()=>s(new Error(`Unable to preload CSS for ${e}`)))}):void 0}))}function r(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return n.then(t=>{for(const e of t||[])"rejected"===e.status&&r(e.reason);return e().catch(r)})};var _g="rovingFocusGroup.onEntryFocus",Pg={bubbles:!1,cancelable:!0},Eg="RovingFocusGroup",[Dg,Tg,Ag]=ro(Eg),[Og,Rg]=Gi(Eg,[Ag]),[Fg,Ig]=Og(Eg),Mg=hr.forwardRef((e,t)=>Fr.jsx(Dg.Provider,{scope:e.__scopeRovingFocusGroup,children:Fr.jsx(Dg.Slot,{scope:e.__scopeRovingFocusGroup,children:Fr.jsx(Lg,{...e,ref:t})})}));Mg.displayName=Eg;var Lg=hr.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:s,orientation:n,loop:r=!1,dir:a,currentTabStopId:i,defaultCurrentTabStopId:o,onCurrentTabStopIdChange:l,onEntryFocus:c,preventScrollOnEntryFocus:d=!1,...u}=e,m=hr.useRef(null),p=Qi(t,m),h=Cf(a),[x,f]=Co({prop:i,defaultProp:o??null,onChange:l,caller:Eg}),[v,g]=hr.useState(!1),y=oo(c),b=Tg(s),j=hr.useRef(!1),[N,w]=hr.useState(0);return hr.useEffect(()=>{const e=m.current;if(e)return e.addEventListener(_g,y),()=>e.removeEventListener(_g,y)},[y]),Fr.jsx(Fg,{scope:s,orientation:n,dir:h,loop:r,currentTabStopId:x,onItemFocus:hr.useCallback(e=>f(e),[f]),onItemShiftTab:hr.useCallback(()=>g(!0),[]),onFocusableItemAdd:hr.useCallback(()=>w(e=>e+1),[]),onFocusableItemRemove:hr.useCallback(()=>w(e=>e-1),[]),children:Fr.jsx(ao.div,{tabIndex:v||0===N?-1:0,"data-orientation":n,...u,ref:p,style:{outline:"none",...e.style},onMouseDown:Ki(e.onMouseDown,()=>{j.current=!0}),onFocus:Ki(e.onFocus,e=>{const t=!j.current;if(e.target===e.currentTarget&&t&&!v){const t=new CustomEvent(_g,Pg);if(e.currentTarget.dispatchEvent(t),!t.defaultPrevented){const e=b().filter(e=>e.focusable);Bg([e.find(e=>e.active),e.find(e=>e.id===x),...e].filter(Boolean).map(e=>e.ref.current),d)}}j.current=!1}),onBlur:Ki(e.onBlur,()=>g(!1))})})}),qg="RovingFocusGroupItem",zg=hr.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:s,focusable:n=!0,active:r=!1,tabStopId:a,children:i,...o}=e,l=Hd(),c=a||l,d=Ig(qg,s),u=d.currentTabStopId===c,m=Tg(s),{onFocusableItemAdd:p,onFocusableItemRemove:h,currentTabStopId:x}=d;return hr.useEffect(()=>{if(n)return p(),()=>h()},[n,p,h]),Fr.jsx(Dg.ItemSlot,{scope:s,id:c,focusable:n,active:r,children:Fr.jsx(ao.span,{tabIndex:u?0:-1,"data-orientation":d.orientation,...o,ref:t,onMouseDown:Ki(e.onMouseDown,e=>{n?d.onItemFocus(c):e.preventDefault()}),onFocus:Ki(e.onFocus,()=>d.onItemFocus(c)),onKeyDown:Ki(e.onKeyDown,e=>{if("Tab"===e.key&&e.shiftKey)return void d.onItemShiftTab();if(e.target!==e.currentTarget)return;const t=function(e,t,s){const n=function(e,t){return"rtl"!==t?e:"ArrowLeft"===e?"ArrowRight":"ArrowRight"===e?"ArrowLeft":e}(e.key,s);return"vertical"===t&&["ArrowLeft","ArrowRight"].includes(n)||"horizontal"===t&&["ArrowUp","ArrowDown"].includes(n)?void 0:Vg[n]}(e,d.orientation,d.dir);if(void 0!==t){if(e.metaKey||e.ctrlKey||e.altKey||e.shiftKey)return;e.preventDefault();let r=m().filter(e=>e.focusable).map(e=>e.ref.current);if("last"===t)r.reverse();else if("prev"===t||"next"===t){"prev"===t&&r.reverse();const a=r.indexOf(e.currentTarget);r=d.loop?(n=a+1,(s=r).map((e,t)=>s[(n+t)%s.length])):r.slice(a+1)}setTimeout(()=>Bg(r))}var s,n}),children:"function"==typeof i?i({isCurrentTabStop:u,hasTabStop:null!=x}):i})})});zg.displayName=qg;var Vg={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Bg(e,t=!1){const s=document.activeElement;for(const n of e){if(n===s)return;if(n.focus({preventScroll:t}),document.activeElement!==s)return}}var $g=Mg,Wg=zg,Ug="Tabs",[Kg,Hg]=Gi(Ug,[Rg]),Zg=Rg(),[Qg,Gg]=Kg(Ug),Yg=hr.forwardRef((e,t)=>{const{__scopeTabs:s,value:n,onValueChange:r,defaultValue:a,orientation:i="horizontal",dir:o,activationMode:l="automatic",...c}=e,d=Cf(o),[u,m]=Co({prop:n,onChange:r,defaultProp:a??"",caller:Ug});return Fr.jsx(Qg,{scope:s,baseId:Hd(),value:u,onValueChange:m,orientation:i,dir:d,activationMode:l,children:Fr.jsx(ao.div,{dir:d,"data-orientation":i,...c,ref:t})})});Yg.displayName=Ug;var Jg="TabsList",Xg=hr.forwardRef((e,t)=>{const{__scopeTabs:s,loop:n=!0,...r}=e,a=Gg(Jg,s),i=Zg(s);return Fr.jsx($g,{asChild:!0,...i,orientation:a.orientation,dir:a.dir,loop:n,children:Fr.jsx(ao.div,{role:"tablist","aria-orientation":a.orientation,...r,ref:t})})});Xg.displayName=Jg;var ey="TabsTrigger",ty=hr.forwardRef((e,t)=>{const{__scopeTabs:s,value:n,disabled:r=!1,...a}=e,i=Gg(ey,s),o=Zg(s),l=ry(i.baseId,n),c=ay(i.baseId,n),d=n===i.value;return Fr.jsx(Wg,{asChild:!0,...o,focusable:!r,active:d,children:Fr.jsx(ao.button,{type:"button",role:"tab","aria-selected":d,"aria-controls":c,"data-state":d?"active":"inactive","data-disabled":r?"":void 0,disabled:r,id:l,...a,ref:t,onMouseDown:Ki(e.onMouseDown,e=>{r||0!==e.button||!1!==e.ctrlKey?e.preventDefault():i.onValueChange(n)}),onKeyDown:Ki(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&i.onValueChange(n)}),onFocus:Ki(e.onFocus,()=>{const e="manual"!==i.activationMode;d||r||!e||i.onValueChange(n)})})})});ty.displayName=ey;var sy="TabsContent",ny=hr.forwardRef((e,t)=>{const{__scopeTabs:s,value:n,forceMount:r,children:a,...i}=e,o=Gg(sy,s),l=ry(o.baseId,n),c=ay(o.baseId,n),d=n===o.value,u=hr.useRef(d);return hr.useEffect(()=>{const e=requestAnimationFrame(()=>u.current=!1);return()=>cancelAnimationFrame(e)},[]),Fr.jsx(No,{present:r||d,children:({present:s})=>Fr.jsx(ao.div,{"data-state":d?"active":"inactive","data-orientation":o.orientation,role:"tabpanel","aria-labelledby":l,hidden:!s,id:c,tabIndex:0,...i,ref:t,style:{...e.style,animationDuration:u.current?"0s":void 0},children:s&&a})})});function ry(e,t){return`${e}-trigger-${t}`}function ay(e,t){return`${e}-content-${t}`}ny.displayName=sy;var iy=Xg,oy=ty,ly=ny;const cy=Yg,dy=hr.forwardRef(({className:e,...t},s)=>Fr.jsx(iy,{ref:s,className:Fd("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));dy.displayName=iy.displayName;const uy=hr.forwardRef(({className:e,...t},s)=>Fr.jsx(oy,{ref:s,className:Fd("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...t}));uy.displayName=oy.displayName;const my=hr.forwardRef(({className:e,...t},s)=>Fr.jsx(ly,{ref:s,className:Fd("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));my.displayName=ly.displayName;const py=new Map([["1km","application/vnd.1000minds.decision-model+xml"],["3dml","text/vnd.in3d.3dml"],["3ds","image/x-3ds"],["3g2","video/3gpp2"],["3gp","video/3gp"],["3gpp","video/3gpp"],["3mf","model/3mf"],["7z","application/x-7z-compressed"],["7zip","application/x-7z-compressed"],["123","application/vnd.lotus-1-2-3"],["aab","application/x-authorware-bin"],["aac","audio/x-acc"],["aam","application/x-authorware-map"],["aas","application/x-authorware-seg"],["abw","application/x-abiword"],["ac","application/vnd.nokia.n-gage.ac+xml"],["ac3","audio/ac3"],["acc","application/vnd.americandynamics.acc"],["ace","application/x-ace-compressed"],["acu","application/vnd.acucobol"],["acutc","application/vnd.acucorp"],["adp","audio/adpcm"],["aep","application/vnd.audiograph"],["afm","application/x-font-type1"],["afp","application/vnd.ibm.modcap"],["ahead","application/vnd.ahead.space"],["ai","application/pdf"],["aif","audio/x-aiff"],["aifc","audio/x-aiff"],["aiff","audio/x-aiff"],["air","application/vnd.adobe.air-application-installer-package+zip"],["ait","application/vnd.dvb.ait"],["ami","application/vnd.amiga.ami"],["amr","audio/amr"],["apk","application/vnd.android.package-archive"],["apng","image/apng"],["appcache","text/cache-manifest"],["application","application/x-ms-application"],["apr","application/vnd.lotus-approach"],["arc","application/x-freearc"],["arj","application/x-arj"],["asc","application/pgp-signature"],["asf","video/x-ms-asf"],["asm","text/x-asm"],["aso","application/vnd.accpac.simply.aso"],["asx","video/x-ms-asf"],["atc","application/vnd.acucorp"],["atom","application/atom+xml"],["atomcat","application/atomcat+xml"],["atomdeleted","application/atomdeleted+xml"],["atomsvc","application/atomsvc+xml"],["atx","application/vnd.antix.game-component"],["au","audio/x-au"],["avi","video/x-msvideo"],["avif","image/avif"],["aw","application/applixware"],["azf","application/vnd.airzip.filesecure.azf"],["azs","application/vnd.airzip.filesecure.azs"],["azv","image/vnd.airzip.accelerator.azv"],["azw","application/vnd.amazon.ebook"],["b16","image/vnd.pco.b16"],["bat","application/x-msdownload"],["bcpio","application/x-bcpio"],["bdf","application/x-font-bdf"],["bdm","application/vnd.syncml.dm+wbxml"],["bdoc","application/x-bdoc"],["bed","application/vnd.realvnc.bed"],["bh2","application/vnd.fujitsu.oasysprs"],["bin","application/octet-stream"],["blb","application/x-blorb"],["blorb","application/x-blorb"],["bmi","application/vnd.bmi"],["bmml","application/vnd.balsamiq.bmml+xml"],["bmp","image/bmp"],["book","application/vnd.framemaker"],["box","application/vnd.previewsystems.box"],["boz","application/x-bzip2"],["bpk","application/octet-stream"],["bpmn","application/octet-stream"],["bsp","model/vnd.valve.source.compiled-map"],["btif","image/prs.btif"],["buffer","application/octet-stream"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["c","text/x-c"],["c4d","application/vnd.clonk.c4group"],["c4f","application/vnd.clonk.c4group"],["c4g","application/vnd.clonk.c4group"],["c4p","application/vnd.clonk.c4group"],["c4u","application/vnd.clonk.c4group"],["c11amc","application/vnd.cluetrust.cartomobile-config"],["c11amz","application/vnd.cluetrust.cartomobile-config-pkg"],["cab","application/vnd.ms-cab-compressed"],["caf","audio/x-caf"],["cap","application/vnd.tcpdump.pcap"],["car","application/vnd.curl.car"],["cat","application/vnd.ms-pki.seccat"],["cb7","application/x-cbr"],["cba","application/x-cbr"],["cbr","application/x-cbr"],["cbt","application/x-cbr"],["cbz","application/x-cbr"],["cc","text/x-c"],["cco","application/x-cocoa"],["cct","application/x-director"],["ccxml","application/ccxml+xml"],["cdbcmsg","application/vnd.contact.cmsg"],["cda","application/x-cdf"],["cdf","application/x-netcdf"],["cdfx","application/cdfx+xml"],["cdkey","application/vnd.mediastation.cdkey"],["cdmia","application/cdmi-capability"],["cdmic","application/cdmi-container"],["cdmid","application/cdmi-domain"],["cdmio","application/cdmi-object"],["cdmiq","application/cdmi-queue"],["cdr","application/cdr"],["cdx","chemical/x-cdx"],["cdxml","application/vnd.chemdraw+xml"],["cdy","application/vnd.cinderella"],["cer","application/pkix-cert"],["cfs","application/x-cfs-compressed"],["cgm","image/cgm"],["chat","application/x-chat"],["chm","application/vnd.ms-htmlhelp"],["chrt","application/vnd.kde.kchart"],["cif","chemical/x-cif"],["cii","application/vnd.anser-web-certificate-issue-initiation"],["cil","application/vnd.ms-artgalry"],["cjs","application/node"],["cla","application/vnd.claymore"],["class","application/octet-stream"],["clkk","application/vnd.crick.clicker.keyboard"],["clkp","application/vnd.crick.clicker.palette"],["clkt","application/vnd.crick.clicker.template"],["clkw","application/vnd.crick.clicker.wordbank"],["clkx","application/vnd.crick.clicker"],["clp","application/x-msclip"],["cmc","application/vnd.cosmocaller"],["cmdf","chemical/x-cmdf"],["cml","chemical/x-cml"],["cmp","application/vnd.yellowriver-custom-menu"],["cmx","image/x-cmx"],["cod","application/vnd.rim.cod"],["coffee","text/coffeescript"],["com","application/x-msdownload"],["conf","text/plain"],["cpio","application/x-cpio"],["cpp","text/x-c"],["cpt","application/mac-compactpro"],["crd","application/x-mscardfile"],["crl","application/pkix-crl"],["crt","application/x-x509-ca-cert"],["crx","application/x-chrome-extension"],["cryptonote","application/vnd.rig.cryptonote"],["csh","application/x-csh"],["csl","application/vnd.citationstyles.style+xml"],["csml","chemical/x-csml"],["csp","application/vnd.commonspace"],["csr","application/octet-stream"],["css","text/css"],["cst","application/x-director"],["csv","text/csv"],["cu","application/cu-seeme"],["curl","text/vnd.curl"],["cww","application/prs.cww"],["cxt","application/x-director"],["cxx","text/x-c"],["dae","model/vnd.collada+xml"],["daf","application/vnd.mobius.daf"],["dart","application/vnd.dart"],["dataless","application/vnd.fdsn.seed"],["davmount","application/davmount+xml"],["dbf","application/vnd.dbf"],["dbk","application/docbook+xml"],["dcr","application/x-director"],["dcurl","text/vnd.curl.dcurl"],["dd2","application/vnd.oma.dd2+xml"],["ddd","application/vnd.fujixerox.ddd"],["ddf","application/vnd.syncml.dmddf+xml"],["dds","image/vnd.ms-dds"],["deb","application/x-debian-package"],["def","text/plain"],["deploy","application/octet-stream"],["der","application/x-x509-ca-cert"],["dfac","application/vnd.dreamfactory"],["dgc","application/x-dgc-compressed"],["dic","text/x-c"],["dir","application/x-director"],["dis","application/vnd.mobius.dis"],["disposition-notification","message/disposition-notification"],["dist","application/octet-stream"],["distz","application/octet-stream"],["djv","image/vnd.djvu"],["djvu","image/vnd.djvu"],["dll","application/octet-stream"],["dmg","application/x-apple-diskimage"],["dmn","application/octet-stream"],["dmp","application/vnd.tcpdump.pcap"],["dms","application/octet-stream"],["dna","application/vnd.dna"],["doc","application/msword"],["docm","application/vnd.ms-word.template.macroEnabled.12"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["dot","application/msword"],["dotm","application/vnd.ms-word.template.macroEnabled.12"],["dotx","application/vnd.openxmlformats-officedocument.wordprocessingml.template"],["dp","application/vnd.osgi.dp"],["dpg","application/vnd.dpgraph"],["dra","audio/vnd.dra"],["drle","image/dicom-rle"],["dsc","text/prs.lines.tag"],["dssc","application/dssc+der"],["dtb","application/x-dtbook+xml"],["dtd","application/xml-dtd"],["dts","audio/vnd.dts"],["dtshd","audio/vnd.dts.hd"],["dump","application/octet-stream"],["dvb","video/vnd.dvb.file"],["dvi","application/x-dvi"],["dwd","application/atsc-dwd+xml"],["dwf","model/vnd.dwf"],["dwg","image/vnd.dwg"],["dxf","image/vnd.dxf"],["dxp","application/vnd.spotfire.dxp"],["dxr","application/x-director"],["ear","application/java-archive"],["ecelp4800","audio/vnd.nuera.ecelp4800"],["ecelp7470","audio/vnd.nuera.ecelp7470"],["ecelp9600","audio/vnd.nuera.ecelp9600"],["ecma","application/ecmascript"],["edm","application/vnd.novadigm.edm"],["edx","application/vnd.novadigm.edx"],["efif","application/vnd.picsel"],["ei6","application/vnd.pg.osasli"],["elc","application/octet-stream"],["emf","image/emf"],["eml","message/rfc822"],["emma","application/emma+xml"],["emotionml","application/emotionml+xml"],["emz","application/x-msmetafile"],["eol","audio/vnd.digital-winds"],["eot","application/vnd.ms-fontobject"],["eps","application/postscript"],["epub","application/epub+zip"],["es","application/ecmascript"],["es3","application/vnd.eszigno3+xml"],["esa","application/vnd.osgi.subsystem"],["esf","application/vnd.epson.esf"],["et3","application/vnd.eszigno3+xml"],["etx","text/x-setext"],["eva","application/x-eva"],["evy","application/x-envoy"],["exe","application/octet-stream"],["exi","application/exi"],["exp","application/express"],["exr","image/aces"],["ext","application/vnd.novadigm.ext"],["ez","application/andrew-inset"],["ez2","application/vnd.ezpix-album"],["ez3","application/vnd.ezpix-package"],["f","text/x-fortran"],["f4v","video/mp4"],["f77","text/x-fortran"],["f90","text/x-fortran"],["fbs","image/vnd.fastbidsheet"],["fcdt","application/vnd.adobe.formscentral.fcdt"],["fcs","application/vnd.isac.fcs"],["fdf","application/vnd.fdf"],["fdt","application/fdt+xml"],["fe_launch","application/vnd.denovo.fcselayout-link"],["fg5","application/vnd.fujitsu.oasysgp"],["fgd","application/x-director"],["fh","image/x-freehand"],["fh4","image/x-freehand"],["fh5","image/x-freehand"],["fh7","image/x-freehand"],["fhc","image/x-freehand"],["fig","application/x-xfig"],["fits","image/fits"],["flac","audio/x-flac"],["fli","video/x-fli"],["flo","application/vnd.micrografx.flo"],["flv","video/x-flv"],["flw","application/vnd.kde.kivio"],["flx","text/vnd.fmi.flexstor"],["fly","text/vnd.fly"],["fm","application/vnd.framemaker"],["fnc","application/vnd.frogans.fnc"],["fo","application/vnd.software602.filler.form+xml"],["for","text/x-fortran"],["fpx","image/vnd.fpx"],["frame","application/vnd.framemaker"],["fsc","application/vnd.fsc.weblaunch"],["fst","image/vnd.fst"],["ftc","application/vnd.fluxtime.clip"],["fti","application/vnd.anser-web-funds-transfer-initiation"],["fvt","video/vnd.fvt"],["fxp","application/vnd.adobe.fxp"],["fxpl","application/vnd.adobe.fxp"],["fzs","application/vnd.fuzzysheet"],["g2w","application/vnd.geoplan"],["g3","image/g3fax"],["g3w","application/vnd.geospace"],["gac","application/vnd.groove-account"],["gam","application/x-tads"],["gbr","application/rpki-ghostbusters"],["gca","application/x-gca-compressed"],["gdl","model/vnd.gdl"],["gdoc","application/vnd.google-apps.document"],["geo","application/vnd.dynageo"],["geojson","application/geo+json"],["gex","application/vnd.geometry-explorer"],["ggb","application/vnd.geogebra.file"],["ggt","application/vnd.geogebra.tool"],["ghf","application/vnd.groove-help"],["gif","image/gif"],["gim","application/vnd.groove-identity-message"],["glb","model/gltf-binary"],["gltf","model/gltf+json"],["gml","application/gml+xml"],["gmx","application/vnd.gmx"],["gnumeric","application/x-gnumeric"],["gpg","application/gpg-keys"],["gph","application/vnd.flographit"],["gpx","application/gpx+xml"],["gqf","application/vnd.grafeq"],["gqs","application/vnd.grafeq"],["gram","application/srgs"],["gramps","application/x-gramps-xml"],["gre","application/vnd.geometry-explorer"],["grv","application/vnd.groove-injector"],["grxml","application/srgs+xml"],["gsf","application/x-font-ghostscript"],["gsheet","application/vnd.google-apps.spreadsheet"],["gslides","application/vnd.google-apps.presentation"],["gtar","application/x-gtar"],["gtm","application/vnd.groove-tool-message"],["gtw","model/vnd.gtw"],["gv","text/vnd.graphviz"],["gxf","application/gxf"],["gxt","application/vnd.geonext"],["gz","application/gzip"],["gzip","application/gzip"],["h","text/x-c"],["h261","video/h261"],["h263","video/h263"],["h264","video/h264"],["hal","application/vnd.hal+xml"],["hbci","application/vnd.hbci"],["hbs","text/x-handlebars-template"],["hdd","application/x-virtualbox-hdd"],["hdf","application/x-hdf"],["heic","image/heic"],["heics","image/heic-sequence"],["heif","image/heif"],["heifs","image/heif-sequence"],["hej2","image/hej2k"],["held","application/atsc-held+xml"],["hh","text/x-c"],["hjson","application/hjson"],["hlp","application/winhlp"],["hpgl","application/vnd.hp-hpgl"],["hpid","application/vnd.hp-hpid"],["hps","application/vnd.hp-hps"],["hqx","application/mac-binhex40"],["hsj2","image/hsj2"],["htc","text/x-component"],["htke","application/vnd.kenameaapp"],["htm","text/html"],["html","text/html"],["hvd","application/vnd.yamaha.hv-dic"],["hvp","application/vnd.yamaha.hv-voice"],["hvs","application/vnd.yamaha.hv-script"],["i2g","application/vnd.intergeo"],["icc","application/vnd.iccprofile"],["ice","x-conference/x-cooltalk"],["icm","application/vnd.iccprofile"],["ico","image/x-icon"],["ics","text/calendar"],["ief","image/ief"],["ifb","text/calendar"],["ifm","application/vnd.shana.informed.formdata"],["iges","model/iges"],["igl","application/vnd.igloader"],["igm","application/vnd.insors.igm"],["igs","model/iges"],["igx","application/vnd.micrografx.igx"],["iif","application/vnd.shana.informed.interchange"],["img","application/octet-stream"],["imp","application/vnd.accpac.simply.imp"],["ims","application/vnd.ms-ims"],["in","text/plain"],["ini","text/plain"],["ink","application/inkml+xml"],["inkml","application/inkml+xml"],["install","application/x-install-instructions"],["iota","application/vnd.astraea-software.iota"],["ipfix","application/ipfix"],["ipk","application/vnd.shana.informed.package"],["irm","application/vnd.ibm.rights-management"],["irp","application/vnd.irepository.package+xml"],["iso","application/x-iso9660-image"],["itp","application/vnd.shana.informed.formtemplate"],["its","application/its+xml"],["ivp","application/vnd.immervision-ivp"],["ivu","application/vnd.immervision-ivu"],["jad","text/vnd.sun.j2me.app-descriptor"],["jade","text/jade"],["jam","application/vnd.jam"],["jar","application/java-archive"],["jardiff","application/x-java-archive-diff"],["java","text/x-java-source"],["jhc","image/jphc"],["jisp","application/vnd.jisp"],["jls","image/jls"],["jlt","application/vnd.hp-jlyt"],["jng","image/x-jng"],["jnlp","application/x-java-jnlp-file"],["joda","application/vnd.joost.joda-archive"],["jp2","image/jp2"],["jpe","image/jpeg"],["jpeg","image/jpeg"],["jpf","image/jpx"],["jpg","image/jpeg"],["jpg2","image/jp2"],["jpgm","video/jpm"],["jpgv","video/jpeg"],["jph","image/jph"],["jpm","video/jpm"],["jpx","image/jpx"],["js","application/javascript"],["json","application/json"],["json5","application/json5"],["jsonld","application/ld+json"],["jsonl","application/jsonl"],["jsonml","application/jsonml+json"],["jsx","text/jsx"],["jxr","image/jxr"],["jxra","image/jxra"],["jxrs","image/jxrs"],["jxs","image/jxs"],["jxsc","image/jxsc"],["jxsi","image/jxsi"],["jxss","image/jxss"],["kar","audio/midi"],["karbon","application/vnd.kde.karbon"],["kdb","application/octet-stream"],["kdbx","application/x-keepass2"],["key","application/x-iwork-keynote-sffkey"],["kfo","application/vnd.kde.kformula"],["kia","application/vnd.kidspiration"],["kml","application/vnd.google-earth.kml+xml"],["kmz","application/vnd.google-earth.kmz"],["kne","application/vnd.kinar"],["knp","application/vnd.kinar"],["kon","application/vnd.kde.kontour"],["kpr","application/vnd.kde.kpresenter"],["kpt","application/vnd.kde.kpresenter"],["kpxx","application/vnd.ds-keypoint"],["ksp","application/vnd.kde.kspread"],["ktr","application/vnd.kahootz"],["ktx","image/ktx"],["ktx2","image/ktx2"],["ktz","application/vnd.kahootz"],["kwd","application/vnd.kde.kword"],["kwt","application/vnd.kde.kword"],["lasxml","application/vnd.las.las+xml"],["latex","application/x-latex"],["lbd","application/vnd.llamagraphics.life-balance.desktop"],["lbe","application/vnd.llamagraphics.life-balance.exchange+xml"],["les","application/vnd.hhe.lesson-player"],["less","text/less"],["lgr","application/lgr+xml"],["lha","application/octet-stream"],["link66","application/vnd.route66.link66+xml"],["list","text/plain"],["list3820","application/vnd.ibm.modcap"],["listafp","application/vnd.ibm.modcap"],["litcoffee","text/coffeescript"],["lnk","application/x-ms-shortcut"],["log","text/plain"],["lostxml","application/lost+xml"],["lrf","application/octet-stream"],["lrm","application/vnd.ms-lrm"],["ltf","application/vnd.frogans.ltf"],["lua","text/x-lua"],["luac","application/x-lua-bytecode"],["lvp","audio/vnd.lucent.voice"],["lwp","application/vnd.lotus-wordpro"],["lzh","application/octet-stream"],["m1v","video/mpeg"],["m2a","audio/mpeg"],["m2v","video/mpeg"],["m3a","audio/mpeg"],["m3u","text/plain"],["m3u8","application/vnd.apple.mpegurl"],["m4a","audio/x-m4a"],["m4p","application/mp4"],["m4s","video/iso.segment"],["m4u","application/vnd.mpegurl"],["m4v","video/x-m4v"],["m13","application/x-msmediaview"],["m14","application/x-msmediaview"],["m21","application/mp21"],["ma","application/mathematica"],["mads","application/mads+xml"],["maei","application/mmt-aei+xml"],["mag","application/vnd.ecowin.chart"],["maker","application/vnd.framemaker"],["man","text/troff"],["manifest","text/cache-manifest"],["map","application/json"],["mar","application/octet-stream"],["markdown","text/markdown"],["mathml","application/mathml+xml"],["mb","application/mathematica"],["mbk","application/vnd.mobius.mbk"],["mbox","application/mbox"],["mc1","application/vnd.medcalcdata"],["mcd","application/vnd.mcd"],["mcurl","text/vnd.curl.mcurl"],["md","text/markdown"],["mdb","application/x-msaccess"],["mdi","image/vnd.ms-modi"],["mdx","text/mdx"],["me","text/troff"],["mesh","model/mesh"],["meta4","application/metalink4+xml"],["metalink","application/metalink+xml"],["mets","application/mets+xml"],["mfm","application/vnd.mfmp"],["mft","application/rpki-manifest"],["mgp","application/vnd.osgeo.mapguide.package"],["mgz","application/vnd.proteus.magazine"],["mid","audio/midi"],["midi","audio/midi"],["mie","application/x-mie"],["mif","application/vnd.mif"],["mime","message/rfc822"],["mj2","video/mj2"],["mjp2","video/mj2"],["mjs","application/javascript"],["mk3d","video/x-matroska"],["mka","audio/x-matroska"],["mkd","text/x-markdown"],["mks","video/x-matroska"],["mkv","video/x-matroska"],["mlp","application/vnd.dolby.mlp"],["mmd","application/vnd.chipnuts.karaoke-mmd"],["mmf","application/vnd.smaf"],["mml","text/mathml"],["mmr","image/vnd.fujixerox.edmics-mmr"],["mng","video/x-mng"],["mny","application/x-msmoney"],["mobi","application/x-mobipocket-ebook"],["mods","application/mods+xml"],["mov","video/quicktime"],["movie","video/x-sgi-movie"],["mp2","audio/mpeg"],["mp2a","audio/mpeg"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mp4a","audio/mp4"],["mp4s","application/mp4"],["mp4v","video/mp4"],["mp21","application/mp21"],["mpc","application/vnd.mophun.certificate"],["mpd","application/dash+xml"],["mpe","video/mpeg"],["mpeg","video/mpeg"],["mpg","video/mpeg"],["mpg4","video/mp4"],["mpga","audio/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["mpm","application/vnd.blueice.multipass"],["mpn","application/vnd.mophun.application"],["mpp","application/vnd.ms-project"],["mpt","application/vnd.ms-project"],["mpy","application/vnd.ibm.minipay"],["mqy","application/vnd.mobius.mqy"],["mrc","application/marc"],["mrcx","application/marcxml+xml"],["ms","text/troff"],["mscml","application/mediaservercontrol+xml"],["mseed","application/vnd.fdsn.mseed"],["mseq","application/vnd.mseq"],["msf","application/vnd.epson.msf"],["msg","application/vnd.ms-outlook"],["msh","model/mesh"],["msi","application/x-msdownload"],["msl","application/vnd.mobius.msl"],["msm","application/octet-stream"],["msp","application/octet-stream"],["msty","application/vnd.muvee.style"],["mtl","model/mtl"],["mts","model/vnd.mts"],["mus","application/vnd.musician"],["musd","application/mmt-usd+xml"],["musicxml","application/vnd.recordare.musicxml+xml"],["mvb","application/x-msmediaview"],["mvt","application/vnd.mapbox-vector-tile"],["mwf","application/vnd.mfer"],["mxf","application/mxf"],["mxl","application/vnd.recordare.musicxml"],["mxmf","audio/mobile-xmf"],["mxml","application/xv+xml"],["mxs","application/vnd.triscape.mxs"],["mxu","video/vnd.mpegurl"],["n-gage","application/vnd.nokia.n-gage.symbian.install"],["n3","text/n3"],["nb","application/mathematica"],["nbp","application/vnd.wolfram.player"],["nc","application/x-netcdf"],["ncx","application/x-dtbncx+xml"],["nfo","text/x-nfo"],["ngdat","application/vnd.nokia.n-gage.data"],["nitf","application/vnd.nitf"],["nlu","application/vnd.neurolanguage.nlu"],["nml","application/vnd.enliven"],["nnd","application/vnd.noblenet-directory"],["nns","application/vnd.noblenet-sealer"],["nnw","application/vnd.noblenet-web"],["npx","image/vnd.net-fpx"],["nq","application/n-quads"],["nsc","application/x-conference"],["nsf","application/vnd.lotus-notes"],["nt","application/n-triples"],["ntf","application/vnd.nitf"],["numbers","application/x-iwork-numbers-sffnumbers"],["nzb","application/x-nzb"],["oa2","application/vnd.fujitsu.oasys2"],["oa3","application/vnd.fujitsu.oasys3"],["oas","application/vnd.fujitsu.oasys"],["obd","application/x-msbinder"],["obgx","application/vnd.openblox.game+xml"],["obj","model/obj"],["oda","application/oda"],["odb","application/vnd.oasis.opendocument.database"],["odc","application/vnd.oasis.opendocument.chart"],["odf","application/vnd.oasis.opendocument.formula"],["odft","application/vnd.oasis.opendocument.formula-template"],["odg","application/vnd.oasis.opendocument.graphics"],["odi","application/vnd.oasis.opendocument.image"],["odm","application/vnd.oasis.opendocument.text-master"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogex","model/vnd.opengex"],["ogg","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["omdoc","application/omdoc+xml"],["onepkg","application/onenote"],["onetmp","application/onenote"],["onetoc","application/onenote"],["onetoc2","application/onenote"],["opf","application/oebps-package+xml"],["opml","text/x-opml"],["oprc","application/vnd.palm"],["opus","audio/ogg"],["org","text/x-org"],["osf","application/vnd.yamaha.openscoreformat"],["osfpvg","application/vnd.yamaha.openscoreformat.osfpvg+xml"],["osm","application/vnd.openstreetmap.data+xml"],["otc","application/vnd.oasis.opendocument.chart-template"],["otf","font/otf"],["otg","application/vnd.oasis.opendocument.graphics-template"],["oth","application/vnd.oasis.opendocument.text-web"],["oti","application/vnd.oasis.opendocument.image-template"],["otp","application/vnd.oasis.opendocument.presentation-template"],["ots","application/vnd.oasis.opendocument.spreadsheet-template"],["ott","application/vnd.oasis.opendocument.text-template"],["ova","application/x-virtualbox-ova"],["ovf","application/x-virtualbox-ovf"],["owl","application/rdf+xml"],["oxps","application/oxps"],["oxt","application/vnd.openofficeorg.extension"],["p","text/x-pascal"],["p7a","application/x-pkcs7-signature"],["p7b","application/x-pkcs7-certificates"],["p7c","application/pkcs7-mime"],["p7m","application/pkcs7-mime"],["p7r","application/x-pkcs7-certreqresp"],["p7s","application/pkcs7-signature"],["p8","application/pkcs8"],["p10","application/x-pkcs10"],["p12","application/x-pkcs12"],["pac","application/x-ns-proxy-autoconfig"],["pages","application/x-iwork-pages-sffpages"],["pas","text/x-pascal"],["paw","application/vnd.pawaafile"],["pbd","application/vnd.powerbuilder6"],["pbm","image/x-portable-bitmap"],["pcap","application/vnd.tcpdump.pcap"],["pcf","application/x-font-pcf"],["pcl","application/vnd.hp-pcl"],["pclxl","application/vnd.hp-pclxl"],["pct","image/x-pict"],["pcurl","application/vnd.curl.pcurl"],["pcx","image/x-pcx"],["pdb","application/x-pilot"],["pde","text/x-processing"],["pdf","application/pdf"],["pem","application/x-x509-user-cert"],["pfa","application/x-font-type1"],["pfb","application/x-font-type1"],["pfm","application/x-font-type1"],["pfr","application/font-tdpfr"],["pfx","application/x-pkcs12"],["pgm","image/x-portable-graymap"],["pgn","application/x-chess-pgn"],["pgp","application/pgp"],["php","application/x-httpd-php"],["php3","application/x-httpd-php"],["php4","application/x-httpd-php"],["phps","application/x-httpd-php-source"],["phtml","application/x-httpd-php"],["pic","image/x-pict"],["pkg","application/octet-stream"],["pki","application/pkixcmp"],["pkipath","application/pkix-pkipath"],["pkpass","application/vnd.apple.pkpass"],["pl","application/x-perl"],["plb","application/vnd.3gpp.pic-bw-large"],["plc","application/vnd.mobius.plc"],["plf","application/vnd.pocketlearn"],["pls","application/pls+xml"],["pm","application/x-perl"],["pml","application/vnd.ctc-posml"],["png","image/png"],["pnm","image/x-portable-anymap"],["portpkg","application/vnd.macports.portpkg"],["pot","application/vnd.ms-powerpoint"],["potm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["potx","application/vnd.openxmlformats-officedocument.presentationml.template"],["ppa","application/vnd.ms-powerpoint"],["ppam","application/vnd.ms-powerpoint.addin.macroEnabled.12"],["ppd","application/vnd.cups-ppd"],["ppm","image/x-portable-pixmap"],["pps","application/vnd.ms-powerpoint"],["ppsm","application/vnd.ms-powerpoint.slideshow.macroEnabled.12"],["ppsx","application/vnd.openxmlformats-officedocument.presentationml.slideshow"],["ppt","application/powerpoint"],["pptm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["pqa","application/vnd.palm"],["prc","application/x-pilot"],["pre","application/vnd.lotus-freelance"],["prf","application/pics-rules"],["provx","application/provenance+xml"],["ps","application/postscript"],["psb","application/vnd.3gpp.pic-bw-small"],["psd","application/x-photoshop"],["psf","application/x-font-linux-psf"],["pskcxml","application/pskc+xml"],["pti","image/prs.pti"],["ptid","application/vnd.pvi.ptid1"],["pub","application/x-mspublisher"],["pvb","application/vnd.3gpp.pic-bw-var"],["pwn","application/vnd.3m.post-it-notes"],["pya","audio/vnd.ms-playready.media.pya"],["pyv","video/vnd.ms-playready.media.pyv"],["qam","application/vnd.epson.quickanime"],["qbo","application/vnd.intu.qbo"],["qfx","application/vnd.intu.qfx"],["qps","application/vnd.publishare-delta-tree"],["qt","video/quicktime"],["qwd","application/vnd.quark.quarkxpress"],["qwt","application/vnd.quark.quarkxpress"],["qxb","application/vnd.quark.quarkxpress"],["qxd","application/vnd.quark.quarkxpress"],["qxl","application/vnd.quark.quarkxpress"],["qxt","application/vnd.quark.quarkxpress"],["ra","audio/x-realaudio"],["ram","audio/x-pn-realaudio"],["raml","application/raml+yaml"],["rapd","application/route-apd+xml"],["rar","application/x-rar"],["ras","image/x-cmu-raster"],["rcprofile","application/vnd.ipunplugged.rcprofile"],["rdf","application/rdf+xml"],["rdz","application/vnd.data-vision.rdz"],["relo","application/p2p-overlay+xml"],["rep","application/vnd.businessobjects"],["res","application/x-dtbresource+xml"],["rgb","image/x-rgb"],["rif","application/reginfo+xml"],["rip","audio/vnd.rip"],["ris","application/x-research-info-systems"],["rl","application/resource-lists+xml"],["rlc","image/vnd.fujixerox.edmics-rlc"],["rld","application/resource-lists-diff+xml"],["rm","audio/x-pn-realaudio"],["rmi","audio/midi"],["rmp","audio/x-pn-realaudio-plugin"],["rms","application/vnd.jcp.javame.midlet-rms"],["rmvb","application/vnd.rn-realmedia-vbr"],["rnc","application/relax-ng-compact-syntax"],["rng","application/xml"],["roa","application/rpki-roa"],["roff","text/troff"],["rp9","application/vnd.cloanto.rp9"],["rpm","audio/x-pn-realaudio-plugin"],["rpss","application/vnd.nokia.radio-presets"],["rpst","application/vnd.nokia.radio-preset"],["rq","application/sparql-query"],["rs","application/rls-services+xml"],["rsa","application/x-pkcs7"],["rsat","application/atsc-rsat+xml"],["rsd","application/rsd+xml"],["rsheet","application/urc-ressheet+xml"],["rss","application/rss+xml"],["rtf","text/rtf"],["rtx","text/richtext"],["run","application/x-makeself"],["rusd","application/route-usd+xml"],["rv","video/vnd.rn-realvideo"],["s","text/x-asm"],["s3m","audio/s3m"],["saf","application/vnd.yamaha.smaf-audio"],["sass","text/x-sass"],["sbml","application/sbml+xml"],["sc","application/vnd.ibm.secure-container"],["scd","application/x-msschedule"],["scm","application/vnd.lotus-screencam"],["scq","application/scvp-cv-request"],["scs","application/scvp-cv-response"],["scss","text/x-scss"],["scurl","text/vnd.curl.scurl"],["sda","application/vnd.stardivision.draw"],["sdc","application/vnd.stardivision.calc"],["sdd","application/vnd.stardivision.impress"],["sdkd","application/vnd.solent.sdkm+xml"],["sdkm","application/vnd.solent.sdkm+xml"],["sdp","application/sdp"],["sdw","application/vnd.stardivision.writer"],["sea","application/octet-stream"],["see","application/vnd.seemail"],["seed","application/vnd.fdsn.seed"],["sema","application/vnd.sema"],["semd","application/vnd.semd"],["semf","application/vnd.semf"],["senmlx","application/senml+xml"],["sensmlx","application/sensml+xml"],["ser","application/java-serialized-object"],["setpay","application/set-payment-initiation"],["setreg","application/set-registration-initiation"],["sfd-hdstx","application/vnd.hydrostatix.sof-data"],["sfs","application/vnd.spotfire.sfs"],["sfv","text/x-sfv"],["sgi","image/sgi"],["sgl","application/vnd.stardivision.writer-global"],["sgm","text/sgml"],["sgml","text/sgml"],["sh","application/x-sh"],["shar","application/x-shar"],["shex","text/shex"],["shf","application/shf+xml"],["shtml","text/html"],["sid","image/x-mrsid-image"],["sieve","application/sieve"],["sig","application/pgp-signature"],["sil","audio/silk"],["silo","model/mesh"],["sis","application/vnd.symbian.install"],["sisx","application/vnd.symbian.install"],["sit","application/x-stuffit"],["sitx","application/x-stuffitx"],["siv","application/sieve"],["skd","application/vnd.koan"],["skm","application/vnd.koan"],["skp","application/vnd.koan"],["skt","application/vnd.koan"],["sldm","application/vnd.ms-powerpoint.slide.macroenabled.12"],["sldx","application/vnd.openxmlformats-officedocument.presentationml.slide"],["slim","text/slim"],["slm","text/slim"],["sls","application/route-s-tsid+xml"],["slt","application/vnd.epson.salt"],["sm","application/vnd.stepmania.stepchart"],["smf","application/vnd.stardivision.math"],["smi","application/smil"],["smil","application/smil"],["smv","video/x-smv"],["smzip","application/vnd.stepmania.package"],["snd","audio/basic"],["snf","application/x-font-snf"],["so","application/octet-stream"],["spc","application/x-pkcs7-certificates"],["spdx","text/spdx"],["spf","application/vnd.yamaha.smaf-phrase"],["spl","application/x-futuresplash"],["spot","text/vnd.in3d.spot"],["spp","application/scvp-vp-response"],["spq","application/scvp-vp-request"],["spx","audio/ogg"],["sql","application/x-sql"],["src","application/x-wais-source"],["srt","application/x-subrip"],["sru","application/sru+xml"],["srx","application/sparql-results+xml"],["ssdl","application/ssdl+xml"],["sse","application/vnd.kodak-descriptor"],["ssf","application/vnd.epson.ssf"],["ssml","application/ssml+xml"],["sst","application/octet-stream"],["st","application/vnd.sailingtracker.track"],["stc","application/vnd.sun.xml.calc.template"],["std","application/vnd.sun.xml.draw.template"],["stf","application/vnd.wt.stf"],["sti","application/vnd.sun.xml.impress.template"],["stk","application/hyperstudio"],["stl","model/stl"],["stpx","model/step+xml"],["stpxz","model/step-xml+zip"],["stpz","model/step+zip"],["str","application/vnd.pg.format"],["stw","application/vnd.sun.xml.writer.template"],["styl","text/stylus"],["stylus","text/stylus"],["sub","text/vnd.dvb.subtitle"],["sus","application/vnd.sus-calendar"],["susp","application/vnd.sus-calendar"],["sv4cpio","application/x-sv4cpio"],["sv4crc","application/x-sv4crc"],["svc","application/vnd.dvb.service"],["svd","application/vnd.svd"],["svg","image/svg+xml"],["svgz","image/svg+xml"],["swa","application/x-director"],["swf","application/x-shockwave-flash"],["swi","application/vnd.aristanetworks.swi"],["swidtag","application/swid+xml"],["sxc","application/vnd.sun.xml.calc"],["sxd","application/vnd.sun.xml.draw"],["sxg","application/vnd.sun.xml.writer.global"],["sxi","application/vnd.sun.xml.impress"],["sxm","application/vnd.sun.xml.math"],["sxw","application/vnd.sun.xml.writer"],["t","text/troff"],["t3","application/x-t3vm-image"],["t38","image/t38"],["taglet","application/vnd.mynfc"],["tao","application/vnd.tao.intent-module-archive"],["tap","image/vnd.tencent.tap"],["tar","application/x-tar"],["tcap","application/vnd.3gpp2.tcap"],["tcl","application/x-tcl"],["td","application/urc-targetdesc+xml"],["teacher","application/vnd.smart.teacher"],["tei","application/tei+xml"],["teicorpus","application/tei+xml"],["tex","application/x-tex"],["texi","application/x-texinfo"],["texinfo","application/x-texinfo"],["text","text/plain"],["tfi","application/thraud+xml"],["tfm","application/x-tex-tfm"],["tfx","image/tiff-fx"],["tga","image/x-tga"],["tgz","application/x-tar"],["thmx","application/vnd.ms-officetheme"],["tif","image/tiff"],["tiff","image/tiff"],["tk","application/x-tcl"],["tmo","application/vnd.tmobile-livetv"],["toml","application/toml"],["torrent","application/x-bittorrent"],["tpl","application/vnd.groove-tool-template"],["tpt","application/vnd.trid.tpt"],["tr","text/troff"],["tra","application/vnd.trueapp"],["trig","application/trig"],["trm","application/x-msterminal"],["ts","video/mp2t"],["tsd","application/timestamped-data"],["tsv","text/tab-separated-values"],["ttc","font/collection"],["ttf","font/ttf"],["ttl","text/turtle"],["ttml","application/ttml+xml"],["twd","application/vnd.simtech-mindmapper"],["twds","application/vnd.simtech-mindmapper"],["txd","application/vnd.genomatix.tuxedo"],["txf","application/vnd.mobius.txf"],["txt","text/plain"],["u8dsn","message/global-delivery-status"],["u8hdr","message/global-headers"],["u8mdn","message/global-disposition-notification"],["u8msg","message/global"],["u32","application/x-authorware-bin"],["ubj","application/ubjson"],["udeb","application/x-debian-package"],["ufd","application/vnd.ufdl"],["ufdl","application/vnd.ufdl"],["ulx","application/x-glulx"],["umj","application/vnd.umajin"],["unityweb","application/vnd.unity"],["uoml","application/vnd.uoml+xml"],["uri","text/uri-list"],["uris","text/uri-list"],["urls","text/uri-list"],["usdz","model/vnd.usdz+zip"],["ustar","application/x-ustar"],["utz","application/vnd.uiq.theme"],["uu","text/x-uuencode"],["uva","audio/vnd.dece.audio"],["uvd","application/vnd.dece.data"],["uvf","application/vnd.dece.data"],["uvg","image/vnd.dece.graphic"],["uvh","video/vnd.dece.hd"],["uvi","image/vnd.dece.graphic"],["uvm","video/vnd.dece.mobile"],["uvp","video/vnd.dece.pd"],["uvs","video/vnd.dece.sd"],["uvt","application/vnd.dece.ttml+xml"],["uvu","video/vnd.uvvu.mp4"],["uvv","video/vnd.dece.video"],["uvva","audio/vnd.dece.audio"],["uvvd","application/vnd.dece.data"],["uvvf","application/vnd.dece.data"],["uvvg","image/vnd.dece.graphic"],["uvvh","video/vnd.dece.hd"],["uvvi","image/vnd.dece.graphic"],["uvvm","video/vnd.dece.mobile"],["uvvp","video/vnd.dece.pd"],["uvvs","video/vnd.dece.sd"],["uvvt","application/vnd.dece.ttml+xml"],["uvvu","video/vnd.uvvu.mp4"],["uvvv","video/vnd.dece.video"],["uvvx","application/vnd.dece.unspecified"],["uvvz","application/vnd.dece.zip"],["uvx","application/vnd.dece.unspecified"],["uvz","application/vnd.dece.zip"],["vbox","application/x-virtualbox-vbox"],["vbox-extpack","application/x-virtualbox-vbox-extpack"],["vcard","text/vcard"],["vcd","application/x-cdlink"],["vcf","text/x-vcard"],["vcg","application/vnd.groove-vcard"],["vcs","text/x-vcalendar"],["vcx","application/vnd.vcx"],["vdi","application/x-virtualbox-vdi"],["vds","model/vnd.sap.vds"],["vhd","application/x-virtualbox-vhd"],["vis","application/vnd.visionary"],["viv","video/vnd.vivo"],["vlc","application/videolan"],["vmdk","application/x-virtualbox-vmdk"],["vob","video/x-ms-vob"],["vor","application/vnd.stardivision.writer"],["vox","application/x-authorware-bin"],["vrml","model/vrml"],["vsd","application/vnd.visio"],["vsf","application/vnd.vsf"],["vss","application/vnd.visio"],["vst","application/vnd.visio"],["vsw","application/vnd.visio"],["vtf","image/vnd.valve.source.texture"],["vtt","text/vtt"],["vtu","model/vnd.vtu"],["vxml","application/voicexml+xml"],["w3d","application/x-director"],["wad","application/x-doom"],["wadl","application/vnd.sun.wadl+xml"],["war","application/java-archive"],["wasm","application/wasm"],["wav","audio/x-wav"],["wax","audio/x-ms-wax"],["wbmp","image/vnd.wap.wbmp"],["wbs","application/vnd.criticaltools.wbs+xml"],["wbxml","application/wbxml"],["wcm","application/vnd.ms-works"],["wdb","application/vnd.ms-works"],["wdp","image/vnd.ms-photo"],["weba","audio/webm"],["webapp","application/x-web-app-manifest+json"],["webm","video/webm"],["webmanifest","application/manifest+json"],["webp","image/webp"],["wg","application/vnd.pmi.widget"],["wgt","application/widget"],["wks","application/vnd.ms-works"],["wm","video/x-ms-wm"],["wma","audio/x-ms-wma"],["wmd","application/x-ms-wmd"],["wmf","image/wmf"],["wml","text/vnd.wap.wml"],["wmlc","application/wmlc"],["wmls","text/vnd.wap.wmlscript"],["wmlsc","application/vnd.wap.wmlscriptc"],["wmv","video/x-ms-wmv"],["wmx","video/x-ms-wmx"],["wmz","application/x-msmetafile"],["woff","font/woff"],["woff2","font/woff2"],["word","application/msword"],["wpd","application/vnd.wordperfect"],["wpl","application/vnd.ms-wpl"],["wps","application/vnd.ms-works"],["wqd","application/vnd.wqd"],["wri","application/x-mswrite"],["wrl","model/vrml"],["wsc","message/vnd.wfa.wsc"],["wsdl","application/wsdl+xml"],["wspolicy","application/wspolicy+xml"],["wtb","application/vnd.webturbo"],["wvx","video/x-ms-wvx"],["x3d","model/x3d+xml"],["x3db","model/x3d+fastinfoset"],["x3dbz","model/x3d+binary"],["x3dv","model/x3d-vrml"],["x3dvz","model/x3d+vrml"],["x3dz","model/x3d+xml"],["x32","application/x-authorware-bin"],["x_b","model/vnd.parasolid.transmit.binary"],["x_t","model/vnd.parasolid.transmit.text"],["xaml","application/xaml+xml"],["xap","application/x-silverlight-app"],["xar","application/vnd.xara"],["xav","application/xcap-att+xml"],["xbap","application/x-ms-xbap"],["xbd","application/vnd.fujixerox.docuworks.binder"],["xbm","image/x-xbitmap"],["xca","application/xcap-caps+xml"],["xcs","application/calendar+xml"],["xdf","application/xcap-diff+xml"],["xdm","application/vnd.syncml.dm+xml"],["xdp","application/vnd.adobe.xdp+xml"],["xdssc","application/dssc+xml"],["xdw","application/vnd.fujixerox.docuworks"],["xel","application/xcap-el+xml"],["xenc","application/xenc+xml"],["xer","application/patch-ops-error+xml"],["xfdf","application/vnd.adobe.xfdf"],["xfdl","application/vnd.xfdl"],["xht","application/xhtml+xml"],["xhtml","application/xhtml+xml"],["xhvml","application/xv+xml"],["xif","image/vnd.xiff"],["xl","application/excel"],["xla","application/vnd.ms-excel"],["xlam","application/vnd.ms-excel.addin.macroEnabled.12"],["xlc","application/vnd.ms-excel"],["xlf","application/xliff+xml"],["xlm","application/vnd.ms-excel"],["xls","application/vnd.ms-excel"],["xlsb","application/vnd.ms-excel.sheet.binary.macroEnabled.12"],["xlsm","application/vnd.ms-excel.sheet.macroEnabled.12"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xlt","application/vnd.ms-excel"],["xltm","application/vnd.ms-excel.template.macroEnabled.12"],["xltx","application/vnd.openxmlformats-officedocument.spreadsheetml.template"],["xlw","application/vnd.ms-excel"],["xm","audio/xm"],["xml","application/xml"],["xns","application/xcap-ns+xml"],["xo","application/vnd.olpc-sugar"],["xop","application/xop+xml"],["xpi","application/x-xpinstall"],["xpl","application/xproc+xml"],["xpm","image/x-xpixmap"],["xpr","application/vnd.is-xpr"],["xps","application/vnd.ms-xpsdocument"],["xpw","application/vnd.intercon.formnet"],["xpx","application/vnd.intercon.formnet"],["xsd","application/xml"],["xsl","application/xml"],["xslt","application/xslt+xml"],["xsm","application/vnd.syncml+xml"],["xspf","application/xspf+xml"],["xul","application/vnd.mozilla.xul+xml"],["xvm","application/xv+xml"],["xvml","application/xv+xml"],["xwd","image/x-xwindowdump"],["xyz","chemical/x-xyz"],["xz","application/x-xz"],["yaml","text/yaml"],["yang","application/yang"],["yin","application/yin+xml"],["yml","text/yaml"],["ymp","text/x-suse-ymp"],["z","application/x-compress"],["z1","application/x-zmachine"],["z2","application/x-zmachine"],["z3","application/x-zmachine"],["z4","application/x-zmachine"],["z5","application/x-zmachine"],["z6","application/x-zmachine"],["z7","application/x-zmachine"],["z8","application/x-zmachine"],["zaz","application/vnd.zzazz.deck+xml"],["zip","application/zip"],["zir","application/vnd.zul"],["zirz","application/vnd.zul"],["zmm","application/vnd.handheld-entertainment+xml"],["zsh","text/x-scriptzsh"]]);function hy(e,t,s){const n=function(e){const{name:t}=e;if(t&&-1!==t.lastIndexOf(".")&&!e.type){const s=t.split(".").pop().toLowerCase(),n=py.get(s);n&&Object.defineProperty(e,"type",{value:n,writable:!1,configurable:!1,enumerable:!0})}return e}(e),{webkitRelativePath:r}=e,a="string"==typeof t?t:"string"==typeof r&&r.length>0?r:`./${e.name}`;return"string"!=typeof n.path&&xy(n,"path",a),xy(n,"relativePath",a),n}function xy(e,t,s){Object.defineProperty(e,t,{value:s,writable:!1,configurable:!1,enumerable:!0})}const fy=[".DS_Store","Thumbs.db"];function vy(e){return"object"==typeof e&&null!==e}function gy(e){return e.filter(e=>-1===fy.indexOf(e.name))}function yy(e){if(null===e)return[];const t=[];for(let s=0;s<e.length;s++){const n=e[s];t.push(n)}return t}function by(e){if("function"!=typeof e.webkitGetAsEntry)return Ny(e);const t=e.webkitGetAsEntry();return t&&t.isDirectory?ky(t):Ny(e,t)}function jy(e){return e.reduce((e,t)=>[...e,...Array.isArray(t)?jy(t):[t]],[])}function Ny(e,t){return eh(this,void 0,void 0,function*(){var s;if(globalThis.isSecureContext&&"function"==typeof e.getAsFileSystemHandle){const t=yield e.getAsFileSystemHandle();if(null===t)throw new Error(`${e} is not a File`);if(void 0!==t){const e=yield t.getFile();return e.handle=t,hy(e)}}const n=e.getAsFile();if(!n)throw new Error(`${e} is not a File`);return hy(n,null!==(s=null==t?void 0:t.fullPath)&&void 0!==s?s:void 0)})}function wy(e){return eh(this,void 0,void 0,function*(){return e.isDirectory?ky(e):function(e){return eh(this,void 0,void 0,function*(){return new Promise((t,s)=>{e.file(s=>{const n=hy(s,e.fullPath);t(n)},e=>{s(e)})})})}(e)})}function ky(e){const t=e.createReader();return new Promise((e,s)=>{const n=[];!function r(){t.readEntries(t=>eh(this,void 0,void 0,function*(){if(t.length){const e=Promise.all(t.map(wy));n.push(e),r()}else try{const t=yield Promise.all(n);e(t)}catch($R){s($R)}}),e=>{s(e)})}()})}var Cy=function(e,t){if(e&&t){var s=Array.isArray(t)?t:t.split(",");if(0===s.length)return!0;var n=e.name||"",r=(e.type||"").toLowerCase(),a=r.replace(/\/.*$/,"");return s.some(function(e){var t=e.trim().toLowerCase();return"."===t.charAt(0)?n.toLowerCase().endsWith(t):t.endsWith("/*")?a===t.replace(/\/.*$/,""):r===t})}return!0};function Sy(e){return function(e){if(Array.isArray(e))return Ay(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Ty(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _y(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,n)}return s}function Py(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?_y(Object(s),!0).forEach(function(t){Ey(e,t,s[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):_y(Object(s)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}function Ey(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function Dy(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var s=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==s)return;var n,r,a=[],i=!0,o=!1;try{for(s=s.call(e);!(i=(n=s.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch($R){o=!0,r=$R}finally{try{i||null==s.return||s.return()}finally{if(o)throw r}}return a}(e,t)||Ty(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ty(e,t){if(e){if("string"==typeof e)return Ay(e,t);var s=Object.prototype.toString.call(e).slice(8,-1);return"Object"===s&&e.constructor&&(s=e.constructor.name),"Map"===s||"Set"===s?Array.from(e):"Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?Ay(e,t):void 0}}function Ay(e,t){(null==t||t>e.length)&&(t=e.length);for(var s=0,n=new Array(t);s<t;s++)n[s]=e[s];return n}var Oy=Cy,Ry=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").split(","),t=e.length>1?"one of ".concat(e.join(", ")):e[0];return{code:"file-invalid-type",message:"File type must be ".concat(t)}},Fy=function(e){return{code:"file-too-large",message:"File is larger than ".concat(e," ").concat(1===e?"byte":"bytes")}},Iy=function(e){return{code:"file-too-small",message:"File is smaller than ".concat(e," ").concat(1===e?"byte":"bytes")}},My={code:"too-many-files",message:"Too many files"};function Ly(e,t){var s="application/x-moz-file"===e.type||Oy(e,t);return[s,s?null:Ry(t)]}function qy(e,t,s){if(zy(e.size))if(zy(t)&&zy(s)){if(e.size>s)return[!1,Fy(s)];if(e.size<t)return[!1,Iy(t)]}else{if(zy(t)&&e.size<t)return[!1,Iy(t)];if(zy(s)&&e.size>s)return[!1,Fy(s)]}return[!0,null]}function zy(e){return null!=e}function Vy(e){return"function"==typeof e.isPropagationStopped?e.isPropagationStopped():void 0!==e.cancelBubble&&e.cancelBubble}function By(e){return e.dataTransfer?Array.prototype.some.call(e.dataTransfer.types,function(e){return"Files"===e||"application/x-moz-file"===e}):!!e.target&&!!e.target.files}function $y(e){e.preventDefault()}function Wy(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return function(e){for(var s=arguments.length,n=new Array(s>1?s-1:0),r=1;r<s;r++)n[r-1]=arguments[r];return t.some(function(t){return!Vy(e)&&t&&t.apply(void 0,[e].concat(n)),Vy(e)})}}function Uy(e){return"audio/*"===e||"video/*"===e||"image/*"===e||"text/*"===e||"application/*"===e||/\w+\/[-+.\w]+/g.test(e)}function Ky(e){return/^.*\.[\w]+$/.test(e)}var Hy=["children"],Zy=["open"],Qy=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],Gy=["refKey","onChange","onClick"];function Yy(e){return function(e){if(Array.isArray(e))return eb(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Xy(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Jy(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var s=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==s)return;var n,r,a=[],i=!0,o=!1;try{for(s=s.call(e);!(i=(n=s.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch($R){o=!0,r=$R}finally{try{i||null==s.return||s.return()}finally{if(o)throw r}}return a}(e,t)||Xy(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Xy(e,t){if(e){if("string"==typeof e)return eb(e,t);var s=Object.prototype.toString.call(e).slice(8,-1);return"Object"===s&&e.constructor&&(s=e.constructor.name),"Map"===s||"Set"===s?Array.from(e):"Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?eb(e,t):void 0}}function eb(e,t){(null==t||t>e.length)&&(t=e.length);for(var s=0,n=new Array(t);s<t;s++)n[s]=e[s];return n}function tb(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,n)}return s}function sb(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?tb(Object(s),!0).forEach(function(t){nb(e,t,s[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):tb(Object(s)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}function nb(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function rb(e,t){if(null==e)return{};var s,n,r=function(e,t){if(null==e)return{};var s,n,r={},a=Object.keys(e);for(n=0;n<a.length;n++)s=a[n],t.indexOf(s)>=0||(r[s]=e[s]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)s=a[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}var ab=hr.forwardRef(function(e,t){var s=e.children,n=lb(rb(e,Hy)),r=n.open,a=rb(n,Zy);return hr.useImperativeHandle(t,function(){return{open:r}},[r]),vr.createElement(hr.Fragment,null,s(sb(sb({},a),{},{open:r})))});ab.displayName="Dropzone";var ib={disabled:!1,getFilesFromEvent:function(e){return eh(this,void 0,void 0,function*(){return vy(e)&&vy(e.dataTransfer)?function(e,t){return eh(this,void 0,void 0,function*(){if(e.items){const s=yy(e.items).filter(e=>"file"===e.kind);if("drop"!==t)return s;return gy(jy(yield Promise.all(s.map(by))))}return gy(yy(e.files).map(e=>hy(e)))})}(e.dataTransfer,e.type):function(e){return vy(e)&&vy(e.target)}(e)?function(e){return yy(e.target.files).map(e=>hy(e))}(e):Array.isArray(e)&&e.every(e=>"getFile"in e&&"function"==typeof e.getFile)?function(e){return eh(this,void 0,void 0,function*(){return(yield Promise.all(e.map(e=>e.getFile()))).map(e=>hy(e))})}(e):[]})},maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!1,autoFocus:!1};ab.defaultProps=ib,ab.propTypes={children:yr.func,accept:yr.objectOf(yr.arrayOf(yr.string)),multiple:yr.bool,preventDropOnDocument:yr.bool,noClick:yr.bool,noKeyboard:yr.bool,noDrag:yr.bool,noDragEventsBubbling:yr.bool,minSize:yr.number,maxSize:yr.number,maxFiles:yr.number,disabled:yr.bool,getFilesFromEvent:yr.func,onFileDialogCancel:yr.func,onFileDialogOpen:yr.func,useFsAccessApi:yr.bool,autoFocus:yr.bool,onDragEnter:yr.func,onDragLeave:yr.func,onDragOver:yr.func,onDrop:yr.func,onDropAccepted:yr.func,onDropRejected:yr.func,onError:yr.func,validator:yr.func};var ob={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,acceptedFiles:[],fileRejections:[]};function lb(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=sb(sb({},ib),e),s=t.accept,n=t.disabled,r=t.getFilesFromEvent,a=t.maxSize,i=t.minSize,o=t.multiple,l=t.maxFiles,c=t.onDragEnter,d=t.onDragLeave,u=t.onDragOver,m=t.onDrop,p=t.onDropAccepted,h=t.onDropRejected,x=t.onFileDialogCancel,f=t.onFileDialogOpen,v=t.useFsAccessApi,g=t.autoFocus,y=t.preventDropOnDocument,b=t.noClick,j=t.noKeyboard,N=t.noDrag,w=t.noDragEventsBubbling,k=t.onError,C=t.validator,S=hr.useMemo(function(){return function(e){if(zy(e))return Object.entries(e).reduce(function(e,t){var s=Dy(t,2),n=s[0],r=s[1];return[].concat(Sy(e),[n],Sy(r))},[]).filter(function(e){return Uy(e)||Ky(e)}).join(",")}(s)},[s]),_=hr.useMemo(function(){return function(e){return zy(e)?[{description:"Files",accept:Object.entries(e).filter(function(e){var t=Dy(e,2),s=t[0],n=t[1],r=!0;return Uy(s)||(console.warn('Skipped "'.concat(s,'" because it is not a valid MIME type. Check https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types for a list of valid MIME types.')),r=!1),Array.isArray(n)&&n.every(Ky)||(console.warn('Skipped "'.concat(s,'" because an invalid file extension was provided.')),r=!1),r}).reduce(function(e,t){var s=Dy(t,2),n=s[0],r=s[1];return Py(Py({},e),{},Ey({},n,r))},{})}]:e}(s)},[s]),P=hr.useMemo(function(){return"function"==typeof f?f:db},[f]),E=hr.useMemo(function(){return"function"==typeof x?x:db},[x]),D=hr.useRef(null),T=hr.useRef(null),A=Jy(hr.useReducer(cb,ob),2),O=A[0],R=A[1],F=O.isFocused,I=O.isFileDialogActive,M=hr.useRef("undefined"!=typeof window&&window.isSecureContext&&v&&"showOpenFilePicker"in window),L=function(){!M.current&&I&&setTimeout(function(){T.current&&(T.current.files.length||(R({type:"closeDialog"}),E()))},300)};hr.useEffect(function(){return window.addEventListener("focus",L,!1),function(){window.removeEventListener("focus",L,!1)}},[T,I,E,M]);var q=hr.useRef([]),z=function(e){D.current&&D.current.contains(e.target)||(e.preventDefault(),q.current=[])};hr.useEffect(function(){return y&&(document.addEventListener("dragover",$y,!1),document.addEventListener("drop",z,!1)),function(){y&&(document.removeEventListener("dragover",$y),document.removeEventListener("drop",z))}},[D,y]),hr.useEffect(function(){return!n&&g&&D.current&&D.current.focus(),function(){}},[D,g,n]);var V=hr.useCallback(function(e){k?k(e):console.error(e)},[k]),B=hr.useCallback(function(e){e.preventDefault(),e.persist(),te(e),q.current=[].concat(Yy(q.current),[e.target]),By(e)&&Promise.resolve(r(e)).then(function(t){if(!Vy(e)||w){var s=t.length,n=s>0&&function(e){var t=e.files,s=e.accept,n=e.minSize,r=e.maxSize,a=e.multiple,i=e.maxFiles,o=e.validator;return!(!a&&t.length>1||a&&i>=1&&t.length>i)&&t.every(function(e){var t=Dy(Ly(e,s),1)[0],a=Dy(qy(e,n,r),1)[0],i=o?o(e):null;return t&&a&&!i})}({files:t,accept:S,minSize:i,maxSize:a,multiple:o,maxFiles:l,validator:C});R({isDragAccept:n,isDragReject:s>0&&!n,isDragActive:!0,type:"setDraggedFiles"}),c&&c(e)}}).catch(function(e){return V(e)})},[r,c,V,w,S,i,a,o,l,C]),$=hr.useCallback(function(e){e.preventDefault(),e.persist(),te(e);var t=By(e);if(t&&e.dataTransfer)try{e.dataTransfer.dropEffect="copy"}catch(s){}return t&&u&&u(e),!1},[u,w]),W=hr.useCallback(function(e){e.preventDefault(),e.persist(),te(e);var t=q.current.filter(function(e){return D.current&&D.current.contains(e)}),s=t.indexOf(e.target);-1!==s&&t.splice(s,1),q.current=t,t.length>0||(R({type:"setDraggedFiles",isDragActive:!1,isDragAccept:!1,isDragReject:!1}),By(e)&&d&&d(e))},[D,d,w]),U=hr.useCallback(function(e,t){var s=[],n=[];e.forEach(function(e){var t=Jy(Ly(e,S),2),r=t[0],o=t[1],l=Jy(qy(e,i,a),2),c=l[0],d=l[1],u=C?C(e):null;if(r&&c&&!u)s.push(e);else{var m=[o,d];u&&(m=m.concat(u)),n.push({file:e,errors:m.filter(function(e){return e})})}}),(!o&&s.length>1||o&&l>=1&&s.length>l)&&(s.forEach(function(e){n.push({file:e,errors:[My]})}),s.splice(0)),R({acceptedFiles:s,fileRejections:n,isDragReject:n.length>0,type:"setFiles"}),m&&m(s,n,t),n.length>0&&h&&h(n,t),s.length>0&&p&&p(s,t)},[R,o,S,i,a,l,m,p,h,C]),K=hr.useCallback(function(e){e.preventDefault(),e.persist(),te(e),q.current=[],By(e)&&Promise.resolve(r(e)).then(function(t){Vy(e)&&!w||U(t,e)}).catch(function(e){return V(e)}),R({type:"reset"})},[r,U,V,w]),H=hr.useCallback(function(){if(M.current){R({type:"openDialog"}),P();var e={multiple:o,types:_};window.showOpenFilePicker(e).then(function(e){return r(e)}).then(function(e){U(e,null),R({type:"closeDialog"})}).catch(function(e){var t;(t=e)instanceof DOMException&&("AbortError"===t.name||t.code===t.ABORT_ERR)?(E(e),R({type:"closeDialog"})):!function(e){return e instanceof DOMException&&("SecurityError"===e.name||e.code===e.SECURITY_ERR)}(e)?V(e):(M.current=!1,T.current?(T.current.value=null,T.current.click()):V(new Error("Cannot open the file picker because the https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API is not supported and no <input> was provided.")))})}else T.current&&(R({type:"openDialog"}),P(),T.current.value=null,T.current.click())},[R,P,E,v,U,V,_,o]),Z=hr.useCallback(function(e){D.current&&D.current.isEqualNode(e.target)&&(" "!==e.key&&"Enter"!==e.key&&32!==e.keyCode&&13!==e.keyCode||(e.preventDefault(),H()))},[D,H]),Q=hr.useCallback(function(){R({type:"focus"})},[]),G=hr.useCallback(function(){R({type:"blur"})},[]),Y=hr.useCallback(function(){b||(!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.navigator.userAgent;return function(e){return-1!==e.indexOf("MSIE")||-1!==e.indexOf("Trident/")}(e)||function(e){return-1!==e.indexOf("Edge/")}(e)}()?H():setTimeout(H,0))},[b,H]),J=function(e){return n?null:e},X=function(e){return j?null:J(e)},ee=function(e){return N?null:J(e)},te=function(e){w&&e.stopPropagation()},se=hr.useMemo(function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.refKey,s=void 0===t?"ref":t,r=e.role,a=e.onKeyDown,i=e.onFocus,o=e.onBlur,l=e.onClick,c=e.onDragEnter,d=e.onDragOver,u=e.onDragLeave,m=e.onDrop,p=rb(e,Qy);return sb(sb(nb({onKeyDown:X(Wy(a,Z)),onFocus:X(Wy(i,Q)),onBlur:X(Wy(o,G)),onClick:J(Wy(l,Y)),onDragEnter:ee(Wy(c,B)),onDragOver:ee(Wy(d,$)),onDragLeave:ee(Wy(u,W)),onDrop:ee(Wy(m,K)),role:"string"==typeof r&&""!==r?r:"presentation"},s,D),n||j?{}:{tabIndex:0}),p)}},[D,Z,Q,G,Y,B,$,W,K,j,N,n]),ne=hr.useCallback(function(e){e.stopPropagation()},[]),re=hr.useMemo(function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.refKey,s=void 0===t?"ref":t,n=e.onChange,r=e.onClick,a=rb(e,Gy);return sb(sb({},nb({accept:S,multiple:o,type:"file",style:{border:0,clip:"rect(0, 0, 0, 0)",clipPath:"inset(50%)",height:"1px",margin:"0 -1px -1px 0",overflow:"hidden",padding:0,position:"absolute",width:"1px",whiteSpace:"nowrap"},onChange:J(Wy(n,K)),onClick:J(Wy(r,ne)),tabIndex:-1},s,T)),a)}},[T,s,o,K,n]);return sb(sb({},O),{},{isFocused:F&&!n,getRootProps:se,getInputProps:re,rootRef:D,inputRef:T,open:J(H)})}function cb(e,t){switch(t.type){case"focus":return sb(sb({},e),{},{isFocused:!0});case"blur":return sb(sb({},e),{},{isFocused:!1});case"openDialog":return sb(sb({},ob),{},{isFileDialogActive:!0});case"closeDialog":return sb(sb({},e),{},{isFileDialogActive:!1});case"setDraggedFiles":return sb(sb({},e),{},{isDragActive:t.isDragActive,isDragAccept:t.isDragAccept,isDragReject:t.isDragReject});case"setFiles":return sb(sb({},e),{},{acceptedFiles:t.acceptedFiles,fileRejections:t.fileRejections,isDragReject:t.isDragReject});case"reset":return sb({},ob);default:return e}}function db(){}function ub({fid:e,isOpen:t,onClose:s}){const{toast:n}=Ui(),r=Ni(),[a,i]=hr.useState(!1),[o,l]=hr.useState(e),[c,d]=hr.useState(""),[u,m]=hr.useState([]),p=hr.useCallback((e,t)=>{const s=e.map(e=>({file:e,preview:URL.createObjectURL(e),type:t}));m(e=>[...e,...s])},[]),{getRootProps:h,getInputProps:x,isDragActive:f}=lb({onDrop:e=>p(e,"sample"),accept:{"application/pdf":[".pdf"],"image/jpeg":[".jpg",".jpeg"],"image/png":[".png"]},multiple:!0}),{getRootProps:v,getInputProps:g,isDragActive:y}=lb({onDrop:e=>p(e,"fds"),accept:{"application/pdf":[".pdf"],"image/jpeg":[".jpg",".jpeg"],"image/png":[".png"]},multiple:!0}),b=Ei({mutationFn:async t=>(await Oi("PUT",`/api/admin/fids/${e.id}`,t)).json(),onSuccess:()=>{r.invalidateQueries({queryKey:["/api/admin/fids"]}),i(!1),n({title:"FID mise à jour",description:"Les informations ont été mises à jour avec succès."})},onError:e=>{n({title:"Erreur",description:e.message||"Erreur lors de la mise à jour",variant:"destructive"})}}),j=Ei({mutationFn:async({status:t,comment:s})=>(await Oi("PUT",`/api/admin/fids/${e.id}/validate`,{status:t,adminComments:s})).json(),onSuccess:()=>{r.invalidateQueries({queryKey:["/api/admin/fids"]}),d(""),n({title:"FID mise à jour",description:"Le statut de la FID a été mis à jour avec succès."})},onError:e=>{n({title:"Erreur",description:e.message||"Erreur lors de la validation",variant:"destructive"})}}),N=e=>{j.mutate({status:e,comment:c})},w=(e,t)=>{l(s=>({...s,[e]:t}))},k=e=>{m(t=>{const s=[...t];return URL.revokeObjectURL(s[e].preview),s.splice(e,1),s})};return e?Fr.jsx(Ax,{open:t,onOpenChange:s,children:Fr.jsxs(Ix,{className:"max-w-6xl max-h-[90vh] overflow-y-auto",children:[Fr.jsx(Mx,{children:Fr.jsxs("div",{className:"flex items-center justify-between",children:[Fr.jsxs("div",{children:[Fr.jsxs(Lx,{className:"text-2xl",children:["FID #",e.id," - ",e.clientCompanyName]}),Fr.jsxs("div",{className:"flex items-center space-x-2 mt-2",children:[(e=>{switch(e){case"pending":return Fr.jsxs(Hx,{variant:"outline",className:"bg-yellow-50 text-yellow-700 border-yellow-300",children:[Fr.jsx(Rc,{className:"h-3 w-3 mr-1"}),"En attente"]});case"validated":return Fr.jsxs(Hx,{variant:"outline",className:"bg-green-50 text-green-700 border-green-300",children:[Fr.jsx(Ul,{className:"h-3 w-3 mr-1"}),"Validée"]});case"rejected":return Fr.jsxs(Hx,{variant:"outline",className:"bg-red-50 text-red-700 border-red-300",children:[Fr.jsx(Kl,{className:"h-3 w-3 mr-1"}),"Rejetée"]});default:return Fr.jsx(Hx,{children:e})}})(e.status),Fr.jsxs("span",{className:"text-sm text-gray-500",children:["Créée le ",new Date(e.createdAt).toLocaleDateString("fr-FR")]})]})]}),Fr.jsx("div",{className:"flex space-x-2",children:a?Fr.jsxs(Fr.Fragment,{children:[Fr.jsxs(Lp,{onClick:()=>{b.mutate(o)},disabled:b.isPending,children:[Fr.jsx(kc,{className:"h-4 w-4 mr-2"}),"Sauvegarder"]}),Fr.jsxs(Lp,{variant:"outline",onClick:()=>i(!1),children:[Fr.jsx(Vc,{className:"h-4 w-4 mr-2"}),"Annuler"]})]}):Fr.jsx(Lp,{onClick:()=>i(!0),children:"Modifier"})})]})}),Fr.jsxs(cy,{defaultValue:"general",className:"w-full",children:[Fr.jsxs(dy,{className:"grid w-full grid-cols-4",children:[Fr.jsx(uy,{value:"general",children:"Informations générales"}),Fr.jsx(uy,{value:"waste",children:"Caractérisation des déchets"}),Fr.jsx(uy,{value:"files",children:"Documents"}),Fr.jsx(uy,{value:"validation",children:"Validation"})]}),Fr.jsx(my,{value:"general",className:"space-y-6",children:Fr.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[Fr.jsxs(nf,{children:[Fr.jsx(rf,{children:Fr.jsx(af,{className:"text-lg",children:"Informations client"})}),Fr.jsxs(lf,{className:"space-y-4",children:[Fr.jsxs("div",{children:[Fr.jsx(Wx,{htmlFor:"clientCompanyName",children:"Nom de l'entreprise"}),Fr.jsx(zx,{id:"clientCompanyName",value:a?o.clientCompanyName:e.clientCompanyName,onChange:e=>w("clientCompanyName",e.target.value),disabled:!a})]}),Fr.jsxs("div",{children:[Fr.jsx(Wx,{htmlFor:"clientContactName",children:"Nom du contact"}),Fr.jsx(zx,{id:"clientContactName",value:a?o.clientContactName:e.clientContactName,onChange:e=>w("clientContactName",e.target.value),disabled:!a})]}),Fr.jsxs("div",{children:[Fr.jsx(Wx,{htmlFor:"clientEmail",children:"Email"}),Fr.jsx(zx,{id:"clientEmail",type:"email",value:a?o.clientEmail:e.clientEmail,onChange:e=>w("clientEmail",e.target.value),disabled:!a})]}),Fr.jsxs("div",{children:[Fr.jsx(Wx,{htmlFor:"clientPhone",children:"Téléphone"}),Fr.jsx(zx,{id:"clientPhone",value:a?o.clientPhone:e.clientPhone,onChange:e=>w("clientPhone",e.target.value),disabled:!a})]}),Fr.jsxs("div",{children:[Fr.jsx(Wx,{htmlFor:"clientAddress",children:"Adresse"}),Fr.jsx(Ux,{id:"clientAddress",value:a?o.clientAddress:e.clientAddress,onChange:e=>w("clientAddress",e.target.value),disabled:!a,rows:3})]}),Fr.jsxs("div",{children:[Fr.jsx(Wx,{htmlFor:"clientSiret",children:"SIRET"}),Fr.jsx(zx,{id:"clientSiret",value:a?o.clientSiret:e.clientSiret,onChange:e=>w("clientSiret",e.target.value),disabled:!a})]}),Fr.jsxs("div",{children:[Fr.jsx(Wx,{htmlFor:"clientActivity",children:"Activité"}),Fr.jsx(zx,{id:"clientActivity",value:a?o.clientActivity:e.clientActivity,onChange:e=>w("clientActivity",e.target.value),disabled:!a})]})]})]}),Fr.jsxs(nf,{children:[Fr.jsx(rf,{children:Fr.jsx(af,{className:"text-lg",children:"Informations producteur"})}),Fr.jsx(lf,{className:"space-y-4",children:e.sameAsClient?Fr.jsx("p",{className:"text-sm text-gray-600 italic",children:"Les informations producteur sont identiques au client"}):Fr.jsxs(Fr.Fragment,{children:[Fr.jsxs("div",{children:[Fr.jsx(Wx,{htmlFor:"producerCompanyName",children:"Nom de l'entreprise"}),Fr.jsx(zx,{id:"producerCompanyName",value:a?o.producerCompanyName:e.producerCompanyName,onChange:e=>w("producerCompanyName",e.target.value),disabled:!a})]}),Fr.jsxs("div",{children:[Fr.jsx(Wx,{htmlFor:"producerContactName",children:"Nom du contact"}),Fr.jsx(zx,{id:"producerContactName",value:a?o.producerContactName:e.producerContactName,onChange:e=>w("producerContactName",e.target.value),disabled:!a})]}),Fr.jsxs("div",{children:[Fr.jsx(Wx,{htmlFor:"producerAddress",children:"Adresse"}),Fr.jsx(Ux,{id:"producerAddress",value:a?o.producerAddress:e.producerAddress,onChange:e=>w("producerAddress",e.target.value),disabled:!a,rows:3})]}),Fr.jsxs("div",{children:[Fr.jsx(Wx,{htmlFor:"producerSiret",children:"SIRET"}),Fr.jsx(zx,{id:"producerSiret",value:a?o.producerSiret:e.producerSiret,onChange:e=>w("producerSiret",e.target.value),disabled:!a})]})]})})]})]})}),Fr.jsx(my,{value:"waste",className:"space-y-6",children:Fr.jsxs(nf,{children:[Fr.jsx(rf,{children:Fr.jsx(af,{className:"text-lg",children:"Caractérisation des déchets"})}),Fr.jsxs(lf,{className:"space-y-6",children:[Fr.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[Fr.jsxs("div",{children:[Fr.jsx(Wx,{htmlFor:"wasteName",children:"Nom du déchet"}),Fr.jsx(zx,{id:"wasteName",value:a?o.wasteName:e.wasteName,onChange:e=>w("wasteName",e.target.value),disabled:!a})]}),Fr.jsxs("div",{children:[Fr.jsx(Wx,{htmlFor:"nomenclatureCode",children:"Code nomenclature"}),Fr.jsx(zx,{id:"nomenclatureCode",value:a?o.nomenclatureCode:e.nomenclatureCode,onChange:e=>w("nomenclatureCode",e.target.value),disabled:!a})]})]}),Fr.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[Fr.jsxs("div",{children:[Fr.jsx(Wx,{htmlFor:"annualQuantity",children:"Quantité annuelle"}),Fr.jsx(zx,{id:"annualQuantity",value:a?o.annualQuantity:e.annualQuantity,onChange:e=>w("annualQuantity",e.target.value),disabled:!a})]}),Fr.jsxs("div",{children:[Fr.jsx(Wx,{htmlFor:"collectionFrequency",children:"Fréquence de collecte"}),Fr.jsx(zx,{id:"collectionFrequency",value:a?o.collectionFrequency:e.collectionFrequency,onChange:e=>w("collectionFrequency",e.target.value),disabled:!a})]})]}),Fr.jsx(Jx,{}),Fr.jsxs("div",{children:[Fr.jsx(Wx,{children:"Constituants principaux"}),Fr.jsx("div",{className:"mt-2",children:e.constituents&&Array.isArray(e.constituents)?Fr.jsx("div",{className:"space-y-2",children:e.constituents.map((e,t)=>Fr.jsxs("div",{className:"flex items-center space-x-2 p-2 bg-gray-50 rounded",children:[Fr.jsx("span",{className:"font-medium",children:e.name}),Fr.jsxs("span",{className:"text-gray-600",children:[": ",e.percentage,"%"]})]},t))}):Fr.jsx("p",{className:"text-gray-500 text-sm",children:"Aucun constituant défini"})})]}),Fr.jsx(Jx,{}),Fr.jsxs("div",{children:[Fr.jsx(Wx,{children:"Conditionnement"}),Fr.jsx("div",{className:"mt-2",children:e.packaging&&Array.isArray(e.packaging)?Fr.jsx("div",{className:"flex flex-wrap gap-2",children:e.packaging.map((e,t)=>Fr.jsx(Hx,{variant:"outline",children:e},t))}):Fr.jsx("p",{className:"text-gray-500 text-sm",children:"Aucun conditionnement défini"})})]}),Fr.jsx(Jx,{}),Fr.jsxs("div",{className:"border-t pt-6",children:[Fr.jsx("h4",{className:"font-semibold text-red-600 mb-3",children:"Ne peuvent être admis :"}),Fr.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:Fr.jsxs("ul",{className:"text-sm text-red-700 space-y-1",children:[Fr.jsx("li",{children:"• Déchets radioactifs"}),Fr.jsx("li",{children:"• Déchets explosifs ou instables"}),Fr.jsx("li",{children:"• Déchets médicaux et pharmaceutiques"}),Fr.jsx("li",{children:"• Déchets d'amiante"}),Fr.jsx("li",{children:"• Déchets contenant des PCB/PCT"})]})})]})]})]})}),Fr.jsx(my,{value:"files",className:"space-y-6",children:Fr.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[Fr.jsxs(nf,{children:[Fr.jsx(rf,{children:Fr.jsx(af,{className:"text-lg",children:"Échantillon"})}),Fr.jsxs(lf,{children:[Fr.jsxs("div",{...h(),className:"border-2 border-dashed rounded-lg p-6 text-center cursor-pointer transition-colors "+(f?"border-blue-400 bg-blue-50":"border-gray-300 hover:border-gray-400"),children:[Fr.jsx("input",{...x()}),Fr.jsx(Ic,{className:"h-8 w-8 text-gray-400 mx-auto mb-2"}),Fr.jsx("p",{className:"text-sm text-gray-600",children:f?"Déposez les fichiers ici...":"Glissez-déposez ou cliquez pour ajouter des échantillons"}),Fr.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"PDF, JPG, PNG acceptés"})]}),u.filter(e=>"sample"===e.type).length>0&&Fr.jsx("div",{className:"mt-4 space-y-2",children:u.filter(e=>"sample"===e.type).map((e,t)=>Fr.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded",children:[Fr.jsxs("div",{className:"flex items-center space-x-2",children:[e.file.type.includes("image")?Fr.jsx(lc,{className:"h-4 w-4"}):Fr.jsx(ac,{className:"h-4 w-4"}),Fr.jsx("span",{className:"text-sm",children:e.file.name})]}),Fr.jsx(Lp,{size:"sm",variant:"ghost",onClick:()=>k(t),children:Fr.jsx(Ac,{className:"h-4 w-4"})})]},t))})]})]}),Fr.jsxs(nf,{children:[Fr.jsx(rf,{children:Fr.jsx(af,{className:"text-lg",children:"FDS (Fiche de Données de Sécurité)"})}),Fr.jsxs(lf,{children:[Fr.jsxs("div",{...v(),className:"border-2 border-dashed rounded-lg p-6 text-center cursor-pointer transition-colors "+(y?"border-blue-400 bg-blue-50":"border-gray-300 hover:border-gray-400"),children:[Fr.jsx("input",{...g()}),Fr.jsx(Ic,{className:"h-8 w-8 text-gray-400 mx-auto mb-2"}),Fr.jsx("p",{className:"text-sm text-gray-600",children:y?"Déposez les fichiers ici...":"Glissez-déposez ou cliquez pour ajouter des FDS"}),Fr.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"PDF, JPG, PNG acceptés"})]}),u.filter(e=>"fds"===e.type).length>0&&Fr.jsx("div",{className:"mt-4 space-y-2",children:u.filter(e=>"fds"===e.type).map((e,t)=>Fr.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded",children:[Fr.jsxs("div",{className:"flex items-center space-x-2",children:[e.file.type.includes("image")?Fr.jsx(lc,{className:"h-4 w-4"}):Fr.jsx(ac,{className:"h-4 w-4"}),Fr.jsx("span",{className:"text-sm",children:e.file.name})]}),Fr.jsx(Lp,{size:"sm",variant:"ghost",onClick:()=>k(t),children:Fr.jsx(Ac,{className:"h-4 w-4"})})]},t))})]})]})]})}),Fr.jsx(my,{value:"validation",className:"space-y-6",children:Fr.jsxs(nf,{children:[Fr.jsx(rf,{children:Fr.jsx(af,{className:"text-lg",children:"Validation administrative"})}),Fr.jsxs(lf,{className:"space-y-6",children:[e.adminComments&&Fr.jsxs("div",{children:[Fr.jsx(Wx,{children:"Commentaires administrateur"}),Fr.jsx("div",{className:"mt-2 p-3 bg-gray-50 rounded",children:Fr.jsx("p",{className:"text-sm",children:e.adminComments})})]}),e.rejectionReason&&Fr.jsxs("div",{children:[Fr.jsx(Wx,{children:"Raison du rejet"}),Fr.jsx("div",{className:"mt-2 p-3 bg-red-50 border border-red-200 rounded",children:Fr.jsx("p",{className:"text-sm text-red-700",children:e.rejectionReason})})]}),"pending"===e.status&&Fr.jsxs("div",{className:"space-y-4",children:[Fr.jsxs("div",{children:[Fr.jsx(Wx,{htmlFor:"validationComment",children:"Commentaire (optionnel)"}),Fr.jsx(Ux,{id:"validationComment",value:c,onChange:e=>d(e.target.value),placeholder:"Ajouter un commentaire sur cette FID...",rows:3})]}),Fr.jsxs("div",{className:"flex space-x-4",children:[Fr.jsxs(Lp,{onClick:()=>N("validated"),className:"flex-1 bg-green-600 hover:bg-green-700",disabled:j.isPending,children:[Fr.jsx(Ul,{className:"h-4 w-4 mr-2"}),"Valider la FID"]}),Fr.jsxs(Lp,{onClick:()=>N("rejected"),variant:"destructive",className:"flex-1",disabled:j.isPending,children:[Fr.jsx(Kl,{className:"h-4 w-4 mr-2"}),"Rejeter la FID"]})]})]}),Fr.jsx(Jx,{}),Fr.jsx("div",{className:"flex space-x-4",children:Fr.jsxs(Lp,{variant:"outline",className:"flex-1",onClick:()=>{window.open(`/api/admin/fids/${e.id}/export-pdf`,"_blank")},children:[Fr.jsx(ec,{className:"h-4 w-4 mr-2"}),"Exporter en PDF"]})})]})]})})]})]})}):null}function mb(e){const t=Object.prototype.toString.call(e);return e instanceof Date||"object"==typeof e&&"[object Date]"===t?new e.constructor(+e):"number"==typeof e||"[object Number]"===t||"string"==typeof e||"[object String]"===t?new Date(e):new Date(NaN)}function pb(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}function hb(e,t){const s=mb(e);return isNaN(t)?pb(e,NaN):t?(s.setDate(s.getDate()+t),s):s}function xb(e,t){const s=mb(e);if(isNaN(t))return pb(e,NaN);if(!t)return s;const n=s.getDate(),r=pb(e,s.getTime());r.setMonth(s.getMonth()+t+1,0);return n>=r.getDate()?r:(s.setFullYear(r.getFullYear(),r.getMonth(),n),s)}const fb=6048e5;let vb={};function gb(){return vb}function yb(e,t){var s,n,r,a;const i=gb(),o=(null==t?void 0:t.weekStartsOn)??(null==(n=null==(s=null==t?void 0:t.locale)?void 0:s.options)?void 0:n.weekStartsOn)??i.weekStartsOn??(null==(a=null==(r=i.locale)?void 0:r.options)?void 0:a.weekStartsOn)??0,l=mb(e),c=l.getDay(),d=(c<o?7:0)+c-o;return l.setDate(l.getDate()-d),l.setHours(0,0,0,0),l}function bb(e){return yb(e,{weekStartsOn:1})}function jb(e){const t=mb(e),s=t.getFullYear(),n=pb(e,0);n.setFullYear(s+1,0,4),n.setHours(0,0,0,0);const r=bb(n),a=pb(e,0);a.setFullYear(s,0,4),a.setHours(0,0,0,0);const i=bb(a);return t.getTime()>=r.getTime()?s+1:t.getTime()>=i.getTime()?s:s-1}function Nb(e){const t=mb(e);return t.setHours(0,0,0,0),t}function wb(e){const t=mb(e),s=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return s.setUTCFullYear(t.getFullYear()),+e-+s}function kb(e,t){const s=Nb(e),n=Nb(t),r=+s-wb(s),a=+n-wb(n);return Math.round((r-a)/864e5)}function Cb(e,t){return hb(e,7*t)}function Sb(e,t){return xb(e,12*t)}function _b(e,t){return+Nb(e)===+Nb(t)}function Pb(e){return e instanceof Date||"object"==typeof e&&"[object Date]"===Object.prototype.toString.call(e)}function Eb(e,t){const s=mb(e),n=mb(t);return 12*(s.getFullYear()-n.getFullYear())+(s.getMonth()-n.getMonth())}function Db(e,t){const s=e.getFullYear()-t.getFullYear()||e.getMonth()-t.getMonth()||e.getDate()-t.getDate()||e.getHours()-t.getHours()||e.getMinutes()-t.getMinutes()||e.getSeconds()-t.getSeconds()||e.getMilliseconds()-t.getMilliseconds();return s<0?-1:s>0?1:s}function Tb(e){const t=mb(e),s=t.getMonth();return t.setFullYear(t.getFullYear(),s+1,0),t.setHours(23,59,59,999),t}function Ab(e){const t=mb(e);return t.setDate(1),t.setHours(0,0,0,0),t}function Ob(e){const t=mb(e),s=pb(e,0);return s.setFullYear(t.getFullYear(),0,1),s.setHours(0,0,0,0),s}function Rb(e,t){var s,n,r,a;const i=gb(),o=(null==t?void 0:t.weekStartsOn)??(null==(n=null==(s=null==t?void 0:t.locale)?void 0:s.options)?void 0:n.weekStartsOn)??i.weekStartsOn??(null==(a=null==(r=i.locale)?void 0:r.options)?void 0:a.weekStartsOn)??0,l=mb(e),c=l.getDay(),d=6+(c<o?-7:0)-(c-o);return l.setDate(l.getDate()+d),l.setHours(23,59,59,999),l}function Fb(e){return Rb(e,{weekStartsOn:1})}const Ib={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function Mb(e){return(t={})=>{const s=t.width?String(t.width):e.defaultWidth;return e.formats[s]||e.formats[e.defaultWidth]}}const Lb={date:Mb({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:Mb({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:Mb({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},qb={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function zb(e){return(t,s)=>{let n;if("formatting"===((null==s?void 0:s.context)?String(s.context):"standalone")&&e.formattingValues){const t=e.defaultFormattingWidth||e.defaultWidth,r=(null==s?void 0:s.width)?String(s.width):t;n=e.formattingValues[r]||e.formattingValues[t]}else{const t=e.defaultWidth,r=(null==s?void 0:s.width)?String(s.width):e.defaultWidth;n=e.values[r]||e.values[t]}return n[e.argumentCallback?e.argumentCallback(t):t]}}function Vb(e){return(t,s={})=>{const n=s.width,r=n&&e.matchPatterns[n]||e.matchPatterns[e.defaultMatchWidth],a=t.match(r);if(!a)return null;const i=a[0],o=n&&e.parsePatterns[n]||e.parsePatterns[e.defaultParseWidth],l=Array.isArray(o)?function(e,t){for(let s=0;s<e.length;s++)if(t(e[s]))return s;return}(o,e=>e.test(i)):function(e,t){for(const s in e)if(Object.prototype.hasOwnProperty.call(e,s)&&t(e[s]))return s;return}(o,e=>e.test(i));let c;c=e.valueCallback?e.valueCallback(l):l,c=s.valueCallback?s.valueCallback(c):c;return{value:c,rest:t.slice(i.length)}}}function Bb(e){return(t,s={})=>{const n=t.match(e.matchPattern);if(!n)return null;const r=n[0],a=t.match(e.parsePattern);if(!a)return null;let i=e.valueCallback?e.valueCallback(a[0]):a[0];i=s.valueCallback?s.valueCallback(i):i;return{value:i,rest:t.slice(r.length)}}}const $b={code:"en-US",formatDistance:(e,t,s)=>{let n;const r=Ib[e];return n="string"==typeof r?r:1===t?r.one:r.other.replace("{{count}}",t.toString()),(null==s?void 0:s.addSuffix)?s.comparison&&s.comparison>0?"in "+n:n+" ago":n},formatLong:Lb,formatRelative:(e,t,s,n)=>qb[e],localize:{ordinalNumber:(e,t)=>{const s=Number(e),n=s%100;if(n>20||n<10)switch(n%10){case 1:return s+"st";case 2:return s+"nd";case 3:return s+"rd"}return s+"th"},era:zb({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:zb({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:e=>e-1}),month:zb({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:zb({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:zb({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:Bb({matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:e=>parseInt(e,10)}),era:Vb({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:Vb({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:e=>e+1}),month:Vb({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:Vb({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:Vb({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},options:{weekStartsOn:0,firstWeekContainsDate:1}};function Wb(e){const t=mb(e),s=+bb(t)-+function(e){const t=jb(e),s=pb(e,0);return s.setFullYear(t,0,4),s.setHours(0,0,0,0),bb(s)}(t);return Math.round(s/fb)+1}function Ub(e,t){var s,n,r,a;const i=mb(e),o=i.getFullYear(),l=gb(),c=(null==t?void 0:t.firstWeekContainsDate)??(null==(n=null==(s=null==t?void 0:t.locale)?void 0:s.options)?void 0:n.firstWeekContainsDate)??l.firstWeekContainsDate??(null==(a=null==(r=l.locale)?void 0:r.options)?void 0:a.firstWeekContainsDate)??1,d=pb(e,0);d.setFullYear(o+1,0,c),d.setHours(0,0,0,0);const u=yb(d,t),m=pb(e,0);m.setFullYear(o,0,c),m.setHours(0,0,0,0);const p=yb(m,t);return i.getTime()>=u.getTime()?o+1:i.getTime()>=p.getTime()?o:o-1}function Kb(e,t){const s=mb(e),n=+yb(s,t)-+function(e,t){var s,n,r,a;const i=gb(),o=(null==t?void 0:t.firstWeekContainsDate)??(null==(n=null==(s=null==t?void 0:t.locale)?void 0:s.options)?void 0:n.firstWeekContainsDate)??i.firstWeekContainsDate??(null==(a=null==(r=i.locale)?void 0:r.options)?void 0:a.firstWeekContainsDate)??1,l=Ub(e,t),c=pb(e,0);return c.setFullYear(l,0,o),c.setHours(0,0,0,0),yb(c,t)}(s,t);return Math.round(n/fb)+1}function Hb(e,t){return(e<0?"-":"")+Math.abs(e).toString().padStart(t,"0")}const Zb={y(e,t){const s=e.getFullYear(),n=s>0?s:1-s;return Hb("yy"===t?n%100:n,t.length)},M(e,t){const s=e.getMonth();return"M"===t?String(s+1):Hb(s+1,2)},d:(e,t)=>Hb(e.getDate(),t.length),a(e,t){const s=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return s.toUpperCase();case"aaa":return s;case"aaaaa":return s[0];default:return"am"===s?"a.m.":"p.m."}},h:(e,t)=>Hb(e.getHours()%12||12,t.length),H:(e,t)=>Hb(e.getHours(),t.length),m:(e,t)=>Hb(e.getMinutes(),t.length),s:(e,t)=>Hb(e.getSeconds(),t.length),S(e,t){const s=t.length,n=e.getMilliseconds();return Hb(Math.trunc(n*Math.pow(10,s-3)),t.length)}},Qb="midnight",Gb="noon",Yb="morning",Jb="afternoon",Xb="evening",ej="night",tj={G:function(e,t,s){const n=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return s.era(n,{width:"abbreviated"});case"GGGGG":return s.era(n,{width:"narrow"});default:return s.era(n,{width:"wide"})}},y:function(e,t,s){if("yo"===t){const t=e.getFullYear(),n=t>0?t:1-t;return s.ordinalNumber(n,{unit:"year"})}return Zb.y(e,t)},Y:function(e,t,s,n){const r=Ub(e,n),a=r>0?r:1-r;if("YY"===t){return Hb(a%100,2)}return"Yo"===t?s.ordinalNumber(a,{unit:"year"}):Hb(a,t.length)},R:function(e,t){return Hb(jb(e),t.length)},u:function(e,t){return Hb(e.getFullYear(),t.length)},Q:function(e,t,s){const n=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(n);case"QQ":return Hb(n,2);case"Qo":return s.ordinalNumber(n,{unit:"quarter"});case"QQQ":return s.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return s.quarter(n,{width:"narrow",context:"formatting"});default:return s.quarter(n,{width:"wide",context:"formatting"})}},q:function(e,t,s){const n=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(n);case"qq":return Hb(n,2);case"qo":return s.ordinalNumber(n,{unit:"quarter"});case"qqq":return s.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return s.quarter(n,{width:"narrow",context:"standalone"});default:return s.quarter(n,{width:"wide",context:"standalone"})}},M:function(e,t,s){const n=e.getMonth();switch(t){case"M":case"MM":return Zb.M(e,t);case"Mo":return s.ordinalNumber(n+1,{unit:"month"});case"MMM":return s.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return s.month(n,{width:"narrow",context:"formatting"});default:return s.month(n,{width:"wide",context:"formatting"})}},L:function(e,t,s){const n=e.getMonth();switch(t){case"L":return String(n+1);case"LL":return Hb(n+1,2);case"Lo":return s.ordinalNumber(n+1,{unit:"month"});case"LLL":return s.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return s.month(n,{width:"narrow",context:"standalone"});default:return s.month(n,{width:"wide",context:"standalone"})}},w:function(e,t,s,n){const r=Kb(e,n);return"wo"===t?s.ordinalNumber(r,{unit:"week"}):Hb(r,t.length)},I:function(e,t,s){const n=Wb(e);return"Io"===t?s.ordinalNumber(n,{unit:"week"}):Hb(n,t.length)},d:function(e,t,s){return"do"===t?s.ordinalNumber(e.getDate(),{unit:"date"}):Zb.d(e,t)},D:function(e,t,s){const n=function(e){const t=mb(e);return kb(t,Ob(t))+1}(e);return"Do"===t?s.ordinalNumber(n,{unit:"dayOfYear"}):Hb(n,t.length)},E:function(e,t,s){const n=e.getDay();switch(t){case"E":case"EE":case"EEE":return s.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return s.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return s.day(n,{width:"short",context:"formatting"});default:return s.day(n,{width:"wide",context:"formatting"})}},e:function(e,t,s,n){const r=e.getDay(),a=(r-n.weekStartsOn+8)%7||7;switch(t){case"e":return String(a);case"ee":return Hb(a,2);case"eo":return s.ordinalNumber(a,{unit:"day"});case"eee":return s.day(r,{width:"abbreviated",context:"formatting"});case"eeeee":return s.day(r,{width:"narrow",context:"formatting"});case"eeeeee":return s.day(r,{width:"short",context:"formatting"});default:return s.day(r,{width:"wide",context:"formatting"})}},c:function(e,t,s,n){const r=e.getDay(),a=(r-n.weekStartsOn+8)%7||7;switch(t){case"c":return String(a);case"cc":return Hb(a,t.length);case"co":return s.ordinalNumber(a,{unit:"day"});case"ccc":return s.day(r,{width:"abbreviated",context:"standalone"});case"ccccc":return s.day(r,{width:"narrow",context:"standalone"});case"cccccc":return s.day(r,{width:"short",context:"standalone"});default:return s.day(r,{width:"wide",context:"standalone"})}},i:function(e,t,s){const n=e.getDay(),r=0===n?7:n;switch(t){case"i":return String(r);case"ii":return Hb(r,t.length);case"io":return s.ordinalNumber(r,{unit:"day"});case"iii":return s.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return s.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return s.day(n,{width:"short",context:"formatting"});default:return s.day(n,{width:"wide",context:"formatting"})}},a:function(e,t,s){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return s.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"aaa":return s.dayPeriod(n,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return s.dayPeriod(n,{width:"narrow",context:"formatting"});default:return s.dayPeriod(n,{width:"wide",context:"formatting"})}},b:function(e,t,s){const n=e.getHours();let r;switch(r=12===n?Gb:0===n?Qb:n/12>=1?"pm":"am",t){case"b":case"bb":return s.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"bbb":return s.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return s.dayPeriod(r,{width:"narrow",context:"formatting"});default:return s.dayPeriod(r,{width:"wide",context:"formatting"})}},B:function(e,t,s){const n=e.getHours();let r;switch(r=n>=17?Xb:n>=12?Jb:n>=4?Yb:ej,t){case"B":case"BB":case"BBB":return s.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"BBBBB":return s.dayPeriod(r,{width:"narrow",context:"formatting"});default:return s.dayPeriod(r,{width:"wide",context:"formatting"})}},h:function(e,t,s){if("ho"===t){let t=e.getHours()%12;return 0===t&&(t=12),s.ordinalNumber(t,{unit:"hour"})}return Zb.h(e,t)},H:function(e,t,s){return"Ho"===t?s.ordinalNumber(e.getHours(),{unit:"hour"}):Zb.H(e,t)},K:function(e,t,s){const n=e.getHours()%12;return"Ko"===t?s.ordinalNumber(n,{unit:"hour"}):Hb(n,t.length)},k:function(e,t,s){let n=e.getHours();return 0===n&&(n=24),"ko"===t?s.ordinalNumber(n,{unit:"hour"}):Hb(n,t.length)},m:function(e,t,s){return"mo"===t?s.ordinalNumber(e.getMinutes(),{unit:"minute"}):Zb.m(e,t)},s:function(e,t,s){return"so"===t?s.ordinalNumber(e.getSeconds(),{unit:"second"}):Zb.s(e,t)},S:function(e,t){return Zb.S(e,t)},X:function(e,t,s){const n=e.getTimezoneOffset();if(0===n)return"Z";switch(t){case"X":return nj(n);case"XXXX":case"XX":return rj(n);default:return rj(n,":")}},x:function(e,t,s){const n=e.getTimezoneOffset();switch(t){case"x":return nj(n);case"xxxx":case"xx":return rj(n);default:return rj(n,":")}},O:function(e,t,s){const n=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+sj(n,":");default:return"GMT"+rj(n,":")}},z:function(e,t,s){const n=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+sj(n,":");default:return"GMT"+rj(n,":")}},t:function(e,t,s){return Hb(Math.trunc(e.getTime()/1e3),t.length)},T:function(e,t,s){return Hb(e.getTime(),t.length)}};function sj(e,t=""){const s=e>0?"-":"+",n=Math.abs(e),r=Math.trunc(n/60),a=n%60;return 0===a?s+String(r):s+String(r)+t+Hb(a,2)}function nj(e,t){if(e%60==0){return(e>0?"-":"+")+Hb(Math.abs(e)/60,2)}return rj(e,t)}function rj(e,t=""){const s=e>0?"-":"+",n=Math.abs(e);return s+Hb(Math.trunc(n/60),2)+t+Hb(n%60,2)}const aj=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}},ij=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}},oj={p:ij,P:(e,t)=>{const s=e.match(/(P+)(p+)?/)||[],n=s[1],r=s[2];if(!r)return aj(e,t);let a;switch(n){case"P":a=t.dateTime({width:"short"});break;case"PP":a=t.dateTime({width:"medium"});break;case"PPP":a=t.dateTime({width:"long"});break;default:a=t.dateTime({width:"full"})}return a.replace("{{date}}",aj(n,t)).replace("{{time}}",ij(r,t))}},lj=/^D+$/,cj=/^Y+$/,dj=["D","DD","YY","YYYY"];const uj=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,mj=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,pj=/^'([^]*?)'?$/,hj=/''/g,xj=/[a-zA-Z]/;function fj(e,t,s){var n,r,a,i,o,l,c,d;const u=gb(),m=(null==s?void 0:s.locale)??u.locale??$b,p=(null==s?void 0:s.firstWeekContainsDate)??(null==(r=null==(n=null==s?void 0:s.locale)?void 0:n.options)?void 0:r.firstWeekContainsDate)??u.firstWeekContainsDate??(null==(i=null==(a=u.locale)?void 0:a.options)?void 0:i.firstWeekContainsDate)??1,h=(null==s?void 0:s.weekStartsOn)??(null==(l=null==(o=null==s?void 0:s.locale)?void 0:o.options)?void 0:l.weekStartsOn)??u.weekStartsOn??(null==(d=null==(c=u.locale)?void 0:c.options)?void 0:d.weekStartsOn)??0,x=mb(e);if(!function(e){if(!Pb(e)&&"number"!=typeof e)return!1;const t=mb(e);return!isNaN(Number(t))}(x))throw new RangeError("Invalid time value");let f=t.match(mj).map(e=>{const t=e[0];if("p"===t||"P"===t){return(0,oj[t])(e,m.formatLong)}return e}).join("").match(uj).map(e=>{if("''"===e)return{isToken:!1,value:"'"};const t=e[0];if("'"===t)return{isToken:!1,value:vj(e)};if(tj[t])return{isToken:!0,value:e};if(t.match(xj))throw new RangeError("Format string contains an unescaped latin alphabet character `"+t+"`");return{isToken:!1,value:e}});m.localize.preprocessor&&(f=m.localize.preprocessor(x,f));const v={firstWeekContainsDate:p,weekStartsOn:h,locale:m};return f.map(n=>{if(!n.isToken)return n.value;const r=n.value;(!(null==s?void 0:s.useAdditionalWeekYearTokens)&&function(e){return cj.test(e)}(r)||!(null==s?void 0:s.useAdditionalDayOfYearTokens)&&function(e){return lj.test(e)}(r))&&function(e,t,s){const n=function(e,t,s){const n="Y"===e[0]?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${n} to the input \`${s}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}(e,t,s);if(console.warn(n),dj.includes(e))throw new RangeError(n)}(r,t,String(e));return(0,tj[r[0]])(x,r,m.localize,v)}).join("")}function vj(e){const t=e.match(pj);return t?t[1].replace(hj,"'"):e}function gj(e,t){return function(e,t,s){const n=yb(e,s),r=yb(t,s),a=+n-wb(n),i=+r-wb(r);return Math.round((a-i)/fb)}(function(e){const t=mb(e),s=t.getMonth();return t.setFullYear(t.getFullYear(),s+1,0),t.setHours(0,0,0,0),t}(e),Ab(e),t)+1}function yj(e,t){const s=mb(e),n=mb(t);return s.getTime()>n.getTime()}function bj(e,t){return+mb(e)<+mb(t)}function jj(e,t){const s=mb(e),n=mb(t);return s.getFullYear()===n.getFullYear()&&s.getMonth()===n.getMonth()}function Nj(e,t){return hb(e,-t)}function wj(e,t){const s=mb(e),n=s.getFullYear(),r=s.getDate(),a=pb(e,0);a.setFullYear(n,t,15),a.setHours(0,0,0,0);const i=function(e){const t=mb(e),s=t.getFullYear(),n=t.getMonth(),r=pb(e,0);return r.setFullYear(s,n+1,0),r.setHours(0,0,0,0),r.getDate()}(a);return s.setMonth(t,Math.min(r,i)),s}function kj(e,t){const s=mb(e);return isNaN(+s)?pb(e,NaN):(s.setFullYear(t),s)}const Cj={lessThanXSeconds:{one:"moins d’une seconde",other:"moins de {{count}} secondes"},xSeconds:{one:"1 seconde",other:"{{count}} secondes"},halfAMinute:"30 secondes",lessThanXMinutes:{one:"moins d’une minute",other:"moins de {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"environ 1 heure",other:"environ {{count}} heures"},xHours:{one:"1 heure",other:"{{count}} heures"},xDays:{one:"1 jour",other:"{{count}} jours"},aboutXWeeks:{one:"environ 1 semaine",other:"environ {{count}} semaines"},xWeeks:{one:"1 semaine",other:"{{count}} semaines"},aboutXMonths:{one:"environ 1 mois",other:"environ {{count}} mois"},xMonths:{one:"1 mois",other:"{{count}} mois"},aboutXYears:{one:"environ 1 an",other:"environ {{count}} ans"},xYears:{one:"1 an",other:"{{count}} ans"},overXYears:{one:"plus d’un an",other:"plus de {{count}} ans"},almostXYears:{one:"presqu’un an",other:"presque {{count}} ans"}},Sj={date:Mb({formats:{full:"EEEE d MMMM y",long:"d MMMM y",medium:"d MMM y",short:"dd/MM/y"},defaultWidth:"full"}),time:Mb({formats:{full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},defaultWidth:"full"}),dateTime:Mb({formats:{full:"{{date}} 'à' {{time}}",long:"{{date}} 'à' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},_j={lastWeek:"eeee 'dernier à' p",yesterday:"'hier à' p",today:"'aujourd’hui à' p",tomorrow:"'demain à' p'",nextWeek:"eeee 'prochain à' p",other:"P"},Pj=["MMM","MMMM"],Ej={preprocessor:(e,t)=>{if(1===e.getDate())return t;return t.some(e=>e.isToken&&Pj.includes(e.value))?t.map(e=>e.isToken&&"do"===e.value?{isToken:!0,value:"d"}:e):t},ordinalNumber:(e,t)=>{const s=Number(e),n=null==t?void 0:t.unit;if(0===s)return"0";let r;return r=1===s?n&&["year","week","hour","minute","second"].includes(n)?"ère":"er":"ème",s+r},era:zb({values:{narrow:["av. J.-C","ap. J.-C"],abbreviated:["av. J.-C","ap. J.-C"],wide:["avant Jésus-Christ","après Jésus-Christ"]},defaultWidth:"wide"}),quarter:zb({values:{narrow:["T1","T2","T3","T4"],abbreviated:["1er trim.","2ème trim.","3ème trim.","4ème trim."],wide:["1er trimestre","2ème trimestre","3ème trimestre","4ème trimestre"]},defaultWidth:"wide",argumentCallback:e=>e-1}),month:zb({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["janv.","févr.","mars","avr.","mai","juin","juil.","août","sept.","oct.","nov.","déc."],wide:["janvier","février","mars","avril","mai","juin","juillet","août","septembre","octobre","novembre","décembre"]},defaultWidth:"wide"}),day:zb({values:{narrow:["D","L","M","M","J","V","S"],short:["di","lu","ma","me","je","ve","sa"],abbreviated:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],wide:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"]},defaultWidth:"wide"}),dayPeriod:zb({values:{narrow:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"mat.",afternoon:"ap.m.",evening:"soir",night:"mat."},abbreviated:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"matin",afternoon:"après-midi",evening:"soir",night:"matin"},wide:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"du matin",afternoon:"de l’après-midi",evening:"du soir",night:"du matin"}},defaultWidth:"wide"})},Dj={code:"fr",formatDistance:(e,t,s)=>{let n;const r=Cj[e];return n="string"==typeof r?r:1===t?r.one:r.other.replace("{{count}}",String(t)),(null==s?void 0:s.addSuffix)?s.comparison&&s.comparison>0?"dans "+n:"il y a "+n:n},formatLong:Sj,formatRelative:(e,t,s,n)=>_j[e],localize:Ej,match:{ordinalNumber:Bb({matchPattern:/^(\d+)(ième|ère|ème|er|e)?/i,parsePattern:/\d+/i,valueCallback:e=>parseInt(e)}),era:Vb({matchPatterns:{narrow:/^(av\.J\.C|ap\.J\.C|ap\.J\.-C)/i,abbreviated:/^(av\.J\.-C|av\.J-C|apr\.J\.-C|apr\.J-C|ap\.J-C)/i,wide:/^(avant Jésus-Christ|après Jésus-Christ)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^av/i,/^ap/i]},defaultParseWidth:"any"}),quarter:Vb({matchPatterns:{narrow:/^T?[1234]/i,abbreviated:/^[1234](er|ème|e)? trim\.?/i,wide:/^[1234](er|ème|e)? trimestre/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:e=>e+1}),month:Vb({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(janv|févr|mars|avr|mai|juin|juill|juil|août|sept|oct|nov|déc)\.?/i,wide:/^(janvier|février|mars|avril|mai|juin|juillet|août|septembre|octobre|novembre|décembre)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^av/i,/^ma/i,/^juin/i,/^juil/i,/^ao/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:Vb({matchPatterns:{narrow:/^[lmjvsd]/i,short:/^(di|lu|ma|me|je|ve|sa)/i,abbreviated:/^(dim|lun|mar|mer|jeu|ven|sam)\.?/i,wide:/^(dimanche|lundi|mardi|mercredi|jeudi|vendredi|samedi)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^d/i,/^l/i,/^m/i,/^m/i,/^j/i,/^v/i,/^s/i],any:[/^di/i,/^lu/i,/^ma/i,/^me/i,/^je/i,/^ve/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:Vb({matchPatterns:{narrow:/^(a|p|minuit|midi|mat\.?|ap\.?m\.?|soir|nuit)/i,any:/^([ap]\.?\s?m\.?|du matin|de l'après[-\s]midi|du soir|de la nuit)/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^min/i,noon:/^mid/i,morning:/mat/i,afternoon:/ap/i,evening:/soir/i,night:/nuit/i}},defaultParseWidth:"any"})},options:{weekStartsOn:1,firstWeekContainsDate:4}};function Tj(){const{toast:e}=Ui(),[t,s]=va(),[n,r]=hr.useState(null),[a,i]=hr.useState(!1),[o,l]=hr.useState("all"),[c,d]=hr.useState(""),u=e=>s(e),{data:m=[],isLoading:p}=Pi({queryKey:["/api/admin/fids",o,c],queryFn:async()=>(await Oi("GET","/api/admin/fids")).json()}),h=e=>{switch(e){case"pending":return Fr.jsxs(Hx,{variant:"outline",className:"bg-yellow-50 text-yellow-700 border-yellow-300",children:[Fr.jsx(Rc,{className:"h-3 w-3 mr-1"}),"En attente"]});case"validated":return Fr.jsxs(Hx,{variant:"outline",className:"bg-green-50 text-green-700 border-green-300",children:[Fr.jsx(Ul,{className:"h-3 w-3 mr-1"}),"Validée"]});case"rejected":return Fr.jsxs(Hx,{variant:"outline",className:"bg-red-50 text-red-700 border-red-300",children:[Fr.jsx(Kl,{className:"h-3 w-3 mr-1"}),"Rejetée"]});case"modified":return Fr.jsxs(Hx,{variant:"outline",className:"bg-blue-50 text-blue-700 border-blue-300",children:[Fr.jsx(Dc,{className:"h-3 w-3 mr-1"}),"Modifiée"]});default:return Fr.jsx(Hx,{children:e})}},x=m.filter(e=>{const t="all"===o||e.status===o,s=""===c||e.clientCompanyName.toLowerCase().includes(c.toLowerCase())||e.clientContactName.toLowerCase().includes(c.toLowerCase())||e.wasteName.toLowerCase().includes(c.toLowerCase())||e.nomenclatureCode.toLowerCase().includes(c.toLowerCase());return t&&s});return p?Fr.jsx("div",{className:"flex items-center justify-center h-64",children:Fr.jsxs("div",{className:"text-center",children:[Fr.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),Fr.jsx("p",{children:"Chargement des FID..."})]})}):Fr.jsxs("div",{className:"min-h-screen bg-gray-50",children:[Fr.jsx("nav",{className:"bg-white shadow-sm border-b border-gray-200",children:Fr.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:Fr.jsxs("div",{className:"flex justify-between items-center h-16",children:[Fr.jsxs("div",{className:"flex items-center",children:[Fr.jsx("img",{src:"https://upload.wikimedia.org/wikipedia/commons/3/32/Remondis_logo.svg",alt:"Remondis",className:"h-8 w-auto mr-4"}),Fr.jsxs("div",{className:"flex items-center space-x-8",children:[Fr.jsx("button",{onClick:()=>u("/admin"),className:"text-gray-500 hover:text-gray-700 px-3 py-2 text-sm font-medium",children:"Tableau de bord"}),Fr.jsx("button",{onClick:()=>u("/admin/fids"),className:"bg-blue-100 text-blue-700 px-3 py-2 rounded-md text-sm font-medium",children:"Gestion FID"}),Fr.jsx("button",{onClick:()=>u("/admin/users"),className:"text-gray-500 hover:text-gray-700 px-3 py-2 text-sm font-medium",children:"Utilisateurs"})]})]}),Fr.jsxs("div",{className:"flex items-center space-x-4",children:[Fr.jsx("span",{className:"text-sm text-gray-600",children:"Connecté en tant qu'administrateur"}),Fr.jsx("button",{onClick:()=>u("/"),className:"text-gray-500 hover:text-gray-700 px-3 py-2 text-sm font-medium",children:"Retour au site"})]})]})})}),Fr.jsxs("div",{className:"container mx-auto p-6",children:[Fr.jsxs("div",{className:"flex items-center justify-between mb-6",children:[Fr.jsxs("div",{children:[Fr.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Gestion des FID"}),Fr.jsx("p",{className:"text-gray-600",children:"Validation et gestion des Fiches d'Identification des Déchets"})]}),Fr.jsxs("div",{className:"flex items-center space-x-4",children:[Fr.jsxs("div",{className:"flex items-center space-x-2",children:[Fr.jsx(Cc,{className:"h-4 w-4 text-gray-400"}),Fr.jsx(zx,{placeholder:"Rechercher...",value:c,onChange:e=>d(e.target.value),className:"w-64"})]}),Fr.jsxs(Lp,{variant:"outline",onClick:async()=>{try{const t=await fetch("/api/export/fids",{method:"GET",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"}});if(!t.ok)throw new Error("Erreur lors de l'export");const s=await t.blob(),n=window.URL.createObjectURL(s),r=document.createElement("a");r.href=n,r.download=`fids_${(new Date).toISOString().split("T")[0]}.xlsx`,document.body.appendChild(r),r.click(),window.URL.revokeObjectURL(n),document.body.removeChild(r),e({title:"Export réussi",description:"Le fichier Excel des FIDs a été téléchargé avec succès."})}catch(t){e({title:"Erreur",description:"Erreur lors de l'export Excel des FIDs",variant:"destructive"})}},className:"flex items-center space-x-2",children:[Fr.jsx(ec,{className:"h-4 w-4"}),Fr.jsx("span",{children:"Export Excel"})]}),Fr.jsxs(Bv,{value:o,onValueChange:l,children:[Fr.jsxs(Wv,{className:"w-48",children:[Fr.jsx(ic,{className:"h-4 w-4 mr-2"}),Fr.jsx($v,{})]}),Fr.jsxs(Hv,{children:[Fr.jsx(Zv,{value:"all",children:"Tous les statuts"}),Fr.jsx(Zv,{value:"pending",children:"En attente"}),Fr.jsx(Zv,{value:"validated",children:"Validées"}),Fr.jsx(Zv,{value:"rejected",children:"Rejetées"}),Fr.jsx(Zv,{value:"modified",children:"Modifiées"})]})]})]})]}),Fr.jsxs(nf,{children:[Fr.jsx(rf,{children:Fr.jsxs(af,{children:["Fiches d'Identification des Déchets (",x.length,")"]})}),Fr.jsx(lf,{children:Fr.jsx("div",{className:"space-y-4",children:0===x.length?Fr.jsxs("div",{className:"text-center py-8",children:[Fr.jsx(ac,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),Fr.jsx("p",{className:"text-gray-600",children:"Aucune FID trouvée"})]}):x.map(t=>{var s,n;return Fr.jsxs("div",{className:"p-4 border rounded-lg transition-colors border-gray-200 hover:border-gray-300",children:[Fr.jsxs("div",{className:"flex items-center justify-between mb-3",children:[Fr.jsxs("h3",{className:"font-semibold text-gray-900",children:["FID #",t.id," - ",t.clientCompanyName]}),Fr.jsx("div",{className:"flex items-center space-x-2",children:h(t.status)})]}),Fr.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm text-gray-600 mb-4",children:[Fr.jsxs("div",{children:[Fr.jsxs("p",{children:[Fr.jsx("strong",{children:"Contact:"})," ",t.clientContactName]}),Fr.jsxs("p",{children:[Fr.jsx("strong",{children:"Email:"})," ",t.clientEmail]})]}),Fr.jsxs("div",{children:[Fr.jsxs("p",{children:[Fr.jsx("strong",{children:"Déchet:"})," ",t.wasteName]}),Fr.jsxs("p",{children:[Fr.jsx("strong",{children:"Code:"})," ",t.nomenclatureCode]})]}),Fr.jsxs("div",{children:[Fr.jsxs("p",{children:[Fr.jsx("strong",{children:"Créée le:"})," ",fj(new Date(t.createdAt),"dd/MM/yyyy",{locale:Dj})]}),t.validatedBy&&t.validatedAt&&Fr.jsxs("p",{children:[Fr.jsx("strong",{children:"Validée le:"})," ",fj(new Date(t.validatedAt),"dd/MM/yyyy",{locale:Dj})]})]})]}),t.validatedBy&&t.validatedAt&&Fr.jsxs("div",{className:"mb-3 text-xs text-gray-500",children:["Validée par ",null==(s=t.validatedByUser)?void 0:s.firstName," ",null==(n=t.validatedByUser)?void 0:n.lastName,"le ",fj(new Date(t.validatedAt),"dd/MM/yyyy à HH:mm",{locale:Dj})]}),t.rejectionReason&&Fr.jsxs("div",{className:"mb-3 p-2 bg-red-50 border border-red-200 rounded text-xs text-red-700",children:[Fr.jsx("strong",{children:"Raison du rejet:"})," ",t.rejectionReason]}),Fr.jsxs("div",{className:"flex items-center justify-between",children:[Fr.jsxs("div",{className:"flex space-x-2",children:[Fr.jsxs(Lp,{size:"sm",variant:"outline",onClick:()=>(e=>{r(e),i(!0)})(t),children:[Fr.jsx(Dc,{className:"h-4 w-4 mr-1"}),"Modifier"]}),Fr.jsxs(Lp,{size:"sm",variant:"outline",onClick:()=>(async t=>{try{const s=await Oi("GET",`/api/admin/fids/${t}/export-pdf`),n=await s.json();if(!n.success)throw new Error(n.message||"Erreur lors de la récupération des données");const{jsPDF:r}=await Sg(async()=>{const{jsPDF:e}=await import("./jspdf.es.min-CGtyrWaE.js").then(e=>e.j);return{jsPDF:e}},[]),a=new r,i=a.internal.pageSize.width,o=20;let l=o;a.setFontSize(20),a.text("REMONDIS",o,l),l+=10,a.setFontSize(16),a.text(n.pdfContent.title,o,l),l+=15,n.pdfContent.sections.forEach(e=>{l>250&&(a.addPage(),l=o),a.setFontSize(14),a.setFont("helvetica","bold"),a.text(e.title,o,l),l+=10,a.setFontSize(10),a.setFont("helvetica","normal"),e.fields.forEach(e=>{l>270&&(a.addPage(),l=o);const t=`${e.label}: ${e.value||"Non renseigné"}`,s=a.splitTextToSize(t,i-2*o);a.text(s,o,l),l+=5*s.length}),l+=10});const c=a.getNumberOfPages();for(let e=1;e<=c;e++)a.setPage(e),a.setFontSize(8),a.text(`Page ${e} sur ${c} - Généré le ${(new Date).toLocaleDateString("fr-FR")}`,o,a.internal.pageSize.height-10);a.save(`FID-${t}.pdf`),e({title:"Succès",description:"PDF généré avec succès"})}catch(s){console.error("Erreur export PDF:",s),e({title:"Erreur",description:"Erreur lors de l'export PDF",variant:"destructive"})}})(t.id),children:[Fr.jsx(ec,{className:"h-4 w-4 mr-1"}),"PDF"]})]}),t.adminComments&&Fr.jsxs("div",{className:"text-xs text-gray-500 max-w-xs truncate",title:t.adminComments,children:[Fr.jsx("strong",{children:"Commentaire:"})," ",t.adminComments]})]})]},t.id)})})})]}),n&&Fr.jsx(ub,{fid:n,isOpen:a,onClose:()=>{r(null),i(!1)}})]})]})}function Aj(){const[e,t]=hr.useState(""),[s,n]=hr.useState("all"),[r,a]=hr.useState("all"),[i,o]=hr.useState(null),[l,c]=hr.useState(!1),[d,u]=hr.useState(!1),{toast:m}=Ui(),p=Ni(),{data:h=[],isLoading:x}=Pi({queryKey:["/api/admin/users"],queryFn:async()=>{const e=await Oi("GET","/api/admin/users");return Array.isArray(e)?e:[]}}),f=Ei({mutationFn:e=>Oi("DELETE",`/api/admin/users/${e}`),onSuccess:()=>{p.invalidateQueries({queryKey:["/api/admin/users"]}),m({title:"Utilisateur supprimé",description:"L'utilisateur a été supprimé avec succès."})},onError:()=>{m({title:"Erreur",description:"Erreur lors de la suppression de l'utilisateur",variant:"destructive"})}}),v=Ei({mutationFn:({userId:e,isActive:t})=>Oi("PATCH",`/api/admin/users/${e}`,{isActive:t}),onSuccess:()=>{p.invalidateQueries({queryKey:["/api/admin/users"]}),m({title:"Statut modifié",description:"Le statut de l'utilisateur a été modifié avec succès."})},onError:()=>{m({title:"Erreur",description:"Erreur lors de la modification du statut",variant:"destructive"})}}),g=(Array.isArray(h)?h:[]).filter(t=>{const n=""===e||t.email.toLowerCase().includes(e.toLowerCase())||t.firstName.toLowerCase().includes(e.toLowerCase())||t.lastName.toLowerCase().includes(e.toLowerCase())||t.companyName&&t.companyName.toLowerCase().includes(e.toLowerCase()),a="all"===s||t.role===s,i="all"===r||"active"===r&&t.isActive||"inactive"===r&&!t.isActive||"verified"===r&&t.isVerified||"unverified"===r&&!t.isVerified;return n&&a&&i}),y=Array.isArray(h)?h:[],b=y.length,j=y.filter(e=>e.isActive).length,N=y.filter(e=>e.isVerified).length,w=y.filter(e=>"admin"===e.role).length;return x?Fr.jsx("div",{className:"flex items-center justify-center h-64",children:Fr.jsxs("div",{className:"text-center",children:[Fr.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),Fr.jsx("p",{children:"Chargement des utilisateurs..."})]})}):Fr.jsxs("div",{className:"space-y-6",children:[Fr.jsxs("div",{className:"flex justify-between items-center",children:[Fr.jsxs("div",{children:[Fr.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Gestion des Utilisateurs"}),Fr.jsx("p",{className:"text-gray-600",children:"Administration des comptes utilisateurs"})]}),Fr.jsxs("div",{className:"flex space-x-2",children:[Fr.jsxs(Lp,{onClick:async()=>{try{const e=await fetch("/api/export/users",{method:"GET",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"}});if(!e.ok)throw new Error("Erreur lors de l'export");const t=await e.blob(),s=window.URL.createObjectURL(t),n=document.createElement("a");n.href=s,n.download=`utilisateurs_${(new Date).toISOString().split("T")[0]}.xlsx`,document.body.appendChild(n),n.click(),window.URL.revokeObjectURL(s),document.body.removeChild(n),m({title:"Export réussi",description:"Le fichier Excel des utilisateurs a été téléchargé avec succès."})}catch(e){m({title:"Erreur",description:"Erreur lors de l'export Excel des utilisateurs",variant:"destructive"})}},variant:"outline",children:[Fr.jsx(ec,{className:"h-4 w-4 mr-2"}),"Exporter Excel"]}),Fr.jsxs(Lp,{onClick:()=>c(!0),children:[Fr.jsx(jc,{className:"h-4 w-4 mr-2"}),"Nouvel Utilisateur"]})]})]}),Fr.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[Fr.jsxs(nf,{children:[Fr.jsxs(rf,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[Fr.jsx(af,{className:"text-sm font-medium",children:"Total Utilisateurs"}),Fr.jsx(zc,{className:"h-4 w-4 text-muted-foreground"})]}),Fr.jsx(lf,{children:Fr.jsx("div",{className:"text-2xl font-bold",children:b})})]}),Fr.jsxs(nf,{children:[Fr.jsxs(rf,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[Fr.jsx(af,{className:"text-sm font-medium",children:"Utilisateurs Actifs"}),Fr.jsx(Mc,{className:"h-4 w-4 text-muted-foreground"})]}),Fr.jsxs(lf,{children:[Fr.jsx("div",{className:"text-2xl font-bold text-green-600",children:j}),Fr.jsxs("p",{className:"text-xs text-muted-foreground",children:[b>0?Math.round(j/b*100):0,"% du total"]})]})]}),Fr.jsxs(nf,{children:[Fr.jsxs(rf,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[Fr.jsx(af,{className:"text-sm font-medium",children:"Comptes Vérifiés"}),Fr.jsx(Mc,{className:"h-4 w-4 text-muted-foreground"})]}),Fr.jsxs(lf,{children:[Fr.jsx("div",{className:"text-2xl font-bold text-blue-600",children:N}),Fr.jsxs("p",{className:"text-xs text-muted-foreground",children:[b>0?Math.round(N/b*100):0,"% du total"]})]})]}),Fr.jsxs(nf,{children:[Fr.jsxs(rf,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[Fr.jsx(af,{className:"text-sm font-medium",children:"Administrateurs"}),Fr.jsx(Lc,{className:"h-4 w-4 text-muted-foreground"})]}),Fr.jsx(lf,{children:Fr.jsx("div",{className:"text-2xl font-bold text-purple-600",children:w})})]})]}),Fr.jsx(nf,{children:Fr.jsx(lf,{className:"pt-6",children:Fr.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[Fr.jsx("div",{className:"flex-1",children:Fr.jsxs("div",{className:"relative",children:[Fr.jsx(Cc,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),Fr.jsx(zx,{placeholder:"Rechercher par nom, email ou entreprise...",value:e,onChange:e=>t(e.target.value),className:"pl-10"})]})}),Fr.jsxs(Bv,{value:s,onValueChange:n,children:[Fr.jsx(Wv,{className:"w-full md:w-[180px]",children:Fr.jsx($v,{placeholder:"Filtrer par rôle"})}),Fr.jsxs(Hv,{children:[Fr.jsx(Zv,{value:"all",children:"Tous les rôles"}),Fr.jsx(Zv,{value:"user",children:"Utilisateur"}),Fr.jsx(Zv,{value:"admin",children:"Administrateur"})]})]}),Fr.jsxs(Bv,{value:r,onValueChange:a,children:[Fr.jsx(Wv,{className:"w-full md:w-[180px]",children:Fr.jsx($v,{placeholder:"Filtrer par statut"})}),Fr.jsxs(Hv,{children:[Fr.jsx(Zv,{value:"all",children:"Tous les statuts"}),Fr.jsx(Zv,{value:"active",children:"Actif"}),Fr.jsx(Zv,{value:"inactive",children:"Inactif"}),Fr.jsx(Zv,{value:"verified",children:"Vérifié"}),Fr.jsx(Zv,{value:"unverified",children:"Non vérifié"})]})]})]})})}),Fr.jsxs(nf,{children:[Fr.jsx(rf,{children:Fr.jsxs(af,{children:["Liste des Utilisateurs (",g.length,")"]})}),Fr.jsxs(lf,{children:[Fr.jsx("div",{className:"overflow-x-auto",children:Fr.jsxs(Gv,{children:[Fr.jsx(Yv,{children:Fr.jsxs(Xv,{children:[Fr.jsx(eg,{children:"Utilisateur"}),Fr.jsx(eg,{children:"Entreprise"}),Fr.jsx(eg,{children:"Rôle"}),Fr.jsx(eg,{children:"Statut"}),Fr.jsx(eg,{children:"Dernière connexion"}),Fr.jsx(eg,{children:"Actions"})]})}),Fr.jsx(Jv,{children:g.map(e=>Fr.jsxs(Xv,{children:[Fr.jsx(tg,{children:Fr.jsxs("div",{children:[Fr.jsxs("div",{className:"font-medium",children:[e.firstName," ",e.lastName]}),Fr.jsx("div",{className:"text-sm text-gray-500",children:e.email}),Fr.jsx("div",{className:"text-sm text-gray-500",children:e.phone})]})}),Fr.jsx(tg,{children:Fr.jsxs("div",{children:[Fr.jsx("div",{className:"font-medium",children:e.companyName||"-"}),Fr.jsx("div",{className:"text-sm text-gray-500",children:e.siret||"-"})]})}),Fr.jsx(tg,{children:Fr.jsx(Hx,{variant:"admin"===e.role?"default":"secondary",children:"admin"===e.role?"Administrateur":"Utilisateur"})}),Fr.jsx(tg,{children:Fr.jsxs("div",{className:"space-y-1",children:[Fr.jsx(Hx,{variant:e.isActive?"default":"destructive",children:e.isActive?"Actif":"Inactif"}),Fr.jsx(Hx,{variant:e.isVerified?"default":"secondary",children:e.isVerified?"Vérifié":"Non vérifié"})]})}),Fr.jsx(tg,{children:e.lastLogin?new Date(e.lastLogin).toLocaleDateString("fr-FR"):"Jamais connecté"}),Fr.jsx(tg,{children:Fr.jsxs("div",{className:"flex space-x-2",children:[Fr.jsx(Lp,{variant:"outline",size:"sm",onClick:()=>{o(e),u(!0)},children:Fr.jsx(Dc,{className:"h-4 w-4"})}),Fr.jsx(Lp,{variant:e.isActive?"destructive":"default",size:"sm",onClick:()=>v.mutate({userId:e.id,isActive:!e.isActive}),children:e.isActive?Fr.jsx(Lc,{className:"h-4 w-4"}):Fr.jsx(Mc,{className:"h-4 w-4"})}),Fr.jsx(Lp,{variant:"destructive",size:"sm",onClick:()=>{confirm("Êtes-vous sûr de vouloir supprimer cet utilisateur ?")&&f.mutate(e.id)},children:Fr.jsx(Ac,{className:"h-4 w-4"})})]})})]},e.id))})]})}),0===g.length&&Fr.jsx("div",{className:"text-center py-8 text-gray-500",children:"Aucun utilisateur trouvé"})]})]})]})}var Oj=e=>"checkbox"===e.type,Rj=e=>e instanceof Date,Fj=e=>null==e;const Ij=e=>"object"==typeof e;var Mj=e=>!Fj(e)&&!Array.isArray(e)&&Ij(e)&&!Rj(e),Lj=e=>Mj(e)&&e.target?Oj(e.target)?e.target.checked:e.target.value:e,qj=(e,t)=>e.has((e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e)(t)),zj="undefined"!=typeof window&&void 0!==window.HTMLElement&&"undefined"!=typeof document;function Vj(e){let t;const s=Array.isArray(e),n="undefined"!=typeof FileList&&e instanceof FileList;if(e instanceof Date)t=new Date(e);else if(e instanceof Set)t=new Set(e);else{if(zj&&(e instanceof Blob||n)||!s&&!Mj(e))return e;if(t=s?[]:{},s||(e=>{const t=e.constructor&&e.constructor.prototype;return Mj(t)&&t.hasOwnProperty("isPrototypeOf")})(e))for(const s in e)e.hasOwnProperty(s)&&(t[s]=Vj(e[s]));else t=e}return t}var Bj=e=>/^\w*$/.test(e),$j=e=>void 0===e,Wj=e=>Array.isArray(e)?e.filter(Boolean):[],Uj=e=>Wj(e.replace(/["|']|\]/g,"").split(/\.|\[/)),Kj=(e,t,s)=>{if(!t||!Mj(e))return s;const n=(Bj(t)?[t]:Uj(t)).reduce((e,t)=>Fj(e)?e:e[t],e);return $j(n)||n===e?$j(e[t])?s:e[t]:n},Hj=e=>"boolean"==typeof e,Zj=(e,t,s)=>{let n=-1;const r=Bj(t)?[t]:Uj(t),a=r.length,i=a-1;for(;++n<a;){const t=r[n];let a=s;if(n!==i){const s=e[t];a=Mj(s)||Array.isArray(s)?s:isNaN(+r[n+1])?{}:[]}if("__proto__"===t||"constructor"===t||"prototype"===t)return;e[t]=a,e=e[t]}};const Qj="blur",Gj="focusout",Yj="change",Jj="onBlur",Xj="onChange",eN="onSubmit",tN="onTouched",sN="all",nN="max",rN="min",aN="maxLength",iN="minLength",oN="pattern",lN="required",cN="validate",dN=vr.createContext(null);dN.displayName="HookFormContext";const uN=()=>vr.useContext(dN);var mN=(e,t,s,n=!0)=>{const r={defaultValues:t._defaultValues};for(const a in e)Object.defineProperty(r,a,{get:()=>{const r=a;return t._proxyFormState[r]!==sN&&(t._proxyFormState[r]=!n||sN),s&&(s[r]=!0),e[r]}});return r};const pN="undefined"!=typeof window?hr.useLayoutEffect:hr.useEffect;var hN=e=>"string"==typeof e,xN=(e,t,s,n,r)=>hN(e)?(n&&t.watch.add(e),Kj(s,e,r)):Array.isArray(e)?e.map(e=>(n&&t.watch.add(e),Kj(s,e))):(n&&(t.watchAll=!0),s);function fN(e){const t=uN(),{name:s,disabled:n,control:r=t.control,shouldUnregister:a}=e,i=qj(r._names.array,s),o=function(e){const t=uN(),{control:s=t.control,name:n,defaultValue:r,disabled:a,exact:i}=e||{},o=vr.useRef(r),[l,c]=vr.useState(s._getWatch(n,o.current));return pN(()=>s._subscribe({name:n,formState:{values:!0},exact:i,callback:e=>!a&&c(xN(n,s._names,e.values||s._formValues,!1,o.current))}),[n,s,a,i]),vr.useEffect(()=>s._removeUnmounted()),l}({control:r,name:s,defaultValue:Kj(r._formValues,s,Kj(r._defaultValues,s,e.defaultValue)),exact:!0}),l=function(e){const t=uN(),{control:s=t.control,disabled:n,name:r,exact:a}=e||{},[i,o]=vr.useState(s._formState),l=vr.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1});return pN(()=>s._subscribe({name:r,formState:l.current,exact:a,callback:e=>{!n&&o({...s._formState,...e})}}),[r,n,a]),vr.useEffect(()=>{l.current.isValid&&s._setValid(!0)},[s]),vr.useMemo(()=>mN(i,s,l.current,!1),[i,s])}({control:r,name:s,exact:!0}),c=vr.useRef(e),d=vr.useRef(r.register(s,{...e.rules,value:o,...Hj(e.disabled)?{disabled:e.disabled}:{}})),u=vr.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!Kj(l.errors,s)},isDirty:{enumerable:!0,get:()=>!!Kj(l.dirtyFields,s)},isTouched:{enumerable:!0,get:()=>!!Kj(l.touchedFields,s)},isValidating:{enumerable:!0,get:()=>!!Kj(l.validatingFields,s)},error:{enumerable:!0,get:()=>Kj(l.errors,s)}}),[l,s]),m=vr.useCallback(e=>d.current.onChange({target:{value:Lj(e),name:s},type:Yj}),[s]),p=vr.useCallback(()=>d.current.onBlur({target:{value:Kj(r._formValues,s),name:s},type:Qj}),[s,r._formValues]),h=vr.useCallback(e=>{const t=Kj(r._fields,s);t&&e&&(t._f.ref={focus:()=>e.focus&&e.focus(),select:()=>e.select&&e.select(),setCustomValidity:t=>e.setCustomValidity(t),reportValidity:()=>e.reportValidity()})},[r._fields,s]),x=vr.useMemo(()=>({name:s,value:o,...Hj(n)||l.disabled?{disabled:l.disabled||n}:{},onChange:m,onBlur:p,ref:h}),[s,n,l.disabled,m,p,h,o]);return vr.useEffect(()=>{const e=r._options.shouldUnregister||a;r.register(s,{...c.current.rules,...Hj(c.current.disabled)?{disabled:c.current.disabled}:{}});const t=(e,t)=>{const s=Kj(r._fields,e);s&&s._f&&(s._f.mount=t)};if(t(s,!0),e){const e=Vj(Kj(r._options.defaultValues,s));Zj(r._defaultValues,s,e),$j(Kj(r._formValues,s))&&Zj(r._formValues,s,e)}return!i&&r.register(s),()=>{(i?e&&!r._state.action:e)?r.unregister(s):t(s,!1)}},[s,r,i,a]),vr.useEffect(()=>{r._setDisabledField({disabled:n,name:s})},[n,s,r]),vr.useMemo(()=>({field:x,formState:l,fieldState:u}),[x,l,u])}const vN=e=>e.render(fN(e));var gN=(e,t,s,n,r)=>t?{...s[e],types:{...s[e]&&s[e].types?s[e].types:{},[n]:r||!0}}:{},yN=e=>Array.isArray(e)?e:[e],bN=()=>{let e=[];return{get observers(){return e},next:t=>{for(const s of e)s.next&&s.next(t)},subscribe:t=>(e.push(t),{unsubscribe:()=>{e=e.filter(e=>e!==t)}}),unsubscribe:()=>{e=[]}}},jN=e=>Fj(e)||!Ij(e);function NN(e,t,s=new WeakSet){if(jN(e)||jN(t))return e===t;if(Rj(e)&&Rj(t))return e.getTime()===t.getTime();const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;if(s.has(e)||s.has(t))return!0;s.add(e),s.add(t);for(const a of n){const n=e[a];if(!r.includes(a))return!1;if("ref"!==a){const e=t[a];if(Rj(n)&&Rj(e)||Mj(n)&&Mj(e)||Array.isArray(n)&&Array.isArray(e)?!NN(n,e,s):n!==e)return!1}}return!0}var wN=e=>Mj(e)&&!Object.keys(e).length,kN=e=>"file"===e.type,CN=e=>"function"==typeof e,SN=e=>{if(!zj)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},_N=e=>"select-multiple"===e.type,PN=e=>"radio"===e.type,EN=e=>SN(e)&&e.isConnected;function DN(e,t){const s=Array.isArray(t)?t:Bj(t)?[t]:Uj(t),n=1===s.length?e:function(e,t){const s=t.slice(0,-1).length;let n=0;for(;n<s;)e=$j(e)?n++:e[t[n++]];return e}(e,s),r=s.length-1,a=s[r];return n&&delete n[a],0!==r&&(Mj(n)&&wN(n)||Array.isArray(n)&&function(e){for(const t in e)if(e.hasOwnProperty(t)&&!$j(e[t]))return!1;return!0}(n))&&DN(e,s.slice(0,-1)),e}var TN=e=>{for(const t in e)if(CN(e[t]))return!0;return!1};function AN(e,t={}){const s=Array.isArray(e);if(Mj(e)||s)for(const n in e)Array.isArray(e[n])||Mj(e[n])&&!TN(e[n])?(t[n]=Array.isArray(e[n])?[]:{},AN(e[n],t[n])):Fj(e[n])||(t[n]=!0);return t}function ON(e,t,s){const n=Array.isArray(e);if(Mj(e)||n)for(const r in e)Array.isArray(e[r])||Mj(e[r])&&!TN(e[r])?$j(t)||jN(s[r])?s[r]=Array.isArray(e[r])?AN(e[r],[]):{...AN(e[r])}:ON(e[r],Fj(t)?{}:t[r],s[r]):s[r]=!NN(e[r],t[r]);return s}var RN=(e,t)=>ON(e,t,AN(t));const FN={value:!1,isValid:!1},IN={value:!0,isValid:!0};var MN=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(e=>e&&e.checked&&!e.disabled).map(e=>e.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!$j(e[0].attributes.value)?$j(e[0].value)||""===e[0].value?IN:{value:e[0].value,isValid:!0}:IN:FN}return FN},LN=(e,{valueAsNumber:t,valueAsDate:s,setValueAs:n})=>$j(e)?e:t?""===e?NaN:e?+e:e:s&&hN(e)?new Date(e):n?n(e):e;const qN={isValid:!1,value:null};var zN=e=>Array.isArray(e)?e.reduce((e,t)=>t&&t.checked&&!t.disabled?{isValid:!0,value:t.value}:e,qN):qN;function VN(e){const t=e.ref;return kN(t)?t.files:PN(t)?zN(e.refs).value:_N(t)?[...t.selectedOptions].map(({value:e})=>e):Oj(t)?MN(e.refs).value:LN($j(t.value)?e.ref.value:t.value,e)}var BN=e=>e instanceof RegExp,$N=e=>$j(e)?e:BN(e)?e.source:Mj(e)?BN(e.value)?e.value.source:e.value:e,WN=e=>({isOnSubmit:!e||e===eN,isOnBlur:e===Jj,isOnChange:e===Xj,isOnAll:e===sN,isOnTouch:e===tN});const UN="AsyncFunction";var KN=e=>!!e&&!!e.validate&&!!(CN(e.validate)&&e.validate.constructor.name===UN||Mj(e.validate)&&Object.values(e.validate).find(e=>e.constructor.name===UN)),HN=(e,t,s)=>!s&&(t.watchAll||t.watch.has(e)||[...t.watch].some(t=>e.startsWith(t)&&/^\.\w+/.test(e.slice(t.length))));const ZN=(e,t,s,n)=>{for(const r of s||Object.keys(e)){const s=Kj(e,r);if(s){const{_f:e,...a}=s;if(e){if(e.refs&&e.refs[0]&&t(e.refs[0],r)&&!n)return!0;if(e.ref&&t(e.ref,e.name)&&!n)return!0;if(ZN(a,t))break}else if(Mj(a)&&ZN(a,t))break}}};function QN(e,t,s){const n=Kj(e,s);if(n||Bj(s))return{error:n,name:s};const r=s.split(".");for(;r.length;){const n=r.join("."),a=Kj(t,n),i=Kj(e,n);if(a&&!Array.isArray(a)&&s!==n)return{name:s};if(i&&i.type)return{name:n,error:i};if(i&&i.root&&i.root.type)return{name:`${n}.root`,error:i.root};r.pop()}return{name:s}}var GN=(e,t,s)=>{const n=yN(Kj(e,s));return Zj(n,"root",t[s]),Zj(e,s,n),e},YN=e=>hN(e);function JN(e,t,s="validate"){if(YN(e)||Array.isArray(e)&&e.every(YN)||Hj(e)&&!e)return{type:s,message:YN(e)?e:"",ref:t}}var XN=e=>Mj(e)&&!BN(e)?e:{value:e,message:""},ew=async(e,t,s,n,r,a)=>{const{ref:i,refs:o,required:l,maxLength:c,minLength:d,min:u,max:m,pattern:p,validate:h,name:x,valueAsNumber:f,mount:v}=e._f,g=Kj(s,x);if(!v||t.has(x))return{};const y=o?o[0]:i,b=e=>{r&&y.reportValidity&&(y.setCustomValidity(Hj(e)?"":e||""),y.reportValidity())},j={},N=PN(i),w=Oj(i),k=N||w,C=(f||kN(i))&&$j(i.value)&&$j(g)||SN(i)&&""===i.value||""===g||Array.isArray(g)&&!g.length,S=gN.bind(null,x,n,j),_=(e,t,s,n=aN,r=iN)=>{const a=e?t:s;j[x]={type:e?n:r,message:a,ref:i,...S(e?n:r,a)}};if(a?!Array.isArray(g)||!g.length:l&&(!k&&(C||Fj(g))||Hj(g)&&!g||w&&!MN(o).isValid||N&&!zN(o).isValid)){const{value:e,message:t}=YN(l)?{value:!!l,message:l}:XN(l);if(e&&(j[x]={type:lN,message:t,ref:y,...S(lN,t)},!n))return b(t),j}if(!(C||Fj(u)&&Fj(m))){let e,t;const s=XN(m),r=XN(u);if(Fj(g)||isNaN(g)){const n=i.valueAsDate||new Date(g),a=e=>new Date((new Date).toDateString()+" "+e),o="time"==i.type,l="week"==i.type;hN(s.value)&&g&&(e=o?a(g)>a(s.value):l?g>s.value:n>new Date(s.value)),hN(r.value)&&g&&(t=o?a(g)<a(r.value):l?g<r.value:n<new Date(r.value))}else{const n=i.valueAsNumber||(g?+g:g);Fj(s.value)||(e=n>s.value),Fj(r.value)||(t=n<r.value)}if((e||t)&&(_(!!e,s.message,r.message,nN,rN),!n))return b(j[x].message),j}if((c||d)&&!C&&(hN(g)||a&&Array.isArray(g))){const e=XN(c),t=XN(d),s=!Fj(e.value)&&g.length>+e.value,r=!Fj(t.value)&&g.length<+t.value;if((s||r)&&(_(s,e.message,t.message),!n))return b(j[x].message),j}if(p&&!C&&hN(g)){const{value:e,message:t}=XN(p);if(BN(e)&&!g.match(e)&&(j[x]={type:oN,message:t,ref:i,...S(oN,t)},!n))return b(t),j}if(h)if(CN(h)){const e=JN(await h(g,s),y);if(e&&(j[x]={...e,...S(cN,e.message)},!n))return b(e.message),j}else if(Mj(h)){let e={};for(const t in h){if(!wN(e)&&!n)break;const r=JN(await h[t](g,s),y,t);r&&(e={...r,...S(t,r.message)},b(r.message),n&&(j[x]=e))}if(!wN(e)&&(j[x]={ref:y,...e},!n))return j}return b(!0),j};const tw={mode:eN,reValidateMode:Xj,shouldFocusError:!0};function sw(e={}){let t={...tw,...e},s={submitCount:0,isDirty:!1,isReady:!1,isLoading:CN(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1};const n={};let r,a=(Mj(t.defaultValues)||Mj(t.values))&&Vj(t.defaultValues||t.values)||{},i=t.shouldUnregister?{}:Vj(a),o={action:!1,mount:!1,watch:!1},l={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},c=0;const d={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let u={...d};const m={array:bN(),state:bN()},p=t.criteriaMode===sN,h=async e=>{if(!t.disabled&&(d.isValid||u.isValid||e)){const e=t.resolver?wN((await y()).errors):await b(n,!0);e!==s.isValid&&m.state.next({isValid:e})}},x=(e,n)=>{!t.disabled&&(d.isValidating||d.validatingFields||u.isValidating||u.validatingFields)&&((e||Array.from(l.mount)).forEach(e=>{e&&(n?Zj(s.validatingFields,e,n):DN(s.validatingFields,e))}),m.state.next({validatingFields:s.validatingFields,isValidating:!wN(s.validatingFields)}))},f=(e,t,s,r)=>{const l=Kj(n,e);if(l){const n=Kj(i,e,$j(s)?Kj(a,e):s);$j(n)||r&&r.defaultChecked||t?Zj(i,e,t?n:VN(l._f)):w(e,n),o.mount&&h()}},v=(e,n,r,i,o)=>{let l=!1,c=!1;const p={name:e};if(!t.disabled){if(!r||i){(d.isDirty||u.isDirty)&&(c=s.isDirty,s.isDirty=p.isDirty=j(),l=c!==p.isDirty);const t=NN(Kj(a,e),n);c=!!Kj(s.dirtyFields,e),t?DN(s.dirtyFields,e):Zj(s.dirtyFields,e,!0),p.dirtyFields=s.dirtyFields,l=l||(d.dirtyFields||u.dirtyFields)&&c!==!t}if(r){const t=Kj(s.touchedFields,e);t||(Zj(s.touchedFields,e,r),p.touchedFields=s.touchedFields,l=l||(d.touchedFields||u.touchedFields)&&t!==r)}l&&o&&m.state.next(p)}return l?p:{}},g=(e,n,a,i)=>{const o=Kj(s.errors,e),l=(d.isValid||u.isValid)&&Hj(n)&&s.isValid!==n;var p;if(t.delayError&&a?(p=()=>((e,t)=>{Zj(s.errors,e,t),m.state.next({errors:s.errors})})(e,a),r=e=>{clearTimeout(c),c=setTimeout(p,e)},r(t.delayError)):(clearTimeout(c),r=null,a?Zj(s.errors,e,a):DN(s.errors,e)),(a?!NN(o,a):o)||!wN(i)||l){const t={...i,...l&&Hj(n)?{isValid:n}:{},errors:s.errors,name:e};s={...s,...t},m.state.next(t)}},y=async e=>{x(e,!0);const s=await t.resolver(i,t.context,((e,t,s,n)=>{const r={};for(const a of e){const e=Kj(t,a);e&&Zj(r,a,e._f)}return{criteriaMode:s,names:[...e],fields:r,shouldUseNativeValidation:n}})(e||l.mount,n,t.criteriaMode,t.shouldUseNativeValidation));return x(e),s},b=async(e,n,r={valid:!0})=>{for(const a in e){const o=e[a];if(o){const{_f:e,...c}=o;if(e){const c=l.array.has(e.name),u=o._f&&KN(o._f);u&&d.validatingFields&&x([a],!0);const m=await ew(o,l.disabled,i,p,t.shouldUseNativeValidation&&!n,c);if(u&&d.validatingFields&&x([a]),m[e.name]&&(r.valid=!1,n))break;!n&&(Kj(m,e.name)?c?GN(s.errors,m,e.name):Zj(s.errors,e.name,m[e.name]):DN(s.errors,e.name))}!wN(c)&&await b(c,n,r)}}return r.valid},j=(e,s)=>!t.disabled&&(e&&s&&Zj(i,e,s),!NN(E(),a)),N=(e,t,s)=>xN(e,l,{...o.mount?i:$j(t)?a:hN(e)?{[e]:t}:t},s,t),w=(e,t,s={})=>{const r=Kj(n,e);let a=t;if(r){const s=r._f;s&&(!s.disabled&&Zj(i,e,LN(t,s)),a=SN(s.ref)&&Fj(t)?"":t,_N(s.ref)?[...s.ref.options].forEach(e=>e.selected=a.includes(e.value)):s.refs?Oj(s.ref)?s.refs.forEach(e=>{e.defaultChecked&&e.disabled||(Array.isArray(a)?e.checked=!!a.find(t=>t===e.value):e.checked=a===e.value||!!a)}):s.refs.forEach(e=>e.checked=e.value===a):kN(s.ref)?s.ref.value="":(s.ref.value=a,s.ref.type||m.state.next({name:e,values:Vj(i)})))}(s.shouldDirty||s.shouldTouch)&&v(e,a,s.shouldTouch,s.shouldDirty,!0),s.shouldValidate&&P(e)},k=(e,t,s)=>{for(const r in t){if(!t.hasOwnProperty(r))return;const a=t[r],i=e+"."+r,o=Kj(n,i);(l.array.has(e)||Mj(a)||o&&!o._f)&&!Rj(a)?k(i,a,s):w(i,a,s)}},C=(e,t,r={})=>{const c=Kj(n,e),p=l.array.has(e),h=Vj(t);Zj(i,e,h),p?(m.array.next({name:e,values:Vj(i)}),(d.isDirty||d.dirtyFields||u.isDirty||u.dirtyFields)&&r.shouldDirty&&m.state.next({name:e,dirtyFields:RN(a,i),isDirty:j(e,h)})):!c||c._f||Fj(h)?w(e,h,r):k(e,h,r),HN(e,l)&&m.state.next({...s}),m.state.next({name:o.mount?e:void 0,values:Vj(i)})},S=async e=>{o.mount=!0;const a=e.target;let c=a.name,f=!0;const j=Kj(n,c),N=e=>{f=Number.isNaN(e)||Rj(e)&&isNaN(e.getTime())||NN(e,Kj(i,c,e))},w=WN(t.mode),k=WN(t.reValidateMode);if(j){let o,C;const S=a.type?VN(j._f):Lj(e),_=e.type===Qj||e.type===Gj,E=!(e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate))(j._f)&&!t.resolver&&!Kj(s.errors,c)&&!j._f.deps||((e,t,s,n,r)=>!r.isOnAll&&(!s&&r.isOnTouch?!(t||e):(s?n.isOnBlur:r.isOnBlur)?!e:!(s?n.isOnChange:r.isOnChange)||e))(_,Kj(s.touchedFields,c),s.isSubmitted,k,w),D=HN(c,l,_);Zj(i,c,S),_?(j._f.onBlur&&j._f.onBlur(e),r&&r(0)):j._f.onChange&&j._f.onChange(e);const T=v(c,S,_),A=!wN(T)||D;if(!_&&m.state.next({name:c,type:e.type,values:Vj(i)}),E)return(d.isValid||u.isValid)&&("onBlur"===t.mode?_&&h():_||h()),A&&m.state.next({name:c,...D?{}:T});if(!_&&D&&m.state.next({...s}),t.resolver){const{errors:e}=await y([c]);if(N(S),f){const t=QN(s.errors,n,c),r=QN(e,n,t.name||c);o=r.error,c=r.name,C=wN(e)}}else x([c],!0),o=(await ew(j,l.disabled,i,p,t.shouldUseNativeValidation))[c],x([c]),N(S),f&&(o?C=!1:(d.isValid||u.isValid)&&(C=await b(n,!0)));f&&(j._f.deps&&P(j._f.deps),g(c,C,o,T))}},_=(e,t)=>{if(Kj(s.errors,t)&&e.focus)return e.focus(),1},P=async(e,r={})=>{let a,i;const o=yN(e);if(t.resolver){const t=await(async e=>{const{errors:t}=await y(e);if(e)for(const n of e){const e=Kj(t,n);e?Zj(s.errors,n,e):DN(s.errors,n)}else s.errors=t;return t})($j(e)?e:o);a=wN(t),i=e?!o.some(e=>Kj(t,e)):a}else e?(i=(await Promise.all(o.map(async e=>{const t=Kj(n,e);return await b(t&&t._f?{[e]:t}:t)}))).every(Boolean),(i||s.isValid)&&h()):i=a=await b(n);return m.state.next({...!hN(e)||(d.isValid||u.isValid)&&a!==s.isValid?{}:{name:e},...t.resolver||!e?{isValid:a}:{},errors:s.errors}),r.shouldFocus&&!i&&ZN(n,_,e?o:l.mount),i},E=e=>{const t={...o.mount?i:a};return $j(e)?t:hN(e)?Kj(t,e):e.map(e=>Kj(t,e))},D=(e,t)=>({invalid:!!Kj((t||s).errors,e),isDirty:!!Kj((t||s).dirtyFields,e),error:Kj((t||s).errors,e),isValidating:!!Kj(s.validatingFields,e),isTouched:!!Kj((t||s).touchedFields,e)}),T=(e,t,r)=>{const a=(Kj(n,e,{_f:{}})._f||{}).ref,i=Kj(s.errors,e)||{},{ref:o,message:l,type:c,...d}=i;Zj(s.errors,e,{...d,...t,ref:a}),m.state.next({name:e,errors:s.errors,isValid:!1}),r&&r.shouldFocus&&a&&a.focus&&a.focus()},A=e=>m.state.subscribe({next:t=>{var n,r,a;n=e.name,r=t.name,a=e.exact,n&&r&&n!==r&&!yN(n).some(e=>e&&(a?e===r:e.startsWith(r)||r.startsWith(e)))||!((e,t,s,n)=>{s(e);const{name:r,...a}=e;return wN(a)||Object.keys(a).length>=Object.keys(t).length||Object.keys(a).find(e=>t[e]===(!n||sN))})(t,e.formState||d,z,e.reRenderRoot)||e.callback({values:{...i},...s,...t})}}).unsubscribe,O=(e,r={})=>{for(const o of e?yN(e):l.mount)l.mount.delete(o),l.array.delete(o),r.keepValue||(DN(n,o),DN(i,o)),!r.keepError&&DN(s.errors,o),!r.keepDirty&&DN(s.dirtyFields,o),!r.keepTouched&&DN(s.touchedFields,o),!r.keepIsValidating&&DN(s.validatingFields,o),!t.shouldUnregister&&!r.keepDefaultValue&&DN(a,o);m.state.next({values:Vj(i)}),m.state.next({...s,...r.keepDirty?{isDirty:j()}:{}}),!r.keepIsValid&&h()},R=({disabled:e,name:t})=>{(Hj(e)&&o.mount||e||l.disabled.has(t))&&(e?l.disabled.add(t):l.disabled.delete(t))},F=(e,s={})=>{let r=Kj(n,e);const i=Hj(s.disabled)||Hj(t.disabled);return Zj(n,e,{...r||{},_f:{...r&&r._f?r._f:{ref:{name:e}},name:e,mount:!0,...s}}),l.mount.add(e),r?R({disabled:Hj(s.disabled)?s.disabled:t.disabled,name:e}):f(e,!0,s.value),{...i?{disabled:s.disabled||t.disabled}:{},...t.progressive?{required:!!s.required,min:$N(s.min),max:$N(s.max),minLength:$N(s.minLength),maxLength:$N(s.maxLength),pattern:$N(s.pattern)}:{},name:e,onChange:S,onBlur:S,ref:i=>{if(i){F(e,s),r=Kj(n,e);const t=$j(i.value)&&i.querySelectorAll&&i.querySelectorAll("input,select,textarea")[0]||i,o=(e=>PN(e)||Oj(e))(t),l=r._f.refs||[];if(o?l.find(e=>e===t):t===r._f.ref)return;Zj(n,e,{_f:{...r._f,...o?{refs:[...l.filter(EN),t,...Array.isArray(Kj(a,e))?[{}]:[]],ref:{type:t.type,name:e}}:{ref:t}}}),f(e,!1,void 0,t)}else r=Kj(n,e,{}),r._f&&(r._f.mount=!1),(t.shouldUnregister||s.shouldUnregister)&&(!qj(l.array,e)||!o.action)&&l.unMount.add(e)}}},I=()=>t.shouldFocusError&&ZN(n,_,l.mount),M=(e,r)=>async a=>{let o;a&&(a.preventDefault&&a.preventDefault(),a.persist&&a.persist());let c=Vj(i);if(m.state.next({isSubmitting:!0}),t.resolver){const{errors:e,values:t}=await y();s.errors=e,c=Vj(t)}else await b(n);if(l.disabled.size)for(const e of l.disabled)DN(c,e);if(DN(s.errors,"root"),wN(s.errors)){m.state.next({errors:{}});try{await e(c,a)}catch(d){o=d}}else r&&await r({...s.errors},a),I(),setTimeout(I);if(m.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:wN(s.errors)&&!o,submitCount:s.submitCount+1,errors:s.errors}),o)throw o},L=(e,r={})=>{const c=e?Vj(e):a,u=Vj(c),p=wN(e),h=p?a:u;if(r.keepDefaultValues||(a=c),!r.keepValues){if(r.keepDirtyValues){const e=new Set([...l.mount,...Object.keys(RN(a,i))]);for(const t of Array.from(e))Kj(s.dirtyFields,t)?Zj(h,t,Kj(i,t)):C(t,Kj(h,t))}else{if(zj&&$j(e))for(const e of l.mount){const t=Kj(n,e);if(t&&t._f){const e=Array.isArray(t._f.refs)?t._f.refs[0]:t._f.ref;if(SN(e)){const t=e.closest("form");if(t){t.reset();break}}}}for(const e of l.mount){const t=Kj(h,e,Kj(a,e));$j(t)||(Zj(h,e,t),C(e,Kj(h,e)))}}i=Vj(h),m.array.next({values:{...h}}),m.state.next({values:{...h}})}l={mount:r.keepDirtyValues?l.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!d.isValid||!!r.keepIsValid||!!r.keepDirtyValues,o.watch=!!t.shouldUnregister,m.state.next({submitCount:r.keepSubmitCount?s.submitCount:0,isDirty:!p&&(r.keepDirty?s.isDirty:!(!r.keepDefaultValues||NN(e,a))),isSubmitted:!!r.keepIsSubmitted&&s.isSubmitted,dirtyFields:p?{}:r.keepDirtyValues?r.keepDefaultValues&&i?RN(a,i):s.dirtyFields:r.keepDefaultValues&&e?RN(a,e):r.keepDirty?s.dirtyFields:{},touchedFields:r.keepTouched?s.touchedFields:{},errors:r.keepErrors?s.errors:{},isSubmitSuccessful:!!r.keepIsSubmitSuccessful&&s.isSubmitSuccessful,isSubmitting:!1})},q=(e,t)=>L(CN(e)?e(i):e,t),z=e=>{s={...s,...e}},V={control:{register:F,unregister:O,getFieldState:D,handleSubmit:M,setError:T,_subscribe:A,_runSchema:y,_focusError:I,_getWatch:N,_getDirty:j,_setValid:h,_setFieldArray:(e,r=[],l,c,p=!0,h=!0)=>{if(c&&l&&!t.disabled){if(o.action=!0,h&&Array.isArray(Kj(n,e))){const t=l(Kj(n,e),c.argA,c.argB);p&&Zj(n,e,t)}if(h&&Array.isArray(Kj(s.errors,e))){const t=l(Kj(s.errors,e),c.argA,c.argB);p&&Zj(s.errors,e,t),((e,t)=>{!Wj(Kj(e,t)).length&&DN(e,t)})(s.errors,e)}if((d.touchedFields||u.touchedFields)&&h&&Array.isArray(Kj(s.touchedFields,e))){const t=l(Kj(s.touchedFields,e),c.argA,c.argB);p&&Zj(s.touchedFields,e,t)}(d.dirtyFields||u.dirtyFields)&&(s.dirtyFields=RN(a,i)),m.state.next({name:e,isDirty:j(e,r),dirtyFields:s.dirtyFields,errors:s.errors,isValid:s.isValid})}else Zj(i,e,r)},_setDisabledField:R,_setErrors:e=>{s.errors=e,m.state.next({errors:s.errors,isValid:!1})},_getFieldArray:e=>Wj(Kj(o.mount?i:a,e,t.shouldUnregister?Kj(a,e,[]):[])),_reset:L,_resetDefaultValues:()=>CN(t.defaultValues)&&t.defaultValues().then(e=>{q(e,t.resetOptions),m.state.next({isLoading:!1})}),_removeUnmounted:()=>{for(const e of l.unMount){const t=Kj(n,e);t&&(t._f.refs?t._f.refs.every(e=>!EN(e)):!EN(t._f.ref))&&O(e)}l.unMount=new Set},_disableForm:e=>{Hj(e)&&(m.state.next({disabled:e}),ZN(n,(t,s)=>{const r=Kj(n,s);r&&(t.disabled=r._f.disabled||e,Array.isArray(r._f.refs)&&r._f.refs.forEach(t=>{t.disabled=r._f.disabled||e}))},0,!1))},_subjects:m,_proxyFormState:d,get _fields(){return n},get _formValues(){return i},get _state(){return o},set _state(e){o=e},get _defaultValues(){return a},get _names(){return l},set _names(e){l=e},get _formState(){return s},get _options(){return t},set _options(e){t={...t,...e}}},subscribe:e=>(o.mount=!0,u={...u,...e.formState},A({...e,formState:u})),trigger:P,register:F,handleSubmit:M,watch:(e,t)=>CN(e)?m.state.subscribe({next:s=>e(N(void 0,t),s)}):N(e,t,!0),setValue:C,getValues:E,reset:q,resetField:(e,t={})=>{Kj(n,e)&&($j(t.defaultValue)?C(e,Vj(Kj(a,e))):(C(e,t.defaultValue),Zj(a,e,Vj(t.defaultValue))),t.keepTouched||DN(s.touchedFields,e),t.keepDirty||(DN(s.dirtyFields,e),s.isDirty=t.defaultValue?j(e,Vj(Kj(a,e))):j()),t.keepError||(DN(s.errors,e),d.isValid&&h()),m.state.next({...s}))},clearErrors:e=>{e&&yN(e).forEach(e=>DN(s.errors,e)),m.state.next({errors:e?s.errors:{}})},unregister:O,setError:T,setFocus:(e,t={})=>{const s=Kj(n,e),r=s&&s._f;if(r){const e=r.refs?r.refs[0]:r.ref;e.focus&&(e.focus(),t.shouldSelect&&CN(e.select)&&e.select())}},getFieldState:D};return{...V,formControl:V}}function nw(e={}){const t=vr.useRef(void 0),s=vr.useRef(void 0),[n,r]=vr.useState({isDirty:!1,isValidating:!1,isLoading:CN(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:CN(e.defaultValues)?void 0:e.defaultValues});if(!t.current)if(e.formControl)t.current={...e.formControl,formState:n},e.defaultValues&&!CN(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions);else{const{formControl:s,...r}=sw(e);t.current={...r,formState:n}}const a=t.current.control;return a._options=e,pN(()=>{const e=a._subscribe({formState:a._proxyFormState,callback:()=>r({...a._formState}),reRenderRoot:!0});return r(e=>({...e,isReady:!0})),a._formState.isReady=!0,e},[a]),vr.useEffect(()=>a._disableForm(e.disabled),[a,e.disabled]),vr.useEffect(()=>{e.mode&&(a._options.mode=e.mode),e.reValidateMode&&(a._options.reValidateMode=e.reValidateMode)},[a,e.mode,e.reValidateMode]),vr.useEffect(()=>{e.errors&&(a._setErrors(e.errors),a._focusError())},[a,e.errors]),vr.useEffect(()=>{e.shouldUnregister&&a._subjects.state.next({values:a._getWatch()})},[a,e.shouldUnregister]),vr.useEffect(()=>{if(a._proxyFormState.isDirty){const e=a._getDirty();e!==n.isDirty&&a._subjects.state.next({isDirty:e})}},[a,n.isDirty]),vr.useEffect(()=>{e.values&&!NN(e.values,s.current)?(a._reset(e.values,a._options.resetOptions),s.current=e.values,r(e=>({...e}))):a._resetDefaultValues()},[a,e.values]),vr.useEffect(()=>{a._state.mount||(a._setValid(),a._state.mount=!0),a._state.watch&&(a._state.watch=!1,a._subjects.state.next({...a._formState})),a._removeUnmounted()}),t.current.formState=mN(n,a),t.current}const rw=(e,t,s)=>{if(e&&"reportValidity"in e){const n=Kj(s,t);e.setCustomValidity(n&&n.message||""),e.reportValidity()}},aw=(e,t)=>{for(const s in t.fields){const n=t.fields[s];n&&n.ref&&"reportValidity"in n.ref?rw(n.ref,s,e):n.refs&&n.refs.forEach(t=>rw(t,s,e))}},iw=(e,t)=>{t.shouldUseNativeValidation&&aw(e,t);const s={};for(const n in e){const r=Kj(t.fields,n),a=Object.assign(e[n]||{},{ref:r&&r.ref});if(ow(t.names||Object.keys(e),n)){const e=Object.assign({},Kj(s,n));Zj(e,"root",a),Zj(s,n,e)}else Zj(s,n,a)}return s},ow=(e,t)=>e.some(e=>e.startsWith(t+"."));var lw=function(e,t){for(var s={};e.length;){var n=e[0],r=n.code,a=n.message,i=n.path.join(".");if(!s[i])if("unionErrors"in n){var o=n.unionErrors[0].errors[0];s[i]={message:o.message,type:o.code}}else s[i]={message:a,type:r};if("unionErrors"in n&&n.unionErrors.forEach(function(t){return t.errors.forEach(function(t){return e.push(t)})}),t){var l=s[i].types,c=l&&l[n.code];s[i]=gN(i,t,s,r,c?[].concat(c,n.message):n.message)}e.shift()}return s},cw=function(e,t,s){return void 0===s&&(s={}),function(n,r,a){try{return Promise.resolve(function(r,i){try{var o=Promise.resolve(e["sync"===s.mode?"parse":"parseAsync"](n,t)).then(function(e){return a.shouldUseNativeValidation&&aw({},a),{errors:{},values:s.raw?n:e}})}catch(l){return i(l)}return o&&o.then?o.then(void 0,i):o}(0,function(e){if(t=e,Array.isArray(null==t?void 0:t.errors))return{values:{},errors:iw(lw(e.errors,!a.shouldUseNativeValidation&&"all"===a.criteriaMode),a)};var t;throw e}))}catch(i){return Promise.reject(i)}}};const dw=Symbol.for("drizzle:entityKind");function uw(e,t){if(!e||"object"!=typeof e)return!1;if(e instanceof t)return!0;if(!Object.prototype.hasOwnProperty.call(t,dw))throw new Error(`Class "${t.name??"<unknown>"}" doesn't look like a Drizzle entity. If this is incorrect and the class is provided by Drizzle, please report this as a bug.`);let s=Object.getPrototypeOf(e).constructor;if(s)for(;s;){if(dw in s&&s[dw]===t[dw])return!0;s=Object.getPrototypeOf(s)}return!1}je=dw;class mw{constructor(e,t){or(this,"name"),or(this,"keyAsName"),or(this,"primary"),or(this,"notNull"),or(this,"default"),or(this,"defaultFn"),or(this,"onUpdateFn"),or(this,"hasDefault"),or(this,"isUnique"),or(this,"uniqueName"),or(this,"uniqueType"),or(this,"dataType"),or(this,"columnType"),or(this,"enumValues"),or(this,"generated"),or(this,"generatedIdentity"),or(this,"config"),this.table=e,this.config=t,this.name=t.name,this.keyAsName=t.keyAsName,this.notNull=t.notNull,this.default=t.default,this.defaultFn=t.defaultFn,this.onUpdateFn=t.onUpdateFn,this.hasDefault=t.hasDefault,this.primary=t.primaryKey,this.isUnique=t.isUnique,this.uniqueName=t.uniqueName,this.uniqueType=t.uniqueType,this.dataType=t.dataType,this.columnType=t.columnType,this.generated=t.generated,this.generatedIdentity=t.generatedIdentity}mapFromDriverValue(e){return e}mapToDriverValue(e){return e}shouldDisableInsert(){return void 0!==this.config.generated&&"byDefault"!==this.config.generated.type}}or(mw,je,"Column"),Ne=dw;class pw{constructor(e,t,s){or(this,"config"),or(this,"$default",this.$defaultFn),or(this,"$onUpdate",this.$onUpdateFn),this.config={name:e,keyAsName:""===e,notNull:!1,default:void 0,hasDefault:!1,primaryKey:!1,isUnique:!1,uniqueName:void 0,uniqueType:void 0,dataType:t,columnType:s,generated:void 0}}$type(){return this}notNull(){return this.config.notNull=!0,this}default(e){return this.config.default=e,this.config.hasDefault=!0,this}$defaultFn(e){return this.config.defaultFn=e,this.config.hasDefault=!0,this}$onUpdateFn(e){return this.config.onUpdateFn=e,this.config.hasDefault=!0,this}primaryKey(){return this.config.primaryKey=!0,this.config.notNull=!0,this}setName(e){""===this.config.name&&(this.config.name=e)}}or(pw,Ne,"ColumnBuilder");const hw=Symbol.for("drizzle:Name");we=dw;class xw{constructor(e,t){or(this,"reference"),or(this,"_onUpdate","no action"),or(this,"_onDelete","no action"),this.reference=()=>{const{name:t,columns:s,foreignColumns:n}=e();return{name:t,columns:s,foreignTable:n[0].table,foreignColumns:n}},t&&(this._onUpdate=t.onUpdate,this._onDelete=t.onDelete)}onUpdate(e){return this._onUpdate=void 0===e?"no action":e,this}onDelete(e){return this._onDelete=void 0===e?"no action":e,this}build(e){return new fw(e,this)}}or(xw,we,"PgForeignKeyBuilder"),ke=dw;class fw{constructor(e,t){or(this,"reference"),or(this,"onUpdate"),or(this,"onDelete"),this.table=e,this.reference=t.reference,this.onUpdate=t._onUpdate,this.onDelete=t._onDelete}getName(){const{name:e,columns:t,foreignColumns:s}=this.reference(),n=t.map(e=>e.name),r=s.map(e=>e.name),a=[this.table[hw],...n,s[0].table[hw],...r];return e??`${a.join("_")}_fk`}}function vw(e,t,s){for(let n=t;n<e.length;n++){const r=e[n];if("\\"!==r){if('"'===r)return[e.slice(t,n).replace(/\\/g,""),n+1];if(!s&&(","===r||"}"===r))return[e.slice(t,n).replace(/\\/g,""),n]}else n++}return[e.slice(t).replace(/\\/g,""),e.length]}function gw(e,t=0){const s=[];let n=t,r=!1;for(;n<e.length;){const a=e[n];if(","===a){(r||n===t)&&s.push(""),r=!0,n++;continue}if(r=!1,"\\"===a){n+=2;continue}if('"'===a){const[t,r]=vw(e,n+1,!0);s.push(t),n=r;continue}if("}"===a)return[s,n+1];if("{"===a){const[t,r]=gw(e,n+1);s.push(t),n=r;continue}const[i,o]=vw(e,n,!1);s.push(i),n=o}return[s,n]}function yw(e){const[t]=gw(e,1);return t}function bw(e){return`{${e.map(e=>Array.isArray(e)?bw(e):"string"==typeof e?`"${e.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`:`${e}`).join(",")}}`}or(fw,ke,"PgForeignKey");class jw extends(Se=pw,Ce=dw,Se){constructor(){super(...arguments),or(this,"foreignKeyConfigs",[])}array(e){return new kw(this.config.name,this,e)}references(e,t={}){return this.foreignKeyConfigs.push({ref:e,actions:t}),this}unique(e,t){return this.config.isUnique=!0,this.config.uniqueName=e,this.config.uniqueType=null==t?void 0:t.nulls,this}generatedAlwaysAs(e){return this.config.generated={as:e,type:"always",mode:"stored"},this}buildForeignKeys(e,t){return this.foreignKeyConfigs.map(({ref:s,actions:n})=>function(e,...t){return e(...t)}((s,n)=>{const r=new xw(()=>{const t=s();return{columns:[e],foreignColumns:[t]}});return n.onUpdate&&r.onUpdate(n.onUpdate),n.onDelete&&r.onDelete(n.onDelete),r.build(t)},s,n))}buildExtraConfigColumn(e){return new ww(e,this.config)}}or(jw,Ce,"PgColumnBuilder");class Nw extends(Pe=mw,_e=dw,Pe){constructor(e,t){t.uniqueName||(t.uniqueName=function(e,t){return`${e[hw]}_${t.join("_")}_unique`}(e,[t.name])),super(e,t),this.table=e}}or(Nw,_e,"PgColumn");class ww extends(De=Nw,Ee=dw,De){constructor(){super(...arguments),or(this,"indexConfig",{order:this.config.order??"asc",nulls:this.config.nulls??"last",opClass:this.config.opClass}),or(this,"defaultConfig",{order:"asc",nulls:"last",opClass:void 0})}getSQLType(){return this.getSQLType()}asc(){return this.indexConfig.order="asc",this}desc(){return this.indexConfig.order="desc",this}nullsFirst(){return this.indexConfig.nulls="first",this}nullsLast(){return this.indexConfig.nulls="last",this}op(e){return this.indexConfig.opClass=e,this}}or(ww,Ee,"ExtraConfigColumn");class kw extends(Ae=jw,Te=dw,Ae){constructor(e,t,s){super(e,"array","PgArray"),this.config.baseBuilder=t,this.config.size=s}build(e){const t=this.config.baseBuilder.build(e);return new Sw(e,this.config,t)}}or(kw,Te,"PgArrayBuilder");const Cw=class e extends(Re=Nw,Oe=dw,Re){constructor(e,t,s,n){super(e,t),or(this,"size"),this.baseColumn=s,this.range=n,this.size=t.size}getSQLType(){return`${this.baseColumn.getSQLType()}[${"number"==typeof this.size?this.size:""}]`}mapFromDriverValue(e){return"string"==typeof e&&(e=yw(e)),e.map(e=>this.baseColumn.mapFromDriverValue(e))}mapToDriverValue(t,s=!1){const n=t.map(t=>null===t?null:uw(this.baseColumn,e)?this.baseColumn.mapToDriverValue(t,!0):this.baseColumn.mapToDriverValue(t));return s?n:bw(n)}};or(Cw,Oe,"PgArray");let Sw=Cw;const _w=Symbol.for("drizzle:isPgEnum");Fe=dw;class Pw{constructor(e,t,s,n=!1){this._={brand:"Subquery",sql:e,selectedFields:t,alias:s,isWith:n}}}or(Pw,Fe,"Subquery");const Ew={startActiveSpan:(e,t)=>t()},Dw=Symbol.for("drizzle:ViewBaseConfig"),Tw=Symbol.for("drizzle:Schema"),Aw=Symbol.for("drizzle:Columns"),Ow=Symbol.for("drizzle:ExtraConfigColumns"),Rw=Symbol.for("drizzle:OriginalName"),Fw=Symbol.for("drizzle:BaseName"),Iw=Symbol.for("drizzle:IsAlias"),Mw=Symbol.for("drizzle:ExtraConfigBuilder"),Lw=Symbol.for("drizzle:IsDrizzleTable");let qw=(Ue=dw,We=hw,$e=Rw,Be=Tw,Ve=Aw,ze=Ow,qe=Fw,Le=Iw,Me=Lw,Ie=Mw,Ke=class{constructor(e,t,s){or(this,We),or(this,$e),or(this,Be),or(this,Ve),or(this,ze),or(this,qe),or(this,Le,!1),or(this,Me,!0),or(this,Ie),this[hw]=this[Rw]=e,this[Tw]=t,this[Fw]=s}},or(Ke,Ue,"Table"),or(Ke,"Symbol",{Name:hw,Schema:Tw,OriginalName:Rw,Columns:Aw,ExtraConfigColumns:Ow,BaseName:Fw,IsAlias:Iw,ExtraConfigBuilder:Mw}),Ke);function zw(e){return"object"==typeof e&&null!==e&&Lw in e}He=dw;class Vw{constructor(e){or(this,"value"),this.value=Array.isArray(e)?e:[e]}getSQL(){return new $w([this])}}or(Vw,He,"StringChunk"),Ze=dw;const Bw=class e{constructor(e){or(this,"decoder",Uw),or(this,"shouldInlineParams",!1),this.queryChunks=e}append(e){return this.queryChunks.push(...e.queryChunks),this}toQuery(e){return Ew.startActiveSpan("drizzle.buildSQL",t=>{const s=this.buildQueryFromSourceParams(this.queryChunks,e);return null==t||t.setAttributes({"drizzle.query.text":s.sql,"drizzle.query.params":JSON.stringify(s.params)}),s})}buildQueryFromSourceParams(t,s){const n=Object.assign({},s,{inlineParams:s.inlineParams||this.shouldInlineParams,paramStartIndex:s.paramStartIndex||{value:0}}),{casing:r,escapeName:a,escapeParam:i,prepareTyping:o,inlineParams:l,paramStartIndex:c}=n;return function(e){var t;const s={sql:"",params:[]};for(const n of e)s.sql+=n.sql,s.params.push(...n.params),(null==(t=n.typings)?void 0:t.length)&&(s.typings||(s.typings=[]),s.typings.push(...n.typings));return s}(t.map(t=>{var d,u,m;if(uw(t,Vw))return{sql:t.value.join(""),params:[]};if(uw(t,Ww))return{sql:a(t.value),params:[]};if(void 0===t)return{sql:"",params:[]};if(Array.isArray(t)){const e=[new Vw("(")];for(const[s,n]of t.entries())e.push(n),s<t.length-1&&e.push(new Vw(", "));return e.push(new Vw(")")),this.buildQueryFromSourceParams(e,n)}if(uw(t,e))return this.buildQueryFromSourceParams(t.queryChunks,{...n,inlineParams:l||t.shouldInlineParams});if(uw(t,qw)){const e=t[qw.Symbol.Schema],s=t[qw.Symbol.Name];return{sql:void 0===e||t[Iw]?a(s):a(e)+"."+a(s),params:[]}}if(uw(t,mw)){const e=r.getColumnCasing(t);if("indexes"===s.invokeSource)return{sql:a(e),params:[]};const n=t.table[qw.Symbol.Schema];return{sql:t.table[Iw]||void 0===n?a(t.table[qw.Symbol.Name])+"."+a(e):a(n)+"."+a(t.table[qw.Symbol.Name])+"."+a(e),params:[]}}if(uw(t,Jw)){const e=t[Dw].schema,s=t[Dw].name;return{sql:void 0===e||t[Dw].isAlias?a(s):a(e)+"."+a(s),params:[]}}if(uw(t,Hw)){if(uw(t.value,Gw))return{sql:i(c.value++,t),params:[t],typings:["none"]};const s=null===t.value?null:t.encoder.mapToDriverValue(t.value);if(uw(s,e))return this.buildQueryFromSourceParams([s],n);if(l)return{sql:this.mapInlineParam(s,n),params:[]};let r=["none"];return o&&(r=[o(t.encoder)]),{sql:i(c.value++,s),params:[s],typings:r}}return uw(t,Gw)?{sql:i(c.value++,t),params:[t],typings:["none"]}:uw(t,e.Aliased)&&void 0!==t.fieldAlias?{sql:a(t.fieldAlias),params:[]}:uw(t,Pw)?t._.isWith?{sql:a(t._.alias),params:[]}:this.buildQueryFromSourceParams([new Vw("("),t._.sql,new Vw(") "),new Ww(t._.alias)],n):(u=t)&&"function"==typeof u&&_w in u&&!0===u[_w]?t.schema?{sql:a(t.schema)+"."+a(t.enumName),params:[]}:{sql:a(t.enumName),params:[]}:null!=(m=t)&&"function"==typeof m.getSQL?(null==(d=t.shouldOmitSQLParens)?void 0:d.call(t))?this.buildQueryFromSourceParams([t.getSQL()],n):this.buildQueryFromSourceParams([new Vw("("),t.getSQL(),new Vw(")")],n):l?{sql:this.mapInlineParam(t,n),params:[]}:{sql:i(c.value++,t),params:[t],typings:["none"]}}))}mapInlineParam(e,{escapeString:t}){if(null===e)return"null";if("number"==typeof e||"boolean"==typeof e)return e.toString();if("string"==typeof e)return t(e);if("object"==typeof e){const s=e.toString();return t("[object Object]"===s?JSON.stringify(e):s)}throw new Error("Unexpected param value: "+e)}getSQL(){return this}as(t){return void 0===t?this:new e.Aliased(this,t)}mapWith(e){return this.decoder="function"==typeof e?{mapFromDriverValue:e}:e,this}inlineParams(){return this.shouldInlineParams=!0,this}if(e){return e?this:void 0}};or(Bw,Ze,"SQL");let $w=Bw;Qe=dw;class Ww{constructor(e){or(this,"brand"),this.value=e}getSQL(){return new $w([this])}}or(Ww,Qe,"Name");const Uw={mapFromDriverValue:e=>e},Kw={mapToDriverValue:e=>e};Ge=dw;class Hw{constructor(e,t=Kw){or(this,"brand"),this.value=e,this.encoder=t}getSQL(){return new $w([this])}}function Zw(e,...t){const s=[];(t.length>0||e.length>0&&""!==e[0])&&s.push(new Vw(e[0]));for(const[n,r]of t.entries())s.push(r,new Vw(e[n+1]));return new $w(s)}var Qw;or(Hw,Ge,"Param"),(Qw=Zw||(Zw={})).empty=function(){return new $w([])},Qw.fromList=function(e){return new $w(e)},Qw.raw=function(e){return new $w([new Vw(e)])},Qw.join=function(e,t){const s=[];for(const[n,r]of e.entries())n>0&&void 0!==t&&s.push(t),s.push(r);return new $w(s)},Qw.identifier=function(e){return new Ww(e)},Qw.placeholder=function(e){return new Gw(e)},Qw.param=function(e,t){return new Hw(e,t)},(e=>{var t;t=dw;const s=class e{constructor(e,t){or(this,"isSelectionField",!1),this.sql=e,this.fieldAlias=t}getSQL(){return this.sql}clone(){return new e(this.sql,this.fieldAlias)}};or(s,t,"SQL.Aliased");let n=s;e.Aliased=n})($w||($w={})),Ye=dw;class Gw{constructor(e){this.name=e}getSQL(){return new $w([this])}}or(Gw,Ye,"Placeholder");const Yw=Symbol.for("drizzle:IsDrizzleView");et=dw,Xe=Dw,Je=Yw;class Jw{constructor({name:e,schema:t,selectedFields:s,query:n}){or(this,Xe),or(this,Je,!0),this[Dw]={name:e,originalName:e,schema:t,selectedFields:s,query:n,isExisting:!n,isAlias:!1}}getSQL(){return new $w([this])}}function Xw(e){return"object"==typeof e&&null!==e&&Yw in e}function ek(e,t){return{name:"string"==typeof e&&e.length>0?e:"",config:"object"==typeof e?e:t}}or(Jw,et,"View"),mw.prototype.getSQL=function(){return new $w([this])},qw.prototype.getSQL=function(){return new $w([this])},Pw.prototype.getSQL=function(){return new $w([this])};class tk extends(st=jw,tt=dw,st){generatedAlwaysAsIdentity(e){if(e){const{name:t,...s}=e;this.config.generatedIdentity={type:"always",sequenceName:t,sequenceOptions:s}}else this.config.generatedIdentity={type:"always"};return this.config.hasDefault=!0,this.config.notNull=!0,this}generatedByDefaultAsIdentity(e){if(e){const{name:t,...s}=e;this.config.generatedIdentity={type:"byDefault",sequenceName:t,sequenceOptions:s}}else this.config.generatedIdentity={type:"byDefault"};return this.config.hasDefault=!0,this.config.notNull=!0,this}}or(tk,tt,"PgIntColumnBaseBuilder");class sk extends(rt=tk,nt=dw,rt){constructor(e){super(e,"number","PgBigInt53")}build(e){return new nk(e,this.config)}}or(sk,nt,"PgBigInt53Builder");class nk extends(it=Nw,at=dw,it){getSQLType(){return"bigint"}mapFromDriverValue(e){return"number"==typeof e?e:Number(e)}}or(nk,at,"PgBigInt53");class rk extends(lt=tk,ot=dw,lt){constructor(e){super(e,"bigint","PgBigInt64")}build(e){return new ak(e,this.config)}}or(rk,ot,"PgBigInt64Builder");class ak extends(dt=Nw,ct=dw,dt){getSQLType(){return"bigint"}mapFromDriverValue(e){return BigInt(e)}}function ik(e,t){const{name:s,config:n}=ek(e,t);return"number"===n.mode?new sk(s):new rk(s)}or(ak,ct,"PgBigInt64");class ok extends(mt=jw,ut=dw,mt){constructor(e){super(e,"number","PgBigSerial53"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new lk(e,this.config)}}or(ok,ut,"PgBigSerial53Builder");class lk extends(ht=Nw,pt=dw,ht){getSQLType(){return"bigserial"}mapFromDriverValue(e){return"number"==typeof e?e:Number(e)}}or(lk,pt,"PgBigSerial53");class ck extends(ft=jw,xt=dw,ft){constructor(e){super(e,"bigint","PgBigSerial64"),this.config.hasDefault=!0}build(e){return new dk(e,this.config)}}or(ck,xt,"PgBigSerial64Builder");class dk extends(gt=Nw,vt=dw,gt){getSQLType(){return"bigserial"}mapFromDriverValue(e){return BigInt(e)}}function uk(e,t){const{name:s,config:n}=ek(e,t);return"number"===n.mode?new ok(s):new ck(s)}or(dk,vt,"PgBigSerial64");class mk extends(bt=jw,yt=dw,bt){constructor(e){super(e,"boolean","PgBoolean")}build(e){return new pk(e,this.config)}}or(mk,yt,"PgBooleanBuilder");class pk extends(Nt=Nw,jt=dw,Nt){getSQLType(){return"boolean"}}function hk(e){return new mk(e??"")}or(pk,jt,"PgBoolean");class xk extends(kt=jw,wt=dw,kt){constructor(e,t){super(e,"string","PgChar"),this.config.length=t.length,this.config.enumValues=t.enum}build(e){return new fk(e,this.config)}}or(xk,wt,"PgCharBuilder");class fk extends(St=Nw,Ct=dw,St){constructor(){super(...arguments),or(this,"length",this.config.length),or(this,"enumValues",this.config.enumValues)}getSQLType(){return void 0===this.length?"char":`char(${this.length})`}}function vk(e,t={}){const{name:s,config:n}=ek(e,t);return new xk(s,n)}or(fk,Ct,"PgChar");class gk extends(Pt=jw,_t=dw,Pt){constructor(e){super(e,"string","PgCidr")}build(e){return new yk(e,this.config)}}or(gk,_t,"PgCidrBuilder");class yk extends(Dt=Nw,Et=dw,Dt){getSQLType(){return"cidr"}}function bk(e){return new gk(e??"")}or(yk,Et,"PgCidr");class jk extends(At=jw,Tt=dw,At){constructor(e,t,s){super(e,"custom","PgCustomColumn"),this.config.fieldConfig=t,this.config.customTypeParams=s}build(e){return new Nk(e,this.config)}}or(jk,Tt,"PgCustomColumnBuilder");class Nk extends(Rt=Nw,Ot=dw,Rt){constructor(e,t){super(e,t),or(this,"sqlName"),or(this,"mapTo"),or(this,"mapFrom"),this.sqlName=t.customTypeParams.dataType(t.fieldConfig),this.mapTo=t.customTypeParams.toDriver,this.mapFrom=t.customTypeParams.fromDriver}getSQLType(){return this.sqlName}mapFromDriverValue(e){return"function"==typeof this.mapFrom?this.mapFrom(e):e}mapToDriverValue(e){return"function"==typeof this.mapTo?this.mapTo(e):e}}function wk(e){return(t,s)=>{const{name:n,config:r}=ek(t,s);return new jk(n,r,e)}}or(Nk,Ot,"PgCustomColumn");class kk extends(It=jw,Ft=dw,It){defaultNow(){return this.default(Zw`now()`)}}or(kk,Ft,"PgDateColumnBaseBuilder");class Ck extends(Lt=kk,Mt=dw,Lt){constructor(e){super(e,"date","PgDate")}build(e){return new Sk(e,this.config)}}or(Ck,Mt,"PgDateBuilder");class Sk extends(zt=Nw,qt=dw,zt){getSQLType(){return"date"}mapFromDriverValue(e){return new Date(e)}mapToDriverValue(e){return e.toISOString()}}or(Sk,qt,"PgDate");class _k extends(Bt=kk,Vt=dw,Bt){constructor(e){super(e,"string","PgDateString")}build(e){return new Pk(e,this.config)}}or(_k,Vt,"PgDateStringBuilder");class Pk extends(Wt=Nw,$t=dw,Wt){getSQLType(){return"date"}}function Ek(e,t){const{name:s,config:n}=ek(e,t);return"date"===(null==n?void 0:n.mode)?new Ck(s):new _k(s)}or(Pk,$t,"PgDateString");class Dk extends(Kt=jw,Ut=dw,Kt){constructor(e){super(e,"number","PgDoublePrecision")}build(e){return new Tk(e,this.config)}}or(Dk,Ut,"PgDoublePrecisionBuilder");class Tk extends(Zt=Nw,Ht=dw,Zt){getSQLType(){return"double precision"}mapFromDriverValue(e){return"string"==typeof e?Number.parseFloat(e):e}}function Ak(e){return new Dk(e??"")}or(Tk,Ht,"PgDoublePrecision");class Ok extends(Gt=jw,Qt=dw,Gt){constructor(e){super(e,"string","PgInet")}build(e){return new Rk(e,this.config)}}or(Ok,Qt,"PgInetBuilder");class Rk extends(Jt=Nw,Yt=dw,Jt){getSQLType(){return"inet"}}function Fk(e){return new Ok(e??"")}or(Rk,Yt,"PgInet");class Ik extends(es=tk,Xt=dw,es){constructor(e){super(e,"number","PgInteger")}build(e){return new Mk(e,this.config)}}or(Ik,Xt,"PgIntegerBuilder");class Mk extends(ss=Nw,ts=dw,ss){getSQLType(){return"integer"}mapFromDriverValue(e){return"string"==typeof e?Number.parseInt(e):e}}function Lk(e){return new Ik(e??"")}or(Mk,ts,"PgInteger");class qk extends(rs=jw,ns=dw,rs){constructor(e,t){super(e,"string","PgInterval"),this.config.intervalConfig=t}build(e){return new zk(e,this.config)}}or(qk,ns,"PgIntervalBuilder");class zk extends(is=Nw,as=dw,is){constructor(){super(...arguments),or(this,"fields",this.config.intervalConfig.fields),or(this,"precision",this.config.intervalConfig.precision)}getSQLType(){return`interval${this.fields?` ${this.fields}`:""}${this.precision?`(${this.precision})`:""}`}}function Vk(e,t={}){const{name:s,config:n}=ek(e,t);return new qk(s,n)}or(zk,as,"PgInterval");class Bk extends(ls=jw,os=dw,ls){constructor(e){super(e,"json","PgJson")}build(e){return new $k(e,this.config)}}or(Bk,os,"PgJsonBuilder");class $k extends(ds=Nw,cs=dw,ds){constructor(e,t){super(e,t)}getSQLType(){return"json"}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){if("string"==typeof e)try{return JSON.parse(e)}catch{return e}return e}}function Wk(e){return new Bk(e??"")}or($k,cs,"PgJson");class Uk extends(ms=jw,us=dw,ms){constructor(e){super(e,"json","PgJsonb")}build(e){return new Kk(e,this.config)}}or(Uk,us,"PgJsonbBuilder");class Kk extends(hs=Nw,ps=dw,hs){constructor(e,t){super(e,t)}getSQLType(){return"jsonb"}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){if("string"==typeof e)try{return JSON.parse(e)}catch{return e}return e}}function Hk(e){return new Uk(e??"")}or(Kk,ps,"PgJsonb");class Zk extends(fs=jw,xs=dw,fs){constructor(e){super(e,"array","PgLine")}build(e){return new Qk(e,this.config)}}or(Zk,xs,"PgLineBuilder");class Qk extends(gs=Nw,vs=dw,gs){getSQLType(){return"line"}mapFromDriverValue(e){const[t,s,n]=e.slice(1,-1).split(",");return[Number.parseFloat(t),Number.parseFloat(s),Number.parseFloat(n)]}mapToDriverValue(e){return`{${e[0]},${e[1]},${e[2]}}`}}or(Qk,vs,"PgLine");class Gk extends(bs=jw,ys=dw,bs){constructor(e){super(e,"json","PgLineABC")}build(e){return new Yk(e,this.config)}}or(Gk,ys,"PgLineABCBuilder");class Yk extends(Ns=Nw,js=dw,Ns){getSQLType(){return"line"}mapFromDriverValue(e){const[t,s,n]=e.slice(1,-1).split(",");return{a:Number.parseFloat(t),b:Number.parseFloat(s),c:Number.parseFloat(n)}}mapToDriverValue(e){return`{${e.a},${e.b},${e.c}}`}}function Jk(e,t){const{name:s,config:n}=ek(e,t);return(null==n?void 0:n.mode)&&"tuple"!==n.mode?new Gk(s):new Zk(s)}or(Yk,js,"PgLineABC");class Xk extends(ks=jw,ws=dw,ks){constructor(e){super(e,"string","PgMacaddr")}build(e){return new eC(e,this.config)}}or(Xk,ws,"PgMacaddrBuilder");class eC extends(Ss=Nw,Cs=dw,Ss){getSQLType(){return"macaddr"}}function tC(e){return new Xk(e??"")}or(eC,Cs,"PgMacaddr");class sC extends(Ps=jw,_s=dw,Ps){constructor(e){super(e,"string","PgMacaddr8")}build(e){return new nC(e,this.config)}}or(sC,_s,"PgMacaddr8Builder");class nC extends(Ds=Nw,Es=dw,Ds){getSQLType(){return"macaddr8"}}function rC(e){return new sC(e??"")}or(nC,Es,"PgMacaddr8");class aC extends(As=jw,Ts=dw,As){constructor(e,t,s){super(e,"string","PgNumeric"),this.config.precision=t,this.config.scale=s}build(e){return new iC(e,this.config)}}or(aC,Ts,"PgNumericBuilder");class iC extends(Rs=Nw,Os=dw,Rs){constructor(e,t){super(e,t),or(this,"precision"),or(this,"scale"),this.precision=t.precision,this.scale=t.scale}getSQLType(){return void 0!==this.precision&&void 0!==this.scale?`numeric(${this.precision}, ${this.scale})`:void 0===this.precision?"numeric":`numeric(${this.precision})`}}function oC(e,t){const{name:s,config:n}=ek(e,t);return new aC(s,null==n?void 0:n.precision,null==n?void 0:n.scale)}or(iC,Os,"PgNumeric");const lC=oC;class cC extends(Is=jw,Fs=dw,Is){constructor(e){super(e,"array","PgPointTuple")}build(e){return new dC(e,this.config)}}or(cC,Fs,"PgPointTupleBuilder");class dC extends(Ls=Nw,Ms=dw,Ls){getSQLType(){return"point"}mapFromDriverValue(e){if("string"==typeof e){const[t,s]=e.slice(1,-1).split(",");return[Number.parseFloat(t),Number.parseFloat(s)]}return[e.x,e.y]}mapToDriverValue(e){return`(${e[0]},${e[1]})`}}or(dC,Ms,"PgPointTuple");class uC extends(zs=jw,qs=dw,zs){constructor(e){super(e,"json","PgPointObject")}build(e){return new mC(e,this.config)}}or(uC,qs,"PgPointObjectBuilder");class mC extends(Bs=Nw,Vs=dw,Bs){getSQLType(){return"point"}mapFromDriverValue(e){if("string"==typeof e){const[t,s]=e.slice(1,-1).split(",");return{x:Number.parseFloat(t),y:Number.parseFloat(s)}}return e}mapToDriverValue(e){return`(${e.x},${e.y})`}}function pC(e,t){const{name:s,config:n}=ek(e,t);return(null==n?void 0:n.mode)&&"tuple"!==n.mode?new uC(s):new cC(s)}function hC(e,t){const s=new ArrayBuffer(8),n=new DataView(s);for(let r=0;r<8;r++)n.setUint8(r,e[t+r]);return n.getFloat64(0,!0)}function xC(e){const t=function(e){const t=[];for(let s=0;s<e.length;s+=2)t.push(Number.parseInt(e.slice(s,s+2),16));return new Uint8Array(t)}(e);let s=0;const n=t[s];s+=1;const r=new DataView(t.buffer),a=r.getUint32(s,1===n);if(s+=4,536870912&a&&(r.getUint32(s,1===n),s+=4),1==(65535&a)){const e=hC(t,s);s+=8;const n=hC(t,s);return s+=8,[e,n]}throw new Error("Unsupported geometry type")}or(mC,Vs,"PgPointObject");class fC extends(Ws=jw,$s=dw,Ws){constructor(e){super(e,"array","PgGeometry")}build(e){return new vC(e,this.config)}}or(fC,$s,"PgGeometryBuilder");class vC extends(Ks=Nw,Us=dw,Ks){getSQLType(){return"geometry(point)"}mapFromDriverValue(e){return xC(e)}mapToDriverValue(e){return`point(${e[0]} ${e[1]})`}}or(vC,Us,"PgGeometry");class gC extends(Zs=jw,Hs=dw,Zs){constructor(e){super(e,"json","PgGeometryObject")}build(e){return new yC(e,this.config)}}or(gC,Hs,"PgGeometryObjectBuilder");class yC extends(Gs=Nw,Qs=dw,Gs){getSQLType(){return"geometry(point)"}mapFromDriverValue(e){const t=xC(e);return{x:t[0],y:t[1]}}mapToDriverValue(e){return`point(${e.x} ${e.y})`}}function bC(e,t){const{name:s,config:n}=ek(e,t);return(null==n?void 0:n.mode)&&"tuple"!==n.mode?new gC(s):new fC(s)}or(yC,Qs,"PgGeometryObject");class jC extends(Js=jw,Ys=dw,Js){constructor(e,t){super(e,"number","PgReal"),this.config.length=t}build(e){return new NC(e,this.config)}}or(jC,Ys,"PgRealBuilder");class NC extends(en=Nw,Xs=dw,en){constructor(e,t){super(e,t),or(this,"mapFromDriverValue",e=>"string"==typeof e?Number.parseFloat(e):e)}getSQLType(){return"real"}}function wC(e){return new jC(e??"")}or(NC,Xs,"PgReal");class kC extends(sn=jw,tn=dw,sn){constructor(e){super(e,"number","PgSerial"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new CC(e,this.config)}}or(kC,tn,"PgSerialBuilder");class CC extends(rn=Nw,nn=dw,rn){getSQLType(){return"serial"}}function SC(e){return new kC(e??"")}or(CC,nn,"PgSerial");class _C extends(on=tk,an=dw,on){constructor(e){super(e,"number","PgSmallInt")}build(e){return new PC(e,this.config)}}or(_C,an,"PgSmallIntBuilder");class PC extends(cn=Nw,ln=dw,cn){constructor(){super(...arguments),or(this,"mapFromDriverValue",e=>"string"==typeof e?Number(e):e)}getSQLType(){return"smallint"}}function EC(e){return new _C(e??"")}or(PC,ln,"PgSmallInt");class DC extends(un=jw,dn=dw,un){constructor(e){super(e,"number","PgSmallSerial"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new TC(e,this.config)}}or(DC,dn,"PgSmallSerialBuilder");class TC extends(pn=Nw,mn=dw,pn){getSQLType(){return"smallserial"}}function AC(e){return new DC(e??"")}or(TC,mn,"PgSmallSerial");class OC extends(xn=jw,hn=dw,xn){constructor(e,t){super(e,"string","PgText"),this.config.enumValues=t.enum}build(e){return new RC(e,this.config)}}or(OC,hn,"PgTextBuilder");class RC extends(vn=Nw,fn=dw,vn){constructor(){super(...arguments),or(this,"enumValues",this.config.enumValues)}getSQLType(){return"text"}}function FC(e,t={}){const{name:s,config:n}=ek(e,t);return new OC(s,n)}or(RC,fn,"PgText");class IC extends(yn=kk,gn=dw,yn){constructor(e,t,s){super(e,"string","PgTime"),this.withTimezone=t,this.precision=s,this.config.withTimezone=t,this.config.precision=s}build(e){return new MC(e,this.config)}}or(IC,gn,"PgTimeBuilder");class MC extends(jn=Nw,bn=dw,jn){constructor(e,t){super(e,t),or(this,"withTimezone"),or(this,"precision"),this.withTimezone=t.withTimezone,this.precision=t.precision}getSQLType(){return`time${void 0===this.precision?"":`(${this.precision})`}${this.withTimezone?" with time zone":""}`}}function LC(e,t={}){const{name:s,config:n}=ek(e,t);return new IC(s,n.withTimezone??!1,n.precision)}or(MC,bn,"PgTime");class qC extends(wn=kk,Nn=dw,wn){constructor(e,t,s){super(e,"date","PgTimestamp"),this.config.withTimezone=t,this.config.precision=s}build(e){return new zC(e,this.config)}}or(qC,Nn,"PgTimestampBuilder");class zC extends(Cn=Nw,kn=dw,Cn){constructor(e,t){super(e,t),or(this,"withTimezone"),or(this,"precision"),or(this,"mapFromDriverValue",e=>new Date(this.withTimezone?e:e+"+0000")),or(this,"mapToDriverValue",e=>e.toISOString()),this.withTimezone=t.withTimezone,this.precision=t.precision}getSQLType(){return`timestamp${void 0===this.precision?"":` (${this.precision})`}${this.withTimezone?" with time zone":""}`}}or(zC,kn,"PgTimestamp");class VC extends(_n=kk,Sn=dw,_n){constructor(e,t,s){super(e,"string","PgTimestampString"),this.config.withTimezone=t,this.config.precision=s}build(e){return new BC(e,this.config)}}or(VC,Sn,"PgTimestampStringBuilder");class BC extends(En=Nw,Pn=dw,En){constructor(e,t){super(e,t),or(this,"withTimezone"),or(this,"precision"),this.withTimezone=t.withTimezone,this.precision=t.precision}getSQLType(){return`timestamp${void 0===this.precision?"":`(${this.precision})`}${this.withTimezone?" with time zone":""}`}}function $C(e,t={}){const{name:s,config:n}=ek(e,t);return"string"===(null==n?void 0:n.mode)?new VC(s,n.withTimezone??!1,n.precision):new qC(s,(null==n?void 0:n.withTimezone)??!1,null==n?void 0:n.precision)}or(BC,Pn,"PgTimestampString");class WC extends(Tn=jw,Dn=dw,Tn){constructor(e){super(e,"string","PgUUID")}defaultRandom(){return this.default(Zw`gen_random_uuid()`)}build(e){return new UC(e,this.config)}}or(WC,Dn,"PgUUIDBuilder");class UC extends(On=Nw,An=dw,On){getSQLType(){return"uuid"}}function KC(e){return new WC(e??"")}or(UC,An,"PgUUID");class HC extends(Fn=jw,Rn=dw,Fn){constructor(e,t){super(e,"string","PgVarchar"),this.config.length=t.length,this.config.enumValues=t.enum}build(e){return new ZC(e,this.config)}}or(HC,Rn,"PgVarcharBuilder");class ZC extends(Mn=Nw,In=dw,Mn){constructor(){super(...arguments),or(this,"length",this.config.length),or(this,"enumValues",this.config.enumValues)}getSQLType(){return void 0===this.length?"varchar":`varchar(${this.length})`}}function QC(e,t={}){const{name:s,config:n}=ek(e,t);return new HC(s,n)}or(ZC,In,"PgVarchar");class GC extends(qn=jw,Ln=dw,qn){constructor(e,t){super(e,"string","PgBinaryVector"),this.config.dimensions=t.dimensions}build(e){return new YC(e,this.config)}}or(GC,Ln,"PgBinaryVectorBuilder");class YC extends(Vn=Nw,zn=dw,Vn){constructor(){super(...arguments),or(this,"dimensions",this.config.dimensions)}getSQLType(){return`bit(${this.dimensions})`}}function JC(e,t){const{name:s,config:n}=ek(e,t);return new GC(s,n)}or(YC,zn,"PgBinaryVector");class XC extends($n=jw,Bn=dw,$n){constructor(e,t){super(e,"array","PgHalfVector"),this.config.dimensions=t.dimensions}build(e){return new eS(e,this.config)}}or(XC,Bn,"PgHalfVectorBuilder");class eS extends(Un=Nw,Wn=dw,Un){constructor(){super(...arguments),or(this,"dimensions",this.config.dimensions)}getSQLType(){return`halfvec(${this.dimensions})`}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){return e.slice(1,-1).split(",").map(e=>Number.parseFloat(e))}}function tS(e,t){const{name:s,config:n}=ek(e,t);return new XC(s,n)}or(eS,Wn,"PgHalfVector");class sS extends(Hn=jw,Kn=dw,Hn){constructor(e,t){super(e,"string","PgSparseVector"),this.config.dimensions=t.dimensions}build(e){return new nS(e,this.config)}}or(sS,Kn,"PgSparseVectorBuilder");class nS extends(Qn=Nw,Zn=dw,Qn){constructor(){super(...arguments),or(this,"dimensions",this.config.dimensions)}getSQLType(){return`sparsevec(${this.dimensions})`}}function rS(e,t){const{name:s,config:n}=ek(e,t);return new sS(s,n)}or(nS,Zn,"PgSparseVector");class aS extends(Yn=jw,Gn=dw,Yn){constructor(e,t){super(e,"array","PgVector"),this.config.dimensions=t.dimensions}build(e){return new iS(e,this.config)}}or(aS,Gn,"PgVectorBuilder");class iS extends(Xn=Nw,Jn=dw,Xn){constructor(){super(...arguments),or(this,"dimensions",this.config.dimensions)}getSQLType(){return`vector(${this.dimensions})`}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){return e.slice(1,-1).split(",").map(e=>Number.parseFloat(e))}}function oS(e,t){const{name:s,config:n}=ek(e,t);return new aS(s,n)}or(iS,Jn,"PgVector");const lS=Symbol.for("drizzle:PgInlineForeignKeys"),cS=Symbol.for("drizzle:EnableRLS");class dS extends(rr=qw,nr=dw,sr=lS,tr=cS,er=qw.Symbol.ExtraConfigBuilder,rr){constructor(){super(...arguments),or(this,sr,[]),or(this,tr,!1),or(this,er)}}function uS(e,t,s,n,r=e){const a=new dS(e,n,r),i="function"==typeof t?t({bigint:ik,bigserial:uk,boolean:hk,char:vk,cidr:bk,customType:wk,date:Ek,doublePrecision:Ak,inet:Fk,integer:Lk,interval:Vk,json:Wk,jsonb:Hk,line:Jk,macaddr:tC,macaddr8:rC,numeric:oC,point:pC,geometry:bC,real:wC,serial:SC,smallint:EC,smallserial:AC,text:FC,time:LC,timestamp:$C,uuid:KC,varchar:QC,bit:JC,halfvec:tS,sparsevec:rS,vector:oS}):t,o=Object.fromEntries(Object.entries(i).map(([e,t])=>{const s=t;s.setName(e);const n=s.build(a);return a[lS].push(...s.buildForeignKeys(n,a)),[e,n]})),l=Object.fromEntries(Object.entries(i).map(([e,t])=>{const s=t;s.setName(e);return[e,s.buildExtraConfigColumn(a)]})),c=Object.assign(a,o);return c[qw.Symbol.Columns]=o,c[qw.Symbol.ExtraConfigColumns]=l,Object.assign(c,{enableRLS:()=>(c[dS.Symbol.EnableRLS]=!0,c)})}or(dS,nr,"PgTable"),or(dS,"Symbol",Object.assign({},qw.Symbol,{InlineForeignKeys:lS,EnableRLS:cS}));const mS=(e,t,s)=>uS(e,t,0,void 0);var pS,hS,xS;(hS=pS||(pS={})).assertEqual=e=>{},hS.assertIs=function(e){},hS.assertNever=function(e){throw new Error},hS.arrayToEnum=e=>{const t={};for(const s of e)t[s]=s;return t},hS.getValidEnumValues=e=>{const t=hS.objectKeys(e).filter(t=>"number"!=typeof e[e[t]]),s={};for(const n of t)s[n]=e[n];return hS.objectValues(s)},hS.objectValues=e=>hS.objectKeys(e).map(function(t){return e[t]}),hS.objectKeys="function"==typeof Object.keys?e=>Object.keys(e):e=>{const t=[];for(const s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.push(s);return t},hS.find=(e,t)=>{for(const s of e)if(t(s))return s},hS.isInteger="function"==typeof Number.isInteger?e=>Number.isInteger(e):e=>"number"==typeof e&&Number.isFinite(e)&&Math.floor(e)===e,hS.joinValues=function(e,t=" | "){return e.map(e=>"string"==typeof e?`'${e}'`:e).join(t)},hS.jsonStringifyReplacer=(e,t)=>"bigint"==typeof t?t.toString():t,(xS||(xS={})).mergeShapes=(e,t)=>({...e,...t});const fS=pS.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),vS=e=>{switch(typeof e){case"undefined":return fS.undefined;case"string":return fS.string;case"number":return Number.isNaN(e)?fS.nan:fS.number;case"boolean":return fS.boolean;case"function":return fS.function;case"bigint":return fS.bigint;case"symbol":return fS.symbol;case"object":return Array.isArray(e)?fS.array:null===e?fS.null:e.then&&"function"==typeof e.then&&e.catch&&"function"==typeof e.catch?fS.promise:"undefined"!=typeof Map&&e instanceof Map?fS.map:"undefined"!=typeof Set&&e instanceof Set?fS.set:"undefined"!=typeof Date&&e instanceof Date?fS.date:fS.object;default:return fS.unknown}},gS=pS.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class yS extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=e=>{this.issues=[...this.issues,e]},this.addIssues=(e=[])=>{this.issues=[...this.issues,...e]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}format(e){const t=e||function(e){return e.message},s={_errors:[]},n=e=>{for(const r of e.issues)if("invalid_union"===r.code)r.unionErrors.map(n);else if("invalid_return_type"===r.code)n(r.returnTypeError);else if("invalid_arguments"===r.code)n(r.argumentsError);else if(0===r.path.length)s._errors.push(t(r));else{let e=s,n=0;for(;n<r.path.length;){const s=r.path[n];n===r.path.length-1?(e[s]=e[s]||{_errors:[]},e[s]._errors.push(t(r))):e[s]=e[s]||{_errors:[]},e=e[s],n++}}};return n(this),s}static assert(e){if(!(e instanceof yS))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,pS.jsonStringifyReplacer,2)}get isEmpty(){return 0===this.issues.length}flatten(e=e=>e.message){const t={},s=[];for(const n of this.issues)n.path.length>0?(t[n.path[0]]=t[n.path[0]]||[],t[n.path[0]].push(e(n))):s.push(e(n));return{formErrors:s,fieldErrors:t}}get formErrors(){return this.flatten()}}yS.create=e=>new yS(e);const bS=(e,t)=>{let s;switch(e.code){case gS.invalid_type:s=e.received===fS.undefined?"Required":`Expected ${e.expected}, received ${e.received}`;break;case gS.invalid_literal:s=`Invalid literal value, expected ${JSON.stringify(e.expected,pS.jsonStringifyReplacer)}`;break;case gS.unrecognized_keys:s=`Unrecognized key(s) in object: ${pS.joinValues(e.keys,", ")}`;break;case gS.invalid_union:s="Invalid input";break;case gS.invalid_union_discriminator:s=`Invalid discriminator value. Expected ${pS.joinValues(e.options)}`;break;case gS.invalid_enum_value:s=`Invalid enum value. Expected ${pS.joinValues(e.options)}, received '${e.received}'`;break;case gS.invalid_arguments:s="Invalid function arguments";break;case gS.invalid_return_type:s="Invalid function return type";break;case gS.invalid_date:s="Invalid date";break;case gS.invalid_string:"object"==typeof e.validation?"includes"in e.validation?(s=`Invalid input: must include "${e.validation.includes}"`,"number"==typeof e.validation.position&&(s=`${s} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?s=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?s=`Invalid input: must end with "${e.validation.endsWith}"`:pS.assertNever(e.validation):s="regex"!==e.validation?`Invalid ${e.validation}`:"Invalid";break;case gS.too_small:s="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:"date"===e.type?`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:"Invalid input";break;case gS.too_big:s="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"bigint"===e.type?`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"date"===e.type?`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:"Invalid input";break;case gS.custom:s="Invalid input";break;case gS.invalid_intersection_types:s="Intersection results could not be merged";break;case gS.not_multiple_of:s=`Number must be a multiple of ${e.multipleOf}`;break;case gS.not_finite:s="Number must be finite";break;default:s=t.defaultError,pS.assertNever(e)}return{message:s}};let jS=bS;function NS(){return jS}const wS=e=>{const{data:t,path:s,errorMaps:n,issueData:r}=e,a=[...s,...r.path||[]],i={...r,path:a};if(void 0!==r.message)return{...r,path:a,message:r.message};let o="";const l=n.filter(e=>!!e).slice().reverse();for(const c of l)o=c(i,{data:t,defaultError:o}).message;return{...r,path:a,message:o}};function kS(e,t){const s=NS(),n=wS({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,s,s===bS?void 0:bS].filter(e=>!!e)});e.common.issues.push(n)}class CS{constructor(){this.value="valid"}dirty(){"valid"===this.value&&(this.value="dirty")}abort(){"aborted"!==this.value&&(this.value="aborted")}static mergeArray(e,t){const s=[];for(const n of t){if("aborted"===n.status)return SS;"dirty"===n.status&&e.dirty(),s.push(n.value)}return{status:e.value,value:s}}static async mergeObjectAsync(e,t){const s=[];for(const n of t){const e=await n.key,t=await n.value;s.push({key:e,value:t})}return CS.mergeObjectSync(e,s)}static mergeObjectSync(e,t){const s={};for(const n of t){const{key:t,value:r}=n;if("aborted"===t.status)return SS;if("aborted"===r.status)return SS;"dirty"===t.status&&e.dirty(),"dirty"===r.status&&e.dirty(),"__proto__"===t.value||void 0===r.value&&!n.alwaysSet||(s[t.value]=r.value)}return{status:e.value,value:s}}}const SS=Object.freeze({status:"aborted"}),_S=e=>({status:"dirty",value:e}),PS=e=>({status:"valid",value:e}),ES=e=>"aborted"===e.status,DS=e=>"dirty"===e.status,TS=e=>"valid"===e.status,AS=e=>"undefined"!=typeof Promise&&e instanceof Promise;var OS,RS;(RS=OS||(OS={})).errToObj=e=>"string"==typeof e?{message:e}:e||{},RS.toString=e=>"string"==typeof e?e:null==e?void 0:e.message;class FS{constructor(e,t,s,n){this._cachedPath=[],this.parent=e,this.data=t,this._path=s,this._key=n}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const IS=(e,t)=>{if(TS(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new yS(e.common.issues);return this._error=t,this._error}}};function MS(e){if(!e)return{};const{errorMap:t,invalid_type_error:s,required_error:n,description:r}=e;if(t&&(s||n))throw new Error('Can\'t use "invalid_type_error" or "required_error" in conjunction with custom error map.');if(t)return{errorMap:t,description:r};return{errorMap:(t,r)=>{const{message:a}=e;return"invalid_enum_value"===t.code?{message:a??r.defaultError}:void 0===r.data?{message:a??n??r.defaultError}:"invalid_type"!==t.code?{message:r.defaultError}:{message:a??s??r.defaultError}},description:r}}class LS{get description(){return this._def.description}_getType(e){return vS(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:vS(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new CS,ctx:{common:e.parent.common,data:e.data,parsedType:vS(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(AS(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const s=this.safeParse(e,t);if(s.success)return s.data;throw s.error}safeParse(e,t){const s={common:{issues:[],async:(null==t?void 0:t.async)??!1,contextualErrorMap:null==t?void 0:t.errorMap},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:vS(e)},n=this._parseSync({data:e,path:s.path,parent:s});return IS(s,n)}"~validate"(e){var t,s;const n={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:vS(e)};if(!this["~standard"].async)try{const t=this._parseSync({data:e,path:[],parent:n});return TS(t)?{value:t.value}:{issues:n.common.issues}}catch($R){(null==(s=null==(t=null==$R?void 0:$R.message)?void 0:t.toLowerCase())?void 0:s.includes("encountered"))&&(this["~standard"].async=!0),n.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:n}).then(e=>TS(e)?{value:e.value}:{issues:n.common.issues})}async parseAsync(e,t){const s=await this.safeParseAsync(e,t);if(s.success)return s.data;throw s.error}async safeParseAsync(e,t){const s={common:{issues:[],contextualErrorMap:null==t?void 0:t.errorMap,async:!0},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:vS(e)},n=this._parse({data:e,path:s.path,parent:s}),r=await(AS(n)?n:Promise.resolve(n));return IS(s,r)}refine(e,t){const s=e=>"string"==typeof t||void 0===t?{message:t}:"function"==typeof t?t(e):t;return this._refinement((t,n)=>{const r=e(t),a=()=>n.addIssue({code:gS.custom,...s(t)});return"undefined"!=typeof Promise&&r instanceof Promise?r.then(e=>!!e||(a(),!1)):!!r||(a(),!1)})}refinement(e,t){return this._refinement((s,n)=>!!e(s)||(n.addIssue("function"==typeof t?t(s,n):t),!1))}_refinement(e){return new z_({schema:this,typeName:X_.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:e=>this["~validate"](e)}}optional(){return V_.create(this,this._def)}nullable(){return B_.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return j_.create(this)}promise(){return q_.create(this,this._def)}or(e){return k_.create([this,e],this._def)}and(e){return P_.create(this,e,this._def)}transform(e){return new z_({...MS(this._def),schema:this,typeName:X_.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t="function"==typeof e?e:()=>e;return new $_({...MS(this._def),innerType:this,defaultValue:t,typeName:X_.ZodDefault})}brand(){return new H_({typeName:X_.ZodBranded,type:this,...MS(this._def)})}catch(e){const t="function"==typeof e?e:()=>e;return new W_({...MS(this._def),innerType:this,catchValue:t,typeName:X_.ZodCatch})}describe(e){return new(0,this.constructor)({...this._def,description:e})}pipe(e){return Z_.create(this,e)}readonly(){return Q_.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const qS=/^c[^\s-]{8,}$/i,zS=/^[0-9a-z]+$/,VS=/^[0-9A-HJKMNP-TV-Z]{26}$/i,BS=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,$S=/^[a-z0-9_-]{21}$/i,WS=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,US=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,KS=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i;let HS;const ZS=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,QS=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,GS=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,YS=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,JS=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,XS=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,e_="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",t_=new RegExp(`^${e_}$`);function s_(e){let t="[0-5]\\d";e.precision?t=`${t}\\.\\d{${e.precision}}`:null==e.precision&&(t=`${t}(\\.\\d+)?`);return`([01]\\d|2[0-3]):[0-5]\\d(:${t})${e.precision?"+":"?"}`}function n_(e){return new RegExp(`^${s_(e)}$`)}function r_(e){let t=`${e_}T${s_(e)}`;const s=[];return s.push(e.local?"Z?":"Z"),e.offset&&s.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${s.join("|")})`,new RegExp(`^${t}$`)}function a_(e,t){return!("v4"!==t&&t||!ZS.test(e))||!("v6"!==t&&t||!GS.test(e))}function i_(e,t){if(!WS.test(e))return!1;try{const[s]=e.split("."),n=s.replace(/-/g,"+").replace(/_/g,"/").padEnd(s.length+(4-s.length%4)%4,"="),r=JSON.parse(atob(n));return"object"==typeof r&&null!==r&&((!("typ"in r)||"JWT"===(null==r?void 0:r.typ))&&(!!r.alg&&(!t||r.alg===t)))}catch{return!1}}function o_(e,t){return!("v4"!==t&&t||!QS.test(e))||!("v6"!==t&&t||!YS.test(e))}class l_ extends LS{_parse(e){this._def.coerce&&(e.data=String(e.data));if(this._getType(e)!==fS.string){const t=this._getOrReturnCtx(e);return kS(t,{code:gS.invalid_type,expected:fS.string,received:t.parsedType}),SS}const t=new CS;let s;for(const n of this._def.checks)if("min"===n.kind)e.data.length<n.value&&(s=this._getOrReturnCtx(e,s),kS(s,{code:gS.too_small,minimum:n.value,type:"string",inclusive:!0,exact:!1,message:n.message}),t.dirty());else if("max"===n.kind)e.data.length>n.value&&(s=this._getOrReturnCtx(e,s),kS(s,{code:gS.too_big,maximum:n.value,type:"string",inclusive:!0,exact:!1,message:n.message}),t.dirty());else if("length"===n.kind){const r=e.data.length>n.value,a=e.data.length<n.value;(r||a)&&(s=this._getOrReturnCtx(e,s),r?kS(s,{code:gS.too_big,maximum:n.value,type:"string",inclusive:!0,exact:!0,message:n.message}):a&&kS(s,{code:gS.too_small,minimum:n.value,type:"string",inclusive:!0,exact:!0,message:n.message}),t.dirty())}else if("email"===n.kind)KS.test(e.data)||(s=this._getOrReturnCtx(e,s),kS(s,{validation:"email",code:gS.invalid_string,message:n.message}),t.dirty());else if("emoji"===n.kind)HS||(HS=new RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),HS.test(e.data)||(s=this._getOrReturnCtx(e,s),kS(s,{validation:"emoji",code:gS.invalid_string,message:n.message}),t.dirty());else if("uuid"===n.kind)BS.test(e.data)||(s=this._getOrReturnCtx(e,s),kS(s,{validation:"uuid",code:gS.invalid_string,message:n.message}),t.dirty());else if("nanoid"===n.kind)$S.test(e.data)||(s=this._getOrReturnCtx(e,s),kS(s,{validation:"nanoid",code:gS.invalid_string,message:n.message}),t.dirty());else if("cuid"===n.kind)qS.test(e.data)||(s=this._getOrReturnCtx(e,s),kS(s,{validation:"cuid",code:gS.invalid_string,message:n.message}),t.dirty());else if("cuid2"===n.kind)zS.test(e.data)||(s=this._getOrReturnCtx(e,s),kS(s,{validation:"cuid2",code:gS.invalid_string,message:n.message}),t.dirty());else if("ulid"===n.kind)VS.test(e.data)||(s=this._getOrReturnCtx(e,s),kS(s,{validation:"ulid",code:gS.invalid_string,message:n.message}),t.dirty());else if("url"===n.kind)try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),kS(s,{validation:"url",code:gS.invalid_string,message:n.message}),t.dirty()}else if("regex"===n.kind){n.regex.lastIndex=0;n.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),kS(s,{validation:"regex",code:gS.invalid_string,message:n.message}),t.dirty())}else if("trim"===n.kind)e.data=e.data.trim();else if("includes"===n.kind)e.data.includes(n.value,n.position)||(s=this._getOrReturnCtx(e,s),kS(s,{code:gS.invalid_string,validation:{includes:n.value,position:n.position},message:n.message}),t.dirty());else if("toLowerCase"===n.kind)e.data=e.data.toLowerCase();else if("toUpperCase"===n.kind)e.data=e.data.toUpperCase();else if("startsWith"===n.kind)e.data.startsWith(n.value)||(s=this._getOrReturnCtx(e,s),kS(s,{code:gS.invalid_string,validation:{startsWith:n.value},message:n.message}),t.dirty());else if("endsWith"===n.kind)e.data.endsWith(n.value)||(s=this._getOrReturnCtx(e,s),kS(s,{code:gS.invalid_string,validation:{endsWith:n.value},message:n.message}),t.dirty());else if("datetime"===n.kind){r_(n).test(e.data)||(s=this._getOrReturnCtx(e,s),kS(s,{code:gS.invalid_string,validation:"datetime",message:n.message}),t.dirty())}else if("date"===n.kind){t_.test(e.data)||(s=this._getOrReturnCtx(e,s),kS(s,{code:gS.invalid_string,validation:"date",message:n.message}),t.dirty())}else if("time"===n.kind){n_(n).test(e.data)||(s=this._getOrReturnCtx(e,s),kS(s,{code:gS.invalid_string,validation:"time",message:n.message}),t.dirty())}else"duration"===n.kind?US.test(e.data)||(s=this._getOrReturnCtx(e,s),kS(s,{validation:"duration",code:gS.invalid_string,message:n.message}),t.dirty()):"ip"===n.kind?a_(e.data,n.version)||(s=this._getOrReturnCtx(e,s),kS(s,{validation:"ip",code:gS.invalid_string,message:n.message}),t.dirty()):"jwt"===n.kind?i_(e.data,n.alg)||(s=this._getOrReturnCtx(e,s),kS(s,{validation:"jwt",code:gS.invalid_string,message:n.message}),t.dirty()):"cidr"===n.kind?o_(e.data,n.version)||(s=this._getOrReturnCtx(e,s),kS(s,{validation:"cidr",code:gS.invalid_string,message:n.message}),t.dirty()):"base64"===n.kind?JS.test(e.data)||(s=this._getOrReturnCtx(e,s),kS(s,{validation:"base64",code:gS.invalid_string,message:n.message}),t.dirty()):"base64url"===n.kind?XS.test(e.data)||(s=this._getOrReturnCtx(e,s),kS(s,{validation:"base64url",code:gS.invalid_string,message:n.message}),t.dirty()):pS.assertNever(n);return{status:t.value,value:e.data}}_regex(e,t,s){return this.refinement(t=>e.test(t),{validation:t,code:gS.invalid_string,...OS.errToObj(s)})}_addCheck(e){return new l_({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...OS.errToObj(e)})}url(e){return this._addCheck({kind:"url",...OS.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...OS.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...OS.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...OS.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...OS.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...OS.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...OS.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...OS.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...OS.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...OS.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...OS.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...OS.errToObj(e)})}datetime(e){return"string"==typeof e?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:void 0===(null==e?void 0:e.precision)?null:null==e?void 0:e.precision,offset:(null==e?void 0:e.offset)??!1,local:(null==e?void 0:e.local)??!1,...OS.errToObj(null==e?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return"string"==typeof e?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:void 0===(null==e?void 0:e.precision)?null:null==e?void 0:e.precision,...OS.errToObj(null==e?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...OS.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...OS.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:null==t?void 0:t.position,...OS.errToObj(null==t?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...OS.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...OS.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...OS.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...OS.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...OS.errToObj(t)})}nonempty(e){return this.min(1,OS.errToObj(e))}trim(){return new l_({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new l_({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new l_({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>"datetime"===e.kind)}get isDate(){return!!this._def.checks.find(e=>"date"===e.kind)}get isTime(){return!!this._def.checks.find(e=>"time"===e.kind)}get isDuration(){return!!this._def.checks.find(e=>"duration"===e.kind)}get isEmail(){return!!this._def.checks.find(e=>"email"===e.kind)}get isURL(){return!!this._def.checks.find(e=>"url"===e.kind)}get isEmoji(){return!!this._def.checks.find(e=>"emoji"===e.kind)}get isUUID(){return!!this._def.checks.find(e=>"uuid"===e.kind)}get isNANOID(){return!!this._def.checks.find(e=>"nanoid"===e.kind)}get isCUID(){return!!this._def.checks.find(e=>"cuid"===e.kind)}get isCUID2(){return!!this._def.checks.find(e=>"cuid2"===e.kind)}get isULID(){return!!this._def.checks.find(e=>"ulid"===e.kind)}get isIP(){return!!this._def.checks.find(e=>"ip"===e.kind)}get isCIDR(){return!!this._def.checks.find(e=>"cidr"===e.kind)}get isBase64(){return!!this._def.checks.find(e=>"base64"===e.kind)}get isBase64url(){return!!this._def.checks.find(e=>"base64url"===e.kind)}get minLength(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}function c_(e,t){const s=(e.toString().split(".")[1]||"").length,n=(t.toString().split(".")[1]||"").length,r=s>n?s:n;return Number.parseInt(e.toFixed(r).replace(".",""))%Number.parseInt(t.toFixed(r).replace(".",""))/10**r}l_.create=e=>new l_({checks:[],typeName:X_.ZodString,coerce:(null==e?void 0:e.coerce)??!1,...MS(e)});class d_ extends LS{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){this._def.coerce&&(e.data=Number(e.data));if(this._getType(e)!==fS.number){const t=this._getOrReturnCtx(e);return kS(t,{code:gS.invalid_type,expected:fS.number,received:t.parsedType}),SS}let t;const s=new CS;for(const n of this._def.checks)if("int"===n.kind)pS.isInteger(e.data)||(t=this._getOrReturnCtx(e,t),kS(t,{code:gS.invalid_type,expected:"integer",received:"float",message:n.message}),s.dirty());else if("min"===n.kind){(n.inclusive?e.data<n.value:e.data<=n.value)&&(t=this._getOrReturnCtx(e,t),kS(t,{code:gS.too_small,minimum:n.value,type:"number",inclusive:n.inclusive,exact:!1,message:n.message}),s.dirty())}else if("max"===n.kind){(n.inclusive?e.data>n.value:e.data>=n.value)&&(t=this._getOrReturnCtx(e,t),kS(t,{code:gS.too_big,maximum:n.value,type:"number",inclusive:n.inclusive,exact:!1,message:n.message}),s.dirty())}else"multipleOf"===n.kind?0!==c_(e.data,n.value)&&(t=this._getOrReturnCtx(e,t),kS(t,{code:gS.not_multiple_of,multipleOf:n.value,message:n.message}),s.dirty()):"finite"===n.kind?Number.isFinite(e.data)||(t=this._getOrReturnCtx(e,t),kS(t,{code:gS.not_finite,message:n.message}),s.dirty()):pS.assertNever(n);return{status:s.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,OS.toString(t))}gt(e,t){return this.setLimit("min",e,!1,OS.toString(t))}lte(e,t){return this.setLimit("max",e,!0,OS.toString(t))}lt(e,t){return this.setLimit("max",e,!1,OS.toString(t))}setLimit(e,t,s,n){return new d_({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:s,message:OS.toString(n)}]})}_addCheck(e){return new d_({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:OS.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:OS.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:OS.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:OS.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:OS.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:OS.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:OS.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:OS.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:OS.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>"int"===e.kind||"multipleOf"===e.kind&&pS.isInteger(e.value))}get isFinite(){let e=null,t=null;for(const s of this._def.checks){if("finite"===s.kind||"int"===s.kind||"multipleOf"===s.kind)return!0;"min"===s.kind?(null===t||s.value>t)&&(t=s.value):"max"===s.kind&&(null===e||s.value<e)&&(e=s.value)}return Number.isFinite(t)&&Number.isFinite(e)}}d_.create=e=>new d_({checks:[],typeName:X_.ZodNumber,coerce:(null==e?void 0:e.coerce)||!1,...MS(e)});class u_ extends LS{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==fS.bigint)return this._getInvalidInput(e);let t;const s=new CS;for(const n of this._def.checks)if("min"===n.kind){(n.inclusive?e.data<n.value:e.data<=n.value)&&(t=this._getOrReturnCtx(e,t),kS(t,{code:gS.too_small,type:"bigint",minimum:n.value,inclusive:n.inclusive,message:n.message}),s.dirty())}else if("max"===n.kind){(n.inclusive?e.data>n.value:e.data>=n.value)&&(t=this._getOrReturnCtx(e,t),kS(t,{code:gS.too_big,type:"bigint",maximum:n.value,inclusive:n.inclusive,message:n.message}),s.dirty())}else"multipleOf"===n.kind?e.data%n.value!==BigInt(0)&&(t=this._getOrReturnCtx(e,t),kS(t,{code:gS.not_multiple_of,multipleOf:n.value,message:n.message}),s.dirty()):pS.assertNever(n);return{status:s.value,value:e.data}}_getInvalidInput(e){const t=this._getOrReturnCtx(e);return kS(t,{code:gS.invalid_type,expected:fS.bigint,received:t.parsedType}),SS}gte(e,t){return this.setLimit("min",e,!0,OS.toString(t))}gt(e,t){return this.setLimit("min",e,!1,OS.toString(t))}lte(e,t){return this.setLimit("max",e,!0,OS.toString(t))}lt(e,t){return this.setLimit("max",e,!1,OS.toString(t))}setLimit(e,t,s,n){return new u_({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:s,message:OS.toString(n)}]})}_addCheck(e){return new u_({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:OS.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:OS.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:OS.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:OS.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:OS.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}u_.create=e=>new u_({checks:[],typeName:X_.ZodBigInt,coerce:(null==e?void 0:e.coerce)??!1,...MS(e)});class m_ extends LS{_parse(e){this._def.coerce&&(e.data=Boolean(e.data));if(this._getType(e)!==fS.boolean){const t=this._getOrReturnCtx(e);return kS(t,{code:gS.invalid_type,expected:fS.boolean,received:t.parsedType}),SS}return PS(e.data)}}m_.create=e=>new m_({typeName:X_.ZodBoolean,coerce:(null==e?void 0:e.coerce)||!1,...MS(e)});class p_ extends LS{_parse(e){this._def.coerce&&(e.data=new Date(e.data));if(this._getType(e)!==fS.date){const t=this._getOrReturnCtx(e);return kS(t,{code:gS.invalid_type,expected:fS.date,received:t.parsedType}),SS}if(Number.isNaN(e.data.getTime())){return kS(this._getOrReturnCtx(e),{code:gS.invalid_date}),SS}const t=new CS;let s;for(const n of this._def.checks)"min"===n.kind?e.data.getTime()<n.value&&(s=this._getOrReturnCtx(e,s),kS(s,{code:gS.too_small,message:n.message,inclusive:!0,exact:!1,minimum:n.value,type:"date"}),t.dirty()):"max"===n.kind?e.data.getTime()>n.value&&(s=this._getOrReturnCtx(e,s),kS(s,{code:gS.too_big,message:n.message,inclusive:!0,exact:!1,maximum:n.value,type:"date"}),t.dirty()):pS.assertNever(n);return{status:t.value,value:new Date(e.data.getTime())}}_addCheck(e){return new p_({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:OS.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:OS.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return null!=e?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return null!=e?new Date(e):null}}p_.create=e=>new p_({checks:[],coerce:(null==e?void 0:e.coerce)||!1,typeName:X_.ZodDate,...MS(e)});class h_ extends LS{_parse(e){if(this._getType(e)!==fS.symbol){const t=this._getOrReturnCtx(e);return kS(t,{code:gS.invalid_type,expected:fS.symbol,received:t.parsedType}),SS}return PS(e.data)}}h_.create=e=>new h_({typeName:X_.ZodSymbol,...MS(e)});class x_ extends LS{_parse(e){if(this._getType(e)!==fS.undefined){const t=this._getOrReturnCtx(e);return kS(t,{code:gS.invalid_type,expected:fS.undefined,received:t.parsedType}),SS}return PS(e.data)}}x_.create=e=>new x_({typeName:X_.ZodUndefined,...MS(e)});class f_ extends LS{_parse(e){if(this._getType(e)!==fS.null){const t=this._getOrReturnCtx(e);return kS(t,{code:gS.invalid_type,expected:fS.null,received:t.parsedType}),SS}return PS(e.data)}}f_.create=e=>new f_({typeName:X_.ZodNull,...MS(e)});class v_ extends LS{constructor(){super(...arguments),this._any=!0}_parse(e){return PS(e.data)}}v_.create=e=>new v_({typeName:X_.ZodAny,...MS(e)});class g_ extends LS{constructor(){super(...arguments),this._unknown=!0}_parse(e){return PS(e.data)}}g_.create=e=>new g_({typeName:X_.ZodUnknown,...MS(e)});class y_ extends LS{_parse(e){const t=this._getOrReturnCtx(e);return kS(t,{code:gS.invalid_type,expected:fS.never,received:t.parsedType}),SS}}y_.create=e=>new y_({typeName:X_.ZodNever,...MS(e)});class b_ extends LS{_parse(e){if(this._getType(e)!==fS.undefined){const t=this._getOrReturnCtx(e);return kS(t,{code:gS.invalid_type,expected:fS.void,received:t.parsedType}),SS}return PS(e.data)}}b_.create=e=>new b_({typeName:X_.ZodVoid,...MS(e)});class j_ extends LS{_parse(e){const{ctx:t,status:s}=this._processInputParams(e),n=this._def;if(t.parsedType!==fS.array)return kS(t,{code:gS.invalid_type,expected:fS.array,received:t.parsedType}),SS;if(null!==n.exactLength){const e=t.data.length>n.exactLength.value,r=t.data.length<n.exactLength.value;(e||r)&&(kS(t,{code:e?gS.too_big:gS.too_small,minimum:r?n.exactLength.value:void 0,maximum:e?n.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:n.exactLength.message}),s.dirty())}if(null!==n.minLength&&t.data.length<n.minLength.value&&(kS(t,{code:gS.too_small,minimum:n.minLength.value,type:"array",inclusive:!0,exact:!1,message:n.minLength.message}),s.dirty()),null!==n.maxLength&&t.data.length>n.maxLength.value&&(kS(t,{code:gS.too_big,maximum:n.maxLength.value,type:"array",inclusive:!0,exact:!1,message:n.maxLength.message}),s.dirty()),t.common.async)return Promise.all([...t.data].map((e,s)=>n.type._parseAsync(new FS(t,e,t.path,s)))).then(e=>CS.mergeArray(s,e));const r=[...t.data].map((e,s)=>n.type._parseSync(new FS(t,e,t.path,s)));return CS.mergeArray(s,r)}get element(){return this._def.type}min(e,t){return new j_({...this._def,minLength:{value:e,message:OS.toString(t)}})}max(e,t){return new j_({...this._def,maxLength:{value:e,message:OS.toString(t)}})}length(e,t){return new j_({...this._def,exactLength:{value:e,message:OS.toString(t)}})}nonempty(e){return this.min(1,e)}}function N_(e){if(e instanceof w_){const t={};for(const s in e.shape){const n=e.shape[s];t[s]=V_.create(N_(n))}return new w_({...e._def,shape:()=>t})}return e instanceof j_?new j_({...e._def,type:N_(e.element)}):e instanceof V_?V_.create(N_(e.unwrap())):e instanceof B_?B_.create(N_(e.unwrap())):e instanceof E_?E_.create(e.items.map(e=>N_(e))):e}j_.create=(e,t)=>new j_({type:e,minLength:null,maxLength:null,exactLength:null,typeName:X_.ZodArray,...MS(t)});class w_ extends LS{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(null!==this._cached)return this._cached;const e=this._def.shape(),t=pS.objectKeys(e);return this._cached={shape:e,keys:t},this._cached}_parse(e){if(this._getType(e)!==fS.object){const t=this._getOrReturnCtx(e);return kS(t,{code:gS.invalid_type,expected:fS.object,received:t.parsedType}),SS}const{status:t,ctx:s}=this._processInputParams(e),{shape:n,keys:r}=this._getCached(),a=[];if(!(this._def.catchall instanceof y_&&"strip"===this._def.unknownKeys))for(const o in s.data)r.includes(o)||a.push(o);const i=[];for(const o of r){const e=n[o],t=s.data[o];i.push({key:{status:"valid",value:o},value:e._parse(new FS(s,t,s.path,o)),alwaysSet:o in s.data})}if(this._def.catchall instanceof y_){const e=this._def.unknownKeys;if("passthrough"===e)for(const t of a)i.push({key:{status:"valid",value:t},value:{status:"valid",value:s.data[t]}});else if("strict"===e)a.length>0&&(kS(s,{code:gS.unrecognized_keys,keys:a}),t.dirty());else if("strip"!==e)throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const e=this._def.catchall;for(const t of a){const n=s.data[t];i.push({key:{status:"valid",value:t},value:e._parse(new FS(s,n,s.path,t)),alwaysSet:t in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const e=[];for(const t of i){const s=await t.key,n=await t.value;e.push({key:s,value:n,alwaysSet:t.alwaysSet})}return e}).then(e=>CS.mergeObjectSync(t,e)):CS.mergeObjectSync(t,i)}get shape(){return this._def.shape()}strict(e){return OS.errToObj,new w_({...this._def,unknownKeys:"strict",...void 0!==e?{errorMap:(t,s)=>{var n,r;const a=(null==(r=(n=this._def).errorMap)?void 0:r.call(n,t,s).message)??s.defaultError;return"unrecognized_keys"===t.code?{message:OS.errToObj(e).message??a}:{message:a}}}:{}})}strip(){return new w_({...this._def,unknownKeys:"strip"})}passthrough(){return new w_({...this._def,unknownKeys:"passthrough"})}extend(e){return new w_({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new w_({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:X_.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new w_({...this._def,catchall:e})}pick(e){const t={};for(const s of pS.objectKeys(e))e[s]&&this.shape[s]&&(t[s]=this.shape[s]);return new w_({...this._def,shape:()=>t})}omit(e){const t={};for(const s of pS.objectKeys(this.shape))e[s]||(t[s]=this.shape[s]);return new w_({...this._def,shape:()=>t})}deepPartial(){return N_(this)}partial(e){const t={};for(const s of pS.objectKeys(this.shape)){const n=this.shape[s];e&&!e[s]?t[s]=n:t[s]=n.optional()}return new w_({...this._def,shape:()=>t})}required(e){const t={};for(const s of pS.objectKeys(this.shape))if(e&&!e[s])t[s]=this.shape[s];else{let e=this.shape[s];for(;e instanceof V_;)e=e._def.innerType;t[s]=e}return new w_({...this._def,shape:()=>t})}keyof(){return I_(pS.objectKeys(this.shape))}}w_.create=(e,t)=>new w_({shape:()=>e,unknownKeys:"strip",catchall:y_.create(),typeName:X_.ZodObject,...MS(t)}),w_.strictCreate=(e,t)=>new w_({shape:()=>e,unknownKeys:"strict",catchall:y_.create(),typeName:X_.ZodObject,...MS(t)}),w_.lazycreate=(e,t)=>new w_({shape:e,unknownKeys:"strip",catchall:y_.create(),typeName:X_.ZodObject,...MS(t)});class k_ extends LS{_parse(e){const{ctx:t}=this._processInputParams(e),s=this._def.options;if(t.common.async)return Promise.all(s.map(async e=>{const s={...t,common:{...t.common,issues:[]},parent:null};return{result:await e._parseAsync({data:t.data,path:t.path,parent:s}),ctx:s}})).then(function(e){for(const t of e)if("valid"===t.result.status)return t.result;for(const n of e)if("dirty"===n.result.status)return t.common.issues.push(...n.ctx.common.issues),n.result;const s=e.map(e=>new yS(e.ctx.common.issues));return kS(t,{code:gS.invalid_union,unionErrors:s}),SS});{let e;const n=[];for(const a of s){const s={...t,common:{...t.common,issues:[]},parent:null},r=a._parseSync({data:t.data,path:t.path,parent:s});if("valid"===r.status)return r;"dirty"!==r.status||e||(e={result:r,ctx:s}),s.common.issues.length&&n.push(s.common.issues)}if(e)return t.common.issues.push(...e.ctx.common.issues),e.result;const r=n.map(e=>new yS(e));return kS(t,{code:gS.invalid_union,unionErrors:r}),SS}}get options(){return this._def.options}}k_.create=(e,t)=>new k_({options:e,typeName:X_.ZodUnion,...MS(t)});const C_=e=>e instanceof R_?C_(e.schema):e instanceof z_?C_(e.innerType()):e instanceof F_?[e.value]:e instanceof M_?e.options:e instanceof L_?pS.objectValues(e.enum):e instanceof $_?C_(e._def.innerType):e instanceof x_?[void 0]:e instanceof f_?[null]:e instanceof V_?[void 0,...C_(e.unwrap())]:e instanceof B_?[null,...C_(e.unwrap())]:e instanceof H_||e instanceof Q_?C_(e.unwrap()):e instanceof W_?C_(e._def.innerType):[];class S_ extends LS{_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==fS.object)return kS(t,{code:gS.invalid_type,expected:fS.object,received:t.parsedType}),SS;const s=this.discriminator,n=t.data[s],r=this.optionsMap.get(n);return r?t.common.async?r._parseAsync({data:t.data,path:t.path,parent:t}):r._parseSync({data:t.data,path:t.path,parent:t}):(kS(t,{code:gS.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[s]}),SS)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,s){const n=new Map;for(const r of t){const t=C_(r.shape[e]);if(!t.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const s of t){if(n.has(s))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(s)}`);n.set(s,r)}}return new S_({typeName:X_.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:n,...MS(s)})}}function __(e,t){const s=vS(e),n=vS(t);if(e===t)return{valid:!0,data:e};if(s===fS.object&&n===fS.object){const s=pS.objectKeys(t),n=pS.objectKeys(e).filter(e=>-1!==s.indexOf(e)),r={...e,...t};for(const a of n){const s=__(e[a],t[a]);if(!s.valid)return{valid:!1};r[a]=s.data}return{valid:!0,data:r}}if(s===fS.array&&n===fS.array){if(e.length!==t.length)return{valid:!1};const s=[];for(let n=0;n<e.length;n++){const r=__(e[n],t[n]);if(!r.valid)return{valid:!1};s.push(r.data)}return{valid:!0,data:s}}return s===fS.date&&n===fS.date&&+e===+t?{valid:!0,data:e}:{valid:!1}}class P_ extends LS{_parse(e){const{status:t,ctx:s}=this._processInputParams(e),n=(e,n)=>{if(ES(e)||ES(n))return SS;const r=__(e.value,n.value);return r.valid?((DS(e)||DS(n))&&t.dirty(),{status:t.value,value:r.data}):(kS(s,{code:gS.invalid_intersection_types}),SS)};return s.common.async?Promise.all([this._def.left._parseAsync({data:s.data,path:s.path,parent:s}),this._def.right._parseAsync({data:s.data,path:s.path,parent:s})]).then(([e,t])=>n(e,t)):n(this._def.left._parseSync({data:s.data,path:s.path,parent:s}),this._def.right._parseSync({data:s.data,path:s.path,parent:s}))}}P_.create=(e,t,s)=>new P_({left:e,right:t,typeName:X_.ZodIntersection,...MS(s)});class E_ extends LS{_parse(e){const{status:t,ctx:s}=this._processInputParams(e);if(s.parsedType!==fS.array)return kS(s,{code:gS.invalid_type,expected:fS.array,received:s.parsedType}),SS;if(s.data.length<this._def.items.length)return kS(s,{code:gS.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),SS;!this._def.rest&&s.data.length>this._def.items.length&&(kS(s,{code:gS.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const n=[...s.data].map((e,t)=>{const n=this._def.items[t]||this._def.rest;return n?n._parse(new FS(s,e,s.path,t)):null}).filter(e=>!!e);return s.common.async?Promise.all(n).then(e=>CS.mergeArray(t,e)):CS.mergeArray(t,n)}get items(){return this._def.items}rest(e){return new E_({...this._def,rest:e})}}E_.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new E_({items:e,typeName:X_.ZodTuple,rest:null,...MS(t)})};class D_ extends LS{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:s}=this._processInputParams(e);if(s.parsedType!==fS.object)return kS(s,{code:gS.invalid_type,expected:fS.object,received:s.parsedType}),SS;const n=[],r=this._def.keyType,a=this._def.valueType;for(const i in s.data)n.push({key:r._parse(new FS(s,i,s.path,i)),value:a._parse(new FS(s,s.data[i],s.path,i)),alwaysSet:i in s.data});return s.common.async?CS.mergeObjectAsync(t,n):CS.mergeObjectSync(t,n)}get element(){return this._def.valueType}static create(e,t,s){return new D_(t instanceof LS?{keyType:e,valueType:t,typeName:X_.ZodRecord,...MS(s)}:{keyType:l_.create(),valueType:e,typeName:X_.ZodRecord,...MS(t)})}}class T_ extends LS{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:s}=this._processInputParams(e);if(s.parsedType!==fS.map)return kS(s,{code:gS.invalid_type,expected:fS.map,received:s.parsedType}),SS;const n=this._def.keyType,r=this._def.valueType,a=[...s.data.entries()].map(([e,t],a)=>({key:n._parse(new FS(s,e,s.path,[a,"key"])),value:r._parse(new FS(s,t,s.path,[a,"value"]))}));if(s.common.async){const e=new Map;return Promise.resolve().then(async()=>{for(const s of a){const n=await s.key,r=await s.value;if("aborted"===n.status||"aborted"===r.status)return SS;"dirty"!==n.status&&"dirty"!==r.status||t.dirty(),e.set(n.value,r.value)}return{status:t.value,value:e}})}{const e=new Map;for(const s of a){const n=s.key,r=s.value;if("aborted"===n.status||"aborted"===r.status)return SS;"dirty"!==n.status&&"dirty"!==r.status||t.dirty(),e.set(n.value,r.value)}return{status:t.value,value:e}}}}T_.create=(e,t,s)=>new T_({valueType:t,keyType:e,typeName:X_.ZodMap,...MS(s)});class A_ extends LS{_parse(e){const{status:t,ctx:s}=this._processInputParams(e);if(s.parsedType!==fS.set)return kS(s,{code:gS.invalid_type,expected:fS.set,received:s.parsedType}),SS;const n=this._def;null!==n.minSize&&s.data.size<n.minSize.value&&(kS(s,{code:gS.too_small,minimum:n.minSize.value,type:"set",inclusive:!0,exact:!1,message:n.minSize.message}),t.dirty()),null!==n.maxSize&&s.data.size>n.maxSize.value&&(kS(s,{code:gS.too_big,maximum:n.maxSize.value,type:"set",inclusive:!0,exact:!1,message:n.maxSize.message}),t.dirty());const r=this._def.valueType;function a(e){const s=new Set;for(const n of e){if("aborted"===n.status)return SS;"dirty"===n.status&&t.dirty(),s.add(n.value)}return{status:t.value,value:s}}const i=[...s.data.values()].map((e,t)=>r._parse(new FS(s,e,s.path,t)));return s.common.async?Promise.all(i).then(e=>a(e)):a(i)}min(e,t){return new A_({...this._def,minSize:{value:e,message:OS.toString(t)}})}max(e,t){return new A_({...this._def,maxSize:{value:e,message:OS.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}A_.create=(e,t)=>new A_({valueType:e,minSize:null,maxSize:null,typeName:X_.ZodSet,...MS(t)});class O_ extends LS{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==fS.function)return kS(t,{code:gS.invalid_type,expected:fS.function,received:t.parsedType}),SS;function s(e,s){return wS({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,NS(),bS].filter(e=>!!e),issueData:{code:gS.invalid_arguments,argumentsError:s}})}function n(e,s){return wS({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,NS(),bS].filter(e=>!!e),issueData:{code:gS.invalid_return_type,returnTypeError:s}})}const r={errorMap:t.common.contextualErrorMap},a=t.data;if(this._def.returns instanceof q_){const e=this;return PS(async function(...t){const i=new yS([]),o=await e._def.args.parseAsync(t,r).catch(e=>{throw i.addIssue(s(t,e)),i}),l=await Reflect.apply(a,this,o);return await e._def.returns._def.type.parseAsync(l,r).catch(e=>{throw i.addIssue(n(l,e)),i})})}{const e=this;return PS(function(...t){const i=e._def.args.safeParse(t,r);if(!i.success)throw new yS([s(t,i.error)]);const o=Reflect.apply(a,this,i.data),l=e._def.returns.safeParse(o,r);if(!l.success)throw new yS([n(o,l.error)]);return l.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new O_({...this._def,args:E_.create(e).rest(g_.create())})}returns(e){return new O_({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,s){return new O_({args:e||E_.create([]).rest(g_.create()),returns:t||g_.create(),typeName:X_.ZodFunction,...MS(s)})}}class R_ extends LS{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}R_.create=(e,t)=>new R_({getter:e,typeName:X_.ZodLazy,...MS(t)});class F_ extends LS{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return kS(t,{received:t.data,code:gS.invalid_literal,expected:this._def.value}),SS}return{status:"valid",value:e.data}}get value(){return this._def.value}}function I_(e,t){return new M_({values:e,typeName:X_.ZodEnum,...MS(t)})}F_.create=(e,t)=>new F_({value:e,typeName:X_.ZodLiteral,...MS(t)});class M_ extends LS{_parse(e){if("string"!=typeof e.data){const t=this._getOrReturnCtx(e),s=this._def.values;return kS(t,{expected:pS.joinValues(s),received:t.parsedType,code:gS.invalid_type}),SS}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const t=this._getOrReturnCtx(e),s=this._def.values;return kS(t,{received:t.data,code:gS.invalid_enum_value,options:s}),SS}return PS(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return M_.create(e,{...this._def,...t})}exclude(e,t=this._def){return M_.create(this.options.filter(t=>!e.includes(t)),{...this._def,...t})}}M_.create=I_;class L_ extends LS{_parse(e){const t=pS.getValidEnumValues(this._def.values),s=this._getOrReturnCtx(e);if(s.parsedType!==fS.string&&s.parsedType!==fS.number){const e=pS.objectValues(t);return kS(s,{expected:pS.joinValues(e),received:s.parsedType,code:gS.invalid_type}),SS}if(this._cache||(this._cache=new Set(pS.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const e=pS.objectValues(t);return kS(s,{received:s.data,code:gS.invalid_enum_value,options:e}),SS}return PS(e.data)}get enum(){return this._def.values}}L_.create=(e,t)=>new L_({values:e,typeName:X_.ZodNativeEnum,...MS(t)});class q_ extends LS{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==fS.promise&&!1===t.common.async)return kS(t,{code:gS.invalid_type,expected:fS.promise,received:t.parsedType}),SS;const s=t.parsedType===fS.promise?t.data:Promise.resolve(t.data);return PS(s.then(e=>this._def.type.parseAsync(e,{path:t.path,errorMap:t.common.contextualErrorMap})))}}q_.create=(e,t)=>new q_({type:e,typeName:X_.ZodPromise,...MS(t)});class z_ extends LS{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===X_.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:s}=this._processInputParams(e),n=this._def.effect||null,r={addIssue:e=>{kS(s,e),e.fatal?t.abort():t.dirty()},get path(){return s.path}};if(r.addIssue=r.addIssue.bind(r),"preprocess"===n.type){const e=n.transform(s.data,r);if(s.common.async)return Promise.resolve(e).then(async e=>{if("aborted"===t.value)return SS;const n=await this._def.schema._parseAsync({data:e,path:s.path,parent:s});return"aborted"===n.status?SS:"dirty"===n.status||"dirty"===t.value?_S(n.value):n});{if("aborted"===t.value)return SS;const n=this._def.schema._parseSync({data:e,path:s.path,parent:s});return"aborted"===n.status?SS:"dirty"===n.status||"dirty"===t.value?_S(n.value):n}}if("refinement"===n.type){const e=e=>{const t=n.refinement(e,r);if(s.common.async)return Promise.resolve(t);if(t instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return e};if(!1===s.common.async){const n=this._def.schema._parseSync({data:s.data,path:s.path,parent:s});return"aborted"===n.status?SS:("dirty"===n.status&&t.dirty(),e(n.value),{status:t.value,value:n.value})}return this._def.schema._parseAsync({data:s.data,path:s.path,parent:s}).then(s=>"aborted"===s.status?SS:("dirty"===s.status&&t.dirty(),e(s.value).then(()=>({status:t.value,value:s.value}))))}if("transform"===n.type){if(!1===s.common.async){const e=this._def.schema._parseSync({data:s.data,path:s.path,parent:s});if(!TS(e))return SS;const a=n.transform(e.value,r);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:a}}return this._def.schema._parseAsync({data:s.data,path:s.path,parent:s}).then(e=>TS(e)?Promise.resolve(n.transform(e.value,r)).then(e=>({status:t.value,value:e})):SS)}pS.assertNever(n)}}z_.create=(e,t,s)=>new z_({schema:e,typeName:X_.ZodEffects,effect:t,...MS(s)}),z_.createWithPreprocess=(e,t,s)=>new z_({schema:t,effect:{type:"preprocess",transform:e},typeName:X_.ZodEffects,...MS(s)});class V_ extends LS{_parse(e){return this._getType(e)===fS.undefined?PS(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}V_.create=(e,t)=>new V_({innerType:e,typeName:X_.ZodOptional,...MS(t)});class B_ extends LS{_parse(e){return this._getType(e)===fS.null?PS(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}B_.create=(e,t)=>new B_({innerType:e,typeName:X_.ZodNullable,...MS(t)});class $_ extends LS{_parse(e){const{ctx:t}=this._processInputParams(e);let s=t.data;return t.parsedType===fS.undefined&&(s=this._def.defaultValue()),this._def.innerType._parse({data:s,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}$_.create=(e,t)=>new $_({innerType:e,typeName:X_.ZodDefault,defaultValue:"function"==typeof t.default?t.default:()=>t.default,...MS(t)});class W_ extends LS{_parse(e){const{ctx:t}=this._processInputParams(e),s={...t,common:{...t.common,issues:[]}},n=this._def.innerType._parse({data:s.data,path:s.path,parent:{...s}});return AS(n)?n.then(e=>({status:"valid",value:"valid"===e.status?e.value:this._def.catchValue({get error(){return new yS(s.common.issues)},input:s.data})})):{status:"valid",value:"valid"===n.status?n.value:this._def.catchValue({get error(){return new yS(s.common.issues)},input:s.data})}}removeCatch(){return this._def.innerType}}W_.create=(e,t)=>new W_({innerType:e,typeName:X_.ZodCatch,catchValue:"function"==typeof t.catch?t.catch:()=>t.catch,...MS(t)});class U_ extends LS{_parse(e){if(this._getType(e)!==fS.nan){const t=this._getOrReturnCtx(e);return kS(t,{code:gS.invalid_type,expected:fS.nan,received:t.parsedType}),SS}return{status:"valid",value:e.data}}}U_.create=e=>new U_({typeName:X_.ZodNaN,...MS(e)});const K_=Symbol("zod_brand");class H_ extends LS{_parse(e){const{ctx:t}=this._processInputParams(e),s=t.data;return this._def.type._parse({data:s,path:t.path,parent:t})}unwrap(){return this._def.type}}class Z_ extends LS{_parse(e){const{status:t,ctx:s}=this._processInputParams(e);if(s.common.async){return(async()=>{const e=await this._def.in._parseAsync({data:s.data,path:s.path,parent:s});return"aborted"===e.status?SS:"dirty"===e.status?(t.dirty(),_S(e.value)):this._def.out._parseAsync({data:e.value,path:s.path,parent:s})})()}{const e=this._def.in._parseSync({data:s.data,path:s.path,parent:s});return"aborted"===e.status?SS:"dirty"===e.status?(t.dirty(),{status:"dirty",value:e.value}):this._def.out._parseSync({data:e.value,path:s.path,parent:s})}}static create(e,t){return new Z_({in:e,out:t,typeName:X_.ZodPipeline})}}class Q_ extends LS{_parse(e){const t=this._def.innerType._parse(e),s=e=>(TS(e)&&(e.value=Object.freeze(e.value)),e);return AS(t)?t.then(e=>s(e)):s(t)}unwrap(){return this._def.innerType}}function G_(e,t){const s="function"==typeof e?e(t):"string"==typeof e?{message:e}:e;return"string"==typeof s?{message:s}:s}function Y_(e,t={},s){return e?v_.create().superRefine((n,r)=>{const a=e(n);if(a instanceof Promise)return a.then(e=>{if(!e){const e=G_(t,n),a=e.fatal??s??!0;r.addIssue({code:"custom",...e,fatal:a})}});if(!a){const e=G_(t,n),a=e.fatal??s??!0;r.addIssue({code:"custom",...e,fatal:a})}}):v_.create()}Q_.create=(e,t)=>new Q_({innerType:e,typeName:X_.ZodReadonly,...MS(t)});const J_={object:w_.lazycreate};var X_,eP;(eP=X_||(X_={})).ZodString="ZodString",eP.ZodNumber="ZodNumber",eP.ZodNaN="ZodNaN",eP.ZodBigInt="ZodBigInt",eP.ZodBoolean="ZodBoolean",eP.ZodDate="ZodDate",eP.ZodSymbol="ZodSymbol",eP.ZodUndefined="ZodUndefined",eP.ZodNull="ZodNull",eP.ZodAny="ZodAny",eP.ZodUnknown="ZodUnknown",eP.ZodNever="ZodNever",eP.ZodVoid="ZodVoid",eP.ZodArray="ZodArray",eP.ZodObject="ZodObject",eP.ZodUnion="ZodUnion",eP.ZodDiscriminatedUnion="ZodDiscriminatedUnion",eP.ZodIntersection="ZodIntersection",eP.ZodTuple="ZodTuple",eP.ZodRecord="ZodRecord",eP.ZodMap="ZodMap",eP.ZodSet="ZodSet",eP.ZodFunction="ZodFunction",eP.ZodLazy="ZodLazy",eP.ZodLiteral="ZodLiteral",eP.ZodEnum="ZodEnum",eP.ZodEffects="ZodEffects",eP.ZodNativeEnum="ZodNativeEnum",eP.ZodOptional="ZodOptional",eP.ZodNullable="ZodNullable",eP.ZodDefault="ZodDefault",eP.ZodCatch="ZodCatch",eP.ZodPromise="ZodPromise",eP.ZodBranded="ZodBranded",eP.ZodPipeline="ZodPipeline",eP.ZodReadonly="ZodReadonly";const tP=l_.create,sP=d_.create,nP=U_.create,rP=u_.create,aP=m_.create,iP=p_.create,oP=h_.create,lP=x_.create,cP=f_.create,dP=v_.create,uP=g_.create,mP=y_.create,pP=b_.create,hP=j_.create,xP=w_.create,fP=w_.strictCreate,vP=k_.create,gP=S_.create,yP=P_.create,bP=E_.create,jP=D_.create,NP=T_.create,wP=A_.create,kP=O_.create,CP=R_.create,SP=F_.create,_P=M_.create,PP=L_.create,EP=q_.create,DP=z_.create,TP=V_.create,AP=B_.create,OP=z_.createWithPreprocess,RP=Z_.create,FP={string:e=>l_.create({...e,coerce:!0}),number:e=>d_.create({...e,coerce:!0}),boolean:e=>m_.create({...e,coerce:!0}),bigint:e=>u_.create({...e,coerce:!0}),date:e=>p_.create({...e,coerce:!0})},IP=SS,MP=Object.freeze(Object.defineProperty({__proto__:null,BRAND:K_,DIRTY:_S,EMPTY_PATH:[],INVALID:SS,NEVER:IP,OK:PS,ParseStatus:CS,Schema:LS,ZodAny:v_,ZodArray:j_,ZodBigInt:u_,ZodBoolean:m_,ZodBranded:H_,ZodCatch:W_,ZodDate:p_,ZodDefault:$_,ZodDiscriminatedUnion:S_,ZodEffects:z_,ZodEnum:M_,ZodError:yS,get ZodFirstPartyTypeKind(){return X_},ZodFunction:O_,ZodIntersection:P_,ZodIssueCode:gS,ZodLazy:R_,ZodLiteral:F_,ZodMap:T_,ZodNaN:U_,ZodNativeEnum:L_,ZodNever:y_,ZodNull:f_,ZodNullable:B_,ZodNumber:d_,ZodObject:w_,ZodOptional:V_,ZodParsedType:fS,ZodPipeline:Z_,ZodPromise:q_,ZodReadonly:Q_,ZodRecord:D_,ZodSchema:LS,ZodSet:A_,ZodString:l_,ZodSymbol:h_,ZodTransformer:z_,ZodTuple:E_,ZodType:LS,ZodUndefined:x_,ZodUnion:k_,ZodUnknown:g_,ZodVoid:b_,addIssueToContext:kS,any:dP,array:hP,bigint:rP,boolean:aP,coerce:FP,custom:Y_,date:iP,datetimeRegex:r_,defaultErrorMap:bS,discriminatedUnion:gP,effect:DP,enum:_P,function:kP,getErrorMap:NS,getParsedType:vS,instanceof:(e,t={message:`Input not instance of ${e.name}`})=>Y_(t=>t instanceof e,t),intersection:yP,isAborted:ES,isAsync:AS,isDirty:DS,isValid:TS,late:J_,lazy:CP,literal:SP,makeIssue:wS,map:NP,nan:nP,nativeEnum:PP,never:mP,null:cP,nullable:AP,number:sP,object:xP,get objectUtil(){return xS},oboolean:()=>aP().optional(),onumber:()=>sP().optional(),optional:TP,ostring:()=>tP().optional(),pipeline:RP,preprocess:OP,promise:EP,quotelessJson:e=>JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:"),record:jP,set:wP,setErrorMap:function(e){jS=e},strictObject:fP,string:tP,symbol:oP,transformer:DP,tuple:bP,undefined:lP,union:vP,unknown:uP,get util(){return pS},void:pP},Symbol.toStringTag,{value:"Module"})),LP=-128,qP=127,zP=255,VP=-32768,BP=32767,$P=65535,WP=-8388608,UP=8388607,KP=16777215,HP=-2147483648,ZP=2147483647,QP=4294967295,GP=-0x800000000000,YP=0x7fffffffffff,JP=0xffffffffffff,XP=-9223372036854775808n,eE=9223372036854775807n,tE=18446744073709551615n;function sE(e,t){return t.includes(e.columnType)}const nE=vP([tP(),sP(),aP(),cP()]),rE=vP([nE,jP(dP()),hP(dP())]),aE=Y_(e=>e instanceof Buffer);function iE(e,t){const s=(null==t?void 0:t.zodInstance)??MP,n=(null==t?void 0:t.coerce)??{};let r;return function(e){return"enumValues"in e&&Array.isArray(e.enumValues)&&e.enumValues.length>0}(e)&&(r=e.enumValues.length?s.enum(e.enumValues):s.string()),r||(sE(e,["PgGeometry","PgPointTuple"])?r=s.tuple([s.number(),s.number()]):sE(e,["PgGeometryObject","PgPointObject"])?r=s.object({x:s.number(),y:s.number()}):sE(e,["PgHalfVector","PgVector"])?(r=s.array(s.number()),r=e.dimensions?r.length(e.dimensions):r):sE(e,["PgLine"])?r=s.tuple([s.number(),s.number(),s.number()]):sE(e,["PgLineABC"])?r=s.object({a:s.number(),b:s.number(),c:s.number()}):sE(e,["PgArray"])?(r=s.array(iE(e.baseColumn,s)),r=e.size?r.length(e.size):r):"array"===e.dataType?r=s.array(s.any()):"number"===e.dataType?r=function(e,t,s){let n,r,a=e.getSQLType().includes("unsigned"),i=!1;sE(e,["MySqlTinyInt","SingleStoreTinyInt"])?(n=a?0:LP,r=a?zP:qP,i=!0):sE(e,["PgSmallInt","PgSmallSerial","MySqlSmallInt","SingleStoreSmallInt"])?(n=a?0:VP,r=a?$P:BP,i=!0):sE(e,["PgReal","MySqlFloat","MySqlMediumInt","SingleStoreMediumInt","SingleStoreFloat"])?(n=a?0:WP,r=a?KP:UP,i=sE(e,["MySqlMediumInt","SingleStoreMediumInt"])):sE(e,["PgInteger","PgSerial","MySqlInt","SingleStoreInt"])?(n=a?0:HP,r=a?QP:ZP,i=!0):sE(e,["PgDoublePrecision","MySqlReal","MySqlDouble","SingleStoreReal","SingleStoreDouble","SQLiteReal"])?(n=a?0:GP,r=a?JP:YP):sE(e,["PgBigInt53","PgBigSerial53","MySqlBigInt53","MySqlSerial","SingleStoreBigInt53","SingleStoreSerial","SQLiteInteger"])?(a=a||sE(e,["MySqlSerial","SingleStoreSerial"]),n=a?0:Number.MIN_SAFE_INTEGER,r=Number.MAX_SAFE_INTEGER,i=!0):sE(e,["MySqlYear","SingleStoreYear"])?(n=1901,r=2155,i=!0):(n=Number.MIN_SAFE_INTEGER,r=Number.MAX_SAFE_INTEGER);let o=!0===s||(null==s?void 0:s.number)?t.coerce.number():t.number();return o=o.min(n).max(r),i?o.int():o}(e,s,n):"bigint"===e.dataType?r=function(e,t,s){const n=e.getSQLType().includes("unsigned"),r=n?0n:XP,a=n?tE:eE,i=!0===s||(null==s?void 0:s.bigint)?t.coerce.bigint():t.bigint();return i.min(r).max(a)}(e,s,n):"boolean"===e.dataType?r=!0===n||n.boolean?s.coerce.boolean():s.boolean():"date"===e.dataType?r=!0===n||n.date?s.coerce.date():s.date():"string"===e.dataType?r=function(e,t,s){if(sE(e,["PgUUID"]))return t.string().uuid();let n,r,a=!1;sE(e,["PgVarchar","SQLiteText"])?n=e.length:sE(e,["MySqlVarChar","SingleStoreVarChar"])?n=e.length??$P:sE(e,["MySqlText","SingleStoreText"])&&(n="longtext"===e.textType?QP:"mediumtext"===e.textType?KP:"text"===e.textType?$P:zP);sE(e,["PgChar","MySqlChar","SingleStoreChar"])&&(n=e.length,a=!0);sE(e,["PgBinaryVector"])&&(r=/^[01]+$/,n=e.dimensions);let i=!0===s||(null==s?void 0:s.string)?t.coerce.string():t.string();return i=r?i.regex(r):i,n&&a?i.length(n):n?i.max(n):i}(e,s,n):"json"===e.dataType?r=rE:"custom"===e.dataType?r=s.any():"buffer"===e.dataType&&(r=aE)),r||(r=s.any()),r}function oE(e){return zw(e)?e[qw.Symbol.Columns]:e[Dw].selectedFields}function lE(e,t,s,n){const r={};for(const[a,i]of Object.entries(e)){if(!uw(i,mw)&&!uw(i,$w)&&!uw(i,$w.Aliased)&&"object"==typeof i){const e=zw(i)||Xw(i)?oE(i):i;r[a]=lE(e,t[a]??{},s,n);continue}const e=t[a];if(void 0!==e&&"function"!=typeof e){r[a]=e;continue}const o=uw(i,mw)?i:void 0,l=o?iE(o,n):dP(),c="function"==typeof e?e(l):l;s.never(o)||(r[a]=c,o&&(s.nullable(o)&&(r[a]=r[a].nullable()),s.optional(o)&&(r[a]=r[a].optional())))}return xP(r)}const cE={never:e=>{var t,s;return"always"===(null==(t=null==e?void 0:e.generated)?void 0:t.type)||"always"===(null==(s=null==e?void 0:e.generatedIdentity)?void 0:s.type)},optional:e=>!e.notNull||e.notNull&&e.hasDefault,nullable:e=>!e.notNull},dE=(e,t)=>lE(oE(e),{},cE);var uE=mS("users",{id:SC("id").primaryKey(),email:FC("email").notNull().unique(),password:FC("password").notNull(),firstName:FC("first_name").notNull(),lastName:FC("last_name").notNull(),phone:FC("phone").notNull(),role:FC("role").notNull().default("customer"),isVerified:hk("is_verified").default(!1),verificationToken:FC("verification_token"),resetPasswordToken:FC("reset_password_token"),resetPasswordExpires:$C("reset_password_expires"),lastLogin:$C("last_login"),loginAttempts:Lk("login_attempts").default(0),lockUntil:$C("lock_until"),twoFactorSecret:FC("two_factor_secret"),twoFactorEnabled:hk("two_factor_enabled").default(!1),companyName:FC("company_name"),siret:FC("siret"),address:FC("address"),city:FC("city"),postalCode:FC("postal_code"),country:FC("country").default("FR"),preferredLanguage:FC("preferred_language").default("fr"),marketingConsent:hk("marketing_consent").default(!1),isActive:hk("is_active").default(!0),profilePicture:FC("profile_picture"),createdAt:$C("created_at").defaultNow().notNull(),updatedAt:$C("updated_at").defaultNow().notNull()}),mE=mS("services",{id:SC("id").primaryKey(),name:FC("name").notNull(),volume:Lk("volume").notNull(),basePrice:lC("base_price",{precision:10,scale:2}).notNull(),description:FC("description"),imageUrl:FC("image_url"),length:lC("length",{precision:5,scale:2}),width:lC("width",{precision:5,scale:2}),height:lC("height",{precision:5,scale:2}),wasteTypes:FC("waste_types").array(),maxWeight:Lk("max_weight"),includedServices:FC("included_services").array().default([]),isActive:hk("is_active").default(!0),createdAt:$C("created_at").defaultNow(),updatedAt:$C("updated_at").defaultNow()}),pE=mS("time_slots",{id:SC("id").primaryKey(),date:FC("date").notNull(),startTime:FC("start_time").notNull(),endTime:FC("end_time").notNull(),isAvailable:hk("is_available").default(!0),maxBookings:Lk("max_bookings").default(5),currentBookings:Lk("current_bookings").default(0)}),hE=mS("orders",{id:SC("id").primaryKey(),orderNumber:FC("order_number").notNull().unique(),userId:Lk("user_id"),serviceId:Lk("service_id").notNull(),deliveryTimeSlotId:Lk("delivery_time_slot_id"),pickupTimeSlotId:Lk("pickup_time_slot_id"),customerFirstName:FC("customer_first_name").notNull(),customerLastName:FC("customer_last_name").notNull(),customerEmail:FC("customer_email").notNull(),customerPhone:FC("customer_phone").notNull(),deliveryStreet:FC("delivery_street").notNull(),deliveryCity:FC("delivery_city").notNull(),deliveryPostalCode:FC("delivery_postal_code").notNull(),deliveryCountry:FC("delivery_country").default("FR"),deliveryNotes:FC("delivery_notes"),basePrice:lC("base_price",{precision:10,scale:2}).notNull(),durationDays:Lk("duration_days").notNull(),durationPrice:lC("duration_price",{precision:10,scale:2}).default("0"),deliveryFee:lC("delivery_fee",{precision:10,scale:2}).default("0"),totalHT:lC("total_ht",{precision:10,scale:2}).notNull(),vat:lC("vat",{precision:10,scale:2}).notNull(),totalTTC:lC("total_ttc",{precision:10,scale:2}).notNull(),status:FC("status").notNull().default("pending"),paymentStatus:FC("payment_status").notNull().default("pending"),stripePaymentIntentId:FC("stripe_payment_intent_id"),estimatedDeliveryDate:$C("estimated_delivery_date"),confirmedDeliveryDate:$C("confirmed_delivery_date"),proposedDeliveryDate:$C("proposed_delivery_date"),clientValidationStatus:FC("client_validation_status").default("pending"),clientValidationToken:FC("client_validation_token"),clientValidationExpiresAt:$C("client_validation_expires_at"),deliveryDateValidatedBy:Lk("delivery_date_validated_by"),deliveryDateValidatedAt:$C("delivery_date_validated_at"),adminValidatedBy:Lk("admin_validated_by"),adminValidatedAt:$C("admin_validated_at"),confirmationEmailSent:hk("confirmation_email_sent").default(!1),validationEmailSent:hk("validation_email_sent").default(!1),deliveryDateProposalEmailSent:hk("delivery_date_proposal_email_sent").default(!1),adminNotes:FC("admin_notes"),wasteTypes:FC("waste_types").array(),createdAt:$C("created_at").defaultNow().notNull(),updatedAt:$C("updated_at").defaultNow().notNull()});mS("sessions",{id:FC("id").primaryKey(),userId:Lk("user_id").notNull().references(function(){return uE.id},{onDelete:"cascade"}),token:FC("token").notNull().unique(),expiresAt:$C("expires_at").notNull(),createdAt:$C("created_at").defaultNow().notNull(),userAgent:FC("user_agent"),ipAddress:FC("ip_address")});var xE=mS("rental_pricing",{id:SC("id").primaryKey(),serviceId:Lk("service_id").notNull().references(function(){return mE.id},{onDelete:"cascade"}),dailyRate:lC("daily_rate",{precision:10,scale:2}).notNull(),billingStartDay:Lk("billing_start_day").notNull().default(0),maxTonnage:lC("max_tonnage",{precision:10,scale:2}).notNull().default("0"),durationThreshold1:Lk("duration_threshold_1").default(7),durationSupplement1:lC("duration_supplement_1",{precision:10,scale:2}).default("0"),durationThreshold2:Lk("duration_threshold_2").default(14),durationSupplement2:lC("duration_supplement_2",{precision:10,scale:2}).default("0"),durationThreshold3:Lk("duration_threshold_3").default(30),durationSupplement3:lC("duration_supplement_3",{precision:10,scale:2}).default("0"),isActive:hk("is_active").default(!0),createdAt:$C("created_at").defaultNow().notNull(),updatedAt:$C("updated_at").defaultNow().notNull()}),fE=mS("transport_pricing",{id:SC("id").primaryKey(),pricePerKm:lC("price_per_km",{precision:10,scale:2}).notNull().default("0"),minimumFlatRate:lC("minimum_flat_rate",{precision:10,scale:2}).notNull().default("0"),hourlyRate:lC("hourly_rate",{precision:10,scale:2}).notNull().default("0"),immediateLoadingEnabled:hk("immediate_loading_enabled").default(!0),isActive:hk("is_active").default(!0),createdAt:$C("created_at").defaultNow().notNull(),updatedAt:$C("updated_at").defaultNow().notNull()}),vE=mS("waste_types",{id:SC("id").primaryKey(),name:QC("name",{length:255}).notNull(),description:FC("description"),isActive:hk("is_active").default(!0),createdAt:$C("created_at").defaultNow().notNull(),updatedAt:$C("updated_at").defaultNow().notNull()}),gE=mS("treatment_pricing",{id:SC("id").primaryKey(),wasteTypeId:Lk("waste_type_id").notNull().references(function(){return vE.id},{onDelete:"cascade"}),pricePerTon:lC("price_per_ton",{precision:10,scale:2}).notNull(),treatmentType:QC("treatment_type",{length:100}).notNull(),treatmentCode:QC("treatment_code",{length:10}).notNull(),outletAddress:FC("outlet_address"),isManualTreatment:hk("is_manual_treatment").default(!1),isActive:hk("is_active").default(!0),createdAt:$C("created_at").defaultNow().notNull(),updatedAt:$C("updated_at").defaultNow().notNull()}),yE=mS("bank_deposits",{id:SC("id").primaryKey(),serviceId:Lk("service_id").notNull().references(function(){return mE.id},{onDelete:"cascade"}),wasteTypeId:Lk("waste_type_id").notNull().references(function(){return vE.id},{onDelete:"cascade"}),depositAmount:lC("deposit_amount",{precision:10,scale:2}).notNull(),description:FC("description"),isActive:hk("is_active").default(!0),createdAt:$C("created_at").defaultNow().notNull(),updatedAt:$C("updated_at").defaultNow().notNull()});dE(uE).omit({id:!0,createdAt:!0,updatedAt:!0,isVerified:!0,verificationToken:!0,resetPasswordToken:!0,resetPasswordExpires:!0,lastLogin:!0,loginAttempts:!0,lockUntil:!0,twoFactorSecret:!0}).extend({password:tP().min(8,"Le mot de passe doit contenir au moins 8 caractères"),email:tP().email("Format d'email invalide"),phone:tP().min(10,"Numéro de téléphone invalide"),verificationToken:tP().optional()});var bE=xP({email:tP().email("Format d'email invalide"),password:tP().min(1,"Mot de passe requis"),rememberMe:aP().optional()}),jE=dE(uE).omit({id:!0,password:!0,createdAt:!0,updatedAt:!0,isVerified:!0,verificationToken:!0,resetPasswordToken:!0,resetPasswordExpires:!0,lastLogin:!0,loginAttempts:!0,lockUntil:!0,twoFactorSecret:!0}).partial(),NE=xP({currentPassword:tP().min(1,"Mot de passe actuel requis"),newPassword:tP().min(8,"Le nouveau mot de passe doit contenir au moins 8 caractères"),confirmPassword:tP().min(1,"Confirmation du mot de passe requise")}).refine(function(e){return e.newPassword===e.confirmPassword},{message:"Les mots de passe ne correspondent pas",path:["confirmPassword"]});dE(mE).omit({id:!0}),dE(pE).omit({id:!0}),dE(hE).omit({id:!0,orderNumber:!0,createdAt:!0,updatedAt:!0}),dE(xE).omit({id:!0,createdAt:!0,updatedAt:!0}),dE(xE).omit({id:!0,serviceId:!0,createdAt:!0,updatedAt:!0}),dE(fE).omit({id:!0,createdAt:!0,updatedAt:!0}),dE(fE).omit({id:!0,createdAt:!0,updatedAt:!0}),dE(vE).omit({id:!0,createdAt:!0,updatedAt:!0}),dE(gE).omit({id:!0,createdAt:!0,updatedAt:!0}),dE(gE).omit({id:!0,wasteTypeId:!0,createdAt:!0,updatedAt:!0});var wE=mS("company_activities",{id:SC("id").primaryKey(),collecteBenne:hk("collecte_benne").default(!1),collecteBac:hk("collecte_bac").default(!1),collecteVrac:hk("collecte_vrac").default(!1),collecteBigBag:hk("collecte_big_bag").default(!1),collecteSacGravats:hk("collecte_sac_gravats").default(!1),collecteHuileFriture:hk("collecte_huile_friture").default(!1),collecteDechetsBureaux:hk("collecte_dechets_bureaux").default(!1),wasteTypes:Hk("waste_types").$type().default([]),equipmentMultibenne:Hk("equipment_multibenne").$type().default([]),equipmentAmpliroll:Hk("equipment_ampliroll").$type().default([]),equipmentCaissePalette:Hk("equipment_caisse_palette").$type().default([]),equipmentRolls:Hk("equipment_rolls").$type().default([]),equipmentContenantAlimentaire:Hk("equipment_contenant_alimentaire").$type().default([]),equipmentBac:Hk("equipment_bac").$type().default([]),equipmentBennesFermees:Hk("equipment_bennes_fermees").$type().default([]),prixForfaitEnabled:hk("prix_forfait_enabled").default(!1),industrialSiteAddress:FC("industrial_site_address"),industrialSiteCity:FC("industrial_site_city"),industrialSitePostalCode:FC("industrial_site_postal_code"),isActive:hk("is_active").default(!0),createdAt:$C("created_at").defaultNow(),updatedAt:$C("updated_at").defaultNow()});dE(wE).omit({id:!0,createdAt:!0,updatedAt:!0}),dE(wE).omit({id:!0,createdAt:!0,updatedAt:!0}),dE(yE).omit({id:!0,createdAt:!0,updatedAt:!0}),dE(yE).omit({id:!0,createdAt:!0,updatedAt:!0});var kE=mS("email_logs",{id:Lk("id").primaryKey().generatedByDefaultAsIdentity(),orderId:Lk("order_id").notNull().references(function(){return hE.id}),emailType:FC("email_type").notNull(),recipientEmail:FC("recipient_email").notNull(),subject:FC("subject").notNull(),emailContent:FC("email_content"),sentAt:$C("sent_at").defaultNow().notNull(),status:FC("status").notNull().default("sent"),errorMessage:FC("error_message"),sentBy:Lk("sent_by")}),CE=mS("audit_logs",{id:Lk("id").primaryKey().generatedByDefaultAsIdentity(),userId:Lk("user_id").references(function(){return uE.id}),orderId:Lk("order_id").references(function(){return hE.id}),action:FC("action").notNull(),entityType:FC("entity_type").notNull(),entityId:Lk("entity_id"),oldValues:FC("old_values"),newValues:FC("new_values"),ipAddress:FC("ip_address"),userAgent:FC("user_agent"),createdAt:$C("created_at").defaultNow().notNull()});dE(kE).omit({id:!0,sentAt:!0}),dE(CE).omit({id:!0,createdAt:!0});var SE="Checkbox",[_E,PE]=Gi(SE),[EE,DE]=_E(SE);function TE(e){const{__scopeCheckbox:t,checked:s,children:n,defaultChecked:r,disabled:a,form:i,name:o,onCheckedChange:l,required:c,value:d="on",internal_do_not_use_render:u}=e,[m,p]=Co({prop:s,defaultProp:r??!1,onChange:l,caller:SE}),[h,x]=hr.useState(null),[f,v]=hr.useState(null),g=hr.useRef(!1),y=!h||(!!i||!!h.closest("form")),b={checked:m,disabled:a,setChecked:p,control:h,setControl:x,name:o,form:i,value:d,hasConsumerStoppedPropagationRef:g,required:c,defaultChecked:!zE(r)&&r,isFormControl:y,bubbleInput:f,setBubbleInput:v};return Fr.jsx(EE,{scope:t,...b,children:qE(u)?u(b):n})}var AE="CheckboxTrigger",OE=hr.forwardRef(({__scopeCheckbox:e,onKeyDown:t,onClick:s,...n},r)=>{const{control:a,value:i,disabled:o,checked:l,required:c,setControl:d,setChecked:u,hasConsumerStoppedPropagationRef:m,isFormControl:p,bubbleInput:h}=DE(AE,e),x=Qi(r,d),f=hr.useRef(l);return hr.useEffect(()=>{const e=null==a?void 0:a.form;if(e){const t=()=>u(f.current);return e.addEventListener("reset",t),()=>e.removeEventListener("reset",t)}},[a,u]),Fr.jsx(ao.button,{type:"button",role:"checkbox","aria-checked":zE(l)?"mixed":l,"aria-required":c,"data-state":VE(l),"data-disabled":o?"":void 0,disabled:o,value:i,...n,ref:x,onKeyDown:Ki(t,e=>{"Enter"===e.key&&e.preventDefault()}),onClick:Ki(s,e=>{u(e=>!!zE(e)||!e),h&&p&&(m.current=e.isPropagationStopped(),m.current||e.stopPropagation())})})});OE.displayName=AE;var RE=hr.forwardRef((e,t)=>{const{__scopeCheckbox:s,name:n,checked:r,defaultChecked:a,required:i,disabled:o,value:l,onCheckedChange:c,form:d,...u}=e;return Fr.jsx(TE,{__scopeCheckbox:s,checked:r,defaultChecked:a,disabled:o,required:i,onCheckedChange:c,name:n,form:d,value:l,internal_do_not_use_render:({isFormControl:e})=>Fr.jsxs(Fr.Fragment,{children:[Fr.jsx(OE,{...u,ref:t,__scopeCheckbox:s}),e&&Fr.jsx(LE,{__scopeCheckbox:s})]})})});RE.displayName=SE;var FE="CheckboxIndicator",IE=hr.forwardRef((e,t)=>{const{__scopeCheckbox:s,forceMount:n,...r}=e,a=DE(FE,s);return Fr.jsx(No,{present:n||zE(a.checked)||!0===a.checked,children:Fr.jsx(ao.span,{"data-state":VE(a.checked),"data-disabled":a.disabled?"":void 0,...r,ref:t,style:{pointerEvents:"none",...e.style}})})});IE.displayName=FE;var ME="CheckboxBubbleInput",LE=hr.forwardRef(({__scopeCheckbox:e,...t},s)=>{const{control:n,hasConsumerStoppedPropagationRef:r,checked:a,defaultChecked:i,required:o,disabled:l,name:c,value:d,form:u,bubbleInput:m,setBubbleInput:p}=DE(ME,e),h=Qi(s,p),x=cf(a),f=qm(n);hr.useEffect(()=>{const e=m;if(!e)return;const t=window.HTMLInputElement.prototype,s=Object.getOwnPropertyDescriptor(t,"checked").set,n=!r.current;if(x!==a&&s){const t=new Event("click",{bubbles:n});e.indeterminate=zE(a),s.call(e,!zE(a)&&a),e.dispatchEvent(t)}},[m,x,a,r]);const v=hr.useRef(!zE(a)&&a);return Fr.jsx(ao.input,{type:"checkbox","aria-hidden":!0,defaultChecked:i??v.current,required:o,disabled:l,name:c,value:d,form:u,...t,tabIndex:-1,ref:h,style:{...t.style,...f,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});function qE(e){return"function"==typeof e}function zE(e){return"indeterminate"===e}function VE(e){return zE(e)?"indeterminate":e?"checked":"unchecked"}LE.displayName=ME;var BE=hr.forwardRef(function(e,t){var s=e.className,n=function(e,t){var s={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(s[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(s[n[r]]=e[n[r]])}return s}(e,["className"]);return Fr.jsx(RE,{ref:t,className:Fd("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",s),...n,children:Fr.jsx(IE,{className:Fd("flex items-center justify-center text-current"),children:Fr.jsx(ql,{className:"h-4 w-4"})})})});function $E({onSuccess:e,onSwitchToRegister:t,onForgotPassword:s}){const[n,r]=hr.useState(!1),[a,i]=hr.useState(!1),[o,l]=hr.useState(""),c=function(){var e=this,t=Ni(),s=Ui().toast;return Ei({mutationFn:function(t){return Op(e,void 0,void 0,function(){return Rp(this,function(e){switch(e.label){case 0:return[4,Oi("POST","/api/auth/login",t)];case 1:return[2,e.sent().json()]}})})},onSuccess:function(e){e.token&&localStorage.setItem("auth_token",e.token),e.sessionToken&&localStorage.setItem("session_token",e.sessionToken),t.setQueryData(["/api/auth/me"],e.user),s({title:"Connexion réussie",description:e.message||"Bienvenue !"})},onError:function(e){var t,n;(null===(t=e.message)||void 0===t?void 0:t.includes("403"))&&(null===(n=e.message)||void 0===n?void 0:n.includes("non vérifié"))?s({title:"Compte non vérifié",description:"Vérifiez votre email pour activer votre compte",variant:"destructive"}):s({title:"Erreur de connexion",description:e.message||"Échec de la connexion",variant:"destructive"})}})}(),d=function(){var e=this,t=Ui().toast;return Ei({mutationFn:function(t){return Op(e,void 0,void 0,function(){return Rp(this,function(e){switch(e.label){case 0:return[4,Oi("POST","/api/auth/resend-verification",{email:t})];case 1:return[2,e.sent().json()]}})})},onSuccess:function(e){t({title:"Email renvoyé",description:e.message||"L'email de vérification a été renvoyé avec succès"})},onError:function(e){t({title:"Erreur",description:e.message||"Échec du renvoi de l'email de vérification",variant:"destructive"})}})}(),u=nw({resolver:cw(bE),defaultValues:{email:"",password:"",rememberMe:!1}});return Fr.jsxs(nf,{className:"w-full max-w-md mx-auto",children:[Fr.jsxs(rf,{className:"space-y-1",children:[Fr.jsx(af,{className:"text-2xl font-bold text-center",children:"Connexion"}),Fr.jsx(of,{className:"text-center",children:"Accédez à votre compte Remondis"})]}),Fr.jsx(lf,{children:Fr.jsxs("form",{onSubmit:u.handleSubmit(async t=>{var s,n;try{await c.mutateAsync(t),null==e||e()}catch(r){(null==(s=r.message)?void 0:s.includes("403"))&&(null==(n=r.message)?void 0:n.includes("non vérifié"))&&(l(t.email),i(!0))}}),className:"space-y-4",children:[Fr.jsxs("div",{className:"space-y-2",children:[Fr.jsx(Wx,{htmlFor:"email",children:"Adresse email"}),Fr.jsxs("div",{className:"relative",children:[Fr.jsx(xc,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),Fr.jsx(zx,{id:"email",type:"email",placeholder:"votre@email.com",className:"pl-10",...u.register("email")})]}),u.formState.errors.email&&Fr.jsx("p",{className:"text-sm text-red-600",children:u.formState.errors.email.message})]}),Fr.jsxs("div",{className:"space-y-2",children:[Fr.jsx(Wx,{htmlFor:"password",children:"Mot de passe"}),Fr.jsxs("div",{className:"relative",children:[Fr.jsx(pc,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),Fr.jsx(zx,{id:"password",type:n?"text":"password",placeholder:"••••••••",className:"pl-10 pr-10",...u.register("password")}),Fr.jsx("button",{type:"button",onClick:()=>r(!n),className:"absolute right-3 top-3 h-4 w-4 text-muted-foreground hover:text-foreground",children:n?Fr.jsx(sc,{className:"h-4 w-4"}):Fr.jsx(nc,{className:"h-4 w-4"})})]}),u.formState.errors.password&&Fr.jsx("p",{className:"text-sm text-red-600",children:u.formState.errors.password.message})]}),Fr.jsxs("div",{className:"flex items-center space-x-2",children:[Fr.jsx(BE,{id:"rememberMe",...u.register("rememberMe")}),Fr.jsx(Wx,{htmlFor:"rememberMe",className:"text-sm",children:"Se souvenir de moi"})]}),Fr.jsx(Lp,{type:"submit",className:"w-full bg-red-600 hover:bg-red-700",disabled:c.isPending,children:c.isPending?"Connexion...":"Se connecter"}),a&&Fr.jsxs("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4",children:[Fr.jsxs("div",{className:"flex items-center mb-2",children:[Fr.jsx(Wl,{className:"h-5 w-5 text-orange-600 mr-2"}),Fr.jsx("span",{className:"text-sm font-medium text-orange-800",children:"Compte non vérifié"})]}),Fr.jsx("p",{className:"text-sm text-orange-700 mb-3",children:"Votre compte n'est pas encore vérifié. Vérifiez votre boîte email ou cliquez ci-dessous pour renvoyer l'email de vérification."}),Fr.jsx(Lp,{type:"button",onClick:async()=>{o&&(await d.mutateAsync(o),i(!1))},disabled:d.isPending,className:"w-full bg-orange-600 hover:bg-orange-700 text-white",size:"sm",children:d.isPending?"Envoi...":"Renvoyer l'email de vérification"})]}),Fr.jsxs("div",{className:"text-center space-y-2",children:[Fr.jsx(Lp,{type:"button",variant:"link",className:"text-sm text-muted-foreground hover:text-primary",children:"Mot de passe oublié ?"}),t&&Fr.jsxs("p",{className:"text-sm text-muted-foreground",children:["Pas encore de compte ?"," ",Fr.jsx(Lp,{type:"button",variant:"link",className:"p-0 h-auto text-red-600 hover:text-red-700",onClick:t,children:"Créer un compte"})]})]})]})})]})}BE.displayName=RE.displayName;const WE=e=>{const{children:t,...s}=e;return vr.createElement(dN.Provider,{value:s},t)},UE=hr.createContext({}),KE=({...e})=>Fr.jsx(UE.Provider,{value:{name:e.name},children:Fr.jsx(vN,{...e})}),HE=()=>{const e=hr.useContext(UE),t=hr.useContext(ZE),{getFieldState:s,formState:n}=uN(),r=s(e.name,n);if(!e)throw new Error("useFormField should be used within <FormField>");const{id:a}=t;return{id:a,name:e.name,formItemId:`${a}-form-item`,formDescriptionId:`${a}-form-item-description`,formMessageId:`${a}-form-item-message`,...r}},ZE=hr.createContext({}),QE=hr.forwardRef(({className:e,...t},s)=>{const n=hr.useId();return Fr.jsx(ZE.Provider,{value:{id:n},children:Fr.jsx("div",{ref:s,className:Fd("space-y-2",e),...t})})});QE.displayName="FormItem";const GE=hr.forwardRef(({className:e,...t},s)=>{const{error:n,formItemId:r}=HE();return Fr.jsx(Wx,{ref:s,className:Fd(n&&"text-destructive",e),htmlFor:r,...t})});GE.displayName="FormLabel";const YE=hr.forwardRef(({...e},t)=>{const{error:s,formItemId:n,formDescriptionId:r,formMessageId:a}=HE();return Fr.jsx(Xi,{ref:t,id:n,"aria-describedby":s?`${r} ${a}`:`${r}`,"aria-invalid":!!s,...e})});YE.displayName="FormControl";hr.forwardRef(({className:e,...t},s)=>{const{formDescriptionId:n}=HE();return Fr.jsx("p",{ref:s,id:n,className:Fd("text-sm text-muted-foreground",e),...t})}).displayName="FormDescription";const JE=hr.forwardRef(({className:e,children:t,...s},n)=>{const{error:r,formMessageId:a}=HE(),i=r?String((null==r?void 0:r.message)??""):t;return i?Fr.jsx("p",{ref:n,id:a,className:Fd("text-sm font-medium text-destructive",e),...s,children:i}):null});JE.displayName="FormMessage";const XE=xP({email:tP().email("Email invalide"),password:tP().min(8,"Le mot de passe doit contenir au moins 8 caractères").regex(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)/,"Le mot de passe doit contenir au moins une minuscule, une majuscule et un chiffre"),firstName:tP().min(2,"Le prénom doit contenir au moins 2 caractères"),lastName:tP().min(2,"Le nom doit contenir au moins 2 caractères"),phone:tP().min(10,"Numéro de téléphone invalide"),address:tP().optional(),postalCode:tP().optional(),city:tP().optional(),accountType:_P(["particulier","professionnel"]),companyName:tP().optional(),siret:tP().optional(),tvaNumber:tP().optional(),apeCode:tP().optional(),acceptTerms:aP().refine(e=>!0===e,{message:"Vous devez accepter les conditions générales"}),acceptPrivacy:aP().refine(e=>!0===e,{message:"Vous devez accepter la politique de confidentialité"}),marketingConsent:aP().optional()}).refine(e=>"professionnel"!==e.accountType||e.companyName&&e.companyName.length>=2&&e.siret&&14===e.siret.length&&e.tvaNumber&&e.tvaNumber.length>=11&&e.apeCode&&e.apeCode.length>=4,{message:"Les champs nom de l'entreprise, SIRET, numéro de TVA et code APE sont obligatoires pour les professionnels",path:["companyName"]});function eD({onSuccess:e,onSwitchToLogin:t}){const[s,n]=hr.useState(!1),{toast:r}=Ui(),a=nw({resolver:cw(XE),defaultValues:{email:"",password:"",firstName:"",lastName:"",phone:"",address:"",postalCode:"",city:"",accountType:"particulier",companyName:"",siret:"",tvaNumber:"",apeCode:"",acceptTerms:!1,acceptPrivacy:!1,marketingConsent:!1}}),i=a.watch("accountType"),o=Ei({mutationFn:async e=>Oi("POST","/api/auth/register",{...e,isCompany:"professionnel"===e.accountType}),onSuccess:()=>{r({title:"Inscription réussie",description:"Un email de vérification a été envoyé à votre adresse."}),null==e||e()},onError:e=>{r({title:"Erreur d'inscription",description:e.message||"Une erreur est survenue",variant:"destructive"})}});return Fr.jsxs(nf,{className:"w-full max-w-lg mx-auto",children:[Fr.jsxs(rf,{className:"space-y-1",children:[Fr.jsx(af,{className:"text-2xl font-bold text-center",children:"Créer un compte"}),Fr.jsx(of,{className:"text-center",children:"Rejoignez REMONDIS France pour vos besoins en gestion des déchets"})]}),Fr.jsx(WE,{...a,children:Fr.jsx("form",{onSubmit:a.handleSubmit(e=>{o.mutate(e)}),children:Fr.jsxs(lf,{className:"space-y-4",children:[Fr.jsx(KE,{control:a.control,name:"accountType",render:({field:e})=>Fr.jsxs(QE,{children:[Fr.jsx(GE,{children:"Type de compte"}),Fr.jsxs(Bv,{onValueChange:e.onChange,defaultValue:e.value,children:[Fr.jsx(YE,{children:Fr.jsx(Wv,{children:Fr.jsx($v,{placeholder:"Sélectionnez votre type de compte"})})}),Fr.jsxs(Hv,{children:[Fr.jsx(Zv,{value:"particulier",children:"Particulier"}),Fr.jsx(Zv,{value:"professionnel",children:"Entreprise"})]})]}),Fr.jsx(JE,{})]})}),Fr.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[Fr.jsx(KE,{control:a.control,name:"firstName",render:({field:e})=>Fr.jsxs(QE,{children:[Fr.jsx(GE,{children:"Prénom"}),Fr.jsx(YE,{children:Fr.jsxs("div",{className:"relative",children:[Fr.jsx(qc,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),Fr.jsx(zx,{placeholder:"Prénom",className:"pl-10",...e})]})}),Fr.jsx(JE,{})]})}),Fr.jsx(KE,{control:a.control,name:"lastName",render:({field:e})=>Fr.jsxs(QE,{children:[Fr.jsx(GE,{children:"Nom"}),Fr.jsx(YE,{children:Fr.jsxs("div",{className:"relative",children:[Fr.jsx(qc,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),Fr.jsx(zx,{placeholder:"Nom",className:"pl-10",...e})]})}),Fr.jsx(JE,{})]})})]}),"professionnel"===i&&Fr.jsxs(Fr.Fragment,{children:[Fr.jsx(KE,{control:a.control,name:"companyName",render:({field:e})=>Fr.jsxs(QE,{children:[Fr.jsx(GE,{children:"Nom de l'entreprise *"}),Fr.jsx(YE,{children:Fr.jsxs("div",{className:"relative",children:[Fr.jsx(Tl,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),Fr.jsx(zx,{placeholder:"Nom de votre entreprise",className:"pl-10",...e})]})}),Fr.jsx(JE,{})]})}),Fr.jsx(KE,{control:a.control,name:"siret",render:({field:e})=>Fr.jsxs(QE,{children:[Fr.jsx(GE,{children:"Numéro SIRET *"}),Fr.jsx(YE,{children:Fr.jsxs("div",{className:"relative",children:[Fr.jsx(ac,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),Fr.jsx(zx,{placeholder:"12345678901234",className:"pl-10",maxLength:14,...e})]})}),Fr.jsx(JE,{}),Fr.jsx("p",{className:"text-xs text-gray-500",children:"14 chiffres sans espaces"})]})}),Fr.jsx(KE,{control:a.control,name:"tvaNumber",render:({field:e})=>Fr.jsxs(QE,{children:[Fr.jsx(GE,{children:"Numéro de TVA intracommunautaire *"}),Fr.jsx(YE,{children:Fr.jsxs("div",{className:"relative",children:[Fr.jsx(ac,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),Fr.jsx(zx,{placeholder:"FR12345678901",className:"pl-10",...e})]})}),Fr.jsx(JE,{}),Fr.jsx("p",{className:"text-xs text-gray-500",children:"Format: FR + 11 chiffres"})]})}),Fr.jsx(KE,{control:a.control,name:"apeCode",render:({field:e})=>Fr.jsxs(QE,{children:[Fr.jsx(GE,{children:"Code APE *"}),Fr.jsx(YE,{children:Fr.jsxs("div",{className:"relative",children:[Fr.jsx(ac,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),Fr.jsx(zx,{placeholder:"3811Z",className:"pl-10",maxLength:5,...e})]})}),Fr.jsx(JE,{}),Fr.jsx("p",{className:"text-xs text-gray-500",children:"Code activité principale (4 chiffres + 1 lettre)"})]})})]}),Fr.jsx(KE,{control:a.control,name:"email",render:({field:e})=>Fr.jsxs(QE,{children:[Fr.jsx(GE,{children:"Email"}),Fr.jsx(YE,{children:Fr.jsxs("div",{className:"relative",children:[Fr.jsx(xc,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),Fr.jsx(zx,{type:"email",placeholder:"jean.dupont@email.com",className:"pl-10",...e})]})}),Fr.jsx(JE,{})]})}),Fr.jsx(KE,{control:a.control,name:"phone",render:({field:e})=>Fr.jsxs(QE,{children:[Fr.jsx(GE,{children:"Téléphone"}),Fr.jsx(YE,{children:Fr.jsxs("div",{className:"relative",children:[Fr.jsx(bc,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),Fr.jsx(zx,{type:"tel",placeholder:"0123456789",className:"pl-10",...e})]})}),Fr.jsx(JE,{})]})}),Fr.jsx(KE,{control:a.control,name:"password",render:({field:e})=>Fr.jsxs(QE,{children:[Fr.jsx(GE,{children:"Mot de passe"}),Fr.jsx(YE,{children:Fr.jsxs("div",{className:"relative",children:[Fr.jsx(pc,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),Fr.jsx(zx,{type:s?"text":"password",placeholder:"••••••••",className:"pl-10 pr-10",...e}),Fr.jsx("button",{type:"button",onClick:()=>n(!s),className:"absolute right-3 top-3 h-4 w-4 text-gray-400 hover:text-gray-600",children:s?Fr.jsx(sc,{}):Fr.jsx(nc,{})})]})}),Fr.jsx(JE,{}),Fr.jsx("p",{className:"text-xs text-gray-500",children:"Au moins 8 caractères avec une majuscule, une minuscule et un chiffre"})]})}),Fr.jsxs("div",{className:"space-y-3",children:[Fr.jsx(KE,{control:a.control,name:"acceptTerms",render:({field:e})=>Fr.jsxs(QE,{className:"flex flex-row items-start space-x-3 space-y-0",children:[Fr.jsx(YE,{children:Fr.jsx(BE,{checked:e.value,onCheckedChange:e.onChange})}),Fr.jsxs("div",{className:"space-y-1 leading-none",children:[Fr.jsxs(GE,{className:"text-sm",children:["J'accepte les"," ",Fr.jsx(Lp,{type:"button",variant:"link",className:"p-0 h-auto text-red-600 hover:text-red-700",onClick:()=>window.open("/legal","_blank"),children:"Conditions Générales de Vente"})," ","*"]}),Fr.jsx(JE,{})]})]})}),Fr.jsx(KE,{control:a.control,name:"acceptPrivacy",render:({field:e})=>Fr.jsxs(QE,{className:"flex flex-row items-start space-x-3 space-y-0",children:[Fr.jsx(YE,{children:Fr.jsx(BE,{checked:e.value,onCheckedChange:e.onChange})}),Fr.jsxs("div",{className:"space-y-1 leading-none",children:[Fr.jsxs(GE,{className:"text-sm",children:["J'accepte la"," ",Fr.jsx(Lp,{type:"button",variant:"link",className:"p-0 h-auto text-red-600 hover:text-red-700",onClick:()=>window.open("/privacy-policy","_blank"),children:"Politique de Confidentialité"})," ","*"]}),Fr.jsx(JE,{})]})]})}),Fr.jsx(KE,{control:a.control,name:"marketingConsent",render:({field:e})=>Fr.jsxs(QE,{className:"flex flex-row items-start space-x-3 space-y-0",children:[Fr.jsx(YE,{children:Fr.jsx(BE,{checked:e.value,onCheckedChange:e.onChange})}),Fr.jsx("div",{className:"space-y-1 leading-none",children:Fr.jsx(GE,{className:"text-sm",children:"J'accepte de recevoir des communications marketing"})})]})})]}),Fr.jsx(Lp,{type:"submit",className:"w-full bg-red-600 hover:bg-red-700",disabled:o.isPending,children:o.isPending?"Création...":"Créer mon compte"}),Fr.jsx("div",{className:"text-center",children:Fr.jsx(Lp,{type:"button",variant:"link",className:"text-sm text-red-600 hover:text-red-500",onClick:t,children:"Déjà un compte ? Se connecter"})})]})})})]})}const tD=xP({email:tP().email("Email invalide")});function sD({onBack:e}){const[t,s]=hr.useState(!1),{toast:n}=Ui(),r=nw({resolver:cw(tD),defaultValues:{email:""}}),a=Ei({mutationFn:async e=>Oi("POST","/api/auth/forgot-password",e),onSuccess:()=>{s(!0),n({title:"Email envoyé",description:"Vérifiez votre boîte mail pour réinitialiser votre mot de passe."})},onError:e=>{n({title:"Erreur",description:e.message||"Une erreur est survenue",variant:"destructive"})}});return t?Fr.jsxs(nf,{className:"w-full max-w-md mx-auto",children:[Fr.jsxs(rf,{className:"space-y-1",children:[Fr.jsx(af,{className:"text-2xl font-bold text-center",children:"Email envoyé"}),Fr.jsx(of,{className:"text-center",children:"Vérifiez votre boîte mail et suivez les instructions pour réinitialiser votre mot de passe."})]}),Fr.jsx(lf,{children:Fr.jsxs(Lp,{type:"button",variant:"outline",className:"w-full",onClick:e,children:[Fr.jsx(Cl,{className:"mr-2 h-4 w-4"}),"Retour à la connexion"]})})]}):Fr.jsxs(nf,{className:"w-full max-w-md mx-auto",children:[Fr.jsxs(rf,{className:"space-y-1",children:[Fr.jsx(af,{className:"text-2xl font-bold text-center",children:"Mot de passe oublié"}),Fr.jsx(of,{className:"text-center",children:"Entrez votre adresse email pour recevoir un lien de réinitialisation"})]}),Fr.jsx(WE,{...r,children:Fr.jsx("form",{onSubmit:r.handleSubmit(e=>{a.mutate(e)}),children:Fr.jsxs(lf,{className:"space-y-4",children:[Fr.jsx(KE,{control:r.control,name:"email",render:({field:e})=>Fr.jsxs(QE,{children:[Fr.jsx(GE,{children:"Email"}),Fr.jsx(YE,{children:Fr.jsxs("div",{className:"relative",children:[Fr.jsx(xc,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),Fr.jsx(zx,{type:"email",placeholder:"votre.email@exemple.com",className:"pl-10",...e})]})}),Fr.jsx(JE,{})]})}),Fr.jsx(Lp,{type:"submit",className:"w-full bg-red-600 hover:bg-red-700",disabled:a.isPending,children:a.isPending?"Envoi...":"Envoyer le lien"}),Fr.jsxs(Lp,{type:"button",variant:"outline",className:"w-full",onClick:e,children:[Fr.jsx(Cl,{className:"mr-2 h-4 w-4"}),"Retour à la connexion"]})]})})})]})}function nD(){const[,e]=va(),[t,s]=hr.useState("login"),n=()=>{e("/")};return Fr.jsx("div",{className:"min-h-screen bg-gradient-to-br from-red-50 to-red-100 flex items-center justify-center p-4",children:Fr.jsxs("div",{className:"w-full max-w-md",children:[Fr.jsxs("div",{className:"text-center mb-8",children:[Fr.jsx("div",{className:"mb-6",children:Fr.jsx("img",{src:"https://upload.wikimedia.org/wikipedia/commons/3/32/Remondis_logo.svg",alt:"REMONDIS",className:"h-16 w-auto mx-auto"})}),Fr.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"REMONDIS France"}),Fr.jsx("p",{className:"text-gray-600",children:"Gestion professionnelle des déchets"})]}),Fr.jsxs(cy,{value:t,onValueChange:e=>s(e),children:[Fr.jsxs(dy,{className:"grid w-full grid-cols-2",children:[Fr.jsx(uy,{value:"login",children:"Connexion"}),Fr.jsx(uy,{value:"register",children:"Inscription"})]}),Fr.jsx(my,{value:"login",className:"mt-6",children:Fr.jsx($E,{onSuccess:n,onSwitchToRegister:()=>s("register"),onForgotPassword:()=>s("forgot")})}),Fr.jsx(my,{value:"register",className:"mt-6",children:Fr.jsx(eD,{onSuccess:n,onSwitchToLogin:()=>s("login")})}),Fr.jsx(my,{value:"forgot",className:"mt-6",children:Fr.jsx(sD,{onBackToLogin:()=>s("login")})})]}),Fr.jsxs("div",{className:"mt-8 text-center",children:[Fr.jsx(Jx,{className:"mb-4"}),Fr.jsxs("div",{className:"space-y-2 text-sm text-gray-600",children:[Fr.jsx("p",{children:"En vous inscrivant, vous acceptez nos :"}),Fr.jsxs("div",{className:"flex flex-wrap justify-center gap-2",children:[Fr.jsx(Lp,{variant:"link",size:"sm",onClick:()=>e("/legal"),className:"text-red-600 hover:text-red-700 p-0 h-auto",children:"Conditions Générales de Vente"}),Fr.jsx("span",{children:"•"}),Fr.jsx(Lp,{variant:"link",size:"sm",onClick:()=>e("/privacy-policy"),className:"text-red-600 hover:text-red-700 p-0 h-auto",children:"Politique de Confidentialité"})]}),Fr.jsx("div",{className:"flex justify-center",children:Fr.jsx(Lp,{variant:"link",size:"sm",onClick:()=>e("/retraction-rights"),className:"text-red-600 hover:text-red-700 p-0 h-auto",children:"Droit de Rétractation"})})]})]}),Fr.jsx("div",{className:"mt-8 text-center text-sm text-gray-500",children:Fr.jsxs("p",{children:["En vous connectant, vous acceptez nos"," ",Fr.jsx("a",{href:"#",className:"text-red-600 hover:underline",children:"conditions d'utilisation"})," ","et notre"," ",Fr.jsx("a",{href:"#",className:"text-red-600 hover:underline",children:"politique de confidentialité"})]})})]})})}function rD(){const{user:e}=Fp(),t=function(){var e=this,t=Ni(),s=Ui().toast;return Ei({mutationFn:function(t){return Op(e,void 0,void 0,function(){return Rp(this,function(e){switch(e.label){case 0:return[4,Oi("PATCH","/api/auth/profile",t)];case 1:return[2,e.sent().json()]}})})},onSuccess:function(e){t.setQueryData(["/api/auth/me"],e.user),t.invalidateQueries({queryKey:["/api/auth/me"]}),s({title:"Profil mis à jour",description:e.message||"Votre profil a été mis à jour avec succès"})},onError:function(e){s({title:"Erreur de mise à jour",description:e.message||"Échec de la mise à jour du profil",variant:"destructive"})}})}(),s=function(){var e=this,t=Ui().toast;return Ei({mutationFn:function(t){return Op(e,void 0,void 0,function(){return Rp(this,function(e){switch(e.label){case 0:return[4,Oi("POST","/api/auth/change-password",t)];case 1:return[2,e.sent().json()]}})})},onSuccess:function(e){t({title:"Mot de passe modifié",description:e.message||"Votre mot de passe a été modifié avec succès"})},onError:function(e){t({title:"Erreur de modification",description:e.message||"Échec de la modification du mot de passe",variant:"destructive"})}})}(),n=Ip(),r=function(){var e=this,t=Ni(),s=Ui().toast;return Ei({mutationFn:function(){return Op(e,void 0,void 0,function(){return Rp(this,function(e){switch(e.label){case 0:return[4,Oi("DELETE","/api/auth/sessions")];case 1:return[2,e.sent().json()]}})})},onSuccess:function(e){localStorage.removeItem("auth_token"),localStorage.removeItem("session_token"),t.clear(),s({title:"Déconnexion globale",description:e.message||"Vous avez été déconnecté de tous les appareils"})},onError:function(e){s({title:"Erreur",description:e.message||"Erreur lors de la déconnexion",variant:"destructive"})}})}(),{data:a}=Pi({queryKey:["/api/auth/sessions"],staleTime:3e4}),i=nw({resolver:cw(jE),defaultValues:{firstName:(null==e?void 0:e.firstName)||"",lastName:(null==e?void 0:e.lastName)||"",email:(null==e?void 0:e.email)||"",phone:(null==e?void 0:e.phone)||"",companyName:(null==e?void 0:e.companyName)||"",address:(null==e?void 0:e.address)||"",city:(null==e?void 0:e.city)||"",postalCode:(null==e?void 0:e.postalCode)||""}}),o=nw({resolver:cw(NE),defaultValues:{currentPassword:"",newPassword:"",confirmPassword:""}});return e?Fr.jsx("div",{className:"container mx-auto py-8",children:Fr.jsxs("div",{className:"max-w-4xl mx-auto",children:[Fr.jsxs("div",{className:"mb-8",children:[Fr.jsx("h1",{className:"text-3xl font-bold",children:"Mon Profil"}),Fr.jsx("p",{className:"text-muted-foreground",children:"Gérez vos informations personnelles et votre sécurité"})]}),Fr.jsxs(cy,{defaultValue:"profile",className:"space-y-6",children:[Fr.jsxs(dy,{className:"grid w-full grid-cols-3",children:[Fr.jsx(uy,{value:"profile",children:"Profil"}),Fr.jsx(uy,{value:"security",children:"Sécurité"}),Fr.jsx(uy,{value:"sessions",children:"Sessions"})]}),Fr.jsx(my,{value:"profile",children:Fr.jsxs(nf,{children:[Fr.jsxs(rf,{children:[Fr.jsxs(af,{className:"flex items-center gap-2",children:[Fr.jsx(qc,{className:"h-5 w-5"}),"Informations personnelles"]}),Fr.jsx(of,{children:"Mettez à jour vos informations de profil"})]}),Fr.jsx(lf,{children:Fr.jsxs("form",{onSubmit:i.handleSubmit(async e=>{try{await t.mutateAsync(e)}catch(s){}}),className:"space-y-4",children:[Fr.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[Fr.jsxs("div",{className:"space-y-2",children:[Fr.jsx(Wx,{htmlFor:"firstName",children:"Prénom"}),Fr.jsx(zx,{id:"firstName",...i.register("firstName")}),i.formState.errors.firstName&&Fr.jsx("p",{className:"text-sm text-red-600",children:i.formState.errors.firstName.message})]}),Fr.jsxs("div",{className:"space-y-2",children:[Fr.jsx(Wx,{htmlFor:"lastName",children:"Nom"}),Fr.jsx(zx,{id:"lastName",...i.register("lastName")}),i.formState.errors.lastName&&Fr.jsx("p",{className:"text-sm text-red-600",children:i.formState.errors.lastName.message})]})]}),Fr.jsxs("div",{className:"space-y-2",children:[Fr.jsx(Wx,{htmlFor:"email",children:"Email"}),Fr.jsxs("div",{className:"relative",children:[Fr.jsx(xc,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),Fr.jsx(zx,{id:"email",type:"email",className:"pl-10",...i.register("email")})]}),i.formState.errors.email&&Fr.jsx("p",{className:"text-sm text-red-600",children:i.formState.errors.email.message})]}),Fr.jsxs("div",{className:"space-y-2",children:[Fr.jsx(Wx,{htmlFor:"phone",children:"Téléphone"}),Fr.jsxs("div",{className:"relative",children:[Fr.jsx(bc,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),Fr.jsx(zx,{id:"phone",type:"tel",className:"pl-10",...i.register("phone")})]}),i.formState.errors.phone&&Fr.jsx("p",{className:"text-sm text-red-600",children:i.formState.errors.phone.message})]}),Fr.jsxs("div",{className:"space-y-2",children:[Fr.jsx(Wx,{htmlFor:"companyName",children:"Entreprise"}),Fr.jsxs("div",{className:"relative",children:[Fr.jsx(Tl,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),Fr.jsx(zx,{id:"companyName",className:"pl-10",...i.register("companyName")})]})]}),Fr.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[Fr.jsxs("div",{className:"space-y-2",children:[Fr.jsx(Wx,{htmlFor:"address",children:"Adresse"}),Fr.jsx(zx,{id:"address",...i.register("address")})]}),Fr.jsxs("div",{className:"space-y-2",children:[Fr.jsx(Wx,{htmlFor:"city",children:"Ville"}),Fr.jsx(zx,{id:"city",...i.register("city")})]}),Fr.jsxs("div",{className:"space-y-2",children:[Fr.jsx(Wx,{htmlFor:"postalCode",children:"Code postal"}),Fr.jsx(zx,{id:"postalCode",...i.register("postalCode")})]})]}),Fr.jsx(Lp,{type:"submit",className:"bg-red-600 hover:bg-red-700",disabled:t.isPending,children:t.isPending?"Mise à jour...":"Mettre à jour le profil"})]})})]})}),Fr.jsx(my,{value:"security",children:Fr.jsxs("div",{className:"space-y-6",children:[Fr.jsxs(nf,{children:[Fr.jsxs(rf,{children:[Fr.jsxs(af,{className:"flex items-center gap-2",children:[Fr.jsx(pc,{className:"h-5 w-5"}),"Changer le mot de passe"]}),Fr.jsx(of,{children:"Assurez-vous d'utiliser un mot de passe fort et unique"})]}),Fr.jsx(lf,{children:Fr.jsxs("form",{onSubmit:o.handleSubmit(async e=>{try{await s.mutateAsync(e),o.reset()}catch(t){}}),className:"space-y-4",children:[Fr.jsxs("div",{className:"space-y-2",children:[Fr.jsx(Wx,{htmlFor:"currentPassword",children:"Mot de passe actuel"}),Fr.jsx(zx,{id:"currentPassword",type:"password",...o.register("currentPassword")}),o.formState.errors.currentPassword&&Fr.jsx("p",{className:"text-sm text-red-600",children:o.formState.errors.currentPassword.message})]}),Fr.jsxs("div",{className:"space-y-2",children:[Fr.jsx(Wx,{htmlFor:"newPassword",children:"Nouveau mot de passe"}),Fr.jsx(zx,{id:"newPassword",type:"password",...o.register("newPassword")}),o.formState.errors.newPassword&&Fr.jsx("p",{className:"text-sm text-red-600",children:o.formState.errors.newPassword.message})]}),Fr.jsxs("div",{className:"space-y-2",children:[Fr.jsx(Wx,{htmlFor:"confirmPassword",children:"Confirmer le nouveau mot de passe"}),Fr.jsx(zx,{id:"confirmPassword",type:"password",...o.register("confirmPassword")}),o.formState.errors.confirmPassword&&Fr.jsx("p",{className:"text-sm text-red-600",children:o.formState.errors.confirmPassword.message})]}),Fr.jsx(Lp,{type:"submit",className:"bg-red-600 hover:bg-red-700",disabled:s.isPending,children:s.isPending?"Modification...":"Changer le mot de passe"})]})})]}),Fr.jsxs(nf,{children:[Fr.jsx(rf,{children:Fr.jsxs(af,{className:"flex items-center gap-2",children:[Fr.jsx(_c,{className:"h-5 w-5"}),"Statut du compte"]})}),Fr.jsxs(lf,{className:"space-y-4",children:[Fr.jsxs("div",{className:"flex items-center justify-between",children:[Fr.jsx("span",{children:"Email vérifié"}),Fr.jsx(Hx,{variant:e.isVerified?"default":"secondary",children:e.isVerified?"Vérifié":"Non vérifié"})]}),Fr.jsxs("div",{className:"flex items-center justify-between",children:[Fr.jsx("span",{children:"Compte actif"}),Fr.jsx(Hx,{variant:e.isActive?"default":"destructive",children:e.isActive?"Actif":"Inactif"})]}),Fr.jsxs("div",{className:"flex items-center justify-between",children:[Fr.jsx("span",{children:"Rôle"}),Fr.jsx(Hx,{variant:"outline",children:"admin"===e.role?"Administrateur":"Client"})]})]})]})]})}),Fr.jsx(my,{value:"sessions",children:Fr.jsxs(nf,{children:[Fr.jsxs(rf,{children:[Fr.jsxs(af,{className:"flex items-center gap-2",children:[Fr.jsx(Ec,{className:"h-5 w-5"}),"Sessions actives"]}),Fr.jsx(of,{children:"Gérez vos connexions sur différents appareils"})]}),Fr.jsxs(lf,{className:"space-y-4",children:[a&&a.length>0?Fr.jsx("div",{className:"space-y-3",children:a.map(e=>Fr.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[Fr.jsxs("div",{children:[Fr.jsx("p",{className:"font-medium",children:e.userAgent||"Appareil inconnu"}),Fr.jsxs("p",{className:"text-sm text-muted-foreground",children:["IP: ",e.ipAddress||"Non disponible"]}),Fr.jsxs("p",{className:"text-sm text-muted-foreground",children:["Créée le: ",new Date(e.createdAt).toLocaleDateString("fr-FR")]})]}),Fr.jsx(Hx,{variant:"outline",children:"Active"})]},e.id))}):Fr.jsx("p",{className:"text-muted-foreground",children:"Aucune session active trouvée"}),Fr.jsx(Jx,{}),Fr.jsxs("div",{className:"flex gap-4",children:[Fr.jsxs(Lp,{variant:"outline",onClick:()=>{n.mutate()},disabled:n.isPending,className:"flex items-center gap-2",children:[Fr.jsx(hc,{className:"h-4 w-4"}),n.isPending?"Déconnexion...":"Se déconnecter"]}),Fr.jsxs(Lp,{variant:"destructive",onClick:()=>{r.mutate()},disabled:r.isPending,className:"flex items-center gap-2",children:[Fr.jsx(_c,{className:"h-4 w-4"}),r.isPending?"Déconnexion...":"Déconnecter tous les appareils"]})]})]})]})})]})]})}):Fr.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:Fr.jsx("div",{className:"text-center",children:Fr.jsx("p",{className:"text-muted-foreground",children:"Chargement du profil..."})})})}function aD(){const{isLoading:e,isAuthenticated:t}=Fp(),[,s]=va();return hr.useEffect(()=>{e||t||s("/auth")},[e,t,s]),e?Fr.jsx("div",{className:"min-h-screen flex items-center justify-center",children:Fr.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-red-600 border-t-transparent rounded-full"})}):t?Fr.jsx(rD,{}):null}function iD({title:e,subtitle:t,description:s,children:n,backgroundImage:r,variant:a="default",className:i}){const o=(()=>{switch(a){case"legal":default:return{background:"linear-gradient(135deg, #dc2626 0%, #b91c1c 50%, #991b1b 100%)",pattern:"bg-[radial-gradient(circle_at_50%_50%,rgba(255,255,255,0.1)_1px,transparent_1px)] bg-[length:24px_24px]"};case"dashboard":return{background:"linear-gradient(135deg, #1f2937 0%, #374151 50%, #4b5563 100%)",pattern:"bg-[radial-gradient(circle_at_25%_25%,rgba(255,255,255,0.05)_1px,transparent_1px)] bg-[length:32px_32px]"};case"privacy":return{background:"linear-gradient(135deg, #059669 0%, #047857 50%, #065f46 100%)",pattern:"bg-[radial-gradient(circle_at_75%_25%,rgba(255,255,255,0.08)_1px,transparent_1px)] bg-[length:28px_28px]"};case"retraction":return{background:"linear-gradient(135deg, #ea580c 0%, #dc2626 50%, #b91c1c 100%)",pattern:"bg-[radial-gradient(circle_at_30%_70%,rgba(255,255,255,0.1)_1px,transparent_1px)] bg-[length:20px_20px]"}}})();return Fr.jsxs("div",{className:Fd("relative overflow-hidden",o.pattern,i),style:{background:o.background},children:[r&&Fr.jsx("div",{className:"absolute inset-0 bg-cover bg-center bg-no-repeat opacity-10",style:{backgroundImage:`url(${r})`}}),Fr.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-black/20 via-transparent to-black/30"}),Fr.jsxs("div",{className:"absolute inset-0",children:[Fr.jsx("div",{className:"absolute top-10 left-10 w-2 h-2 bg-white/20 rounded-full animate-pulse delay-0"}),Fr.jsx("div",{className:"absolute top-32 right-20 w-1 h-1 bg-white/30 rounded-full animate-pulse delay-1000"}),Fr.jsx("div",{className:"absolute bottom-20 left-20 w-1.5 h-1.5 bg-white/25 rounded-full animate-pulse delay-2000"}),Fr.jsx("div",{className:"absolute bottom-32 right-32 w-1 h-1 bg-white/20 rounded-full animate-pulse delay-3000"})]}),Fr.jsx("div",{className:"relative z-10 px-4 sm:px-6 lg:px-8",children:Fr.jsx("div",{className:"max-w-7xl mx-auto",children:Fr.jsx("div",{className:"py-16 sm:py-20 lg:py-24",children:Fr.jsxs("div",{className:"text-center",children:[Fr.jsx("div",{className:"mb-8",children:Fr.jsx("img",{src:"https://upload.wikimedia.org/wikipedia/commons/3/32/Remondis_logo.svg",alt:"Remondis",className:"h-12 w-auto mx-auto"})}),t&&Fr.jsx("p",{className:"text-sm font-semibold text-white/80 uppercase tracking-wider mb-4",children:t}),Fr.jsx("h1",{className:"text-4xl sm:text-5xl lg:text-6xl font-bold text-white mb-6 leading-tight",children:Fr.jsx("span",{className:"block",children:e})}),s&&Fr.jsx("p",{className:"max-w-3xl mx-auto text-lg sm:text-xl text-white/90 leading-relaxed mb-8",children:s}),n&&Fr.jsx("div",{className:"flex flex-col sm:flex-row gap-4 justify-center items-center",children:n})]})})})}),Fr.jsx("div",{className:"absolute bottom-0 left-0 right-0",children:Fr.jsxs("svg",{viewBox:"0 0 1200 120",preserveAspectRatio:"none",className:"relative block w-full h-12 sm:h-16 lg:h-20",children:[Fr.jsx("path",{d:"M0,0V46.29c47.79,22.2,103.59,32.17,158,28,70.36-5.37,136.33-33.31,206.8-37.5C438.64,32.43,512.34,53.67,583,72.05c69.27,18,138.3,24.88,209.4,13.08,36.15-6,69.85-17.84,104.45-29.34C989.49,25,1113-14.29,1200,52.47V0Z",opacity:".25",className:"fill-white"}),Fr.jsx("path",{d:"M0,0V15.81C13,36.92,27.64,56.86,47.69,72.05,99.41,111.27,165,111,224.58,91.58c31.15-10.15,60.09-26.07,89.67-39.8,40.92-19,84.73-46,130.83-49.67,36.26-2.85,70.9,9.42,98.6,31.56,31.77,25.39,62.32,62,103.63,73,40.44,10.79,81.35-6.69,119.13-24.28s75.16-39,116.92-43.05c59.73-5.85,113.28,22.88,168.9,38.84,30.2,8.66,59,6.17,87.09-7.5,22.43-10.89,48-26.93,60.65-49.24V0Z",opacity:".5",className:"fill-white"}),Fr.jsx("path",{d:"M0,0V5.63C149.93,59,314.09,71.32,475.83,42.57c43-7.64,84.23-20.12,127.61-26.46,59-8.63,112.48,12.24,165.56,35.4C827.93,77.22,886,95.24,951.2,90c86.53-7,172.46-45.71,248.8-84.81V0Z",className:"fill-white"})]})})]})}const oD={en_attente:"bg-yellow-100 text-yellow-800",confirme:"bg-blue-100 text-blue-800",en_cours:"bg-orange-100 text-orange-800",livre:"bg-green-100 text-green-800",termine:"bg-gray-100 text-gray-800",annule:"bg-red-100 text-red-800"},lD={en_attente:"En attente",confirme:"Confirmé",en_cours:"En cours",livre:"Livré",termine:"Terminé",annule:"Annulé"};function cD(){var e;const{toast:t}=Ui(),{user:s}=Fp(),[,n]=va(),[r,a]=hr.useState("orders"),[i,o]=hr.useState(null),[l,c]=hr.useState({name:"",serviceId:"",frequency:"",address:"",postalCode:"",city:"",wasteTypes:[]}),{data:d=[],isLoading:u}=Pi({queryKey:["/api/orders/my-orders"]}),{data:m=[],isLoading:p}=Pi({queryKey:["/api/orders/recurring"]}),{data:h=[]}=Pi({queryKey:["/api/services"]}),{data:x=[]}=Pi({queryKey:["/api/waste-types"]}),f=Ei({mutationFn:async({orderId:e,updates:t})=>{await Oi("PUT",`/api/orders/${e}`,t)},onSuccess:()=>{Ri.invalidateQueries({queryKey:["/api/orders/my-orders"]}),t({title:"Commande mise à jour",description:"Votre commande a été modifiée avec succès."}),o(null)},onError:()=>{t({title:"Erreur",description:"Impossible de modifier la commande.",variant:"destructive"})}}),v=Ei({mutationFn:async e=>{await Oi("POST","/api/orders/recurring",e)},onSuccess:()=>{Ri.invalidateQueries({queryKey:["/api/orders/recurring"]}),t({title:"Commande récurrente créée",description:"Votre commande récurrente a été configurée avec succès."}),c({name:"",serviceId:"",frequency:"",address:"",postalCode:"",city:"",wasteTypes:[]})},onError:()=>{t({title:"Erreur",description:"Impossible de créer la commande récurrente.",variant:"destructive"})}}),g=Ei({mutationFn:async e=>{await Oi("PUT",`/api/orders/${e}/cancel`)},onSuccess:()=>{Ri.invalidateQueries({queryKey:["/api/orders/my-orders"]}),t({title:"Commande annulée",description:"Votre commande a été annulée avec succès."})},onError:()=>{t({title:"Erreur",description:"Impossible d'annuler la commande.",variant:"destructive"})}}),y=e=>["en_attente","confirme"].includes(e.status),b=e=>["en_attente","confirme"].includes(e.status);return Fr.jsxs("div",{className:"min-h-screen bg-gray-50",children:[Fr.jsx(iD,{variant:"dashboard",subtitle:"ESPACE CLIENT",title:`Bonjour ${(null==s?void 0:s.firstName)||"Client"}`,description:"Gérez vos commandes, suivez vos livraisons et configurez vos collectes récurrentes depuis votre espace personnel sécurisé.",children:Fr.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[Fr.jsxs(Lp,{variant:"secondary",size:"lg",onClick:()=>n("/"),className:"bg-white/20 hover:bg-white/30 text-white border-white/30",children:[Fr.jsx(oc,{className:"h-5 w-5 mr-2"}),"Accueil"]}),Fr.jsxs(Lp,{variant:"secondary",size:"lg",onClick:()=>a("new-order"),className:"bg-red-600 hover:bg-red-700 text-white border-0",children:[Fr.jsx(jc,{className:"h-5 w-5 mr-2"}),"Nouvelle commande"]})]})}),Fr.jsxs("div",{className:"container mx-auto px-4 py-12 -mt-8 relative z-10",children:[Fr.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[Fr.jsx(nf,{children:Fr.jsx(lf,{className:"p-6",children:Fr.jsxs("div",{className:"flex items-center",children:[Fr.jsx(gc,{className:"h-8 w-8 text-red-600"}),Fr.jsxs("div",{className:"ml-4",children:[Fr.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Commandes actives"}),Fr.jsx("p",{className:"text-2xl font-bold text-gray-900",children:d.filter(e=>["en_attente","confirme","en_cours"].includes(e.status)).length})]})]})})}),Fr.jsx(nf,{children:Fr.jsx(lf,{className:"p-6",children:Fr.jsxs("div",{className:"flex items-center",children:[Fr.jsx(Il,{className:"h-8 w-8 text-blue-600"}),Fr.jsxs("div",{className:"ml-4",children:[Fr.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Prochaine livraison"}),Fr.jsx("p",{className:"text-lg font-bold text-gray-900",children:(null==(e=d.find(e=>e.confirmedDeliveryDate))?void 0:e.confirmedDeliveryDate)?new Date(d.find(e=>e.confirmedDeliveryDate).confirmedDeliveryDate).toLocaleDateString("fr-FR"):"Aucune"})]})]})})}),Fr.jsx(nf,{children:Fr.jsx(lf,{className:"p-6",children:Fr.jsxs("div",{className:"flex items-center",children:[Fr.jsx(Nc,{className:"h-8 w-8 text-green-600"}),Fr.jsxs("div",{className:"ml-4",children:[Fr.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Commandes récurrentes"}),Fr.jsx("p",{className:"text-2xl font-bold text-gray-900",children:m.filter(e=>e.isActive).length})]})]})})}),Fr.jsx(nf,{children:Fr.jsx(lf,{className:"p-6",children:Fr.jsxs("div",{className:"flex items-center",children:[Fr.jsx(Yl,{className:"h-8 w-8 text-purple-600"}),Fr.jsxs("div",{className:"ml-4",children:[Fr.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total dépensé"}),Fr.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[d.reduce((e,t)=>e+parseFloat(t.totalAmount),0).toFixed(2),"€"]})]})]})})})]}),Fr.jsxs(cy,{value:r,onValueChange:a,className:"space-y-6",children:[Fr.jsxs(dy,{className:"grid w-full grid-cols-4",children:[Fr.jsx(uy,{value:"orders",children:"Mes commandes"}),Fr.jsx(uy,{value:"recurring",children:"Commandes récurrentes"}),Fr.jsx(uy,{value:"new-order",children:"Nouvelle commande"}),Fr.jsx(uy,{value:"profile",children:"Mon profil"})]}),Fr.jsx(my,{value:"orders",children:Fr.jsxs(nf,{children:[Fr.jsx(rf,{children:Fr.jsx(af,{children:"Mes commandes"})}),Fr.jsx(lf,{children:u?Fr.jsxs("div",{className:"text-center py-8",children:[Fr.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-red-600 border-t-transparent rounded-full mx-auto"}),Fr.jsx("p",{className:"mt-4 text-gray-600",children:"Chargement..."})]}):0===d.length?Fr.jsxs("div",{className:"text-center py-12",children:[Fr.jsx(gc,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),Fr.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Aucune commande"}),Fr.jsx("p",{className:"text-gray-600 mb-4",children:"Vous n'avez pas encore passé de commande."}),Fr.jsx(Lp,{onClick:()=>a("new-order"),className:"bg-red-600 hover:bg-red-700",children:"Passer ma première commande"})]}):Fr.jsx("div",{className:"space-y-4",children:d.map(e=>{var t;return Fr.jsxs("div",{className:"border border-gray-200 rounded-lg p-6",children:[Fr.jsxs("div",{className:"flex items-center justify-between mb-4",children:[Fr.jsxs("div",{children:[Fr.jsxs("h3",{className:"font-semibold text-lg",children:["Commande ",e.orderNumber]}),Fr.jsxs("p",{className:"text-gray-600",children:[e.serviceName," (",e.serviceVolume,"m³)"]})]}),Fr.jsxs("div",{className:"flex items-center gap-3",children:[Fr.jsx(Hx,{className:oD[e.status],children:lD[e.status]}),Fr.jsxs("span",{className:"font-bold text-lg",children:[e.totalAmount,"€"]})]})]}),Fr.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[Fr.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[Fr.jsx(fc,{className:"h-4 w-4 mr-2"}),e.address,", ",e.postalCode," ",e.city]}),Fr.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[Fr.jsx(Il,{className:"h-4 w-4 mr-2"}),e.confirmedDeliveryDate?`Livraison: ${new Date(e.confirmedDeliveryDate).toLocaleDateString("fr-FR")}`:e.deliveryDate?`Demandé: ${new Date(e.deliveryDate).toLocaleDateString("fr-FR")}`:"Date à confirmer"]}),Fr.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[Fr.jsx(Fc,{className:"h-4 w-4 mr-2"}),"Transport: ",e.distance,"km - ",e.transportCost,"€"]})]}),Fr.jsxs("div",{className:"mb-4",children:[Fr.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Types de déchets:"}),Fr.jsx("div",{className:"flex flex-wrap gap-2",children:e.wasteTypes.map((e,t)=>Fr.jsx(Hx,{variant:"outline",children:e},t))})]}),Fr.jsxs("div",{className:"flex items-center justify-between pt-4 border-t",children:[Fr.jsxs("div",{className:"text-sm text-gray-500",children:["Commandé le ",new Date(e.createdAt).toLocaleDateString("fr-FR")]}),Fr.jsxs("div",{className:"flex gap-2",children:[Fr.jsxs(Lp,{variant:"outline",size:"sm",children:[Fr.jsx(nc,{className:"h-4 w-4 mr-2"}),"Détails"]}),Fr.jsxs(Lp,{variant:"outline",size:"sm",children:[Fr.jsx(ec,{className:"h-4 w-4 mr-2"}),"Facture"]}),y(e)&&Fr.jsxs(Ax,{children:[Fr.jsx(Ox,{asChild:!0,children:Fr.jsxs(Lp,{variant:"outline",size:"sm",onClick:()=>o(e),children:[Fr.jsx(yc,{className:"h-4 w-4 mr-2"}),"Modifier"]})}),Fr.jsxs(Ix,{className:"max-w-2xl",children:[Fr.jsx(Mx,{children:Fr.jsxs(Lx,{children:["Modifier la commande ",e.orderNumber]})}),Fr.jsxs("div",{className:"space-y-4",children:[Fr.jsxs("div",{children:[Fr.jsx(Wx,{children:"Date souhaitée"}),Fr.jsx(zx,{type:"date",defaultValue:(null==(t=e.deliveryDate)?void 0:t.split("T")[0])||"",onChange:e=>{}})]}),Fr.jsxs("div",{children:[Fr.jsx(Wx,{children:"Adresse de livraison"}),Fr.jsx(zx,{defaultValue:e.address,onChange:e=>{}})]}),Fr.jsxs("div",{className:"flex gap-4",children:[Fr.jsxs("div",{className:"flex-1",children:[Fr.jsx(Wx,{children:"Code postal"}),Fr.jsx(zx,{defaultValue:e.postalCode,onChange:e=>{}})]}),Fr.jsxs("div",{className:"flex-1",children:[Fr.jsx(Wx,{children:"Ville"}),Fr.jsx(zx,{defaultValue:e.city,onChange:e=>{}})]})]}),Fr.jsxs("div",{className:"flex gap-2 pt-4",children:[Fr.jsx(Lp,{onClick:()=>{return e={},void(i&&f.mutate({orderId:i.id,updates:e}));var e},className:"bg-red-600 hover:bg-red-700",children:"Enregistrer les modifications"}),Fr.jsx(Lp,{variant:"outline",onClick:()=>o(null),children:"Annuler"})]})]})]})]}),b(e)&&Fr.jsxs(Lp,{variant:"destructive",size:"sm",onClick:()=>g.mutate(e.id),children:[Fr.jsx(Ac,{className:"h-4 w-4 mr-2"}),"Annuler"]})]})]})]},e.id)})})})]})}),Fr.jsx(my,{value:"recurring",children:Fr.jsx("div",{className:"space-y-6",children:Fr.jsxs(nf,{children:[Fr.jsx(rf,{children:Fr.jsxs("div",{className:"flex items-center justify-between",children:[Fr.jsx(af,{children:"Commandes récurrentes"}),Fr.jsxs(Ax,{children:[Fr.jsx(Ox,{asChild:!0,children:Fr.jsxs(Lp,{className:"bg-red-600 hover:bg-red-700",children:[Fr.jsx(jc,{className:"h-4 w-4 mr-2"}),"Nouvelle commande récurrente"]})}),Fr.jsxs(Ix,{className:"max-w-2xl",children:[Fr.jsx(Mx,{children:Fr.jsx(Lx,{children:"Créer une commande récurrente"})}),Fr.jsxs("div",{className:"space-y-4",children:[Fr.jsxs("div",{children:[Fr.jsx(Wx,{children:"Nom de la commande"}),Fr.jsx(zx,{value:l.name,onChange:e=>c(t=>({...t,name:e.target.value})),placeholder:"Ex: Collecte bureau mensuelle"})]}),Fr.jsxs("div",{children:[Fr.jsx(Wx,{children:"Service"}),Fr.jsxs(Bv,{value:l.serviceId,onValueChange:e=>c(t=>({...t,serviceId:e})),children:[Fr.jsx(Wv,{children:Fr.jsx($v,{placeholder:"Sélectionner un service"})}),Fr.jsx(Hv,{children:h.map(e=>Fr.jsxs(Zv,{value:e.id.toString(),children:[e.name," (",e.volume,"m³)"]},e.id))})]})]}),Fr.jsxs("div",{children:[Fr.jsx(Wx,{children:"Fréquence"}),Fr.jsxs(Bv,{value:l.frequency,onValueChange:e=>c(t=>({...t,frequency:e})),children:[Fr.jsx(Wv,{children:Fr.jsx($v,{placeholder:"Sélectionner la fréquence"})}),Fr.jsxs(Hv,{children:[Fr.jsx(Zv,{value:"weekly",children:"Hebdomadaire"}),Fr.jsx(Zv,{value:"biweekly",children:"Bi-mensuelle"}),Fr.jsx(Zv,{value:"monthly",children:"Mensuelle"}),Fr.jsx(Zv,{value:"quarterly",children:"Trimestrielle"})]})]})]}),Fr.jsxs("div",{children:[Fr.jsx(Wx,{children:"Adresse de collecte"}),Fr.jsx(zx,{value:l.address,onChange:e=>c(t=>({...t,address:e.target.value})),placeholder:"Adresse complète"})]}),Fr.jsxs("div",{className:"flex gap-4",children:[Fr.jsxs("div",{className:"flex-1",children:[Fr.jsx(Wx,{children:"Code postal"}),Fr.jsx(zx,{value:l.postalCode,onChange:e=>c(t=>({...t,postalCode:e.target.value})),placeholder:"75000"})]}),Fr.jsxs("div",{className:"flex-1",children:[Fr.jsx(Wx,{children:"Ville"}),Fr.jsx(zx,{value:l.city,onChange:e=>c(t=>({...t,city:e.target.value})),placeholder:"Paris"})]})]}),Fr.jsxs("div",{children:[Fr.jsx(Wx,{children:"Types de déchets"}),Fr.jsx("div",{className:"grid grid-cols-2 gap-2 mt-2",children:x.map(e=>Fr.jsxs("div",{className:"flex items-center space-x-2",children:[Fr.jsx(BE,{id:`waste-${e.id}`,checked:l.wasteTypes.includes(e.name),onCheckedChange:t=>{c(t?t=>({...t,wasteTypes:[...t.wasteTypes,e.name]}):t=>({...t,wasteTypes:t.wasteTypes.filter(t=>t!==e.name)}))}}),Fr.jsx(Wx,{htmlFor:`waste-${e.id}`,className:"text-sm",children:e.name})]},e.id))})]}),Fr.jsx("div",{className:"flex gap-2 pt-4",children:Fr.jsx(Lp,{onClick:()=>{l.name&&l.serviceId&&l.frequency?v.mutate(l):t({title:"Informations manquantes",description:"Veuillez remplir tous les champs obligatoires.",variant:"destructive"})},className:"bg-red-600 hover:bg-red-700",children:"Créer la commande récurrente"})})]})]})]})]})}),Fr.jsx(lf,{children:p?Fr.jsxs("div",{className:"text-center py-8",children:[Fr.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-red-600 border-t-transparent rounded-full mx-auto"}),Fr.jsx("p",{className:"mt-4 text-gray-600",children:"Chargement..."})]}):0===m.length?Fr.jsxs("div",{className:"text-center py-12",children:[Fr.jsx(Nc,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),Fr.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Aucune commande récurrente"}),Fr.jsx("p",{className:"text-gray-600",children:"Configurez vos collectes automatiques pour gagner du temps."})]}):Fr.jsx("div",{className:"space-y-4",children:m.map(e=>Fr.jsxs("div",{className:"border border-gray-200 rounded-lg p-6",children:[Fr.jsxs("div",{className:"flex items-center justify-between mb-4",children:[Fr.jsxs("div",{children:[Fr.jsx("h3",{className:"font-semibold text-lg",children:e.name}),Fr.jsxs("p",{className:"text-gray-600",children:[e.serviceName," - ",e.frequency]})]}),Fr.jsxs("div",{className:"flex items-center gap-3",children:[Fr.jsx(Hx,{className:e.isActive?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800",children:e.isActive?"Active":"Inactive"}),Fr.jsxs("span",{className:"font-bold text-lg",children:[e.totalAmount,"€"]})]})]}),Fr.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[Fr.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[Fr.jsx(fc,{className:"h-4 w-4 mr-2"}),e.address,", ",e.city]}),Fr.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[Fr.jsx(Zl,{className:"h-4 w-4 mr-2"}),"Prochaine exécution: ",new Date(e.nextExecution).toLocaleDateString("fr-FR")]})]}),Fr.jsxs("div",{className:"mb-4",children:[Fr.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Types de déchets:"}),Fr.jsx("div",{className:"flex flex-wrap gap-2",children:e.wasteTypes.map((e,t)=>Fr.jsx(Hx,{variant:"outline",children:e},t))})]}),Fr.jsxs("div",{className:"flex items-center justify-end gap-2 pt-4 border-t",children:[Fr.jsxs(Lp,{variant:"outline",size:"sm",children:[Fr.jsx(Sc,{className:"h-4 w-4 mr-2"}),"Modifier"]}),Fr.jsx(Lp,{variant:"outline",size:"sm",children:e.isActive?"Suspendre":"Activer"}),Fr.jsxs(Lp,{variant:"destructive",size:"sm",children:[Fr.jsx(Ac,{className:"h-4 w-4 mr-2"}),"Supprimer"]})]})]},e.id))})})]})})}),Fr.jsx(my,{value:"new-order",children:Fr.jsxs(nf,{children:[Fr.jsx(rf,{children:Fr.jsx(af,{children:"Passer une nouvelle commande"})}),Fr.jsx(lf,{children:Fr.jsxs("div",{className:"text-center py-12",children:[Fr.jsx(jc,{className:"h-12 w-12 text-red-600 mx-auto mb-4"}),Fr.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Créer une nouvelle commande"}),Fr.jsx("p",{className:"text-gray-600 mb-6",children:"Utilisez notre configurateur pour créer votre commande personnalisée"}),Fr.jsx(Lp,{onClick:()=>window.location.href="/",className:"bg-red-600 hover:bg-red-700",children:"Commencer ma commande"})]})})]})}),Fr.jsx(my,{value:"profile",children:Fr.jsxs(nf,{children:[Fr.jsx(rf,{children:Fr.jsx(af,{children:"Mon profil"})}),Fr.jsx(lf,{children:Fr.jsxs("div",{className:"space-y-6",children:[Fr.jsxs("div",{className:"flex items-center space-x-4",children:[Fr.jsx("div",{className:"h-16 w-16 bg-red-100 rounded-full flex items-center justify-center",children:Fr.jsx(qc,{className:"h-8 w-8 text-red-600"})}),Fr.jsxs("div",{children:[Fr.jsx("h3",{className:"text-lg font-semibold",children:"John Doe"}),Fr.jsx("p",{className:"text-gray-600",children:"john.doe@example.com"})]})]}),Fr.jsx(Jx,{}),Fr.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[Fr.jsxs("div",{children:[Fr.jsx("h4",{className:"font-medium mb-4",children:"Informations personnelles"}),Fr.jsxs("div",{className:"space-y-3",children:[Fr.jsxs("div",{children:[Fr.jsx(Wx,{children:"Prénom"}),Fr.jsx(zx,{defaultValue:"John"})]}),Fr.jsxs("div",{children:[Fr.jsx(Wx,{children:"Nom"}),Fr.jsx(zx,{defaultValue:"Doe"})]}),Fr.jsxs("div",{children:[Fr.jsx(Wx,{children:"Email"}),Fr.jsx(zx,{defaultValue:"john.doe@example.com"})]}),Fr.jsxs("div",{children:[Fr.jsx(Wx,{children:"Téléphone"}),Fr.jsx(zx,{defaultValue:"+33 1 23 45 67 89"})]})]})]}),Fr.jsxs("div",{children:[Fr.jsx("h4",{className:"font-medium mb-4",children:"Préférences"}),Fr.jsxs("div",{className:"space-y-3",children:[Fr.jsxs("div",{className:"flex items-center space-x-2",children:[Fr.jsx(BE,{id:"email-notifications",defaultChecked:!0}),Fr.jsx(Wx,{htmlFor:"email-notifications",children:"Recevoir les notifications par email"})]}),Fr.jsxs("div",{className:"flex items-center space-x-2",children:[Fr.jsx(BE,{id:"sms-notifications"}),Fr.jsx(Wx,{htmlFor:"sms-notifications",children:"Recevoir les notifications par SMS"})]}),Fr.jsxs("div",{className:"flex items-center space-x-2",children:[Fr.jsx(BE,{id:"marketing-emails"}),Fr.jsx(Wx,{htmlFor:"marketing-emails",children:"Recevoir les offres promotionnelles"})]})]})]})]}),Fr.jsxs("div",{className:"flex gap-4 pt-6",children:[Fr.jsx(Lp,{className:"bg-red-600 hover:bg-red-700",children:"Enregistrer les modifications"}),Fr.jsx(Lp,{variant:"outline",children:"Changer le mot de passe"})]})]})})]})})]})]})]})}function dD(){return Fr.jsx("div",{className:"min-h-screen w-full flex items-center justify-center bg-gray-50",children:Fr.jsx(nf,{className:"w-full max-w-md mx-4",children:Fr.jsxs(lf,{className:"pt-6",children:[Fr.jsxs("div",{className:"flex mb-4 gap-2",children:[Fr.jsx(Wl,{className:"h-8 w-8 text-red-500"}),Fr.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"404 Page Not Found"})]}),Fr.jsx("p",{className:"mt-4 text-sm text-gray-600",children:"Did you forget to add the page to the router?"})]})})})}var uD=function(){return uD=Object.assign||function(e){for(var t,s=1,n=arguments.length;s<n;s++)for(var r in t=arguments[s])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},uD.apply(this,arguments)},mD=function(e,t,s,n){return new(s||(s=Promise))(function(r,a){function i(e){try{l(n.next(e))}catch(t){a(t)}}function o(e){try{l(n.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof s?t:new s(function(e){e(t)})).then(i,o)}l((n=n.apply(e,t||[])).next())})},pD=function(e,t){var s,n,r,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=o(0),i.throw=o(1),i.return=o(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(o){return function(l){return function(o){if(s)throw new TypeError("Generator is already executing.");for(;i&&(i=0,o[0]&&(a=0)),a;)try{if(s=1,n&&(r=2&o[0]?n.return:o[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,o[1])).done)return r;switch(n=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(r=a.trys,(r=r.length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){a.label=o[1];break}if(6===o[0]&&a.label<r[1]){a.label=r[1],r=o;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(o);break}r[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(l){o=[6,l],n=0}finally{s=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}};function hD(){var e=this,t=hr.useState(1),s=t[0],n=t[1],r=hr.useState(null),a=r[0],i=r[1],o=hr.useState({service:null,durationDays:1,wasteTypes:[],address:null,deliveryTimeSlot:null,pickupTimeSlot:null,customer:null,paymentMethod:"stripe"}),l=o[0],c=o[1];return{currentStep:s,setCurrentStep:n,bookingData:l,priceData:a,updateService:function(e){c(function(t){return uD(uD({},t),{service:e})})},updateDuration:function(e){c(function(t){return uD(uD({},t),{durationDays:e})})},updateWasteTypes:function(e){c(function(t){return uD(uD({},t),{wasteTypes:e})})},updateAddress:function(e){c(function(t){return uD(uD({},t),{address:e})})},updateTimeSlots:function(e,t){c(function(s){return uD(uD({},s),{deliveryTimeSlot:e,pickupTimeSlot:t||null})})},updateCustomer:function(e){c(function(t){return uD(uD({},t),{customer:e})})},updatePaymentMethod:function(e){c(function(t){return uD(uD({},t),{paymentMethod:e})})},calculatePrice:function(){return mD(e,void 0,void 0,function(){var e,t;return pD(this,function(s){switch(s.label){case 0:if(!l.service||!l.address)return[2];s.label=1;case 1:return s.trys.push([1,3,,4]),[4,Oi("POST","/api/calculate-pricing",{serviceId:l.service.id,customerAddress:"".concat(l.address.street,", ").concat(l.address.postalCode," ").concat(l.address.city),wasteTypes:l.wasteTypes,durationDays:l.durationDays})];case 2:return e=s.sent(),i(e),[3,4];case 3:return t=s.sent(),console.error("Erreur calcul prix:",t),[3,4];case 4:return[2]}})})},calculateTotalPrice:function(){var e;if(!a)return{basePrice:0,durationPrice:0,deliveryFee:0,transportCost:0,treatmentCosts:{},totalTreatmentCost:0,maxTonnage:0,totalHT:0,vat:0,totalTTC:0};var t=parseFloat((null===(e=l.service)||void 0===e?void 0:e.basePrice)||"0"),s=a.transportCost||0,n=a.totalTreatmentCost||0,r=t+s+n,i=.2*r,o=r+i;return{basePrice:t,durationPrice:0,deliveryFee:0,transportCost:s,treatmentCosts:a.treatmentCosts||{},totalTreatmentCost:n,maxTonnage:a.maxTonnage||0,totalHT:r,vat:i,totalTTC:o}},resetBooking:function(){n(1),i(null),c({service:null,durationDays:1,wasteTypes:[],address:null,deliveryTimeSlot:null,pickupTimeSlot:null,customer:null,paymentMethod:"stripe"})}}}var xD=function(e,t){var s={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(s[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(s[n[r]]=e[n[r]])}return s},fD=bl("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),vD=hr.forwardRef(function(e,t){var s=e.className,n=e.variant,r=xD(e,["className","variant"]);return Fr.jsx("div",{ref:t,role:"alert",className:Fd(fD({variant:n}),s),...r})});vD.displayName="Alert",hr.forwardRef(function(e,t){var s=e.className,n=xD(e,["className"]);return Fr.jsx("h5",{ref:t,className:Fd("mb-1 font-medium leading-none tracking-tight",s),...n})}).displayName="AlertTitle";var gD=hr.forwardRef(function(e,t){var s=e.className,n=xD(e,["className"]);return Fr.jsx("div",{ref:t,className:Fd("text-sm [&_p]:leading-relaxed",s),...n})});gD.displayName="AlertDescription";var yD=function(){return yD=Object.assign||function(e){for(var t,s=1,n=arguments.length;s<n;s++)for(var r in t=arguments[s])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},yD.apply(this,arguments)};function bD(e,t,s){for(var n,r=0,a=t.length;r<a;r++)!n&&r in t||(n||(n=Array.prototype.slice.call(t,0,r)),n[r]=t[r]);return e.concat(n||Array.prototype.slice.call(t))}function jD(e){return"multiple"===e.mode}function ND(e){return"range"===e.mode}function wD(e){return"single"===e.mode}"function"==typeof SuppressedError&&SuppressedError;var kD={root:"rdp",multiple_months:"rdp-multiple_months",with_weeknumber:"rdp-with_weeknumber",vhidden:"rdp-vhidden",button_reset:"rdp-button_reset",button:"rdp-button",caption:"rdp-caption",caption_start:"rdp-caption_start",caption_end:"rdp-caption_end",caption_between:"rdp-caption_between",caption_label:"rdp-caption_label",caption_dropdowns:"rdp-caption_dropdowns",dropdown:"rdp-dropdown",dropdown_month:"rdp-dropdown_month",dropdown_year:"rdp-dropdown_year",dropdown_icon:"rdp-dropdown_icon",months:"rdp-months",month:"rdp-month",table:"rdp-table",tbody:"rdp-tbody",tfoot:"rdp-tfoot",head:"rdp-head",head_row:"rdp-head_row",head_cell:"rdp-head_cell",nav:"rdp-nav",nav_button:"rdp-nav_button",nav_button_previous:"rdp-nav_button_previous",nav_button_next:"rdp-nav_button_next",nav_icon:"rdp-nav_icon",row:"rdp-row",weeknumber:"rdp-weeknumber",cell:"rdp-cell",day:"rdp-day",day_today:"rdp-day_today",day_outside:"rdp-day_outside",day_selected:"rdp-day_selected",day_disabled:"rdp-day_disabled",day_hidden:"rdp-day_hidden",day_range_start:"rdp-day_range_start",day_range_end:"rdp-day_range_end",day_range_middle:"rdp-day_range_middle"};var CD=Object.freeze({__proto__:null,formatCaption:function(e,t){return fj(e,"LLLL y",t)},formatDay:function(e,t){return fj(e,"d",t)},formatMonthCaption:function(e,t){return fj(e,"LLLL",t)},formatWeekNumber:function(e){return"".concat(e)},formatWeekdayName:function(e,t){return fj(e,"cccccc",t)},formatYearCaption:function(e,t){return fj(e,"yyyy",t)}}),SD=Object.freeze({__proto__:null,labelDay:function(e,t,s){return fj(e,"do MMMM (EEEE)",s)},labelMonthDropdown:function(){return"Month: "},labelNext:function(){return"Go to next month"},labelPrevious:function(){return"Go to previous month"},labelWeekNumber:function(e){return"Week n. ".concat(e)},labelWeekday:function(e,t){return fj(e,"cccc",t)},labelYearDropdown:function(){return"Year: "}});var _D=hr.createContext(void 0);function PD(e){var t,s,n=e.initialProps,r={captionLayout:"buttons",classNames:kD,formatters:CD,labels:SD,locale:$b,modifiersClassNames:{},modifiers:{},numberOfMonths:1,styles:{},today:new Date,mode:"default"},a=function(e){var t=e.fromYear,s=e.toYear,n=e.fromMonth,r=e.toMonth,a=e.fromDate,i=e.toDate;return n?a=Ab(n):t&&(a=new Date(t,0,1)),r?i=Tb(r):s&&(i=new Date(s,11,31)),{fromDate:a?Nb(a):void 0,toDate:i?Nb(i):void 0}}(n),i=a.fromDate,o=a.toDate,l=null!==(t=n.captionLayout)&&void 0!==t?t:r.captionLayout;"buttons"===l||i&&o||(l="buttons"),(wD(n)||jD(n)||ND(n))&&(s=n.onSelect);var c=yD(yD(yD({},r),n),{captionLayout:l,classNames:yD(yD({},r.classNames),n.classNames),components:yD({},n.components),formatters:yD(yD({},r.formatters),n.formatters),fromDate:i,labels:yD(yD({},r.labels),n.labels),mode:n.mode||r.mode,modifiers:yD(yD({},r.modifiers),n.modifiers),modifiersClassNames:yD(yD({},r.modifiersClassNames),n.modifiersClassNames),onSelect:s,styles:yD(yD({},r.styles),n.styles),toDate:o});return Fr.jsx(_D.Provider,{value:c,children:e.children})}function ED(){var e=hr.useContext(_D);if(!e)throw new Error("useDayPicker must be used within a DayPickerProvider.");return e}function DD(e){var t=ED(),s=t.locale,n=t.classNames,r=t.styles,a=t.formatters.formatCaption;return Fr.jsx("div",{className:n.caption_label,style:r.caption_label,"aria-live":"polite",role:"presentation",id:e.id,children:a(e.displayMonth,{locale:s})})}function TD(e){return Fr.jsx("svg",yD({width:"8px",height:"8px",viewBox:"0 0 120 120","data-testid":"iconDropdown"},e,{children:Fr.jsx("path",{d:"M4.22182541,48.2218254 C8.44222828,44.0014225 15.2388494,43.9273804 19.5496459,47.9996989 L19.7781746,48.2218254 L60,88.443 L100.221825,48.2218254 C104.442228,44.0014225 111.238849,43.9273804 115.549646,47.9996989 L115.778175,48.2218254 C119.998577,52.4422283 120.07262,59.2388494 116.000301,63.5496459 L115.778175,63.7781746 L67.7781746,111.778175 C63.5577717,115.998577 56.7611506,116.07262 52.4503541,112.000301 L52.2218254,111.778175 L4.22182541,63.7781746 C-0.0739418023,59.4824074 -0.0739418023,52.5175926 4.22182541,48.2218254 Z",fill:"currentColor",fillRule:"nonzero"})}))}function AD(e){var t,s,n=e.onChange,r=e.value,a=e.children,i=e.caption,o=e.className,l=e.style,c=ED(),d=null!==(s=null===(t=c.components)||void 0===t?void 0:t.IconDropdown)&&void 0!==s?s:TD;return Fr.jsxs("div",{className:o,style:l,children:[Fr.jsx("span",{className:c.classNames.vhidden,children:e["aria-label"]}),Fr.jsx("select",{name:e.name,"aria-label":e["aria-label"],className:c.classNames.dropdown,style:c.styles.dropdown,value:r,onChange:n,children:a}),Fr.jsxs("div",{className:c.classNames.caption_label,style:c.styles.caption_label,"aria-hidden":"true",children:[i,Fr.jsx(d,{className:c.classNames.dropdown_icon,style:c.styles.dropdown_icon})]})]})}function OD(e){var t,s=ED(),n=s.fromDate,r=s.toDate,a=s.styles,i=s.locale,o=s.formatters.formatMonthCaption,l=s.classNames,c=s.components,d=s.labels.labelMonthDropdown;if(!n)return Fr.jsx(Fr.Fragment,{});if(!r)return Fr.jsx(Fr.Fragment,{});var u=[];if(function(e,t){const s=mb(e),n=mb(t);return s.getFullYear()===n.getFullYear()}(n,r))for(var m=Ab(n),p=n.getMonth();p<=r.getMonth();p++)u.push(wj(m,p));else for(m=Ab(new Date),p=0;p<=11;p++)u.push(wj(m,p));var h=null!==(t=null==c?void 0:c.Dropdown)&&void 0!==t?t:AD;return Fr.jsx(h,{name:"months","aria-label":d(),className:l.dropdown_month,style:a.dropdown_month,onChange:function(t){var s=Number(t.target.value),n=wj(Ab(e.displayMonth),s);e.onChange(n)},value:e.displayMonth.getMonth(),caption:o(e.displayMonth,{locale:i}),children:u.map(function(e){return Fr.jsx("option",{value:e.getMonth(),children:o(e,{locale:i})},e.getMonth())})})}function RD(e){var t,s=e.displayMonth,n=ED(),r=n.fromDate,a=n.toDate,i=n.locale,o=n.styles,l=n.classNames,c=n.components,d=n.formatters.formatYearCaption,u=n.labels.labelYearDropdown,m=[];if(!r)return Fr.jsx(Fr.Fragment,{});if(!a)return Fr.jsx(Fr.Fragment,{});for(var p=r.getFullYear(),h=a.getFullYear(),x=p;x<=h;x++)m.push(kj(Ob(new Date),x));var f=null!==(t=null==c?void 0:c.Dropdown)&&void 0!==t?t:AD;return Fr.jsx(f,{name:"years","aria-label":u(),className:l.dropdown_year,style:o.dropdown_year,onChange:function(t){var n=kj(Ab(s),Number(t.target.value));e.onChange(n)},value:s.getFullYear(),caption:d(s,{locale:i}),children:m.map(function(e){return Fr.jsx("option",{value:e.getFullYear(),children:d(e,{locale:i})},e.getFullYear())})})}function FD(){var e=ED(),t=function(e){var t=e.month,s=e.defaultMonth,n=e.today,r=t||s||n||new Date,a=e.toDate,i=e.fromDate,o=e.numberOfMonths,l=void 0===o?1:o;return a&&Eb(a,r)<0&&(r=xb(a,-1*(l-1))),i&&Eb(r,i)<0&&(r=i),Ab(r)}(e),s=function(e,t){var s=hr.useState(e),n=s[0];return[void 0===t?n:t,s[1]]}(t,e.month),n=s[0],r=s[1];return[n,function(t){var s;if(!e.disableNavigation){var n=Ab(t);r(n),null===(s=e.onMonthChange)||void 0===s||s.call(e,n)}}]}var ID=hr.createContext(void 0);function MD(e){var t=ED(),s=FD(),n=s[0],r=s[1],a=function(e,t){for(var s=t.reverseMonths,n=t.numberOfMonths,r=Ab(e),a=Eb(Ab(xb(r,n)),r),i=[],o=0;o<a;o++){var l=xb(r,o);i.push(l)}return s&&(i=i.reverse()),i}(n,t),i=function(e,t){if(!t.disableNavigation){var s=t.toDate,n=t.pagedNavigation,r=t.numberOfMonths,a=void 0===r?1:r,i=n?a:1,o=Ab(e);if(!s)return xb(o,i);if(!(Eb(s,e)<a))return xb(o,i)}}(n,t),o=function(e,t){if(!t.disableNavigation){var s=t.fromDate,n=t.pagedNavigation,r=t.numberOfMonths,a=n?void 0===r?1:r:1,i=Ab(e);if(!s)return xb(i,-a);if(!(Eb(i,s)<=0))return xb(i,-a)}}(n,t),l=function(e){return a.some(function(t){return jj(e,t)})},c={currentMonth:n,displayMonths:a,goToMonth:r,goToDate:function(e,s){l(e)||(s&&bj(e,s)?r(xb(e,1+-1*t.numberOfMonths)):r(e))},previousMonth:o,nextMonth:i,isDateDisplayed:l};return Fr.jsx(ID.Provider,{value:c,children:e.children})}function LD(){var e=hr.useContext(ID);if(!e)throw new Error("useNavigation must be used within a NavigationProvider");return e}function qD(e){var t,s=ED(),n=s.classNames,r=s.styles,a=s.components,i=LD().goToMonth,o=function(t){i(xb(t,e.displayIndex?-e.displayIndex:0))},l=null!==(t=null==a?void 0:a.CaptionLabel)&&void 0!==t?t:DD,c=Fr.jsx(l,{id:e.id,displayMonth:e.displayMonth});return Fr.jsxs("div",{className:n.caption_dropdowns,style:r.caption_dropdowns,children:[Fr.jsx("div",{className:n.vhidden,children:c}),Fr.jsx(OD,{onChange:o,displayMonth:e.displayMonth}),Fr.jsx(RD,{onChange:o,displayMonth:e.displayMonth})]})}function zD(e){return Fr.jsx("svg",yD({width:"16px",height:"16px",viewBox:"0 0 120 120"},e,{children:Fr.jsx("path",{d:"M69.490332,3.34314575 C72.6145263,0.218951416 77.6798462,0.218951416 80.8040405,3.34314575 C83.8617626,6.40086786 83.9268205,11.3179931 80.9992143,14.4548388 L80.8040405,14.6568542 L35.461,60 L80.8040405,105.343146 C83.8617626,108.400868 83.9268205,113.317993 80.9992143,116.454839 L80.8040405,116.656854 C77.7463184,119.714576 72.8291931,119.779634 69.6923475,116.852028 L69.490332,116.656854 L18.490332,65.6568542 C15.4326099,62.5991321 15.367552,57.6820069 18.2951583,54.5451612 L18.490332,54.3431458 L69.490332,3.34314575 Z",fill:"currentColor",fillRule:"nonzero"})}))}function VD(e){return Fr.jsx("svg",yD({width:"16px",height:"16px",viewBox:"0 0 120 120"},e,{children:Fr.jsx("path",{d:"M49.8040405,3.34314575 C46.6798462,0.218951416 41.6145263,0.218951416 38.490332,3.34314575 C35.4326099,6.40086786 35.367552,11.3179931 38.2951583,14.4548388 L38.490332,14.6568542 L83.8333725,60 L38.490332,105.343146 C35.4326099,108.400868 35.367552,113.317993 38.2951583,116.454839 L38.490332,116.656854 C41.5480541,119.714576 46.4651794,119.779634 49.602025,116.852028 L49.8040405,116.656854 L100.804041,65.6568542 C103.861763,62.5991321 103.926821,57.6820069 100.999214,54.5451612 L100.804041,54.3431458 L49.8040405,3.34314575 Z",fill:"currentColor"})}))}var BD=hr.forwardRef(function(e,t){var s=ED(),n=s.classNames,r=s.styles,a=[n.button_reset,n.button];e.className&&a.push(e.className);var i=a.join(" "),o=yD(yD({},r.button_reset),r.button);return e.style&&Object.assign(o,e.style),Fr.jsx("button",yD({},e,{ref:t,type:"button",className:i,style:o}))});function $D(e){var t,s,n=ED(),r=n.dir,a=n.locale,i=n.classNames,o=n.styles,l=n.labels,c=l.labelPrevious,d=l.labelNext,u=n.components;if(!e.nextMonth&&!e.previousMonth)return Fr.jsx(Fr.Fragment,{});var m=c(e.previousMonth,{locale:a}),p=[i.nav_button,i.nav_button_previous].join(" "),h=d(e.nextMonth,{locale:a}),x=[i.nav_button,i.nav_button_next].join(" "),f=null!==(t=null==u?void 0:u.IconRight)&&void 0!==t?t:VD,v=null!==(s=null==u?void 0:u.IconLeft)&&void 0!==s?s:zD;return Fr.jsxs("div",{className:i.nav,style:o.nav,children:[!e.hidePrevious&&Fr.jsx(BD,{name:"previous-month","aria-label":m,className:p,style:o.nav_button_previous,disabled:!e.previousMonth,onClick:e.onPreviousClick,children:"rtl"===r?Fr.jsx(f,{className:i.nav_icon,style:o.nav_icon}):Fr.jsx(v,{className:i.nav_icon,style:o.nav_icon})}),!e.hideNext&&Fr.jsx(BD,{name:"next-month","aria-label":h,className:x,style:o.nav_button_next,disabled:!e.nextMonth,onClick:e.onNextClick,children:"rtl"===r?Fr.jsx(v,{className:i.nav_icon,style:o.nav_icon}):Fr.jsx(f,{className:i.nav_icon,style:o.nav_icon})})]})}function WD(e){var t=ED().numberOfMonths,s=LD(),n=s.previousMonth,r=s.nextMonth,a=s.goToMonth,i=s.displayMonths,o=i.findIndex(function(t){return jj(e.displayMonth,t)}),l=0===o,c=o===i.length-1,d=t>1&&(l||!c),u=t>1&&(c||!l);return Fr.jsx($D,{displayMonth:e.displayMonth,hideNext:d,hidePrevious:u,nextMonth:r,previousMonth:n,onPreviousClick:function(){n&&a(n)},onNextClick:function(){r&&a(r)}})}function UD(e){var t,s,n=ED(),r=n.classNames,a=n.disableNavigation,i=n.styles,o=n.captionLayout,l=n.components,c=null!==(t=null==l?void 0:l.CaptionLabel)&&void 0!==t?t:DD;return s=a?Fr.jsx(c,{id:e.id,displayMonth:e.displayMonth}):"dropdown"===o?Fr.jsx(qD,{displayMonth:e.displayMonth,id:e.id}):"dropdown-buttons"===o?Fr.jsxs(Fr.Fragment,{children:[Fr.jsx(qD,{displayMonth:e.displayMonth,displayIndex:e.displayIndex,id:e.id}),Fr.jsx(WD,{displayMonth:e.displayMonth,displayIndex:e.displayIndex,id:e.id})]}):Fr.jsxs(Fr.Fragment,{children:[Fr.jsx(c,{id:e.id,displayMonth:e.displayMonth,displayIndex:e.displayIndex}),Fr.jsx(WD,{displayMonth:e.displayMonth,id:e.id})]}),Fr.jsx("div",{className:r.caption,style:i.caption,children:s})}function KD(e){var t=ED(),s=t.footer,n=t.styles,r=t.classNames.tfoot;return s?Fr.jsx("tfoot",{className:r,style:n.tfoot,children:Fr.jsx("tr",{children:Fr.jsx("td",{colSpan:8,children:s})})}):Fr.jsx(Fr.Fragment,{})}function HD(){var e=ED(),t=e.classNames,s=e.styles,n=e.showWeekNumber,r=e.locale,a=e.weekStartsOn,i=e.ISOWeek,o=e.formatters.formatWeekdayName,l=e.labels.labelWeekday,c=function(e,t,s){for(var n=s?bb(new Date):yb(new Date,{locale:e,weekStartsOn:t}),r=[],a=0;a<7;a++){var i=hb(n,a);r.push(i)}return r}(r,a,i);return Fr.jsxs("tr",{style:s.head_row,className:t.head_row,children:[n&&Fr.jsx("td",{style:s.head_cell,className:t.head_cell}),c.map(function(e,n){return Fr.jsx("th",{scope:"col",className:t.head_cell,style:s.head_cell,"aria-label":l(e,{locale:r}),children:o(e,{locale:r})},n)})]})}function ZD(){var e,t=ED(),s=t.classNames,n=t.styles,r=t.components,a=null!==(e=null==r?void 0:r.HeadRow)&&void 0!==e?e:HD;return Fr.jsx("thead",{style:n.head,className:s.head,children:Fr.jsx(a,{})})}function QD(e){var t=ED(),s=t.locale,n=t.formatters.formatDay;return Fr.jsx(Fr.Fragment,{children:n(e.date,{locale:s})})}var GD=hr.createContext(void 0);function YD(e){if(!jD(e.initialProps)){return Fr.jsx(GD.Provider,{value:{selected:void 0,modifiers:{disabled:[]}},children:e.children})}return Fr.jsx(JD,{initialProps:e.initialProps,children:e.children})}function JD(e){var t=e.initialProps,s=e.children,n=t.selected,r=t.min,a=t.max,i={disabled:[]};n&&i.disabled.push(function(e){var t=a&&n.length>a-1,s=n.some(function(t){return _b(t,e)});return Boolean(t&&!s)});var o={selected:n,onDayClick:function(e,s,i){var o,l;if((null===(o=t.onDayClick)||void 0===o||o.call(t,e,s,i),!Boolean(s.selected&&r&&(null==n?void 0:n.length)===r))&&!Boolean(!s.selected&&a&&(null==n?void 0:n.length)===a)){var c=n?bD([],n):[];if(s.selected){var d=c.findIndex(function(t){return _b(e,t)});c.splice(d,1)}else c.push(e);null===(l=t.onSelect)||void 0===l||l.call(t,c,e,s,i)}},modifiers:i};return Fr.jsx(GD.Provider,{value:o,children:s})}function XD(){var e=hr.useContext(GD);if(!e)throw new Error("useSelectMultiple must be used within a SelectMultipleProvider");return e}var eT,tT,sT=hr.createContext(void 0);function nT(e){if(!ND(e.initialProps)){return Fr.jsx(sT.Provider,{value:{selected:void 0,modifiers:{range_start:[],range_end:[],range_middle:[],disabled:[]}},children:e.children})}return Fr.jsx(rT,{initialProps:e.initialProps,children:e.children})}function rT(e){var t=e.initialProps,s=e.children,n=t.selected,r=n||{},a=r.from,i=r.to,o=t.min,l=t.max,c={range_start:[],range_end:[],range_middle:[],disabled:[]};if(a?(c.range_start=[a],i?(c.range_end=[i],_b(a,i)||(c.range_middle=[{after:a,before:i}])):c.range_end=[a]):i&&(c.range_start=[i],c.range_end=[i]),o&&(a&&!i&&c.disabled.push({after:Nj(a,o-1),before:hb(a,o-1)}),a&&i&&c.disabled.push({after:a,before:hb(a,o-1)}),!a&&i&&c.disabled.push({after:Nj(i,o-1),before:hb(i,o-1)})),l){if(a&&!i&&(c.disabled.push({before:hb(a,1-l)}),c.disabled.push({after:hb(a,l-1)})),a&&i){var d=l-(kb(i,a)+1);c.disabled.push({before:Nj(a,d)}),c.disabled.push({after:hb(i,d)})}!a&&i&&(c.disabled.push({before:hb(i,1-l)}),c.disabled.push({after:hb(i,l-1)}))}return Fr.jsx(sT.Provider,{value:{selected:n,onDayClick:function(e,s,r){var a,i;null===(a=t.onDayClick)||void 0===a||a.call(t,e,s,r);var o=function(e,t){var s=t||{},n=s.from,r=s.to;if(n&&r){if(_b(r,e)&&_b(n,e))return;if(_b(r,e))return{from:r,to:void 0};if(_b(n,e))return;return yj(n,e)?{from:e,to:r}:{from:n,to:e}}return r?yj(e,r)?{from:r,to:e}:{from:e,to:r}:n?bj(e,n)?{from:e,to:n}:{from:n,to:e}:{from:e,to:void 0}}(e,n);null===(i=t.onSelect)||void 0===i||i.call(t,o,e,s,r)},modifiers:c},children:s})}function aT(){var e=hr.useContext(sT);if(!e)throw new Error("useSelectRange must be used within a SelectRangeProvider");return e}function iT(e){return Array.isArray(e)?bD([],e):void 0!==e?[e]:[]}(tT=eT||(eT={})).Outside="outside",tT.Disabled="disabled",tT.Selected="selected",tT.Hidden="hidden",tT.Today="today",tT.RangeStart="range_start",tT.RangeEnd="range_end",tT.RangeMiddle="range_middle";var oT=eT.Selected,lT=eT.Disabled,cT=eT.Hidden,dT=eT.Today,uT=eT.RangeEnd,mT=eT.RangeMiddle,pT=eT.RangeStart,hT=eT.Outside;var xT=hr.createContext(void 0);function fT(e){var t=ED(),s=function(e,t,s){var n,r=((n={})[oT]=iT(e.selected),n[lT]=iT(e.disabled),n[cT]=iT(e.hidden),n[dT]=[e.today],n[uT]=[],n[mT]=[],n[pT]=[],n[hT]=[],n);return e.fromDate&&r[lT].push({before:e.fromDate}),e.toDate&&r[lT].push({after:e.toDate}),jD(e)?r[lT]=r[lT].concat(t.modifiers[lT]):ND(e)&&(r[lT]=r[lT].concat(s.modifiers[lT]),r[pT]=s.modifiers[pT],r[mT]=s.modifiers[mT],r[uT]=s.modifiers[uT]),r}(t,XD(),aT()),n=function(e){var t={};return Object.entries(e).forEach(function(e){var s=e[0],n=e[1];t[s]=iT(n)}),t}(t.modifiers),r=yD(yD({},s),n);return Fr.jsx(xT.Provider,{value:r,children:e.children})}function vT(){var e=hr.useContext(xT);if(!e)throw new Error("useModifiers must be used within a ModifiersProvider");return e}function gT(e,t){return t.some(function(t){if("boolean"==typeof t)return t;if(Pb(t))return _b(e,t);var s,n,r,a,i;if(function(e){return Array.isArray(e)&&e.every(Pb)}(t))return t.includes(e);if(function(e){return Boolean(e&&"object"==typeof e&&"from"in e)}(t))return s=e,a=(n=t).from,i=n.to,a&&i?(kb(i,a)<0&&(a=(r=[i,a])[0],i=r[1]),kb(s,a)>=0&&kb(i,s)>=0):i?_b(i,s):!!a&&_b(a,s);if(function(e){return Boolean(e&&"object"==typeof e&&"dayOfWeek"in e)}(t))return t.dayOfWeek.includes(e.getDay());if(function(e){return Boolean(e&&"object"==typeof e&&"before"in e&&"after"in e)}(t)){var o=kb(t.before,e)>0,l=kb(t.after,e)<0;return yj(t.before,t.after)?l&&o:o||l}return function(e){return Boolean(e&&"object"==typeof e&&"after"in e)}(t)?kb(e,t.after)>0:function(e){return Boolean(e&&"object"==typeof e&&"before"in e)}(t)?kb(t.before,e)>0:"function"==typeof t&&t(e)})}function yT(e,t,s){var n=Object.keys(t).reduce(function(s,n){var r=t[n];return gT(e,r)&&s.push(n),s},[]),r={};return n.forEach(function(e){return r[e]=!0}),s&&!jj(e,s)&&(r.outside=!0),r}function bT(e,t){var s=t.moveBy,n=t.direction,r=t.context,a=t.modifiers,i=t.retry,o=void 0===i?{count:0,lastFocused:e}:i,l=r.weekStartsOn,c=r.fromDate,d=r.toDate,u=r.locale,m={day:hb,week:Cb,month:xb,year:Sb,startOfWeek:function(e){return r.ISOWeek?bb(e):yb(e,{locale:u,weekStartsOn:l})},endOfWeek:function(e){return r.ISOWeek?Fb(e):Rb(e,{locale:u,weekStartsOn:l})}}[s](e,"after"===n?1:-1);"before"===n&&c?m=function(e){let t;return e.forEach(function(e){const s=mb(e);(void 0===t||t<s||isNaN(Number(s)))&&(t=s)}),t||new Date(NaN)}([c,m]):"after"===n&&d&&(m=function(e){let t;return e.forEach(e=>{const s=mb(e);(!t||t>s||isNaN(+s))&&(t=s)}),t||new Date(NaN)}([d,m]));var p=!0;if(a){var h=yT(m,a);p=!h.disabled&&!h.hidden}return p?m:o.count>365?o.lastFocused:bT(m,{moveBy:s,direction:n,context:r,modifiers:a,retry:yD(yD({},o),{count:o.count+1})})}var jT=hr.createContext(void 0);function NT(e){var t=LD(),s=vT(),n=hr.useState(),r=n[0],a=n[1],i=hr.useState(),o=i[0],l=i[1],c=function(e,t){for(var s,n,r=Ab(e[0]),a=Tb(e[e.length-1]),i=r;i<=a;){var o=yT(i,t);if(o.disabled||o.hidden)i=hb(i,1);else{if(o.selected)return i;o.today&&!n&&(n=i),s||(s=i),i=hb(i,1)}}return n||s}(t.displayMonths,s),d=(null!=r?r:o&&t.isDateDisplayed(o))?o:c,u=function(e){a(e)},m=ED(),p=function(e,n){if(r){var a=bT(r,{moveBy:e,direction:n,context:m,modifiers:s});_b(r,a)||(t.goToDate(a,r),u(a))}},h={focusedDay:r,focusTarget:d,blur:function(){l(r),a(void 0)},focus:u,focusDayAfter:function(){return p("day","after")},focusDayBefore:function(){return p("day","before")},focusWeekAfter:function(){return p("week","after")},focusWeekBefore:function(){return p("week","before")},focusMonthBefore:function(){return p("month","before")},focusMonthAfter:function(){return p("month","after")},focusYearBefore:function(){return p("year","before")},focusYearAfter:function(){return p("year","after")},focusStartOfWeek:function(){return p("startOfWeek","before")},focusEndOfWeek:function(){return p("endOfWeek","after")}};return Fr.jsx(jT.Provider,{value:h,children:e.children})}function wT(){var e=hr.useContext(jT);if(!e)throw new Error("useFocusContext must be used within a FocusProvider");return e}var kT=hr.createContext(void 0);function CT(e){if(!wD(e.initialProps)){return Fr.jsx(kT.Provider,{value:{selected:void 0},children:e.children})}return Fr.jsx(ST,{initialProps:e.initialProps,children:e.children})}function ST(e){var t=e.initialProps,s=e.children,n={selected:t.selected,onDayClick:function(e,s,n){var r,a,i;null===(r=t.onDayClick)||void 0===r||r.call(t,e,s,n),!s.selected||t.required?null===(i=t.onSelect)||void 0===i||i.call(t,e,e,s,n):null===(a=t.onSelect)||void 0===a||a.call(t,void 0,e,s,n)}};return Fr.jsx(kT.Provider,{value:n,children:s})}function _T(){var e=hr.useContext(kT);if(!e)throw new Error("useSelectSingle must be used within a SelectSingleProvider");return e}function PT(e,t){var s=[e.classNames.day];return Object.keys(t).forEach(function(t){var n=e.modifiersClassNames[t];if(n)s.push(n);else if(function(e){return Object.values(eT).includes(e)}(t)){var r=e.classNames["day_".concat(t)];r&&s.push(r)}}),s}function ET(e,t,s){var n,r,a,i=ED(),o=wT(),l=function(e,t){return yT(e,vT(),t)}(e,t),c=function(e,t){var s=ED(),n=_T(),r=XD(),a=aT(),i=wT(),o=i.focusDayAfter,l=i.focusDayBefore,c=i.focusWeekAfter,d=i.focusWeekBefore,u=i.blur,m=i.focus,p=i.focusMonthBefore,h=i.focusMonthAfter,x=i.focusYearBefore,f=i.focusYearAfter,v=i.focusStartOfWeek,g=i.focusEndOfWeek;return{onClick:function(i){var o,l,c,d;wD(s)?null===(o=n.onDayClick)||void 0===o||o.call(n,e,t,i):jD(s)?null===(l=r.onDayClick)||void 0===l||l.call(r,e,t,i):ND(s)?null===(c=a.onDayClick)||void 0===c||c.call(a,e,t,i):null===(d=s.onDayClick)||void 0===d||d.call(s,e,t,i)},onFocus:function(n){var r;m(e),null===(r=s.onDayFocus)||void 0===r||r.call(s,e,t,n)},onBlur:function(n){var r;u(),null===(r=s.onDayBlur)||void 0===r||r.call(s,e,t,n)},onKeyDown:function(n){var r;switch(n.key){case"ArrowLeft":n.preventDefault(),n.stopPropagation(),"rtl"===s.dir?o():l();break;case"ArrowRight":n.preventDefault(),n.stopPropagation(),"rtl"===s.dir?l():o();break;case"ArrowDown":n.preventDefault(),n.stopPropagation(),c();break;case"ArrowUp":n.preventDefault(),n.stopPropagation(),d();break;case"PageUp":n.preventDefault(),n.stopPropagation(),n.shiftKey?x():p();break;case"PageDown":n.preventDefault(),n.stopPropagation(),n.shiftKey?f():h();break;case"Home":n.preventDefault(),n.stopPropagation(),v();break;case"End":n.preventDefault(),n.stopPropagation(),g()}null===(r=s.onDayKeyDown)||void 0===r||r.call(s,e,t,n)},onKeyUp:function(n){var r;null===(r=s.onDayKeyUp)||void 0===r||r.call(s,e,t,n)},onMouseEnter:function(n){var r;null===(r=s.onDayMouseEnter)||void 0===r||r.call(s,e,t,n)},onMouseLeave:function(n){var r;null===(r=s.onDayMouseLeave)||void 0===r||r.call(s,e,t,n)},onPointerEnter:function(n){var r;null===(r=s.onDayPointerEnter)||void 0===r||r.call(s,e,t,n)},onPointerLeave:function(n){var r;null===(r=s.onDayPointerLeave)||void 0===r||r.call(s,e,t,n)},onTouchCancel:function(n){var r;null===(r=s.onDayTouchCancel)||void 0===r||r.call(s,e,t,n)},onTouchEnd:function(n){var r;null===(r=s.onDayTouchEnd)||void 0===r||r.call(s,e,t,n)},onTouchMove:function(n){var r;null===(r=s.onDayTouchMove)||void 0===r||r.call(s,e,t,n)},onTouchStart:function(n){var r;null===(r=s.onDayTouchStart)||void 0===r||r.call(s,e,t,n)}}}(e,l),d=function(){var e=ED(),t=_T(),s=XD(),n=aT();return wD(e)?t.selected:jD(e)?s.selected:ND(e)?n.selected:void 0}(),u=Boolean(i.onDayClick||"default"!==i.mode);hr.useEffect(function(){var t;l.outside||o.focusedDay&&u&&_b(o.focusedDay,e)&&(null===(t=s.current)||void 0===t||t.focus())},[o.focusedDay,e,s,u,l.outside]);var m=PT(i,l).join(" "),p=function(e,t){var s=yD({},e.styles.day);return Object.keys(t).forEach(function(t){var n;s=yD(yD({},s),null===(n=e.modifiersStyles)||void 0===n?void 0:n[t])}),s}(i,l),h=Boolean(l.outside&&!i.showOutsideDays||l.hidden),x=null!==(a=null===(r=i.components)||void 0===r?void 0:r.DayContent)&&void 0!==a?a:QD,f={style:p,className:m,children:Fr.jsx(x,{date:e,displayMonth:t,activeModifiers:l}),role:"gridcell"},v=o.focusTarget&&_b(o.focusTarget,e)&&!l.outside,g=o.focusedDay&&_b(o.focusedDay,e),y=yD(yD(yD({},f),((n={disabled:l.disabled,role:"gridcell"})["aria-selected"]=l.selected,n.tabIndex=g||v?0:-1,n)),c);return{isButton:u,isHidden:h,activeModifiers:l,selectedDays:d,buttonProps:y,divProps:f}}function DT(e){var t=hr.useRef(null),s=ET(e.date,e.displayMonth,t);return s.isHidden?Fr.jsx("div",{role:"gridcell"}):s.isButton?Fr.jsx(BD,yD({name:"day",ref:t},s.buttonProps)):Fr.jsx("div",yD({},s.divProps))}function TT(e){var t=e.number,s=e.dates,n=ED(),r=n.onWeekNumberClick,a=n.styles,i=n.classNames,o=n.locale,l=n.labels.labelWeekNumber,c=(0,n.formatters.formatWeekNumber)(Number(t),{locale:o});if(!r)return Fr.jsx("span",{className:i.weeknumber,style:a.weeknumber,children:c});var d=l(Number(t),{locale:o});return Fr.jsx(BD,{name:"week-number","aria-label":d,className:i.weeknumber,style:a.weeknumber,onClick:function(e){r(t,s,e)},children:c})}function AT(e){var t,s,n,r=ED(),a=r.styles,i=r.classNames,o=r.showWeekNumber,l=r.components,c=null!==(t=null==l?void 0:l.Day)&&void 0!==t?t:DT,d=null!==(s=null==l?void 0:l.WeekNumber)&&void 0!==s?s:TT;return o&&(n=Fr.jsx("td",{className:i.cell,style:a.cell,children:Fr.jsx(d,{number:e.weekNumber,dates:e.dates})})),Fr.jsxs("tr",{className:i.row,style:a.row,children:[n,e.dates.map(function(t){return Fr.jsx("td",{className:i.cell,style:a.cell,role:"presentation",children:Fr.jsx(c,{displayMonth:e.displayMonth,date:t})},function(e){return Math.trunc(+mb(e)/1e3)}(t))})]})}function OT(e,t,s){for(var n=(null==s?void 0:s.ISOWeek)?Fb(t):Rb(t,s),r=(null==s?void 0:s.ISOWeek)?bb(e):yb(e,s),a=kb(n,r),i=[],o=0;o<=a;o++)i.push(hb(r,o));return i.reduce(function(e,t){var n=(null==s?void 0:s.ISOWeek)?Wb(t):Kb(t,s),r=e.find(function(e){return e.weekNumber===n});return r?(r.dates.push(t),e):(e.push({weekNumber:n,dates:[t]}),e)},[])}function RT(e){var t,s,n,r=ED(),a=r.locale,i=r.classNames,o=r.styles,l=r.hideHead,c=r.fixedWeeks,d=r.components,u=r.weekStartsOn,m=r.firstWeekContainsDate,p=r.ISOWeek,h=function(e,t){var s=OT(Ab(e),Tb(e),t);if(null==t?void 0:t.useFixedWeeks){var n=gj(e,t);if(n<6){var r=s[s.length-1],a=r.dates[r.dates.length-1],i=Cb(a,6-n),o=OT(Cb(a,1),i,t);s.push.apply(s,o)}}return s}(e.displayMonth,{useFixedWeeks:Boolean(c),ISOWeek:p,locale:a,weekStartsOn:u,firstWeekContainsDate:m}),x=null!==(t=null==d?void 0:d.Head)&&void 0!==t?t:ZD,f=null!==(s=null==d?void 0:d.Row)&&void 0!==s?s:AT,v=null!==(n=null==d?void 0:d.Footer)&&void 0!==n?n:KD;return Fr.jsxs("table",{id:e.id,className:i.table,style:o.table,role:"grid","aria-labelledby":e["aria-labelledby"],children:[!l&&Fr.jsx(x,{}),Fr.jsx("tbody",{className:i.tbody,style:o.tbody,children:h.map(function(t){return Fr.jsx(f,{displayMonth:e.displayMonth,dates:t.dates,weekNumber:t.weekNumber},t.weekNumber)})}),Fr.jsx(v,{displayMonth:e.displayMonth})]})}var FT="undefined"!=typeof window&&window.document&&window.document.createElement?hr.useLayoutEffect:hr.useEffect,IT=!1,MT=0;function LT(){return"react-day-picker-".concat(++MT)}function qT(e){var t,s,n=ED(),r=n.dir,a=n.classNames,i=n.styles,o=n.components,l=LD().displayMonths,c=function(e){var t,s=null!=e?e:IT?LT():null,n=hr.useState(s),r=n[0],a=n[1];return FT(function(){null===r&&a(LT())},[]),hr.useEffect(function(){!1===IT&&(IT=!0)},[]),null!==(t=null!=e?e:r)&&void 0!==t?t:void 0}(n.id?"".concat(n.id,"-").concat(e.displayIndex):void 0),d=n.id?"".concat(n.id,"-grid-").concat(e.displayIndex):void 0,u=[a.month],m=i.month,p=0===e.displayIndex,h=e.displayIndex===l.length-1,x=!p&&!h;"rtl"===r&&(h=(t=[p,h])[0],p=t[1]),p&&(u.push(a.caption_start),m=yD(yD({},m),i.caption_start)),h&&(u.push(a.caption_end),m=yD(yD({},m),i.caption_end)),x&&(u.push(a.caption_between),m=yD(yD({},m),i.caption_between));var f=null!==(s=null==o?void 0:o.Caption)&&void 0!==s?s:UD;return Fr.jsxs("div",{className:u.join(" "),style:m,children:[Fr.jsx(f,{id:c,displayMonth:e.displayMonth,displayIndex:e.displayIndex}),Fr.jsx(RT,{id:d,"aria-labelledby":c,displayMonth:e.displayMonth})]},e.displayIndex)}function zT(e){var t=ED(),s=t.classNames,n=t.styles;return Fr.jsx("div",{className:s.months,style:n.months,children:e.children})}function VT(e){var t,s,n=e.initialProps,r=ED(),a=wT(),i=LD(),o=hr.useState(!1),l=o[0],c=o[1];hr.useEffect(function(){r.initialFocus&&a.focusTarget&&(l||(a.focus(a.focusTarget),c(!0)))},[r.initialFocus,l,a.focus,a.focusTarget,a]);var d=[r.classNames.root,r.className];r.numberOfMonths>1&&d.push(r.classNames.multiple_months),r.showWeekNumber&&d.push(r.classNames.with_weeknumber);var u=yD(yD({},r.styles.root),r.style),m=Object.keys(n).filter(function(e){return e.startsWith("data-")}).reduce(function(e,t){var s;return yD(yD({},e),((s={})[t]=n[t],s))},{}),p=null!==(s=null===(t=n.components)||void 0===t?void 0:t.Months)&&void 0!==s?s:zT;return Fr.jsx("div",yD({className:d.join(" "),style:u,dir:r.dir,id:r.id,nonce:n.nonce,title:n.title,lang:n.lang},m,{children:Fr.jsx(p,{children:i.displayMonths.map(function(e,t){return Fr.jsx(qT,{displayIndex:t,displayMonth:e},t)})})}))}function BT(e){var t=e.children,s=function(e,t){var s={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(s[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(s[n[r]]=e[n[r]])}return s}(e,["children"]);return Fr.jsx(PD,{initialProps:s,children:Fr.jsx(MD,{children:Fr.jsx(CT,{initialProps:s,children:Fr.jsx(YD,{initialProps:s,children:Fr.jsx(nT,{initialProps:s,children:Fr.jsx(fT,{children:Fr.jsx(NT,{children:t})})})})})})})}function $T(e){return Fr.jsx(BT,yD({},e,{children:Fr.jsx(VT,{initialProps:e})}))}var WT=function(){return WT=Object.assign||function(e){for(var t,s=1,n=arguments.length;s<n;s++)for(var r in t=arguments[s])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},WT.apply(this,arguments)},UT=function(e,t){var s={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(s[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(s[n[r]]=e[n[r]])}return s};function KT(e){var t=e.className,s=e.classNames,n=e.showOutsideDays,r=void 0===n||n,a=UT(e,["className","classNames","showOutsideDays"]);return Fr.jsx($T,{showOutsideDays:r,className:Fd("p-3",t),classNames:WT({months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:Fd(Mp({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:Fd(Mp({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground aria-selected:bg-accent/50 aria-selected:text-muted-foreground",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible"},s),components:{IconLeft:function(e){var t=e.className,s=UT(e,["className"]);return Fr.jsx(Vl,{className:Fd("h-4 w-4",t),...s})},IconRight:function(e){var t=e.className,s=UT(e,["className"]);return Fr.jsx(Bl,{className:Fd("h-4 w-4",t),...s})}},...a})}KT.displayName="Calendar";var HT="Popover",[ZT,QT]=Gi(HT,[Bm]),GT=Bm(),[YT,JT]=ZT(HT),XT=e=>{const{__scopePopover:t,children:s,open:n,defaultOpen:r,onOpenChange:a,modal:i=!1}=e,o=GT(t),l=hr.useRef(null),[c,d]=hr.useState(!1),[u,m]=Co({prop:n,defaultProp:r??!1,onChange:a,caller:HT});return Fr.jsx(rp,{...o,children:Fr.jsx(YT,{scope:t,contentId:Hd(),triggerRef:l,open:u,onOpenChange:m,onOpenToggle:hr.useCallback(()=>m(e=>!e),[m]),hasCustomAnchor:c,onCustomAnchorAdd:hr.useCallback(()=>d(!0),[]),onCustomAnchorRemove:hr.useCallback(()=>d(!1),[]),modal:i,children:s})})};XT.displayName=HT;var eA="PopoverAnchor";hr.forwardRef((e,t)=>{const{__scopePopover:s,...n}=e,r=JT(eA,s),a=GT(s),{onCustomAnchorAdd:i,onCustomAnchorRemove:o}=r;return hr.useEffect(()=>(i(),()=>o()),[i,o]),Fr.jsx(ap,{...a,...n,ref:t})}).displayName=eA;var tA="PopoverTrigger",sA=hr.forwardRef((e,t)=>{const{__scopePopover:s,...n}=e,r=JT(tA,s),a=GT(s),i=Qi(t,r.triggerRef),o=Fr.jsx(ao.button,{type:"button","aria-haspopup":"dialog","aria-expanded":r.open,"aria-controls":r.contentId,"data-state":hA(r.open),...n,ref:i,onClick:Ki(e.onClick,r.onOpenToggle)});return r.hasCustomAnchor?o:Fr.jsx(ap,{asChild:!0,...a,children:o})});sA.displayName=tA;var nA="PopoverPortal",[rA,aA]=ZT(nA,{forceMount:void 0}),iA=e=>{const{__scopePopover:t,forceMount:s,children:n,container:r}=e,a=JT(nA,t);return Fr.jsx(rA,{scope:t,forceMount:s,children:Fr.jsx(No,{present:s||a.open,children:Fr.jsx(jo,{asChild:!0,container:r,children:n})})})};iA.displayName=nA;var oA="PopoverContent",lA=hr.forwardRef((e,t)=>{const s=aA(oA,e.__scopePopover),{forceMount:n=s.forceMount,...r}=e,a=JT(oA,e.__scopePopover);return Fr.jsx(No,{present:n||a.open,children:a.modal?Fr.jsx(dA,{...r,ref:t}):Fr.jsx(uA,{...r,ref:t})})});lA.displayName=oA;var cA=Ji("PopoverContent.RemoveScroll"),dA=hr.forwardRef((e,t)=>{const s=JT(oA,e.__scopePopover),n=hr.useRef(null),r=Qi(t,n),a=hr.useRef(!1);return hr.useEffect(()=>{const e=n.current;if(e)return Kh(e)},[]),Fr.jsx(qh,{as:cA,allowPinchZoom:!0,children:Fr.jsx(mA,{...e,ref:r,trapFocus:s.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Ki(e.onCloseAutoFocus,e=>{var t;e.preventDefault(),a.current||null==(t=s.triggerRef.current)||t.focus()}),onPointerDownOutside:Ki(e.onPointerDownOutside,e=>{const t=e.detail.originalEvent,s=0===t.button&&!0===t.ctrlKey,n=2===t.button||s;a.current=n},{checkForDefaultPrevented:!1}),onFocusOutside:Ki(e.onFocusOutside,e=>e.preventDefault(),{checkForDefaultPrevented:!1})})})}),uA=hr.forwardRef((e,t)=>{const s=JT(oA,e.__scopePopover),n=hr.useRef(!1),r=hr.useRef(!1);return Fr.jsx(mA,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:t=>{var a,i;null==(a=e.onCloseAutoFocus)||a.call(e,t),t.defaultPrevented||(n.current||null==(i=s.triggerRef.current)||i.focus(),t.preventDefault()),n.current=!1,r.current=!1},onInteractOutside:t=>{var a,i;null==(a=e.onInteractOutside)||a.call(e,t),t.defaultPrevented||(n.current=!0,"pointerdown"===t.detail.originalEvent.type&&(r.current=!0));const o=t.target;(null==(i=s.triggerRef.current)?void 0:i.contains(o))&&t.preventDefault(),"focusin"===t.detail.originalEvent.type&&r.current&&t.preventDefault()}})}),mA=hr.forwardRef((e,t)=>{const{__scopePopover:s,trapFocus:n,onOpenAutoFocus:r,onCloseAutoFocus:a,disableOutsidePointerEvents:i,onEscapeKeyDown:o,onPointerDownOutside:l,onFocusOutside:c,onInteractOutside:d,...u}=e,m=JT(oA,s),p=GT(s);return Gp(),Fr.jsx(Bp,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:r,onUnmountAutoFocus:a,children:Fr.jsx(ho,{asChild:!0,disableOutsidePointerEvents:i,onInteractOutside:d,onEscapeKeyDown:o,onPointerDownOutside:l,onFocusOutside:c,onDismiss:()=>m.onOpenChange(!1),children:Fr.jsx(ip,{"data-state":hA(m.open),role:"dialog",id:m.contentId,...p,...u,ref:t,style:{...u.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),pA="PopoverClose";hr.forwardRef((e,t)=>{const{__scopePopover:s,...n}=e,r=JT(pA,s);return Fr.jsx(ao.button,{type:"button",...n,ref:t,onClick:Ki(e.onClick,()=>r.onOpenChange(!1))})}).displayName=pA;function hA(e){return e?"open":"closed"}hr.forwardRef((e,t)=>{const{__scopePopover:s,...n}=e,r=GT(s);return Fr.jsx(op,{...r,...n,ref:t})}).displayName="PopoverArrow";var xA=iA,fA=lA,vA=XT,gA=sA,yA=hr.forwardRef(function(e,t){var s=e.className,n=e.align,r=void 0===n?"center":n,a=e.sideOffset,i=void 0===a?4:a,o=function(e,t){var s={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(s[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(s[n[r]]=e[n[r]])}return s}(e,["className","align","sideOffset"]);return Fr.jsx(xA,{children:Fr.jsx(fA,{ref:t,align:r,sideOffset:i,className:Fd("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-popover-content-transform-origin]",s),...o})})});yA.displayName=fA.displayName;const bA=(e,t="#6b7280")=>`data:image/svg+xml;base64,${btoa(`\n    <svg width="400" height="300" xmlns="http://www.w3.org/2000/svg">\n      <rect width="100%" height="100%" fill="#f3f4f6"/>\n      <rect x="50" y="80" width="300" height="140" rx="10" fill="${t}" stroke="#374151" stroke-width="2"/>\n      <text x="50%" y="50%" text-anchor="middle" dy="0.3em" font-family="Arial, sans-serif" font-size="16" fill="#1f2937">\n        ${e}\n      </text>\n    </svg>\n  `)}`,jA=bA("Vue de face","#dc2626"),NA=bA("Côté droit","#ea580c"),wA=bA("Côté gauche","#d97706"),kA=bA("Avec échelle humaine","#ca8a04"),CA=bA("Vue générale","#65a30d"),SA=bA("Big Bag","#059669");function _A({serviceName:e,volume:t,serviceId:s,className:n=""}){const[r,a]=hr.useState(0),{data:i,isLoading:o}=Pi({queryKey:[`/api/admin/services/${s}/images`],enabled:!!s});console.log(`Service: ${e}, Volume: ${t}, ID: ${s}`),console.log("Images uploadées:",i);const l=Array.isArray(i)&&i.length>0?i.map((t,s)=>{const n=(e=>{if(e.startsWith("@assets/"))switch(e.replace("@assets/","")){case"Face.png":default:return jA;case"cotédroit.png":return NA;case"cotégauche.png":return wA;case"22M3 petit man.png":return kA;case"667966dbb7a2c-bpfull_1749545669321.jpg":return CA;case"unnamed_1749545447846.webp":return SA}else if(e.startsWith("/uploads/"))return`/api${e}`;return jA})(t.imagePath);return console.log(`Path: ${t.imagePath} → URL: ${n}`),{image:n,label:t.altText||`${t.imageType} - ${e}`}}):function(e,t){const s=e.toLowerCase();return s.includes("big")||s.includes("bag")?[{image:SA,label:"Big Bag vue principale"},{image:CA,label:"Big Bag vue générale"},{image:kA,label:"Big Bag avec échelle"}]:t>=18?[{image:jA,label:"Vue de face"},{image:NA,label:"Côté droit"},{image:wA,label:"Côté gauche"},{image:kA,label:"Avec échelle humaine"},{image:CA,label:"Vue générale"}]:t>=10?[{image:jA,label:"Vue de face"},{image:NA,label:"Côté droit"},{image:wA,label:"Côté gauche"},{image:CA,label:"Vue générale"}]:[{image:jA,label:"Vue de face"},{image:CA,label:"Vue générale"},{image:kA,label:"Avec échelle humaine"}]}(e,t),c=l[r];return Fr.jsxs("div",{className:`relative rounded-xl overflow-hidden bg-gray-100 shadow-lg ${n}`,children:[Fr.jsxs("div",{className:"aspect-[4/3] relative",children:[o?Fr.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gray-200",children:Fr.jsxs("div",{className:"text-center",children:[Fr.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-red-600 mx-auto mb-2"}),Fr.jsx("p",{className:"text-gray-600 text-sm",children:"Chargement des images..."})]})}):Fr.jsx("img",{src:c.image,alt:`${e} - ${c.label}`,className:"w-full h-full object-cover transition-all duration-300 hover:scale-105",onError:s=>{s.currentTarget.src="data:image/svg+xml;base64,"+btoa(`\n                <svg width="400" height="300" xmlns="http://www.w3.org/2000/svg">\n                  <rect width="100%" height="100%" fill="#f3f4f6"/>\n                  <text x="50%" y="50%" text-anchor="middle" dy="0.3em" font-family="Arial, sans-serif" font-size="18" fill="#6b7280">\n                    ${e} ${t}m³\n                  </text>\n                </svg>\n              `)}}),Fr.jsxs("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/80 via-black/40 to-transparent p-6",children:[Fr.jsx("h3",{className:"text-white font-bold text-xl mb-2",children:e}),Fr.jsxs("p",{className:"text-white text-base opacity-90",children:["Volume: ",t,"m³"]})]}),Fr.jsxs("div",{className:"absolute top-3 right-3 bg-red-600 text-white px-3 py-1 rounded-full text-sm font-medium",children:[t,"m³"]})]}),l.length>1&&Fr.jsx("div",{className:"absolute bottom-4 left-1/2 transform -translate-x-1/2 flex space-x-2 bg-black/50 rounded-full px-3 py-2",children:l.map((e,t)=>Fr.jsx("button",{className:"w-3 h-3 rounded-full transition-all duration-300 "+(t===r?"bg-white shadow-lg scale-125":"bg-white/60 hover:bg-white/80 hover:scale-110"),onClick:()=>a(t)},t))}),Fr.jsx("div",{className:"absolute top-3 left-3 bg-black/70 backdrop-blur-sm text-white px-3 py-1 rounded-full text-sm font-medium",children:c.label}),l.length>1&&Fr.jsx("div",{className:"absolute top-1/2 left-2 transform -translate-y-1/2",children:Fr.jsx("button",{onClick:()=>a(r>0?r-1:l.length-1),className:"bg-black/50 hover:bg-black/70 text-white p-2 rounded-full transition-all duration-200",children:"←"})}),l.length>1&&Fr.jsx("div",{className:"absolute top-1/2 right-2 transform -translate-y-1/2",children:Fr.jsx("button",{onClick:()=>a(r<l.length-1?r+1:0),className:"bg-black/50 hover:bg-black/70 text-white p-2 rounded-full transition-all duration-200",children:"→"})})]})}var PA="Radio",[EA,DA]=Gi(PA),[TA,AA]=EA(PA),OA=hr.forwardRef((e,t)=>{const{__scopeRadio:s,name:n,checked:r=!1,required:a,disabled:i,value:o="on",onCheck:l,form:c,...d}=e,[u,m]=hr.useState(null),p=Qi(t,e=>m(e)),h=hr.useRef(!1),x=!u||(c||!!u.closest("form"));return Fr.jsxs(TA,{scope:s,checked:r,disabled:i,children:[Fr.jsx(ao.button,{type:"button",role:"radio","aria-checked":r,"data-state":MA(r),"data-disabled":i?"":void 0,disabled:i,value:o,...d,ref:p,onClick:Ki(e.onClick,e=>{r||null==l||l(),x&&(h.current=e.isPropagationStopped(),h.current||e.stopPropagation())})}),x&&Fr.jsx(IA,{control:u,bubbles:!h.current,name:n,value:o,checked:r,required:a,disabled:i,form:c,style:{transform:"translateX(-100%)"}})]})});OA.displayName=PA;var RA="RadioIndicator",FA=hr.forwardRef((e,t)=>{const{__scopeRadio:s,forceMount:n,...r}=e,a=AA(RA,s);return Fr.jsx(No,{present:n||a.checked,children:Fr.jsx(ao.span,{"data-state":MA(a.checked),"data-disabled":a.disabled?"":void 0,...r,ref:t})})});FA.displayName=RA;var IA=hr.forwardRef(({__scopeRadio:e,control:t,checked:s,bubbles:n=!0,...r},a)=>{const i=hr.useRef(null),o=Qi(i,a),l=cf(s),c=qm(t);return hr.useEffect(()=>{const e=i.current;if(!e)return;const t=window.HTMLInputElement.prototype,r=Object.getOwnPropertyDescriptor(t,"checked").set;if(l!==s&&r){const t=new Event("click",{bubbles:n});r.call(e,s),e.dispatchEvent(t)}},[l,s,n]),Fr.jsx(ao.input,{type:"radio","aria-hidden":!0,defaultChecked:s,...r,tabIndex:-1,ref:o,style:{...r.style,...c,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});function MA(e){return e?"checked":"unchecked"}IA.displayName="RadioBubbleInput";var LA=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],qA="RadioGroup",[zA,VA]=Gi(qA,[Rg,DA]),BA=Rg(),$A=DA(),[WA,UA]=zA(qA),KA=hr.forwardRef((e,t)=>{const{__scopeRadioGroup:s,name:n,defaultValue:r,value:a,required:i=!1,disabled:o=!1,orientation:l,dir:c,loop:d=!0,onValueChange:u,...m}=e,p=BA(s),h=Cf(c),[x,f]=Co({prop:a,defaultProp:r??null,onChange:u,caller:qA});return Fr.jsx(WA,{scope:s,name:n,required:i,disabled:o,value:x,onValueChange:f,children:Fr.jsx($g,{asChild:!0,...p,orientation:l,dir:h,loop:d,children:Fr.jsx(ao.div,{role:"radiogroup","aria-required":i,"aria-orientation":l,"data-disabled":o?"":void 0,dir:h,...m,ref:t})})})});KA.displayName=qA;var HA="RadioGroupItem",ZA=hr.forwardRef((e,t)=>{const{__scopeRadioGroup:s,disabled:n,...r}=e,a=UA(HA,s),i=a.disabled||n,o=BA(s),l=$A(s),c=hr.useRef(null),d=Qi(t,c),u=a.value===r.value,m=hr.useRef(!1);return hr.useEffect(()=>{const e=e=>{LA.includes(e.key)&&(m.current=!0)},t=()=>m.current=!1;return document.addEventListener("keydown",e),document.addEventListener("keyup",t),()=>{document.removeEventListener("keydown",e),document.removeEventListener("keyup",t)}},[]),Fr.jsx(Wg,{asChild:!0,...o,focusable:!i,active:u,children:Fr.jsx(OA,{disabled:i,required:a.required,checked:u,...l,...r,name:a.name,ref:d,onCheck:()=>a.onValueChange(r.value),onKeyDown:Ki(e=>{"Enter"===e.key&&e.preventDefault()}),onFocus:Ki(r.onFocus,()=>{var e;m.current&&(null==(e=c.current)||e.click())})})})});ZA.displayName=HA;var QA=hr.forwardRef((e,t)=>{const{__scopeRadioGroup:s,...n}=e,r=$A(s);return Fr.jsx(FA,{...r,...n,ref:t})});QA.displayName="RadioGroupIndicator";var GA=KA,YA=ZA,JA=QA,XA=function(e,t){var s={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(s[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(s[n[r]]=e[n[r]])}return s},eO=hr.forwardRef(function(e,t){var s=e.className,n=XA(e,["className"]);return Fr.jsx(GA,{className:Fd("grid gap-2",s),...n,ref:t})});eO.displayName=GA.displayName;var tO=hr.forwardRef(function(e,t){var s=e.className,n=XA(e,["className"]);return Fr.jsx(YA,{ref:t,className:Fd("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),...n,children:Fr.jsx(JA,{className:"flex items-center justify-center",children:Fr.jsx(Hl,{className:"h-2.5 w-2.5 fill-current text-current"})})})});function sO({onSubmit:e,onCancel:t,initialData:s}){var n,r,a,i,o,l,c,d,u,m,p,h,x,f,v,g,y,b,j,N,w,k,C,S,_,P,E,D,T,A,O,R,F,I;const[M,L]=hr.useState([]),[q,z]=hr.useState({clientCompanyName:(null==s?void 0:s.clientCompanyName)||"",clientContactName:(null==s?void 0:s.clientContactName)||"",clientAddress:(null==s?void 0:s.clientAddress)||"",clientVatNumber:(null==s?void 0:s.clientVatNumber)||"",clientPhone:(null==s?void 0:s.clientPhone)||"",clientEmail:(null==s?void 0:s.clientEmail)||"",clientSiret:(null==s?void 0:s.clientSiret)||"",clientActivity:(null==s?void 0:s.clientActivity)||"",sameAsClient:(null==s?void 0:s.sameAsClient)??!0,producerCompanyName:(null==s?void 0:s.producerCompanyName)||"",producerContactName:(null==s?void 0:s.producerContactName)||"",producerAddress:(null==s?void 0:s.producerAddress)||"",producerVatNumber:(null==s?void 0:s.producerVatNumber)||"",producerPhone:(null==s?void 0:s.producerPhone)||"",producerEmail:(null==s?void 0:s.producerEmail)||"",producerSiret:(null==s?void 0:s.producerSiret)||"",producerActivity:(null==s?void 0:s.producerActivity)||"",wasteName:(null==s?void 0:s.wasteName)||"",nomenclatureCode:(null==s?void 0:s.nomenclatureCode)||"",annualQuantity:(null==s?void 0:s.annualQuantity)||"",collectionFrequency:(null==s?void 0:s.collectionFrequency)||"",generationProcess:{destockage:(null==(n=null==s?void 0:s.generationProcess)?void 0:n.destockage)||!1,depollution:(null==(r=null==s?void 0:s.generationProcess)?void 0:r.depollution)||!1,production:(null==(a=null==s?void 0:s.generationProcess)?void 0:a.production)||!1,fabricationIncident:(null==(i=null==s?void 0:s.generationProcess)?void 0:i.fabricationIncident)||!1,other:(null==(o=null==s?void 0:s.generationProcess)?void 0:o.other)||!1,otherText:(null==(l=null==s?void 0:s.generationProcess)?void 0:l.otherText)||""},packaging:{containers:(null==(c=null==s?void 0:s.packaging)?void 0:c.containers)||!1,smallConfinements:(null==(d=null==s?void 0:s.packaging)?void 0:d.smallConfinements)||!1,drums200L:(null==(u=null==s?void 0:s.packaging)?void 0:u.drums200L)||!1,bigBag:(null==(m=null==s?void 0:s.packaging)?void 0:m.bigBag)||!1,other:(null==(p=null==s?void 0:s.packaging)?void 0:p.other)||!1,otherText:(null==(h=null==s?void 0:s.packaging)?void 0:h.otherText)||""},physicalAspect:{liquid:(null==(x=null==s?void 0:s.physicalAspect)?void 0:x.liquid)||!1,solid:(null==(f=null==s?void 0:s.physicalAspect)?void 0:f.solid)||!1,pasty:(null==(v=null==s?void 0:s.physicalAspect)?void 0:v.pasty)||!1,powdery:(null==(g=null==s?void 0:s.physicalAspect)?void 0:g.powdery)||!1,gas:(null==(y=null==s?void 0:s.physicalAspect)?void 0:y.gas)||!1,other:(null==(b=null==s?void 0:s.physicalAspect)?void 0:b.other)||!1,otherText:(null==(j=null==s?void 0:s.physicalAspect)?void 0:j.otherText)||""},constituents:(null==s?void 0:s.constituents)||[{name:"",percentage:""}],hazardousProperties:{hp1:(null==(N=null==s?void 0:s.hazardousProperties)?void 0:N.hp1)||!1,hp2:(null==(w=null==s?void 0:s.hazardousProperties)?void 0:w.hp2)||!1,hp3:(null==(k=null==s?void 0:s.hazardousProperties)?void 0:k.hp3)||!1,hp4:(null==(C=null==s?void 0:s.hazardousProperties)?void 0:C.hp4)||!1,hp5:(null==(S=null==s?void 0:s.hazardousProperties)?void 0:S.hp5)||!1,hp6:(null==(_=null==s?void 0:s.hazardousProperties)?void 0:_.hp6)||!1,hp7:(null==(P=null==s?void 0:s.hazardousProperties)?void 0:P.hp7)||!1,hp8:(null==(E=null==s?void 0:s.hazardousProperties)?void 0:E.hp8)||!1,hp9:(null==(D=null==s?void 0:s.hazardousProperties)?void 0:D.hp9)||!1,hp10:(null==(T=null==s?void 0:s.hazardousProperties)?void 0:T.hp10)||!1,hp11:(null==(A=null==s?void 0:s.hazardousProperties)?void 0:A.hp11)||!1,hp12:(null==(O=null==s?void 0:s.hazardousProperties)?void 0:O.hp12)||!1,hp13:(null==(R=null==s?void 0:s.hazardousProperties)?void 0:R.hp13)||!1,hp14:(null==(F=null==s?void 0:s.hazardousProperties)?void 0:F.hp14)||!1,hp15:(null==(I=null==s?void 0:s.hazardousProperties)?void 0:I.hp15)||!1},isPop:(null==s?void 0:s.isPop)||!1,popSubstances:(null==s?void 0:s.popSubstances)||"",lackOfInformation:(null==s?void 0:s.lackOfInformation)||!1,transportResponsible:(null==s?void 0:s.transportResponsible)||"client",dangerClass:(null==s?void 0:s.dangerClass)||"",unCode:(null==s?void 0:s.unCode)||"",packagingGroup:(null==s?void 0:s.packagingGroup)||"",transportDesignation:(null==s?void 0:s.transportDesignation)||"",attachedFiles:(null==s?void 0:s.attachedFiles)||[],rgpdConsent:(null==s?void 0:s.rgpdConsent)||!1}),[V,B]=hr.useState((null==s?void 0:s.constituents)||[{name:"",percentage:""}]),$=hr.useCallback(e=>{const t=e.map(e=>({file:e,preview:URL.createObjectURL(e),name:e.name}));L(e=>[...e,...t])},[]),{getRootProps:W,getInputProps:U,isDragActive:K}=lb({onDrop:$,accept:{"application/pdf":[".pdf"],"image/jpeg":[".jpg",".jpeg"],"image/png":[".png"]},maxSize:10485760,multiple:!0}),H=(e,t)=>{z(s=>({...s,[e]:t}))},Z=(e,t,s)=>{z(n=>({...n,[e]:{...n[e],[t]:s}}))},Q=(e,t,s)=>{B(n=>n.map((n,r)=>r===e?{...n,[t]:s}:n))};return Fr.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:Fr.jsx("div",{className:"bg-white rounded-lg max-w-6xl w-full max-h-[90vh] overflow-y-auto",children:Fr.jsxs(nf,{children:[Fr.jsxs(rf,{className:"border-b",children:[Fr.jsxs("div",{className:"flex items-center justify-between",children:[Fr.jsxs("div",{className:"flex items-center space-x-3",children:[Fr.jsx(ac,{className:"h-6 w-6 text-blue-600"}),Fr.jsx(af,{className:"text-xl",children:"Fiche d'Identification des Déchets (FID)"})]}),Fr.jsx(Lp,{variant:"outline",onClick:t,children:"Fermer"})]}),Fr.jsxs(vD,{className:"mt-4",children:[Fr.jsx(Rc,{className:"h-4 w-4"}),Fr.jsx(gD,{children:"Formulaire obligatoire conforme à la réglementation française sur les déchets. Tous les champs marqués d'un * sont obligatoires."})]})]}),Fr.jsx(lf,{className:"p-6",children:Fr.jsxs("form",{onSubmit:t=>{if(t.preventDefault(),!q.rgpdConsent)return void alert("Vous devez accepter les conditions RGPD pour continuer.");const s={...q,constituents:V};e(s)},className:"space-y-8",children:[Fr.jsxs("div",{children:[Fr.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[Fr.jsx("div",{className:"w-8 h-8 bg-blue-100 text-blue-800 rounded-full flex items-center justify-center text-sm font-bold mr-3",children:"1"}),"Coordonnées client"]}),Fr.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[Fr.jsxs("div",{children:[Fr.jsx(Wx,{htmlFor:"clientCompanyName",children:"Nom de l'entreprise *"}),Fr.jsx(zx,{id:"clientCompanyName",value:q.clientCompanyName,onChange:e=>H("clientCompanyName",e.target.value),required:!0})]}),Fr.jsxs("div",{children:[Fr.jsx(Wx,{htmlFor:"clientContactName",children:"Contact (Prénom Nom) *"}),Fr.jsx(zx,{id:"clientContactName",value:q.clientContactName,onChange:e=>H("clientContactName",e.target.value),required:!0})]}),Fr.jsxs("div",{className:"md:col-span-2",children:[Fr.jsx(Wx,{htmlFor:"clientAddress",children:"Adresse complète *"}),Fr.jsx(Ux,{id:"clientAddress",value:q.clientAddress,onChange:e=>H("clientAddress",e.target.value),required:!0,rows:2})]}),Fr.jsxs("div",{children:[Fr.jsx(Wx,{htmlFor:"clientVatNumber",children:"N° de TVA"}),Fr.jsx(zx,{id:"clientVatNumber",value:q.clientVatNumber,onChange:e=>H("clientVatNumber",e.target.value)})]}),Fr.jsxs("div",{children:[Fr.jsx(Wx,{htmlFor:"clientPhone",children:"Téléphone *"}),Fr.jsx(zx,{id:"clientPhone",type:"tel",value:q.clientPhone,onChange:e=>H("clientPhone",e.target.value),required:!0})]}),Fr.jsxs("div",{children:[Fr.jsx(Wx,{htmlFor:"clientEmail",children:"Email *"}),Fr.jsx(zx,{id:"clientEmail",type:"email",value:q.clientEmail,onChange:e=>H("clientEmail",e.target.value),required:!0})]}),Fr.jsxs("div",{children:[Fr.jsx(Wx,{htmlFor:"clientSiret",children:"SIRET *"}),Fr.jsx(zx,{id:"clientSiret",value:q.clientSiret,onChange:e=>H("clientSiret",e.target.value),required:!0})]}),Fr.jsxs("div",{className:"md:col-span-2",children:[Fr.jsx(Wx,{htmlFor:"clientActivity",children:"Activité *"}),Fr.jsx(zx,{id:"clientActivity",value:q.clientActivity,onChange:e=>H("clientActivity",e.target.value),required:!0})]})]})]}),Fr.jsx(Jx,{}),Fr.jsxs("div",{children:[Fr.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[Fr.jsx("div",{className:"w-8 h-8 bg-green-100 text-green-800 rounded-full flex items-center justify-center text-sm font-bold mr-3",children:"2"}),"Producteur des déchets"]}),Fr.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[Fr.jsx(BE,{id:"sameAsClient",checked:q.sameAsClient,onCheckedChange:e=>H("sameAsClient",e)}),Fr.jsx(Wx,{htmlFor:"sameAsClient",children:"Identique au client"})]}),!q.sameAsClient&&Fr.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[Fr.jsxs("div",{children:[Fr.jsx(Wx,{htmlFor:"producerCompanyName",children:"Nom de l'entreprise *"}),Fr.jsx(zx,{id:"producerCompanyName",value:q.producerCompanyName,onChange:e=>H("producerCompanyName",e.target.value),required:!q.sameAsClient})]}),Fr.jsxs("div",{children:[Fr.jsx(Wx,{htmlFor:"producerContactName",children:"Contact (Prénom Nom) *"}),Fr.jsx(zx,{id:"producerContactName",value:q.producerContactName,onChange:e=>H("producerContactName",e.target.value),required:!q.sameAsClient})]}),Fr.jsxs("div",{className:"md:col-span-2",children:[Fr.jsx(Wx,{htmlFor:"producerAddress",children:"Adresse complète *"}),Fr.jsx(Ux,{id:"producerAddress",value:q.producerAddress,onChange:e=>H("producerAddress",e.target.value),required:!q.sameAsClient,rows:2})]}),Fr.jsxs("div",{children:[Fr.jsx(Wx,{htmlFor:"producerVatNumber",children:"N° de TVA"}),Fr.jsx(zx,{id:"producerVatNumber",value:q.producerVatNumber,onChange:e=>H("producerVatNumber",e.target.value)})]}),Fr.jsxs("div",{children:[Fr.jsx(Wx,{htmlFor:"producerPhone",children:"Téléphone *"}),Fr.jsx(zx,{id:"producerPhone",type:"tel",value:q.producerPhone,onChange:e=>H("producerPhone",e.target.value),required:!q.sameAsClient})]}),Fr.jsxs("div",{children:[Fr.jsx(Wx,{htmlFor:"producerEmail",children:"Email *"}),Fr.jsx(zx,{id:"producerEmail",type:"email",value:q.producerEmail,onChange:e=>H("producerEmail",e.target.value),required:!q.sameAsClient})]}),Fr.jsxs("div",{children:[Fr.jsx(Wx,{htmlFor:"producerSiret",children:"SIRET *"}),Fr.jsx(zx,{id:"producerSiret",value:q.producerSiret,onChange:e=>H("producerSiret",e.target.value),required:!q.sameAsClient})]}),Fr.jsxs("div",{className:"md:col-span-2",children:[Fr.jsx(Wx,{htmlFor:"producerActivity",children:"Activité *"}),Fr.jsx(zx,{id:"producerActivity",value:q.producerActivity,onChange:e=>H("producerActivity",e.target.value),required:!q.sameAsClient})]})]})]}),Fr.jsx(Jx,{}),Fr.jsxs("div",{children:[Fr.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[Fr.jsx("div",{className:"w-8 h-8 bg-yellow-100 text-yellow-800 rounded-full flex items-center justify-center text-sm font-bold mr-3",children:"3"}),"Information déchet"]}),Fr.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[Fr.jsxs("div",{children:[Fr.jsx(Wx,{htmlFor:"wasteName",children:"Nom du déchet *"}),Fr.jsx(zx,{id:"wasteName",value:q.wasteName,onChange:e=>H("wasteName",e.target.value),required:!0})]}),Fr.jsxs("div",{children:[Fr.jsx(Wx,{htmlFor:"nomenclatureCode",children:"Code nomenclature *"}),Fr.jsx(zx,{id:"nomenclatureCode",value:q.nomenclatureCode,onChange:e=>H("nomenclatureCode",e.target.value),required:!0})]}),Fr.jsxs("div",{children:[Fr.jsx(Wx,{htmlFor:"annualQuantity",children:"Quantité annuelle prévue *"}),Fr.jsx(zx,{id:"annualQuantity",value:q.annualQuantity,onChange:e=>H("annualQuantity",e.target.value),required:!0})]}),Fr.jsxs("div",{children:[Fr.jsx(Wx,{htmlFor:"collectionFrequency",children:"Fréquence d'enlèvement *"}),Fr.jsx(zx,{id:"collectionFrequency",value:q.collectionFrequency,onChange:e=>H("collectionFrequency",e.target.value),required:!0})]})]}),Fr.jsxs("div",{className:"mb-6",children:[Fr.jsx(Wx,{className:"text-base font-medium",children:"Procédé ayant généré le déchet *"}),Fr.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3 mt-2",children:[Fr.jsxs("div",{className:"flex items-center space-x-2",children:[Fr.jsx(BE,{id:"destockage",checked:q.generationProcess.destockage,onCheckedChange:e=>Z("generationProcess","destockage",e)}),Fr.jsx(Wx,{htmlFor:"destockage",children:"Déstockage"})]}),Fr.jsxs("div",{className:"flex items-center space-x-2",children:[Fr.jsx(BE,{id:"depollution",checked:q.generationProcess.depollution,onCheckedChange:e=>Z("generationProcess","depollution",e)}),Fr.jsx(Wx,{htmlFor:"depollution",children:"Dépollution"})]}),Fr.jsxs("div",{className:"flex items-center space-x-2",children:[Fr.jsx(BE,{id:"production",checked:q.generationProcess.production,onCheckedChange:e=>Z("generationProcess","production",e)}),Fr.jsx(Wx,{htmlFor:"production",children:"Production"})]}),Fr.jsxs("div",{className:"flex items-center space-x-2",children:[Fr.jsx(BE,{id:"fabricationIncident",checked:q.generationProcess.fabricationIncident,onCheckedChange:e=>Z("generationProcess","fabricationIncident",e)}),Fr.jsx(Wx,{htmlFor:"fabricationIncident",children:"Incident de fabrication"})]}),Fr.jsxs("div",{className:"flex items-center space-x-2",children:[Fr.jsx(BE,{id:"generationOther",checked:q.generationProcess.other,onCheckedChange:e=>Z("generationProcess","other",e)}),Fr.jsx(Wx,{htmlFor:"generationOther",children:"Autre"})]})]}),q.generationProcess.other&&Fr.jsx(zx,{className:"mt-2",placeholder:"Précisez...",value:q.generationProcess.otherText,onChange:e=>Z("generationProcess","otherText",e.target.value)})]}),Fr.jsxs("div",{className:"mb-6",children:[Fr.jsx(Wx,{className:"text-base font-medium",children:"Conditionnement *"}),Fr.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3 mt-2",children:[Fr.jsxs("div",{className:"flex items-center space-x-2",children:[Fr.jsx(BE,{id:"containers",checked:q.packaging.containers,onCheckedChange:e=>Z("packaging","containers",e)}),Fr.jsx(Wx,{htmlFor:"containers",children:"Containers"})]}),Fr.jsxs("div",{className:"flex items-center space-x-2",children:[Fr.jsx(BE,{id:"smallConfinements",checked:q.packaging.smallConfinements,onCheckedChange:e=>Z("packaging","smallConfinements",e)}),Fr.jsx(Wx,{htmlFor:"smallConfinements",children:"Petits confinements"})]}),Fr.jsxs("div",{className:"flex items-center space-x-2",children:[Fr.jsx(BE,{id:"drums200L",checked:q.packaging.drums200L,onCheckedChange:e=>Z("packaging","drums200L",e)}),Fr.jsx(Wx,{htmlFor:"drums200L",children:"Fûts 200L"})]}),Fr.jsxs("div",{className:"flex items-center space-x-2",children:[Fr.jsx(BE,{id:"bigBag",checked:q.packaging.bigBag,onCheckedChange:e=>Z("packaging","bigBag",e)}),Fr.jsx(Wx,{htmlFor:"bigBag",children:"Big-bag"})]}),Fr.jsxs("div",{className:"flex items-center space-x-2",children:[Fr.jsx(BE,{id:"packagingOther",checked:q.packaging.other,onCheckedChange:e=>Z("packaging","other",e)}),Fr.jsx(Wx,{htmlFor:"packagingOther",children:"Autre"})]})]}),q.packaging.other&&Fr.jsx(zx,{className:"mt-2",placeholder:"Précisez...",value:q.packaging.otherText,onChange:e=>Z("packaging","otherText",e.target.value)})]}),Fr.jsxs("div",{className:"mb-6",children:[Fr.jsx(Wx,{className:"text-base font-medium",children:"Aspect physique *"}),Fr.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3 mt-2",children:[Fr.jsxs("div",{className:"flex items-center space-x-2",children:[Fr.jsx(BE,{id:"liquid",checked:q.physicalAspect.liquid,onCheckedChange:e=>Z("physicalAspect","liquid",e)}),Fr.jsx(Wx,{htmlFor:"liquid",children:"Liquide"})]}),Fr.jsxs("div",{className:"flex items-center space-x-2",children:[Fr.jsx(BE,{id:"solid",checked:q.physicalAspect.solid,onCheckedChange:e=>Z("physicalAspect","solid",e)}),Fr.jsx(Wx,{htmlFor:"solid",children:"Solide"})]}),Fr.jsxs("div",{className:"flex items-center space-x-2",children:[Fr.jsx(BE,{id:"pasty",checked:q.physicalAspect.pasty,onCheckedChange:e=>Z("physicalAspect","pasty",e)}),Fr.jsx(Wx,{htmlFor:"pasty",children:"Pâteux"})]}),Fr.jsxs("div",{className:"flex items-center space-x-2",children:[Fr.jsx(BE,{id:"powdery",checked:q.physicalAspect.powdery,onCheckedChange:e=>Z("physicalAspect","powdery",e)}),Fr.jsx(Wx,{htmlFor:"powdery",children:"Pulvérulent"})]}),Fr.jsxs("div",{className:"flex items-center space-x-2",children:[Fr.jsx(BE,{id:"gas",checked:q.physicalAspect.gas,onCheckedChange:e=>Z("physicalAspect","gas",e)}),Fr.jsx(Wx,{htmlFor:"gas",children:"GAZ"})]}),Fr.jsxs("div",{className:"flex items-center space-x-2",children:[Fr.jsx(BE,{id:"physicalOther",checked:q.physicalAspect.other,onCheckedChange:e=>Z("physicalAspect","other",e)}),Fr.jsx(Wx,{htmlFor:"physicalOther",children:"Autre"})]})]}),q.physicalAspect.other&&Fr.jsx(zx,{className:"mt-2",placeholder:"Précisez...",value:q.physicalAspect.otherText,onChange:e=>Z("physicalAspect","otherText",e.target.value)})]})]}),Fr.jsx(Jx,{}),Fr.jsxs("div",{children:[Fr.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[Fr.jsx("div",{className:"w-8 h-8 bg-purple-100 text-purple-800 rounded-full flex items-center justify-center text-sm font-bold mr-3",children:"4"}),"Constituants principaux"]}),Fr.jsxs("div",{className:"space-y-3",children:[V.map((e,t)=>Fr.jsxs("div",{className:"flex items-center space-x-3",children:[Fr.jsx("div",{className:"flex-1",children:Fr.jsx(zx,{placeholder:"Nom du constituant",value:e.name,onChange:e=>Q(t,"name",e.target.value)})}),Fr.jsx("div",{className:"w-32",children:Fr.jsx(zx,{placeholder:"% (ex: 30%)",value:e.percentage,onChange:e=>Q(t,"percentage",e.target.value)})}),V.length>1&&Fr.jsx(Lp,{type:"button",variant:"outline",size:"icon",onClick:()=>(e=>{V.length>1&&B(t=>t.filter((t,s)=>s!==e))})(t),children:Fr.jsx(Ac,{className:"h-4 w-4"})})]},t)),Fr.jsxs(Lp,{type:"button",variant:"outline",onClick:()=>{B(e=>[...e,{name:"",percentage:""}])},className:"w-full",children:[Fr.jsx(jc,{className:"h-4 w-4 mr-2"}),"Ajouter un constituant"]})]}),Fr.jsxs("div",{className:"mt-4",children:[Fr.jsx(Wx,{children:"Échantillon ou FDS (PDF, JPG)"}),Fr.jsxs("div",{...W(),className:"mt-2 border-2 border-dashed rounded-lg p-4 text-center cursor-pointer transition-colors "+(K?"border-blue-400 bg-blue-50":"border-gray-300 hover:border-gray-400"),children:[Fr.jsx("input",{...U()}),Fr.jsx(Ic,{className:"h-8 w-8 mx-auto text-gray-400 mb-2"}),Fr.jsx("p",{className:"text-sm text-gray-600",children:K?"Déposez les fichiers ici...":"Glissez vos fichiers ici ou cliquez pour parcourir"}),Fr.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Formats acceptés: PDF, JPG, PNG (max 10 Mo)"})]}),M.length>0&&Fr.jsx("div",{className:"mt-4 space-y-2",children:M.map((e,t)=>Fr.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded border",children:[Fr.jsxs("div",{className:"flex items-center space-x-2",children:[Fr.jsx(ac,{className:"h-4 w-4 text-gray-500"}),Fr.jsx("span",{className:"text-sm text-gray-700",children:e.name}),Fr.jsxs("span",{className:"text-xs text-gray-500",children:["(",(e.file.size/1024/1024).toFixed(2)," Mo)"]})]}),Fr.jsx(Lp,{type:"button",size:"sm",variant:"ghost",onClick:()=>(e=>{L(t=>{const s=[...t];return URL.revokeObjectURL(s[e].preview),s.splice(e,1),s})})(t),className:"text-red-500 hover:text-red-700",children:Fr.jsx(Vc,{className:"h-4 w-4"})})]},t))})]})]}),Fr.jsx(Jx,{}),Fr.jsxs("div",{children:[Fr.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[Fr.jsx("div",{className:"w-8 h-8 bg-red-100 text-red-800 rounded-full flex items-center justify-center text-sm font-bold mr-3",children:"5"}),"Nature du déchet (Propriétés de danger)"]}),Fr.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-3",children:Object.entries({hp1:"HP1 - Explosif",hp2:"HP2 - Comburant",hp3:"HP3 - Inflammable",hp4:"HP4 - Irritant",hp5:"HP5 - Toxicité spécifique pour certains organes cibles",hp6:"HP6 - Toxicité aiguë",hp7:"HP7 - Cancérogène",hp8:"HP8 - Corrosif",hp9:"HP9 - Infectieux",hp10:"HP10 - Toxique pour la reproduction",hp11:"HP11 - Mutagène",hp12:"HP12 - Dégagement de gaz toxique au contact de l'eau",hp13:"HP13 - Sensibilisant",hp14:"HP14 - Écotoxique",hp15:"HP15 - Déchet susceptible de présenter une des propriétés dangereuses"}).map(([e,t])=>Fr.jsxs("div",{className:"flex items-center space-x-2",children:[Fr.jsx(BE,{id:e,checked:q.hazardousProperties[e],onCheckedChange:t=>Z("hazardousProperties",e,t)}),Fr.jsx(Wx,{htmlFor:e,className:"text-sm",children:t})]},e))})]}),Fr.jsx(Jx,{}),Fr.jsxs("div",{children:[Fr.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[Fr.jsx("div",{className:"w-8 h-8 bg-orange-100 text-orange-800 rounded-full flex items-center justify-center text-sm font-bold mr-3",children:"6"}),"Déchet POP (PFAS)"]}),Fr.jsxs("div",{className:"space-y-4",children:[Fr.jsx("div",{className:"flex items-center space-x-4",children:Fr.jsxs("div",{className:"flex items-center space-x-2",children:[Fr.jsx(BE,{id:"isPop",checked:q.isPop,onCheckedChange:e=>H("isPop",e)}),Fr.jsx(Wx,{htmlFor:"isPop",children:"OUI - Ce déchet contient des substances POP/PFAS"})]})}),q.isPop&&Fr.jsxs("div",{children:[Fr.jsx(Wx,{htmlFor:"popSubstances",children:"Précisez les substances *"}),Fr.jsx(Ux,{id:"popSubstances",value:q.popSubstances,onChange:e=>H("popSubstances",e.target.value),placeholder:"Listez les substances POP/PFAS présentes...",required:q.isPop})]})]})]}),Fr.jsx(Jx,{}),Fr.jsxs("div",{children:[Fr.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[Fr.jsx("div",{className:"w-8 h-8 bg-gray-100 text-gray-800 rounded-full flex items-center justify-center text-sm font-bold mr-3",children:"7"}),"Absence d'information"]}),Fr.jsx("div",{className:"space-y-4",children:Fr.jsxs("div",{className:"flex items-center space-x-2",children:[Fr.jsx(BE,{id:"lackOfInformation",checked:q.lackOfInformation,onCheckedChange:e=>H("lackOfInformation",e)}),Fr.jsx(Wx,{htmlFor:"lackOfInformation",children:"Absence d'information sur le déchet"})]})})]}),Fr.jsx(Jx,{}),Fr.jsx("div",{className:"border-t-2 border-red-200 pt-6",children:Fr.jsxs(vD,{className:"bg-red-50 border-red-200",children:[Fr.jsx(Rc,{className:"h-4 w-4 text-red-600"}),Fr.jsxs(gD,{className:"text-red-800",children:[Fr.jsx("strong",{className:"text-lg",children:"Ne peuvent être admis :"}),Fr.jsxs("ul",{className:"list-disc list-inside mt-3 space-y-2 text-sm",children:[Fr.jsx("li",{children:"Substances radioactives"}),Fr.jsx("li",{children:"DASRI sauf exception"}),Fr.jsx("li",{children:"PCB/PCT (polychlorobiphényles / terphényles)"}),Fr.jsx("li",{children:"Tétrachlorure de carbone"}),Fr.jsx("li",{children:"Explosifs"}),Fr.jsx("li",{children:"Amiante libre"}),Fr.jsx("li",{children:"Acide picrique / fluorhydrique"})]})]})]})}),Fr.jsx(Jx,{}),Fr.jsxs("div",{children:[Fr.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[Fr.jsx("div",{className:"w-8 h-8 bg-indigo-100 text-indigo-800 rounded-full flex items-center justify-center text-sm font-bold mr-3",children:"8"}),"Transport"]}),Fr.jsxs("div",{className:"space-y-4",children:[Fr.jsxs("div",{children:[Fr.jsx(Wx,{className:"text-base font-medium",children:"Responsable du transport *"}),Fr.jsxs(eO,{value:q.transportResponsible,onValueChange:e=>H("transportResponsible",e),className:"flex space-x-6 mt-2",children:[Fr.jsxs("div",{className:"flex items-center space-x-2",children:[Fr.jsx(tO,{value:"client",id:"client"}),Fr.jsx(Wx,{htmlFor:"client",children:"Client"})]}),Fr.jsxs("div",{className:"flex items-center space-x-2",children:[Fr.jsx(tO,{value:"remondis",id:"remondis"}),Fr.jsx(Wx,{htmlFor:"remondis",children:"Remondis"})]}),Fr.jsxs("div",{className:"flex items-center space-x-2",children:[Fr.jsx(tO,{value:"others",id:"others"}),Fr.jsx(Wx,{htmlFor:"others",children:"Autres"})]})]})]}),Fr.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[Fr.jsxs("div",{children:[Fr.jsx(Wx,{htmlFor:"dangerClass",children:"Classe de danger"}),Fr.jsx(zx,{id:"dangerClass",value:q.dangerClass,onChange:e=>H("dangerClass",e.target.value),placeholder:"ex: 2"})]}),Fr.jsxs("div",{children:[Fr.jsx(Wx,{htmlFor:"unCode",children:"Code UN"}),Fr.jsx(zx,{id:"unCode",value:q.unCode,onChange:e=>H("unCode",e.target.value),placeholder:"ex: 1950"})]}),Fr.jsxs("div",{children:[Fr.jsx(Wx,{htmlFor:"packagingGroup",children:"Groupe d'emballage"}),Fr.jsx(zx,{id:"packagingGroup",value:q.packagingGroup,onChange:e=>H("packagingGroup",e.target.value)})]}),Fr.jsxs("div",{children:[Fr.jsx(Wx,{htmlFor:"transportDesignation",children:"Désignation transport"}),Fr.jsx(zx,{id:"transportDesignation",value:q.transportDesignation,onChange:e=>H("transportDesignation",e.target.value)})]})]})]})]}),Fr.jsx(Jx,{}),Fr.jsx("div",{children:Fr.jsxs("div",{className:"flex items-center space-x-2",children:[Fr.jsx(BE,{id:"rgpdConsent",checked:q.rgpdConsent,onCheckedChange:e=>H("rgpdConsent",e),required:!0}),Fr.jsx(Wx,{htmlFor:"rgpdConsent",className:"text-sm",children:"J'accepte que mes données personnelles soient traitées conformément à la réglementation RGPD pour le traitement de cette demande. *"})]})}),Fr.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t",children:[Fr.jsx(Lp,{type:"button",variant:"outline",onClick:t,children:"Annuler"}),Fr.jsxs(Lp,{type:"submit",className:"bg-blue-600 hover:bg-blue-700 text-white",children:[Fr.jsx(Ul,{className:"h-4 w-4 mr-2"}),"Valider la FID"]})]})]})})]})})})}function nO(){var e,t,s,n,r,a;const[,i]=va(),{toast:o}=Ui(),[l,c]=hr.useState(null),[d,u]=hr.useState(""),[m,p]=hr.useState(""),[h,x]=hr.useState(""),[f,v]=hr.useState(""),[g,y]=hr.useState(0),[b,j]=hr.useState(!1),[N,w]=hr.useState(""),[k,C]=hr.useState([]),[S,_]=hr.useState(!1),[P,E]=hr.useState(!1),[D,T]=hr.useState(null),[A,O]=hr.useState("company"),[R,F]=hr.useState(""),[I,M]=hr.useState(void 0),[L,q]=hr.useState(void 0),[z,V]=hr.useState(!1),[B,$]=hr.useState(7),[W,U]=hr.useState(!1),[K,H]=hr.useState(null),[Z,Q]=hr.useState(!1),{data:G,isLoading:Y,error:J}=Pi({queryKey:["/api/services"]}),{data:X}=Pi({queryKey:["/api/waste-types"]}),{data:ee}=Pi({queryKey:["/api/treatment-pricing"]}),{data:te}=Pi({queryKey:["/api/auth/me"]}),se=Array.isArray(G)?G.find(e=>e.id===l):void 0;hr.useEffect(()=>{if(I&&B>0){const e=hb(I,B);q(e)}},[I,B]),hr.useEffect(()=>{if("company"===A&&te&&"object"==typeof te){const e=te.address||"",t=te.postalCode||"",s=te.city||"",n=`${e}, ${t} ${s}`.trim();", "!==n&&(p(n),x(t),v(s),n.length>10&&ne(n))}else"construction_site"===A&&(p(""),x(""),v(""),y(0))},[A,te]),hr.useEffect(()=>{l&&m&&h&&f&&d&&re()},[l,m,h,f,d,g,I,L,B,W]);const ne=async e=>{if(e&&!(e.length<5)){j(!0),w("");try{const t=await fetch("/api/calculate-distance",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({address:e.trim()})}),s=await t.json();s.success?y(s.distance):(w(s.error||"Erreur lors du calcul de distance"),y(0))}catch(t){console.error("Distance calculation error:",t),w("Impossible de calculer la distance"),y(0)}finally{j(!1)}}},re=async()=>{if(l&&d&&m)try{const e=await fetch("/api/calculate-pricing",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({serviceId:l,wasteType:d,address:m,distance:g,durationDays:B,bsdOption:W})}),t=await e.json();t.success&&T(t.pricing)}catch(e){console.error("Pricing calculation error:",e)}},ae=Array.isArray(X)?X.map(e=>e.name):[];return Y?Fr.jsxs("div",{className:"flex items-center justify-center py-8",children:[Fr.jsx(uc,{className:"h-8 w-8 animate-spin text-red-600"}),Fr.jsx("span",{className:"ml-2 text-gray-600",children:"Chargement des services..."})]}):J?Fr.jsxs(vD,{variant:"destructive",children:[Fr.jsx(Rc,{className:"h-4 w-4"}),Fr.jsx(gD,{children:"Erreur lors du chargement des services. Veuillez réessayer."})]}):Fr.jsx("div",{className:"container-responsive min-h-screen-safe",children:Fr.jsxs("div",{className:"grid grid-responsive gap-4 lg:gap-8",children:[Fr.jsxs("div",{className:"space-y-6 spacing-md",children:[Fr.jsx(nf,{className:"border-blue-200 bg-blue-50",children:Fr.jsxs(lf,{className:"p-6",children:[Fr.jsxs("div",{className:"flex items-center mb-4",children:[Fr.jsx(fc,{className:"h-5 w-5 mr-2 text-blue-600"}),Fr.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Où souhaitez-vous la livraison ?"})]}),Fr.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[Fr.jsx("div",{className:"p-4 border-2 rounded-lg cursor-pointer transition-all "+("company"===A?"border-blue-500 bg-blue-100":"border-gray-200 hover:border-gray-300 bg-white"),onClick:()=>O("company"),children:Fr.jsxs("div",{className:"flex items-center space-x-3",children:[Fr.jsx("div",{className:"w-4 h-4 rounded-full border-2 "+("company"===A?"border-blue-500 bg-blue-500":"border-gray-300"),children:"company"===A&&Fr.jsx("div",{className:"w-2 h-2 bg-white rounded-full m-0.5"})}),Fr.jsx(Dl,{className:"h-5 w-5 text-blue-600"}),Fr.jsxs("div",{children:[Fr.jsx("div",{className:"font-medium",children:"Adresse de l'entreprise"}),Fr.jsx("div",{className:"text-sm text-gray-600",children:"Livraison à votre adresse principale"})]})]})}),Fr.jsx("div",{className:"p-4 border-2 rounded-lg cursor-pointer transition-all "+("construction_site"===A?"border-blue-500 bg-blue-100":"border-gray-200 hover:border-gray-300 bg-white"),onClick:()=>O("construction_site"),children:Fr.jsxs("div",{className:"flex items-center space-x-3",children:[Fr.jsx("div",{className:"w-4 h-4 rounded-full border-2 "+("construction_site"===A?"border-blue-500 bg-blue-500":"border-gray-300"),children:"construction_site"===A&&Fr.jsx("div",{className:"w-2 h-2 bg-white rounded-full m-0.5"})}),Fr.jsx(Ql,{className:"h-5 w-5 text-blue-600"}),Fr.jsxs("div",{children:[Fr.jsx("div",{className:"font-medium",children:"Chantier spécifique"}),Fr.jsx("div",{className:"text-sm text-gray-600",children:"Livraison sur un chantier"})]})]})})]}),"construction_site"===A&&Fr.jsxs("div",{className:"p-4 bg-orange-50 border border-orange-200 rounded-lg",children:[Fr.jsx(Wx,{htmlFor:"constructionSiteContactPhone",className:"text-sm font-medium text-orange-800",children:"Numéro de téléphone de contact sur le chantier *"}),Fr.jsx(zx,{id:"constructionSiteContactPhone",type:"tel",placeholder:"Ex: 06 12 34 56 78",value:R,onChange:e=>F(e.target.value),className:"mt-2",required:!0}),Fr.jsx("p",{className:"text-xs text-orange-700 mt-1",children:"Ce numéro sera utilisé par le chauffeur pour vous contacter lors de la livraison."})]})]})}),Fr.jsxs("div",{children:[Fr.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Choisissez votre benne"}),Array.isArray(G)&&G.length>0?Fr.jsx("div",{className:"grid gap-8",children:G.map(e=>Fr.jsx("div",{children:Fr.jsx(nf,{className:"cursor-pointer transition-all "+(l===e.id?"ring-3 ring-red-500 border-red-300 shadow-lg":"hover:border-gray-300 hover:shadow-md"),onClick:()=>(e=>{c(e.id)})(e),children:Fr.jsx(lf,{className:"p-8",children:Fr.jsxs("div",{className:"grid lg:grid-cols-2 gap-8",children:[Fr.jsx("div",{className:"order-1 lg:order-1",children:Fr.jsx(_A,{serviceName:e.name,volume:e.volume,serviceId:e.id,className:"w-full h-64 lg:h-80"})}),Fr.jsxs("div",{className:"order-2 lg:order-2 flex flex-col justify-between",children:[Fr.jsxs("div",{children:[Fr.jsx("h4",{className:"font-bold text-2xl text-gray-900 mb-3",children:e.name}),Fr.jsx("p",{className:"text-gray-600 text-lg mb-6 leading-relaxed",children:e.description}),Fr.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-6",children:[Fr.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg border",children:[Fr.jsx("div",{className:"text-sm text-gray-500 font-medium",children:"Volume"}),Fr.jsxs("div",{className:"font-bold text-xl text-gray-900",children:[e.volume,"m³"]})]}),e.length&&e.width&&e.height&&Fr.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg border",children:[Fr.jsx("div",{className:"text-sm text-gray-500 font-medium",children:"Dimensions"}),Fr.jsxs("div",{className:"font-semibold text-base text-gray-900",children:[e.length," × ",e.width," × ",e.height,"m"]})]})]})]}),Fr.jsxs("div",{className:"flex justify-between items-center pt-4 border-t",children:[Fr.jsxs("div",{className:"text-3xl font-bold text-red-600",children:["À partir de ",e.basePrice,"€"]}),l===e.id&&Fr.jsx(Hx,{className:"bg-red-600 text-white text-base px-4 py-2",children:"✓ Sélectionné"})]})]})]})})})},e.id))}):Fr.jsxs("div",{className:"text-center text-gray-500 py-8",children:[Fr.jsx(Fc,{className:"h-12 w-12 mx-auto mb-3 text-gray-300"}),Fr.jsx("p",{children:"Aucun service disponible"})]})]}),l&&Fr.jsxs("div",{children:[Fr.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Type de déchet"}),ae.length>0?Fr.jsxs(Bv,{value:d,onValueChange:e=>{u(e)},children:[Fr.jsx(Wv,{className:"w-full",children:Fr.jsx($v,{placeholder:"Sélectionnez un type de déchet"})}),Fr.jsx(Hv,{children:ae.map(e=>Fr.jsx(Zv,{value:e,children:e},e))})]}):Fr.jsxs("div",{className:"text-center text-gray-500 py-4 border-2 border-dashed border-gray-200 rounded-lg",children:[Fr.jsx("p",{className:"text-sm",children:"Aucun type de déchet configuré."}),Fr.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Contactez l'administrateur pour configurer les types de déchets."})]})]}),d&&Fr.jsx(nf,{className:"border-orange-200 bg-orange-50",children:Fr.jsxs(lf,{className:"p-6",children:[Fr.jsxs("div",{className:"flex items-center justify-between mb-4",children:[Fr.jsxs("div",{className:"flex items-center",children:[Fr.jsx(_c,{className:"h-5 w-5 mr-2 text-orange-600"}),Fr.jsxs("div",{className:"flex items-center",children:[Fr.jsx("input",{type:"checkbox",id:"bsd-option",checked:W,onChange:e=>U(e.target.checked),className:"h-4 w-4 text-orange-600 bg-orange-100 border-orange-300 rounded cursor-pointer"}),Fr.jsx("label",{htmlFor:"bsd-option",className:"ml-3 text-lg font-semibold text-gray-900 cursor-pointer",children:"BSD (Bordereau de Suivi des Déchets)"})]})]}),Fr.jsx(Hx,{variant:"outline",className:"bg-orange-100 text-orange-800 border-orange-300",children:"+15€"})]}),Fr.jsxs("div",{className:"text-sm text-gray-700",children:[Fr.jsxs("p",{className:"mb-2",children:[Fr.jsx("strong",{children:"Le Bordereau de Suivi des Déchets (BSD)"})," est un document obligatoire selon la réglementation française."]}),Fr.jsx("p",{className:"mb-2",children:"Il permet de tracer le parcours de vos déchets de leur production jusqu'à leur traitement final, garantissant une gestion conforme à la réglementation environnementale."}),Fr.jsx("p",{className:"text-red-700 font-medium mb-4",children:"⚠️ Vous devez remplir une Fiche d'Identification des Déchets (FID) obligatoire avant le paiement."}),Fr.jsxs("div",{className:"flex items-center justify-between",children:[Fr.jsx(Lp,{onClick:()=>Q(!0),variant:K?"outline":"default",className:K?"border-green-500 text-green-700":"",children:K?"✓ FID Remplie - Modifier":"Remplir la FID (obligatoire)"}),K&&Fr.jsx(Hx,{variant:"outline",className:"bg-green-100 text-green-800 border-green-300",children:"FID Complétée"})]})]})]})}),d&&Fr.jsxs("div",{children:[Fr.jsxs("div",{className:"flex items-center mb-4",children:[Fr.jsx(fc,{className:"h-5 w-5 mr-2 text-red-600"}),Fr.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"company"===A?"Confirmation de l'adresse":"Adresse du chantier"})]}),Fr.jsxs("div",{className:"space-y-4",children:[Fr.jsxs("div",{className:"relative",children:[Fr.jsx(Wx,{htmlFor:"address",children:"company"===A?"Adresse de l'entreprise *":"Adresse du chantier *"}),"company"===A&&te&&Fr.jsx("p",{className:"text-sm text-blue-600 mb-2",children:"✓ Adresse automatiquement remplie depuis votre profil"}),Fr.jsx(zx,{id:"address",type:"text",value:m,onChange:e=>(async e=>{if(p(e),e.length>3){E(!0);try{const t=await Oi(`/api/places/autocomplete?input=${encodeURIComponent(e)}`);t.suggestions&&(C(t.suggestions),_(!0))}catch(t){console.error("Address suggestions error:",t)}finally{E(!1)}}else _(!1)})(e.target.value),placeholder:"company"===A?"Adresse de votre entreprise...":"Tapez l'adresse du chantier...",className:"mt-1",disabled:"company"===A}),S&&k.length>0&&Fr.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-200 rounded-md shadow-lg max-h-60 overflow-auto",children:k.map((e,t)=>Fr.jsxs("div",{className:"px-4 py-2 hover:bg-gray-100 cursor-pointer text-sm",onClick:()=>(e=>{p(e.description||e.main_text),_(!1),ne(e.description||e.main_text)})(e),children:[Fr.jsx("div",{className:"font-medium",children:e.main_text}),Fr.jsx("div",{className:"text-gray-500 text-xs",children:e.secondary_text})]},t))}),P&&Fr.jsx("div",{className:"absolute right-3 top-9",children:Fr.jsx(uc,{className:"h-4 w-4 animate-spin text-gray-400"})})]}),Fr.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[Fr.jsxs("div",{children:[Fr.jsx(Wx,{htmlFor:"postalCode",children:"Code postal *"}),Fr.jsx(zx,{id:"postalCode",type:"text",value:h,onChange:e=>x(e.target.value),placeholder:"Ex: 75001",className:"mt-1"})]}),Fr.jsxs("div",{children:[Fr.jsx(Wx,{htmlFor:"city",children:"Ville *"}),Fr.jsx(zx,{id:"city",type:"text",value:f,onChange:e=>v(e.target.value),placeholder:"Ex: Paris",className:"mt-1"})]})]}),g>0&&Fr.jsx("div",{className:"bg-green-50 p-3 rounded-lg border border-green-200",children:Fr.jsxs("div",{className:"flex items-center text-green-800",children:[Fr.jsx(fc,{className:"h-4 w-4 mr-2"}),Fr.jsxs("span",{className:"text-sm font-medium",children:["Distance calculée: ",g," km (aller-retour: ",2*g," km)"]})]})}),b&&Fr.jsxs("div",{className:"flex items-center text-blue-600",children:[Fr.jsx(uc,{className:"h-4 w-4 animate-spin mr-2"}),Fr.jsx("span",{className:"text-sm",children:"Calcul de la distance en cours..."})]}),N&&Fr.jsxs(vD,{variant:"destructive",children:[Fr.jsx(Rc,{className:"h-4 w-4"}),Fr.jsx(gD,{children:N})]})]})]}),d&&m&&Fr.jsxs("div",{children:[Fr.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Durée de location"}),Fr.jsxs("div",{className:"grid md:grid-cols-2 gap-4 mb-4",children:[Fr.jsxs("div",{children:[Fr.jsx(Wx,{children:"Date de début *"}),Fr.jsxs(vA,{open:z,onOpenChange:V,children:[Fr.jsx(gA,{asChild:!0,children:Fr.jsxs(Lp,{variant:"outline",className:Fd("w-full justify-start text-left font-normal mt-1",!I&&"text-muted-foreground"),children:[Fr.jsx(Il,{className:"mr-2 h-4 w-4"}),I?fj(I,"PPP",{locale:Dj}):"Sélectionner une date"]})}),Fr.jsx(yA,{className:"w-auto p-0",children:Fr.jsx(KT,{mode:"single",selected:I,onSelect:e=>{M(e),V(!1)},disabled:e=>e<new Date||e<new Date("1900-01-01"),initialFocus:!0})})]})]}),Fr.jsxs("div",{children:[Fr.jsx(Wx,{htmlFor:"duration",children:"Durée (jours) *"}),Fr.jsxs(Bv,{value:B.toString(),onValueChange:e=>$(parseInt(e)),children:[Fr.jsx(Wv,{className:"w-full mt-1",children:Fr.jsx($v,{})}),Fr.jsxs(Hv,{children:[Fr.jsx(Zv,{value:"1",children:"1 jour"}),Fr.jsx(Zv,{value:"3",children:"3 jours"}),Fr.jsx(Zv,{value:"7",children:"1 semaine"}),Fr.jsx(Zv,{value:"14",children:"2 semaines"}),Fr.jsx(Zv,{value:"30",children:"1 mois"}),Fr.jsx(Zv,{value:"60",children:"2 mois"}),Fr.jsx(Zv,{value:"90",children:"3 mois"})]})]})]})]}),I&&L&&Fr.jsx("div",{className:"bg-blue-50 p-3 rounded-lg border border-blue-200",children:Fr.jsxs("div",{className:"text-blue-800 text-sm",children:[Fr.jsx("strong",{children:"Période de location:"})," du ",fj(I,"dd/MM/yyyy",{locale:Dj})," au ",fj(L,"dd/MM/yyyy",{locale:Dj})," (",B," jour",B>1?"s":"",")"]})})]})]}),Fr.jsx("div",{className:"lg:col-span-1",children:Fr.jsx(nf,{className:"sticky top-4",children:Fr.jsxs(lf,{className:"p-6",children:[Fr.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Récapitulatif"}),D?Fr.jsxs("div",{className:"space-y-4",children:[Fr.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg",children:[Fr.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Service sélectionné"}),Fr.jsxs("div",{className:"text-sm text-gray-700",children:[Fr.jsxs("div",{children:[null==se?void 0:se.name," (",null==se?void 0:se.volume,"m³)"]}),d&&Fr.jsxs("div",{children:["Type de déchet: ",d]}),m&&Fr.jsxs("div",{children:["Livraison: ",m]}),g>0&&Fr.jsxs("div",{children:["Distance: ",g," km"]}),I&&Fr.jsxs("div",{children:["Période: du ",fj(I,"dd/MM/yyyy",{locale:Dj})," (",B," jour",B>1?"s":"",")"]})]})]}),Fr.jsxs("div",{className:"space-y-2",children:[Fr.jsx("h4",{className:"font-medium text-gray-900",children:"Détail du devis"}),Fr.jsxs("div",{className:"flex justify-between text-sm",children:[Fr.jsxs("span",{children:["Benne ",null==se?void 0:se.name]}),Fr.jsxs("span",{children:[null==(e=D.service)?void 0:e.toFixed(2),"€"]})]}),D.durationSupplement>0&&Fr.jsxs("div",{className:"flex justify-between text-sm text-blue-600",children:[Fr.jsxs("span",{className:"ml-2",children:["• Supplément durée (",B," jours)"]}),Fr.jsxs("span",{children:["+",null==(t=D.durationSupplement)?void 0:t.toFixed(2),"€"]})]}),D.transport>0&&Fr.jsxs("div",{className:"flex justify-between text-sm text-green-600",children:[Fr.jsxs("span",{className:"ml-2",children:["• Transport (",g," km)"]}),Fr.jsxs("span",{children:["+",null==(s=D.transport)?void 0:s.toFixed(2),"€"]})]}),D.treatment>0&&Fr.jsxs("div",{className:"flex justify-between text-sm text-orange-600",children:[Fr.jsx("span",{className:"ml-2",children:"• Traitement des déchets"}),Fr.jsxs("span",{children:["+",null==(n=D.treatment)?void 0:n.toFixed(2),"€"]})]}),W&&D.bsd>0&&Fr.jsxs("div",{className:"flex justify-between text-sm text-purple-600",children:[Fr.jsx("span",{className:"ml-2",children:"• Bordereau de suivi (BSD)"}),Fr.jsxs("span",{children:["+",null==(r=D.bsd)?void 0:r.toFixed(2),"€"]})]})]}),Fr.jsxs("div",{className:"border-t pt-4",children:[Fr.jsxs("div",{className:"flex justify-between items-center text-lg font-bold",children:[Fr.jsx("span",{children:"Total TTC"}),Fr.jsxs("span",{className:"text-red-600",children:[null==(a=D.total)?void 0:a.toFixed(2),"€"]})]}),Fr.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"TVA 20% incluse"})]}),Fr.jsx(Lp,{onClick:()=>{if(!l||!m.trim()||!d)return void o({title:"Informations manquantes",description:"Veuillez remplir tous les champs obligatoires.",variant:"destructive"});if(W&&!K)return o({title:"FID obligatoire",description:"Vous devez remplir la Fiche d'Identification des Déchets avant de continuer.",variant:"destructive"}),void Q(!0);if("construction_site"===A&&!R)return void o({title:"Téléphone manquant",description:"Le numéro de téléphone de contact chantier est obligatoire",variant:"destructive"});const e={serviceId:l,serviceName:null==se?void 0:se.name,serviceVolume:null==se?void 0:se.volume,address:m,postalCode:h,city:f,wasteTypes:[d],bsdOption:W,fidData:K,distance:2*g,startDate:null==I?void 0:I.toISOString(),endDate:null==L?void 0:L.toISOString(),durationDays:B,deliveryLocationType:A,constructionSiteContactPhone:R,pricing:D};sessionStorage.setItem("bookingDetails",JSON.stringify(e)),i("/checkout")},className:"w-full bg-red-600 hover:bg-red-700 text-white",size:"lg",disabled:!l||!m||!d||W&&!K,children:"Réserver maintenant"})]}):Fr.jsxs("div",{className:"text-center text-gray-500 py-8",children:[Fr.jsx(Fc,{className:"h-12 w-12 mx-auto mb-3 text-gray-300"}),Fr.jsx("p",{children:"Sélectionnez une benne pour voir le prix"})]})]})})}),Z&&Fr.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:Fr.jsx("div",{className:"bg-white rounded-lg max-w-4xl w-full m-4 max-h-[90vh] overflow-y-auto",children:Fr.jsx(sO,{onSubmit:e=>{H(e),Q(!1),o({title:"FID enregistrée",description:"La Fiche d'Identification des Déchets a été enregistrée avec succès."})},onCancel:()=>{Q(!1)},initialData:K})})})]})})}tO.displayName=YA.displayName;var rO=function(){return rO=Object.assign||function(e){for(var t,s=1,n=arguments.length;s<n;s++)for(var r in t=arguments[s])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},rO.apply(this,arguments)};function aO(){var e,t,s,n,r,a=hD(),i=a.bookingData,o=a.updateAddress,l=hr.useState({street:(null===(e=i.address)||void 0===e?void 0:e.street)||"",city:(null===(t=i.address)||void 0===t?void 0:t.city)||"",postalCode:(null===(s=i.address)||void 0===s?void 0:s.postalCode)||"",country:(null===(n=i.address)||void 0===n?void 0:n.country)||"FR",deliveryNotes:(null===(r=i.address)||void 0===r?void 0:r.deliveryNotes)||""}),c=l[0],d=l[1],u=hr.useState(""),m=u[0],p=u[1],h=hr.useState(12)[0];hr.useEffect(function(){c.street&&c.city&&c.postalCode&&o({street:c.street,city:c.city,postalCode:c.postalCode,country:c.country,deliveryNotes:c.deliveryNotes})},[c,o]);var x=function(e,t){d(function(s){var n;return rO(rO({},s),((n={})[e]=t,n))})};return Fr.jsxs("div",{className:"space-y-6",children:[Fr.jsxs("div",{className:"flex items-center mb-6",children:[Fr.jsx(fc,{className:"h-6 w-6 mr-3 text-primary-600"}),Fr.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Adresse de livraison"})]}),Fr.jsx(nf,{children:Fr.jsxs(lf,{className:"p-6 space-y-6",children:[Fr.jsxs("div",{children:[Fr.jsx(Wx,{htmlFor:"address-search",className:"text-sm font-medium text-slate-700 mb-2 block",children:"Rechercher une adresse"}),Fr.jsxs("div",{className:"relative",children:[Fr.jsx(zx,{id:"address-search",placeholder:"Tapez votre adresse...",value:m,onChange:function(e){return p(e.target.value)},className:"pr-10"}),Fr.jsx(Cc,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-slate-400 h-4 w-4"})]}),Fr.jsx("p",{className:"text-sm text-slate-500 mt-1",children:"Nous utilisons la géolocalisation pour calculer les frais de livraison"})]}),Fr.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[Fr.jsxs("div",{children:[Fr.jsx(Wx,{htmlFor:"street",className:"text-sm font-medium text-slate-700 mb-2 block",children:"Numéro et rue *"}),Fr.jsx(zx,{id:"street",required:!0,value:c.street,onChange:function(e){return x("street",e.target.value)},placeholder:"123 Rue de la République"})]}),Fr.jsxs("div",{children:[Fr.jsx(Wx,{htmlFor:"city",className:"text-sm font-medium text-slate-700 mb-2 block",children:"Ville *"}),Fr.jsx(zx,{id:"city",required:!0,value:c.city,onChange:function(e){return x("city",e.target.value)},placeholder:"Paris"})]})]}),Fr.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[Fr.jsxs("div",{children:[Fr.jsx(Wx,{htmlFor:"postal-code",className:"text-sm font-medium text-slate-700 mb-2 block",children:"Code postal *"}),Fr.jsx(zx,{id:"postal-code",required:!0,value:c.postalCode,onChange:function(e){return x("postalCode",e.target.value)},placeholder:"75001"})]}),Fr.jsxs("div",{children:[Fr.jsx(Wx,{htmlFor:"country",className:"text-sm font-medium text-slate-700 mb-2 block",children:"Pays"}),Fr.jsxs(Bv,{value:c.country,onValueChange:function(e){return x("country",e)},children:[Fr.jsx(Wv,{children:Fr.jsx($v,{})}),Fr.jsxs(Hv,{children:[Fr.jsx(Zv,{value:"FR",children:"France"}),Fr.jsx(Zv,{value:"BE",children:"Belgique"}),Fr.jsx(Zv,{value:"LU",children:"Luxembourg"})]})]})]})]}),Fr.jsxs("div",{children:[Fr.jsx(Wx,{htmlFor:"delivery-notes",className:"text-sm font-medium text-slate-700 mb-2 block",children:"Instructions de livraison"}),Fr.jsx(Ux,{id:"delivery-notes",rows:3,placeholder:"Informations complémentaires pour la livraison (accès difficile, étage, etc.)",value:c.deliveryNotes,onChange:function(e){return x("deliveryNotes",e.target.value)}})]}),Fr.jsx("div",{className:"bg-slate-50 p-4 rounded-lg",children:Fr.jsxs("div",{className:"flex items-center justify-between",children:[Fr.jsxs("div",{children:[Fr.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Distance calculée:"}),Fr.jsxs("span",{className:"ml-2 text-lg font-semibold text-slate-900",children:[h," km"]})]}),Fr.jsxs("div",{children:[Fr.jsx("span",{className:"text-sm text-slate-600",children:"Frais de livraison:"}),Fr.jsx("span",{className:"ml-2 text-lg font-semibold text-primary-600",children:"+24€"})]})]})})]})})]})}function iO(){var e=hD(),t=e.bookingData,s=e.updateTimeSlots,n=hr.useState(new Date(Date.now()+864e5).toISOString().split("T")[0]),r=n[0],a=n[1],i=hr.useState(null),o=i[0],l=i[1],c=hr.useState("auto"),d=c[0],u=c[1],m=Pi({queryKey:["/api/timeslots",r],enabled:!!r}),p=m.data,h=m.isLoading;hr.useEffect(function(){if(o&&p){var e=p.find(function(e){return e.id===o});if(e){var n=new Date(r),a=new Date(n);a.setDate(a.getDate()+t.durationDays);var i="auto"===d?{id:-1,date:a.toISOString().split("T")[0],startTime:"08:00",endTime:"12:00",isAvailable:!0,maxBookings:5,currentBookings:0}:null;s(e,i||void 0)}}},[o,p,r,t.durationDays,d,s]);var x=function(e){return e.toLocaleDateString("fr-FR",{weekday:"short",day:"numeric",month:"short"})},f=function(){for(var e=[],t=new Date,s=1;s<=14;s++){var n=new Date(t);n.setDate(t.getDate()+s),0!==n.getDay()&&6!==n.getDay()&&e.push(n)}return e}();return Fr.jsxs("div",{className:"space-y-6",children:[Fr.jsxs("div",{className:"flex items-center mb-6",children:[Fr.jsx(Il,{className:"h-6 w-6 mr-3 text-primary-600"}),Fr.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Choisissez votre créneau"})]}),Fr.jsx(nf,{children:Fr.jsxs(lf,{className:"p-6",children:[Fr.jsx("h3",{className:"text-lg font-medium text-slate-900 mb-4",children:"Date de livraison"}),Fr.jsx("div",{className:"grid grid-cols-7 gap-2",children:f.map(function(e){var t=e.toISOString().split("T")[0];return Fr.jsxs(Lp,{variant:r===t?"default":"outline",onClick:function(){return a(t)},className:"h-auto flex flex-col py-3 ".concat(r===t?"bg-primary-600 hover:bg-primary-700":""),children:[Fr.jsx("div",{className:"text-xs mb-1",children:x(e).split(" ")[0]}),Fr.jsx("div",{className:"text-sm",children:e.getDate()})]},t)})})]})}),Fr.jsx(nf,{children:Fr.jsxs(lf,{className:"p-6",children:[Fr.jsxs("h3",{className:"text-lg font-medium text-slate-900 mb-4",children:["Créneaux disponibles pour le ",new Date(r).toLocaleDateString("fr-FR")]}),h?Fr.jsx("div",{className:"flex items-center justify-center h-32",children:Fr.jsx("div",{className:"animate-spin w-6 h-6 border-4 border-primary-600 border-t-transparent rounded-full"})}):p&&p.length>0?Fr.jsx(eO,{value:(null==o?void 0:o.toString())||"",onValueChange:function(e){return l(parseInt(e))},children:Fr.jsx("div",{className:"grid md:grid-cols-2 gap-4",children:p.map(function(e){return Fr.jsxs("div",{className:"relative",children:[Fr.jsx(tO,{value:e.id.toString(),id:e.id.toString(),className:"sr-only"}),Fr.jsxs(Wx,{htmlFor:e.id.toString(),className:"cursor-pointer block p-4 border-2 rounded-lg transition-colors ".concat(o===e.id?"border-primary-500 bg-primary-50":"border-slate-200 hover:border-primary-300"),children:[Fr.jsxs("div",{className:"flex items-center justify-between mb-2",children:[Fr.jsx("h4",{className:"font-medium text-slate-900",children:"08:00"===e.startTime?"Matin":"Après-midi"}),Fr.jsxs("span",{className:"text-red-600 text-sm flex items-center",children:[Fr.jsx(Ul,{className:"h-4 w-4 mr-1"}),"Disponible"]})]}),Fr.jsxs("p",{className:"text-sm text-slate-600",children:[e.startTime," - ",e.endTime]}),Fr.jsxs("p",{className:"text-xs text-slate-500 mt-1",children:["Livraison entre ",e.startTime," et ",e.endTime]})]})]},e.id)})})}):Fr.jsxs(vD,{children:[Fr.jsx(Kl,{className:"h-4 w-4"}),Fr.jsx(gD,{children:"Aucun créneau disponible pour cette date. Veuillez sélectionner une autre date."})]})]})}),Fr.jsx(nf,{children:Fr.jsxs(lf,{className:"p-6",children:[Fr.jsx("h3",{className:"text-lg font-medium text-slate-900 mb-4",children:"Date de récupération"}),Fr.jsx(eO,{value:d,onValueChange:function(e){return u(e)},children:Fr.jsxs("div",{className:"space-y-4",children:[Fr.jsxs("div",{className:"flex items-center space-x-2",children:[Fr.jsx(tO,{value:"auto",id:"pickup-auto"}),Fr.jsx(Wx,{htmlFor:"pickup-auto",className:"text-sm text-slate-700",children:"Récupération automatique (fin de période de location)"})]}),Fr.jsxs("div",{className:"flex items-center space-x-2",children:[Fr.jsx(tO,{value:"manual",id:"pickup-manual"}),Fr.jsx(Wx,{htmlFor:"pickup-manual",className:"text-sm text-slate-700",children:"Je choisis ma date de récupération"})]})]})}),"auto"===d&&r&&Fr.jsxs(vD,{className:"mt-4 border-blue-200 bg-blue-50",children:[Fr.jsx(cc,{className:"h-4 w-4 text-blue-600"}),Fr.jsxs(gD,{className:"text-blue-800",children:["Récupération prévue le"," ",Fr.jsx("strong",{children:new Date(new Date(r).getTime()+24*t.durationDays*60*60*1e3).toLocaleDateString("fr-FR")})," ","entre 8h et 12h (fin de période de ",t.durationDays," jour",t.durationDays>1?"s":"",")"]})]})]})})]})}const oO=(window.location.hostname,"pk_live_51RTkOEH7j6Qmye8ANaVnmmha9hqIUhENTbJo94UZ9D7Ia3hRu7jFbVcBtfO4lJvLiluHxqdproixaCIglmZORP0h00IWlpRCiS");if(!oO)throw console.error("❌ Clé publique Stripe manquante"),new Error("Clé publique Stripe manquante");oO.startsWith("pk_test")&&console.warn("⚠️  ATTENTION: Utilisation d'une clé de test Stripe en production!"),console.log("✅ Stripe configuré avec clé publique:",oO.substring(0,12)+"...");const lO=br(oO);var cO=function(){return cO=Object.assign||function(e){for(var t,s=1,n=arguments.length;s<n;s++)for(var r in t=arguments[s])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},cO.apply(this,arguments)},dO=function(e,t,s,n){return new(s||(s=Promise))(function(t,r){function a(e){try{o(n.next(e))}catch(t){r(t)}}function i(e){try{o(n.throw(e))}catch(t){r(t)}}function o(e){var n;e.done?t(e.value):(n=e.value,n instanceof s?n:new s(function(e){e(n)})).then(a,i)}o((n=n.apply(e,[])).next())})},uO=function(e,t){var s,n,r,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=o(0),i.throw=o(1),i.return=o(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(o){return function(l){return function(o){if(s)throw new TypeError("Generator is already executing.");for(;i&&(i=0,o[0]&&(a=0)),a;)try{if(s=1,n&&(r=2&o[0]?n.return:o[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,o[1])).done)return r;switch(n=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(r=a.trys,(r=r.length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){a.label=o[1];break}if(6===o[0]&&a.label<r[1]){a.label=r[1],r=o;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(o);break}r[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(l){o=[6,l],n=0}finally{s=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}};function mO(){var e=this,t=Nr(),s=wr(),n=Ui().toast,r=hD(),a=r.bookingData,i=r.updateCustomer,o=r.setCurrentStep,l=r.calculateTotalPrice,c=hr.useState(!1),d=c[0],u=c[1],m=hr.useState({firstName:"",lastName:"",email:"",phone:"",createAccount:!1,acceptTerms:!1,acceptMarketing:!1}),p=m[0],h=m[1],x=l();return Fr.jsxs("form",{onSubmit:function(r){return dO(e,0,void 0,function(){var e,l,c,d,m;return uO(this,function(h){switch(h.label){case 0:if(r.preventDefault(),!t||!s)return[2];if(!p.acceptTerms)return n({title:"Conditions requises",description:"Vous devez accepter les conditions générales pour continuer.",variant:"destructive"}),[2];u(!0),h.label=1;case 1:return h.trys.push([1,5,6,7]),[4,Oi("POST","/api/orders",{serviceId:a.service.id,deliveryTimeSlotId:null===(d=a.deliveryTimeSlot)||void 0===d?void 0:d.id,pickupTimeSlotId:null===(m=a.pickupTimeSlot)||void 0===m?void 0:m.id,customerFirstName:p.firstName,customerLastName:p.lastName,customerEmail:p.email,customerPhone:p.phone,deliveryStreet:a.address.street,deliveryCity:a.address.city,deliveryPostalCode:a.address.postalCode,deliveryCountry:a.address.country,deliveryNotes:a.address.deliveryNotes,durationDays:a.durationDays,wasteTypes:a.wasteTypes,status:"pending",paymentStatus:"pending"})];case 2:return[4,h.sent().json()];case 3:return e=h.sent(),i({firstName:p.firstName,lastName:p.lastName,email:p.email,phone:p.phone,createAccount:p.createAccount}),[4,t.confirmPayment({elements:s,confirmParams:{return_url:"".concat(window.location.origin,"?order_id=").concat(e.id)},redirect:"if_required"})];case 4:return(l=h.sent().error)?n({title:"Erreur de paiement",description:l.message,variant:"destructive"}):(n({title:"Paiement réussi",description:"Votre commande a été confirmée avec succès!"}),o(5)),[3,7];case 5:return c=h.sent(),n({title:"Erreur",description:c.message||"Une erreur est survenue lors du traitement de votre commande.",variant:"destructive"}),[3,7];case 6:return u(!1),[7];case 7:return[2]}})})},className:"space-y-6",children:[Fr.jsxs(nf,{children:[Fr.jsx(rf,{children:Fr.jsxs(af,{className:"flex items-center",children:[Fr.jsx(Yl,{className:"h-5 w-5 mr-2"}),"Vos informations"]})}),Fr.jsxs(lf,{className:"space-y-4",children:[Fr.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[Fr.jsxs("div",{children:[Fr.jsx(Wx,{htmlFor:"first-name",children:"Prénom *"}),Fr.jsx(zx,{id:"first-name",required:!0,value:p.firstName,onChange:function(e){return h(function(t){return cO(cO({},t),{firstName:e.target.value})})}})]}),Fr.jsxs("div",{children:[Fr.jsx(Wx,{htmlFor:"last-name",children:"Nom *"}),Fr.jsx(zx,{id:"last-name",required:!0,value:p.lastName,onChange:function(e){return h(function(t){return cO(cO({},t),{lastName:e.target.value})})}})]})]}),Fr.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[Fr.jsxs("div",{children:[Fr.jsx(Wx,{htmlFor:"email",children:"Email *"}),Fr.jsx(zx,{id:"email",type:"email",required:!0,value:p.email,onChange:function(e){return h(function(t){return cO(cO({},t),{email:e.target.value})})}})]}),Fr.jsxs("div",{children:[Fr.jsx(Wx,{htmlFor:"phone",children:"Téléphone *"}),Fr.jsx(zx,{id:"phone",type:"tel",required:!0,value:p.phone,onChange:function(e){return h(function(t){return cO(cO({},t),{phone:e.target.value})})}})]})]}),Fr.jsxs("div",{className:"flex items-center space-x-2",children:[Fr.jsx(BE,{id:"create-account",checked:p.createAccount,onCheckedChange:function(e){return h(function(t){return cO(cO({},t),{createAccount:e})})}}),Fr.jsx(Wx,{htmlFor:"create-account",className:"text-sm",children:"Créer un compte pour suivre mes commandes"})]})]})]}),Fr.jsxs(nf,{children:[Fr.jsx(rf,{children:Fr.jsx(af,{children:"Mode de paiement"})}),Fr.jsxs(lf,{className:"space-y-4",children:[Fr.jsx(eO,{defaultValue:"stripe",children:Fr.jsxs("div",{className:"flex items-center space-x-2 p-4 border-2 border-primary-500 bg-primary-50 rounded-lg",children:[Fr.jsx(tO,{value:"stripe",id:"stripe"}),Fr.jsxs(Wx,{htmlFor:"stripe",className:"flex items-center flex-1",children:[Fr.jsx(Yl,{className:"h-5 w-5 mr-3 text-primary-600"}),Fr.jsxs("div",{children:[Fr.jsx("div",{className:"font-medium",children:"Carte bancaire"}),Fr.jsx("div",{className:"text-sm text-slate-600",children:"Paiement sécurisé via Stripe"})]})]})]})}),Fr.jsx("div",{className:"mt-4",children:Fr.jsx(kr,{})})]})]}),Fr.jsxs(nf,{children:[Fr.jsx(rf,{children:Fr.jsx(af,{children:"Conditions générales"})}),Fr.jsxs(lf,{className:"space-y-3",children:[Fr.jsxs("div",{className:"flex items-start space-x-2",children:[Fr.jsx(BE,{id:"accept-terms",required:!0,checked:p.acceptTerms,onCheckedChange:function(e){return h(function(t){return cO(cO({},t),{acceptTerms:e})})}}),Fr.jsxs(Wx,{htmlFor:"accept-terms",className:"text-sm leading-relaxed",children:["J'accepte les"," ",Fr.jsx("a",{href:"#",className:"text-primary-600 hover:underline",children:"conditions générales de vente"})," ","et la"," ",Fr.jsx("a",{href:"#",className:"text-primary-600 hover:underline",children:"politique de confidentialité"})," *"]})]}),Fr.jsxs("div",{className:"flex items-start space-x-2",children:[Fr.jsx(BE,{id:"accept-marketing",checked:p.acceptMarketing,onCheckedChange:function(e){return h(function(t){return cO(cO({},t),{acceptMarketing:e})})}}),Fr.jsx(Wx,{htmlFor:"accept-marketing",className:"text-sm",children:"J'accepte de recevoir des offres commerciales par email"})]})]})]}),Fr.jsx(Lp,{type:"submit",className:"w-full bg-red-600 hover:bg-red-700 text-lg py-4 h-auto",disabled:!t||d,children:d?Fr.jsxs(Fr.Fragment,{children:[Fr.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-white border-t-transparent rounded-full mr-2"}),"Traitement..."]}):Fr.jsxs(Fr.Fragment,{children:[Fr.jsx(pc,{className:"h-5 w-5 mr-2"}),"Payer ",x.totalTTC.toFixed(2),"€"]})}),Fr.jsx("div",{className:"text-center",children:Fr.jsxs("p",{className:"text-xs text-slate-500 flex items-center justify-center",children:[Fr.jsx(_c,{className:"h-4 w-4 mr-1"}),"Paiement sécurisé SSL 256-bit"]})})]})}function pO(){var e=hD(),t=e.bookingData,s=e.calculateTotalPrice,n=hr.useState(""),r=n[0],a=n[1],i=s();return hr.useEffect(function(){t.service&&Oi("POST","/api/create-payment-intent",{amount:i.totalTTC,orderId:"temp-".concat(Date.now())}).then(function(e){return e.json()}).then(function(e){a(e.clientSecret)}).catch(function(e){console.error("Error creating payment intent:",e)})},[t.service,i.totalTTC]),r?Fr.jsxs("div",{className:"space-y-6",children:[Fr.jsxs("div",{className:"flex items-center mb-6",children:[Fr.jsx(pc,{className:"h-6 w-6 mr-3 text-primary-600"}),Fr.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Paiement sécurisé"})]}),Fr.jsx(jr,{stripe:lO,options:{clientSecret:r,appearance:{theme:"stripe",variables:{colorPrimary:"#2563eb"}}},children:Fr.jsx(mO,{})})]}):Fr.jsx("div",{className:"flex items-center justify-center h-64",children:Fr.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-primary-600 border-t-transparent rounded-full"})})}var hO="Progress",xO=100,[fO,vO]=Gi(hO),[gO,yO]=fO(hO),bO=hr.forwardRef((e,t)=>{const{__scopeProgress:s,value:n=null,max:r,getValueLabel:a=wO,...i}=e;!r&&0!==r||SO(r)||console.error(`Invalid prop \`max\` of value \`${`${r}`}\` supplied to \`${"Progress"}\`. Only numbers greater than 0 are valid max values. Defaulting to \`100\`.`);const o=SO(r)?r:xO;null===n||_O(n,o)||console.error(function(e,t){return`Invalid prop \`value\` of value \`${e}\` supplied to \`${t}\`. The \`value\` prop must be:\n  - a positive number\n  - less than the value passed to \`max\` (or 100 if no \`max\` prop is set)\n  - \`null\` or \`undefined\` if the progress is indeterminate.\n\nDefaulting to \`null\`.`}(`${n}`,"Progress"));const l=_O(n,o)?n:null,c=CO(l)?a(l,o):void 0;return Fr.jsx(gO,{scope:s,value:l,max:o,children:Fr.jsx(ao.div,{"aria-valuemax":o,"aria-valuemin":0,"aria-valuenow":CO(l)?l:void 0,"aria-valuetext":c,role:"progressbar","data-state":kO(l,o),"data-value":l??void 0,"data-max":o,...i,ref:t})})});bO.displayName=hO;var jO="ProgressIndicator",NO=hr.forwardRef((e,t)=>{const{__scopeProgress:s,...n}=e,r=yO(jO,s);return Fr.jsx(ao.div,{"data-state":kO(r.value,r.max),"data-value":r.value??void 0,"data-max":r.max,...n,ref:t})});function wO(e,t){return`${Math.round(e/t*100)}%`}function kO(e,t){return null==e?"indeterminate":e===t?"complete":"loading"}function CO(e){return"number"==typeof e}function SO(e){return CO(e)&&!isNaN(e)&&e>0}function _O(e,t){return CO(e)&&!isNaN(e)&&e<=t&&e>=0}NO.displayName=jO;var PO=bO,EO=NO;const DO=hr.forwardRef(({className:e,value:t,...s},n)=>Fr.jsx(PO,{ref:n,className:Fd("relative h-4 w-full overflow-hidden rounded-full bg-secondary",e),...s,children:Fr.jsx(EO,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})}));function TO(){const{currentStep:e,setCurrentStep:t,bookingData:s}=hD(),n=[{id:1,name:"Service",icon:Pc,description:"Choisir votre benne"},{id:2,name:"Adresse",icon:fc,description:"Lieu de livraison"},{id:3,name:"Dates",icon:Il,description:"Planning"},{id:4,name:"Paiement",icon:Yl,description:"Finaliser"}];return Fr.jsx("div",{className:"min-h-screen bg-gray-50",children:Fr.jsxs("div",{className:"container mx-auto px-4 py-8",children:[Fr.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-8",children:"Réservation de benne"}),Fr.jsxs("div",{className:"max-w-4xl mx-auto mb-8",children:[Fr.jsx(DO,{value:e/4*100,className:"h-2 mb-6"}),Fr.jsx("div",{className:"flex justify-between",children:n.map(t=>{const s=t.icon,n=t.id<e,r=t.id===e;return Fr.jsxs("div",{className:"flex flex-col items-center",children:[Fr.jsx("div",{className:"w-12 h-12 rounded-full flex items-center justify-center transition-all "+(n?"bg-green-600 text-white":r?"bg-red-600 text-white":"bg-gray-200 text-gray-400"),children:n?Fr.jsx(Ul,{className:"h-6 w-6"}):Fr.jsx(s,{className:"h-6 w-6"})}),Fr.jsxs("div",{className:"mt-2 text-center",children:[Fr.jsx("div",{className:"text-sm font-medium "+(r?"text-red-600":"text-gray-600"),children:t.name}),Fr.jsx("div",{className:"text-xs text-gray-500 hidden sm:block",children:t.description})]})]},t.id)})})]}),Fr.jsx("div",{className:"max-w-4xl mx-auto",children:Fr.jsxs(nf,{children:[Fr.jsxs(rf,{children:[Fr.jsx(af,{children:n[e-1].name}),Fr.jsx(of,{children:n[e-1].description})]}),Fr.jsxs(lf,{className:"p-6",children:[(()=>{switch(e){case 1:default:return Fr.jsx(nO,{});case 2:return Fr.jsx(aO,{});case 3:return Fr.jsx(iO,{});case 4:return Fr.jsx(pO,{})}})(),Fr.jsxs("div",{className:"flex justify-between items-center mt-8 pt-6 border-t",children:[Fr.jsxs(Lp,{variant:"outline",onClick:()=>t(e-1),disabled:1===e,className:"flex items-center",children:[Fr.jsx(Cl,{className:"h-4 w-4 mr-2"}),"Retour"]}),Fr.jsxs(Lp,{onClick:()=>t(e+1),disabled:!(()=>{switch(e){case 1:return null!==s.service;case 2:return null!==s.address;case 3:return null!==s.deliveryTimeSlot;case 4:return!0;default:return!1}})()||4===e,className:"bg-red-600 hover:bg-red-700 text-white",children:[4===e?"Payer":"Continuer",Fr.jsx(Sl,{className:"h-4 w-4 ml-2"})]})]})]})]})})]})})}function AO(){const[e,t]=hr.useState(null),{toast:s}=Ui(),[,n]=va(),[r,a]=hr.useState(!1),i=localStorage.getItem("bookingDates"),o=i?JSON.parse(i):null,[l]=hr.useState((null==o?void 0:o.deliveryDate)||""),[c]=hr.useState((null==o?void 0:o.pickupDate)||""),[d]=hr.useState((null==o?void 0:o.deliveryTimeSlot)||null),[u,m]=hr.useState({heightLimit:!1,noDangerousWaste:!1,spaceRequirements:!1,groundProtection:!1}),[p,h]=hr.useState(!1);hr.useEffect(()=>{const e=sessionStorage.getItem("bookingDetails");e&&t(JSON.parse(e))},[]);const x=Object.values(u).every(e=>e);return e?Fr.jsx("div",{className:"min-h-screen bg-gray-50",children:Fr.jsxs("div",{className:"container mx-auto py-8 px-4",children:[Fr.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-8",children:"Finalisation de votre commande"}),Fr.jsx("div",{className:"max-w-5xl mx-auto",children:Fr.jsxs("form",{onSubmit:async t=>{if(t.preventDefault(),x&&p)if(l){a(!0);try{const t={serviceId:null==e?void 0:e.serviceId,wasteTypes:null==e?void 0:e.wasteTypes,deliveryDate:l,pickupDate:c,address:null==e?void 0:e.address,postalCode:null==e?void 0:e.postalCode,city:null==e?void 0:e.city,evacuationConditions:u,acceptTerms:p},r=await Oi("POST","/api/orders",t);s({title:"✅ Commande créée avec succès !",description:`Votre commande #${r.id} est confirmée.`}),sessionStorage.removeItem("bookingDetails"),localStorage.removeItem("bookingDates"),n("/dashboard")}catch($R){s({title:"Erreur",description:"Une erreur est survenue lors de la création de la commande",variant:"destructive"})}finally{a(!1)}}else s({title:"Date manquante",description:"Veuillez sélectionner une date de livraison",variant:"destructive"});else s({title:"Conditions manquantes",description:"Veuillez accepter toutes les conditions avant de continuer",variant:"destructive"})},className:"grid gap-6 lg:grid-cols-3",children:[Fr.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[Fr.jsxs(nf,{children:[Fr.jsxs(rf,{children:[Fr.jsxs(af,{className:"flex items-center",children:[Fr.jsx(gc,{className:"mr-2 h-5 w-5"}),"Récapitulatif de votre réservation"]}),Fr.jsx(of,{children:"Vérifiez les détails de votre commande"})]}),Fr.jsxs(lf,{className:"space-y-4",children:[Fr.jsx("div",{className:"bg-gray-50 p-4 rounded-lg",children:Fr.jsxs("div",{className:"flex items-center justify-between",children:[Fr.jsxs("div",{className:"flex items-center",children:[Fr.jsx(Fc,{className:"h-5 w-5 mr-3 text-gray-600"}),Fr.jsxs("div",{children:[Fr.jsx("h3",{className:"font-semibold",children:e.serviceName}),Fr.jsxs("p",{className:"text-sm text-gray-600",children:["Volume: ",e.serviceVolume,"m³"]})]})]}),Fr.jsxs("span",{className:"text-xl font-bold text-gray-900",children:[e.pricing.service.toFixed(2),"€"]})]})}),Fr.jsx("div",{className:"bg-gray-50 p-4 rounded-lg",children:Fr.jsxs("div",{className:"flex items-start",children:[Fr.jsx(fc,{className:"h-5 w-5 mr-3 text-gray-600 mt-1"}),Fr.jsxs("div",{className:"flex-1",children:[Fr.jsx("h4",{className:"font-semibold mb-1",children:"Adresse de livraison"}),Fr.jsxs("p",{className:"text-sm text-gray-700",children:[e.address,Fr.jsx("br",{}),e.postalCode," ",e.city]}),Fr.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["Distance: ",e.distance," km aller-retour"]})]})]})}),Fr.jsx("div",{className:"bg-white p-5 rounded-xl shadow-md",children:Fr.jsxs("div",{className:"flex items-start",children:[Fr.jsx(Il,{className:"h-6 w-6 mr-3 text-purple-600 mt-1"}),Fr.jsxs("div",{className:"flex-1",children:[Fr.jsx("h4",{className:"font-semibold mb-2",children:"📅 Planning"}),Fr.jsxs("div",{className:"space-y-2",children:[l?Fr.jsxs("div",{className:"flex justify-between",children:[Fr.jsx("span",{className:"text-gray-600",children:"Livraison:"}),Fr.jsxs("span",{className:"font-medium",children:[new Date(l).toLocaleDateString("fr-FR"),d&&` - ${d.startTime} à ${d.endTime}`]})]}):Fr.jsxs(vD,{className:"border-red-200 bg-red-50",children:[Fr.jsx(Rc,{className:"h-4 w-4"}),Fr.jsx(gD,{children:"Date de livraison non sélectionnée"})]}),c&&Fr.jsxs("div",{className:"flex justify-between",children:[Fr.jsx("span",{className:"text-gray-600",children:"Récupération:"}),Fr.jsx("span",{className:"font-medium",children:new Date(c).toLocaleDateString("fr-FR")})]})]})]})]})}),Fr.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[Fr.jsx("h4",{className:"font-semibold mb-2",children:"Types de déchets"}),Fr.jsx("div",{className:"flex flex-wrap gap-2",children:e.wasteTypes.map((e,t)=>Fr.jsx(Hx,{variant:"secondary",children:e},t))})]})]})]}),Fr.jsxs(nf,{children:[Fr.jsx(rf,{children:Fr.jsxs(af,{className:"flex items-center",children:[Fr.jsx(Rc,{className:"mr-2 h-5 w-5 text-amber-600"}),"Conditions d'évacuation obligatoires"]})}),Fr.jsxs(lf,{className:"space-y-4",children:[Fr.jsx("p",{className:"text-amber-800 font-medium",children:"Toutes les conditions doivent être acceptées :"}),Fr.jsx("div",{className:"space-y-4",children:[{key:"heightLimit",label:"Je m'engage à ne pas dépasser la hauteur maximale de la benne"},{key:"noDangerousWaste",label:"Je certifie ne pas mettre de déchets dangereux"},{key:"spaceRequirements",label:"Je confirme disposer de l'espace nécessaire"},{key:"groundProtection",label:"Je protégerai le sol si nécessaire"}].map(e=>Fr.jsxs("div",{className:"flex items-start space-x-3 p-3 hover:bg-gray-50 rounded-lg transition-colors",children:[Fr.jsx(BE,{checked:u[e.key],onCheckedChange:t=>m(s=>({...s,[e.key]:!!t})),className:"mt-1"}),Fr.jsx("label",{className:"text-gray-700 cursor-pointer select-none",children:e.label})]},e.key))})]})]})]}),Fr.jsx("div",{className:"space-y-6",children:Fr.jsxs(nf,{className:"sticky top-4",children:[Fr.jsx(rf,{children:Fr.jsxs(af,{className:"flex items-center",children:[Fr.jsx(Yl,{className:"mr-2 h-5 w-5"}),"Total à payer"]})}),Fr.jsxs(lf,{className:"p-6 space-y-4",children:[Fr.jsxs("div",{className:"space-y-3",children:[Fr.jsxs("div",{className:"flex justify-between text-lg",children:[Fr.jsx("span",{children:"Service"}),Fr.jsxs("span",{className:"font-medium",children:[e.pricing.service.toFixed(2),"€"]})]}),Fr.jsxs("div",{className:"flex justify-between text-lg",children:[Fr.jsx("span",{children:"Transport"}),Fr.jsxs("span",{className:"font-medium",children:[e.pricing.transport.toFixed(2),"€"]})]}),Fr.jsx(Jx,{className:"my-4"}),Fr.jsxs("div",{className:"flex justify-between text-xl font-bold",children:[Fr.jsx("span",{children:"Total TTC"}),Fr.jsxs("span",{className:"text-red-600",children:[e.pricing.total.toFixed(2),"€"]})]})]}),Fr.jsx("div",{className:"pt-4 border-t",children:Fr.jsxs("div",{className:"flex items-start space-x-3",children:[Fr.jsx(BE,{id:"terms",checked:p,onCheckedChange:e=>h(!!e)}),Fr.jsxs("label",{htmlFor:"terms",className:"text-sm text-gray-700 cursor-pointer",children:["J'accepte les ",Fr.jsx("a",{href:"/cgv",className:"text-blue-600 underline",children:"conditions générales de vente"})]})]})}),Fr.jsx(Lp,{type:"submit",disabled:!x||!p||r||!l,className:"w-full bg-red-600 hover:bg-red-700 text-white",children:r?Fr.jsxs("div",{className:"flex items-center justify-center",children:[Fr.jsx("div",{className:"animate-spin h-5 w-5 border-3 border-white border-t-transparent rounded-full mr-3"}),"Traitement..."]}):Fr.jsxs("span",{className:"flex items-center justify-center",children:[Fr.jsx(Yl,{className:"mr-2 h-5 w-5"}),"Confirmer et payer ",e.pricing.total.toFixed(2),"€"]})}),Fr.jsx("div",{className:"text-center text-xs text-gray-500 pt-2",children:Fr.jsxs("p",{className:"flex items-center justify-center",children:[Fr.jsx(Zl,{className:"h-3 w-3 mr-1"}),"Paiement sécurisé par Stripe"]})})]})]})})]})})]})}):Fr.jsx("div",{className:"min-h-screen bg-gray-50",children:Fr.jsx("div",{className:"container mx-auto py-12 px-4",children:Fr.jsx(nf,{className:"max-w-2xl mx-auto",children:Fr.jsxs(lf,{className:"p-12 text-center",children:[Fr.jsx(Fc,{className:"h-16 w-16 mx-auto mb-6 text-gray-400"}),Fr.jsx("p",{className:"text-xl text-gray-700 mb-8",children:"Aucune réservation en cours. Commencez par sélectionner votre service."}),Fr.jsx(Lp,{asChild:!0,className:"bg-red-600 hover:bg-red-700 text-white",children:Fr.jsx("a",{href:"/booking",children:"Commencer la réservation"})})]})})})})}function OO(){const[,e]=va(),[t,s]=hr.useState("");return hr.useEffect(()=>{sessionStorage.removeItem("bookingDetails"),s(`CMD-${Date.now()}`)},[]),Fr.jsx("div",{className:"min-h-screen bg-gray-50",children:Fr.jsx("div",{className:"container mx-auto px-4 py-8",children:Fr.jsx("div",{className:"max-w-2xl mx-auto",children:Fr.jsxs(nf,{className:"text-center",children:[Fr.jsxs(rf,{className:"pb-4",children:[Fr.jsx("div",{className:"mx-auto mb-4",children:Fr.jsx(Ul,{className:"w-16 h-16 text-green-600"})}),Fr.jsx(af,{className:"text-2xl text-green-600",children:"Paiement confirmé !"})]}),Fr.jsxs(lf,{className:"space-y-6",children:[Fr.jsxs("div",{children:[Fr.jsx("p",{className:"text-gray-600 mb-2",children:"Votre commande a été traitée avec succès"}),Fr.jsxs("p",{className:"font-semibold text-lg",children:["Numéro de commande : ",t]})]}),Fr.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[Fr.jsxs("h3",{className:"font-semibold mb-3 flex items-center gap-2",children:[Fr.jsx(Il,{className:"w-5 h-5 text-red-600"}),"Prochaines étapes"]}),Fr.jsxs("ul",{className:"text-left space-y-2 text-gray-600",children:[Fr.jsx("li",{children:"• Un email de confirmation vous sera envoyé sous peu"}),Fr.jsx("li",{children:"• Notre équipe vous contactera pour confirmer la date de livraison"}),Fr.jsx("li",{children:"• La benne sera livrée à l'adresse indiquée"}),Fr.jsx("li",{children:"• Vous recevrez un appel avant la collecte"})]})]}),Fr.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[Fr.jsxs(Lp,{variant:"outline",onClick:()=>e("/"),className:"flex items-center gap-2",children:[Fr.jsx(ec,{className:"w-4 h-4"}),"Télécharger la facture"]}),Fr.jsx(Lp,{onClick:()=>e("/"),className:"bg-red-600 hover:bg-red-700 text-white",children:"Retour à l'accueil"})]}),Fr.jsxs("div",{className:"text-sm text-gray-500",children:[Fr.jsxs("p",{children:["Une question ? Contactez-nous au ",Fr.jsx("strong",{children:"03 44 45 11 58"})]}),Fr.jsxs("p",{children:["ou par email à ",Fr.jsx("strong",{children:"contact@remondis.fr"})]})]})]})]})})})})}function RO(){const[,e]=va();return Fr.jsxs("div",{className:"min-h-screen bg-gray-50",children:[Fr.jsx(iD,{variant:"legal",subtitle:"INFORMATIONS LÉGALES",title:"Mentions légales & CGV",description:"Conditions générales de vente, mentions légales et politique de confidentialité pour tous nos services de collecte et traitement de déchets.",children:Fr.jsxs(Lp,{variant:"secondary",size:"lg",onClick:()=>e("/"),className:"bg-white/20 hover:bg-white/30 text-white border-white/30",children:[Fr.jsx(Cl,{className:"h-5 w-5 mr-2"}),"Retour à l'accueil"]})}),Fr.jsxs("div",{className:"container mx-auto px-4 py-12 max-w-4xl -mt-8 relative z-10",children:[Fr.jsxs(nf,{className:"mb-6",children:[Fr.jsx(rf,{children:Fr.jsx(af,{className:"text-red-600",children:"Informations légales"})}),Fr.jsxs(lf,{className:"space-y-4",children:[Fr.jsxs("div",{children:[Fr.jsx("h3",{className:"font-semibold mb-2",children:"Raison sociale :"}),Fr.jsx("p",{children:"REMONDIS France SAS"}),Fr.jsx("p",{children:"Société par Actions Simplifiée au capital de 1 000 000 €"}),Fr.jsx("p",{children:"SIRET : 123 456 789 00012"}),Fr.jsx("p",{children:"RCS : Beauvais B 123 456 789"}),Fr.jsx("p",{children:"Code APE : 3811Z - Collecte des déchets non dangereux"})]}),Fr.jsxs("div",{children:[Fr.jsx("h3",{className:"font-semibold mb-2",children:"Siège social :"}),Fr.jsx("p",{children:"Zone Industrielle des Alouettes"}),Fr.jsx("p",{children:"72700 Allonnes, France"}),Fr.jsx("p",{children:"Téléphone : 03 44 45 11 58"}),Fr.jsx("p",{children:"Email : contact@remondis.fr"})]}),Fr.jsxs("div",{children:[Fr.jsx("h3",{className:"font-semibold mb-2",children:"TVA Intracommunautaire :"}),Fr.jsx("p",{children:"FR 12 123 456 789"})]}),Fr.jsxs("div",{children:[Fr.jsx("h3",{className:"font-semibold mb-2",children:"Directeur de publication :"}),Fr.jsx("p",{children:"Directeur Général - REMONDIS France"})]})]})]}),Fr.jsxs(nf,{className:"mb-6",children:[Fr.jsx(rf,{children:Fr.jsx(af,{className:"text-red-600",children:"Conditions Générales de Vente"})}),Fr.jsxs(lf,{className:"space-y-6 max-h-96 overflow-y-auto",children:[Fr.jsxs("div",{children:[Fr.jsx("h3",{className:"font-semibold mb-2 text-red-600",children:"1. VALIDITÉ DES CONDITIONS"}),Fr.jsxs("div",{className:"space-y-2 text-sm text-gray-600",children:[Fr.jsxs("p",{children:[Fr.jsx("strong",{children:"a."})," Les présentes Conditions sont adressées ou remises à chaque CLIENT, préalablement à la mise en vigueur des relations commerciales avec REMONDIS."]}),Fr.jsxs("p",{children:[Fr.jsx("strong",{children:"b."})," En conséquence, toute prestation de traitement de déchets confiée à REMONDIS par le CLIENT implique pour lui l'acceptation sans réserve des présentes Conditions Générales et des Conditions Particulières."]}),Fr.jsxs("p",{children:[Fr.jsx("strong",{children:"c."})," Toute condition contraire posée par le CLIENT dans un quelconque document est donc, sauf acceptation expresse, inopposable à REMONDIS."]})]})]}),Fr.jsxs("div",{children:[Fr.jsx("h3",{className:"font-semibold mb-2 text-red-600",children:"2. RESPONSABILITÉS"}),Fr.jsxs("div",{className:"space-y-2 text-sm text-gray-600",children:[Fr.jsx("p",{children:"Le CLIENT reste responsable de ses déchets jusqu'à l'élimination finale au regard de la loi n° 75-633 du 15 juillet 1975. Le CLIENT ou son transporteur, ou toute personne travaillant pour son compte s'engage à respecter toute prescription tant française qu'européenne en matière de Transport."}),Fr.jsx("p",{children:"Le CLIENT est responsable de tout préjudice causé aux personnes, aux marchandises et aux installations de REMONDIS que ce soit de son fait, du fait de ses préposés ou de ses déchets. Le PRESTATAIRE s'engage à éliminer les déchets conformément aux lois en vigueur."}),Fr.jsx("p",{children:"Le PRESTATAIRE reste seul et unique propriétaire du matériel mis à disposition du CLIENT au lieu indiqué par le CLIENT sur le bon de commande. Le matériel ne pourra pas être loué, modifié, transporté par le CLIENT sans l'accord du PRESTATAIRE."}),Fr.jsx("p",{children:"Le CLIENT s'engage à utiliser le matériel mis à disposition pour son usage dédié, c'est-à-dire la collecte et le transport de déchets."}),Fr.jsx("p",{children:"Le CLIENT est responsable du matériel mis à disposition tant qu'il se trouve sur son site en lien avec l'accord commercial mis en place par les deux parties."})]})]}),Fr.jsxs("div",{children:[Fr.jsx("h3",{className:"font-semibold mb-2 text-red-600",children:"3. CONFORMITÉ DES DÉCHETS"}),Fr.jsxs("div",{className:"space-y-2 text-sm text-gray-600",children:[Fr.jsx("p",{children:"Suite à l'accord commercial contracté entre le CLIENT et le PRESTATAIRE, le CLIENT s'engage à respecter la qualité de la matière énoncée ci-dessus."}),Fr.jsx("p",{children:"Les déchets collectés doivent être exempts de déchets dangereux, de cadavres d'animaux, matières explosives, produits radioactifs ainsi que des déchets d'activités de soins à risques infectieux."}),Fr.jsx("p",{children:"Si des matières non conformes au contrat commercial en vigueur sont trouvées au sein des déchets (bouteilles de gaz, aérosols…), une fiche de non-conformité sera émise au CLIENT impactant un coût de tri et de traitement lié à la nature des déchets."})]})]}),Fr.jsxs("div",{children:[Fr.jsx("h3",{className:"font-semibold mb-2 text-red-600",children:"4. COLLECTE & CONDITIONNEMENT"}),Fr.jsxs("div",{className:"space-y-2 text-sm text-gray-600",children:[Fr.jsx("p",{children:"Le CLIENT s'engage à informer le PRESTATAIRE 48h à l'avance en cas de fermeture ou d'annulation d'une demande de collecte afin d'éviter un passage à vide. Dans le cas où la collecte serait réalisée sans pouvoir réaliser la prestation, le passage à vide se verrait facturé au CLIENT."}),Fr.jsx("p",{children:"Le matériel mis à disposition par le PRESTATAIRE devra être rempli de manière uniforme et au maximum de la contenance, dans la limite de la réglementation applicable en matière de poids transporté."}),Fr.jsx("p",{children:"Le conditionnement des déchets, assuré par le CLIENT doit être extérieurement propre et présenter toutes les garanties de sécurité voulues pour permettre la manutention, le transport et le déchargement sans le moindre risque pour l'homme et l'environnement."}),Fr.jsx("p",{children:"Lors de chaque prestation de collecte effectuée par le PRESTATAIRE auprès du CLIENT, un bon d'enlèvement sera présenté et devra être signé par le CLIENT."})]})]}),Fr.jsxs("div",{children:[Fr.jsx("h3",{className:"font-semibold mb-2 text-red-600",children:"5. ACCÈS AUX INSTALLATIONS"}),Fr.jsx("p",{className:"text-sm text-gray-600",children:"REMONDIS conserve à tout moment, dans le cadre du contrat, le libre accès aux installations du CLIENT, mais conviendra à l'avance et en temps opportun de chacune de ses interventions."})]}),Fr.jsxs("div",{children:[Fr.jsx("h3",{className:"font-semibold mb-2 text-red-600",children:"6. EXCLUSIVITÉ"}),Fr.jsxs("div",{className:"space-y-2 text-sm text-gray-600",children:[Fr.jsx("p",{children:"Le CLIENT s'engage à confier à REMONDIS la totalité des déchets du présent contrat. En contrepartie de cette exclusivité, REMONDIS garantit au CLIENT sa prestation de service."}),Fr.jsx("p",{children:"Le matériel, propriété de REMONDIS décrit dans les Conditions Particulières, restera propriété de REMONDIS après rupture du contrat entre les deux parties."}),Fr.jsx("p",{children:"En cas d'arrêt des prestations par le CLIENT, REMONDIS disposera de 15 jours ouvrés pour reprendre le matériel. Les frais engagés par REMONDIS pour ce retrait seront refacturés au CLIENT."})]})]}),Fr.jsxs("div",{children:[Fr.jsx("h3",{className:"font-semibold mb-2 text-red-600",children:"7. DURÉE DU CONTRAT"}),Fr.jsx("p",{className:"text-sm text-gray-600",children:"Le contrat entre en vigueur à sa date de signature. Il est conclu pour une durée de 3 ans à compter de cette date. Il est renouvelable à la date d'anniversaire par période de 12 mois, par tacite reconduction. Il peut être mis fin au contrat, par l'une ou l'autre des parties, à chaque échéance annuelle, moyennant un préavis écrit de trois (3) mois adressé en lettre recommandée avec accusé de réception."})]}),Fr.jsxs("div",{children:[Fr.jsx("h3",{className:"font-semibold mb-2 text-red-600",children:"8. FACTURATION"}),Fr.jsxs("div",{className:"space-y-2 text-sm text-gray-600",children:[Fr.jsx("p",{children:"En rémunération de sa prestation, REMONDIS établira des factures, qui feront apparaître le prix Hors Taxes par tonne de déchet traité, majoré de la TVA. Tout autre impôt ou taxe à payer, et susceptible d'être majoré de la TVA, en application des lois et règlements de droit français ou européen est à la charge du CLIENT."}),Fr.jsx("p",{children:"Toute modification, soit de taux soit de la nature des taxes auxquelles les prestations donnent lieu, est dès sa date légale d'application, répercutée sur les prix des prestations à venir."}),Fr.jsx("p",{children:"Les réclamations relatives aux factures devront être introduites par écrit dans les huit jours de leur réception sous peine d'être rejetées."})]})]}),Fr.jsxs("div",{children:[Fr.jsx("h3",{className:"font-semibold mb-2 text-red-600",children:"9. CONDITIONS DE RÈGLEMENT"}),Fr.jsxs("div",{className:"space-y-2 text-sm text-gray-600",children:[Fr.jsx("p",{children:"Les factures de REMONDIS sont payables, sans escompte au siège de facturation, au plus tard à 30 jours net date de facture."}),Fr.jsx("p",{children:"Elles pourront être réglées par le CLIENT par tout moyen de paiement, notamment par virement, traite, billet à ordre, chèque."}),Fr.jsx("p",{children:"En cas de valorisation des déchets, le règlement par REMONDIS s'effectuera à 30 jours fin de mois après réception de la facture CLIENT."})]})]}),Fr.jsxs("div",{children:[Fr.jsx("h3",{className:"font-semibold mb-2 text-red-600",children:"10. INCIDENT DE PAIEMENT"}),Fr.jsx("p",{className:"text-sm text-gray-600",children:"Toute facture non intégralement réglée à son échéance sera immédiatement productive de pénalités de retard à un taux de 10% par an, avec un minimum irréductible de 155,00 €, et obligera le CLIENT à verser à REMONDIS une somme d'un montant de 40,00 € à titre d'indemnité de recouvrement, sans préjudice de tout dommages-intérêts complémentaires que REMONDIS pourrait faire valoir."})]}),Fr.jsxs("div",{children:[Fr.jsx("h3",{className:"font-semibold mb-2 text-red-600",children:"11. ASSURANCE"}),Fr.jsxs("div",{className:"space-y-2 text-sm text-gray-600",children:[Fr.jsx("p",{children:"REMONDIS est assuré pour les conséquences pécuniaires de la responsabilité civile qu'elle peut encourir à raison des dommages causés par son personnel au cours des interventions de ce dernier chez le CLIENT."}),Fr.jsx("p",{children:"Le CLIENT souscrira auprès d'une compagnie notoirement solvable une assurance « responsabilité civile produits et exploitation ». Il s'engage à maintenir ces garanties pendant la durée des relations contractuelles et à fournir sur demande de REMONDIS son attestation d'assurance."})]})]}),Fr.jsxs("div",{children:[Fr.jsx("h3",{className:"font-semibold mb-2 text-red-600",children:"12. PRIX"}),Fr.jsx("p",{className:"text-sm text-gray-600",children:"Les tarifs seront révisés chaque année au 1er janvier pour application au 1er février suivant l'évolution des coûts de transport, pré traitement, regroupement et salaires. Si les conditions économiques ou industrielles qui prévalent à la date de conclusion des accords avec le CLIENT venaient à être modifiées de façon substantielle, REMONDIS et le CLIENT redéfiniront ensemble les modalités de la continuation éventuelle de leurs relations contractuelles."})]}),Fr.jsxs("div",{children:[Fr.jsx("h3",{className:"font-semibold mb-2 text-red-600",children:"13. CAS DE FORCE MAJEURE"}),Fr.jsx("p",{className:"text-sm text-gray-600",children:"Si par la suite d'un cas de force majeur ou d'un cas fortuit, REMONDIS ou le CLIENT sont obligés d'interrompre leurs prestations, l'exécution du contrat pourra être suspendue ou résiliée pour les prestations restant à effectuer. Est considéré comme un cas de force majeure, tout événement de quelque nature que ce soit, qui a pour effet de rendre l'exécution des relations contractuelles impossible de manière momentanée ou définitive."})]}),Fr.jsxs("div",{children:[Fr.jsx("h3",{className:"font-semibold mb-2 text-red-600",children:"14. ATTRIBUTION DE JURIDICTION ET LOI APPLICABLE"}),Fr.jsx("p",{className:"text-sm text-gray-600",children:"Tout litige susceptible de s'élever entre REMONDIS et son CLIENT quant à la formation, l'exécution ou l'interprétation des présentes sera soumis à la compétence exclusive du tribunal de Beauvais et ce, même en cas de pluralité des demandeurs ou d'appels en garantie."})]}),Fr.jsxs("div",{children:[Fr.jsx("h3",{className:"font-semibold mb-2 text-red-600",children:"15. CLAUSE DE SAUVEGARDE"}),Fr.jsx("p",{className:"text-sm text-gray-600",children:"Dans le cas où les conditions techniques, économiques, administratives, sociales ou fiscales existant à la date de la signature de la présente offre évolueraient de telle sorte que son équilibre économique se trouverait profondément modifié et entraînerait pour l'une ou pour l'autre des parties des obligations qu'elle ne pourrait équitablement supporter, le PRESTATAIRE et le CLIENT se réuniraient pour chercher des solutions conformes aux intérêts légitimes de chacun d'eux."})]})]})]}),Fr.jsxs(nf,{className:"mb-6",children:[Fr.jsx(rf,{children:Fr.jsx(af,{className:"text-red-600",children:"Droit de rétractation"})}),Fr.jsxs(lf,{className:"space-y-4",children:[Fr.jsx("p",{className:"text-sm text-gray-700",children:"Conformément à l'article L221-18 du Code de la consommation, vous disposez d'un délai de 14 jours pour exercer votre droit de rétractation sans avoir à justifier de motifs ni à payer de pénalités."}),Fr.jsx("p",{className:"text-sm text-gray-700",children:"Ce délai court à compter de la confirmation de votre commande. Pour exercer ce droit, contactez-nous à : service.client@remondis.fr"})]})]}),Fr.jsxs(nf,{className:"mb-6",children:[Fr.jsx(rf,{children:Fr.jsx(af,{className:"text-red-600",children:"Protection des données personnelles"})}),Fr.jsxs(lf,{className:"space-y-4",children:[Fr.jsx("p",{className:"text-sm text-gray-700",children:"Conformément au Règlement Général sur la Protection des Données (RGPD) et à la loi Informatique et Libertés, vos données personnelles sont collectées et traitées pour les besoins de la prestation de service."}),Fr.jsxs("ul",{className:"text-sm text-gray-700 space-y-1",children:[Fr.jsx("li",{children:"• Finalité : exécution du contrat de service"}),Fr.jsx("li",{children:"• Durée de conservation : 10 ans (obligations comptables)"}),Fr.jsx("li",{children:"• Droits : accès, rectification, effacement, portabilité"}),Fr.jsx("li",{children:"• Contact DPO : dpo@remondis.fr"})]})]})]}),Fr.jsxs(nf,{children:[Fr.jsx(rf,{children:Fr.jsx(af,{className:"text-red-600",children:"Règlement des litiges"})}),Fr.jsxs(lf,{className:"space-y-4",children:[Fr.jsx("p",{className:"text-sm text-gray-700",children:"En cas de litige, une solution amiable sera recherchée avant toute action judiciaire."}),Fr.jsxs("div",{children:[Fr.jsx("h3",{className:"font-semibold mb-2",children:"Médiation :"}),Fr.jsx("p",{className:"text-sm text-gray-700",children:"Conformément à l'article L612-1 du Code de la consommation, le consommateur peut recourir gratuitement au service de médiation de la consommation."}),Fr.jsxs("p",{className:"text-sm text-gray-700 mt-2",children:["Médiateur : Médiateur de la consommation CNPM",Fr.jsx("br",{}),"Site : www.cnpm-mediation-consommation.eu"]})]}),Fr.jsxs("div",{children:[Fr.jsx("h3",{className:"font-semibold mb-2",children:"Juridiction compétente :"}),Fr.jsx("p",{className:"text-sm text-gray-700",children:"Tribunaux de Lyon, France"})]})]})]}),Fr.jsx(Jx,{className:"my-8"}),Fr.jsxs("div",{className:"text-center text-xs text-gray-500",children:[Fr.jsx("p",{children:"Dernière mise à jour : Juin 2025"}),Fr.jsx("p",{children:"Document conforme à la réglementation française en vigueur"})]})]})]})}function FO(){const[,e]=va();return Fr.jsxs("div",{className:"min-h-screen bg-gray-50",children:[Fr.jsx(iD,{variant:"privacy",subtitle:"PROTECTION DES DONNÉES",title:"Politique de confidentialité",description:"Nous nous engageons à protéger vos données personnelles et à respecter votre vie privée conformément au RGPD et aux réglementations en vigueur.",children:Fr.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[Fr.jsxs(Lp,{variant:"secondary",size:"lg",onClick:()=>e("/"),className:"bg-white/20 hover:bg-white/30 text-white border-white/30",children:[Fr.jsx(Cl,{className:"h-5 w-5 mr-2"}),"Retour à l'accueil"]}),Fr.jsxs(Lp,{variant:"secondary",size:"lg",onClick:()=>e("/legal"),className:"bg-emerald-600 hover:bg-emerald-700 text-white border-0",children:[Fr.jsx(_c,{className:"h-5 w-5 mr-2"}),"Mentions légales"]})]})}),Fr.jsxs("div",{className:"container mx-auto px-4 py-12 max-w-4xl -mt-8 relative z-10",children:[Fr.jsxs(nf,{className:"mb-6",children:[Fr.jsx(rf,{children:Fr.jsxs(af,{className:"text-emerald-600 flex items-center",children:[Fr.jsx(nc,{className:"h-5 w-5 mr-2"}),"Protection de vos données personnelles"]})}),Fr.jsxs(lf,{className:"space-y-4",children:[Fr.jsx("p",{className:"text-gray-700",children:"REMONDIS France SAS s'engage à respecter la confidentialité et la sécurité de vos données personnelles. Cette politique explique comment nous collectons, utilisons et protégeons vos informations conformément au Règlement Général sur la Protection des Données (RGPD)."}),Fr.jsx("div",{className:"bg-emerald-50 p-4 rounded-lg border-l-4 border-emerald-500",children:Fr.jsxs("p",{className:"text-emerald-800 font-medium",children:["Dernière mise à jour : ",(new Date).toLocaleDateString("fr-FR")]})})]})]}),Fr.jsxs(nf,{className:"mb-6",children:[Fr.jsx(rf,{children:Fr.jsx(af,{className:"text-gray-900",children:"Responsable du traitement"})}),Fr.jsxs(lf,{className:"space-y-4",children:[Fr.jsxs("div",{children:[Fr.jsx("h3",{className:"font-semibold mb-2",children:"Identité du responsable :"}),Fr.jsx("p",{children:"REMONDIS France SAS"}),Fr.jsx("p",{children:"Adresse : Zone Industrielle Nord, 60000 Beauvais"}),Fr.jsx("p",{children:"Email : dpo@remondis.fr"}),Fr.jsx("p",{children:"Téléphone : 03 44 XX XX XX"})]}),Fr.jsxs("div",{children:[Fr.jsx("h3",{className:"font-semibold mb-2",children:"Délégué à la Protection des Données (DPO) :"}),Fr.jsx("p",{children:"Email : dpo@remondis.fr"}),Fr.jsx("p",{children:"Pour toute question relative à vos données personnelles"})]})]})]}),Fr.jsxs(nf,{className:"mb-6",children:[Fr.jsx(rf,{children:Fr.jsxs(af,{className:"text-gray-900 flex items-center",children:[Fr.jsx(Jl,{className:"h-5 w-5 mr-2"}),"Données collectées"]})}),Fr.jsxs(lf,{className:"space-y-4",children:[Fr.jsxs("div",{children:[Fr.jsx("h3",{className:"font-semibold mb-2",children:"Données d'identification :"}),Fr.jsxs("ul",{className:"list-disc pl-6 space-y-1",children:[Fr.jsx("li",{children:"Nom, prénom"}),Fr.jsx("li",{children:"Adresse email"}),Fr.jsx("li",{children:"Numéro de téléphone"}),Fr.jsx("li",{children:"Adresse postale"})]})]}),Fr.jsxs("div",{children:[Fr.jsx("h3",{className:"font-semibold mb-2",children:"Données de commande :"}),Fr.jsxs("ul",{className:"list-disc pl-6 space-y-1",children:[Fr.jsx("li",{children:"Informations sur les services commandés"}),Fr.jsx("li",{children:"Adresses de livraison et collecte"}),Fr.jsx("li",{children:"Types de déchets à traiter"}),Fr.jsx("li",{children:"Historique des commandes"})]})]}),Fr.jsxs("div",{children:[Fr.jsx("h3",{className:"font-semibold mb-2",children:"Données de navigation :"}),Fr.jsxs("ul",{className:"list-disc pl-6 space-y-1",children:[Fr.jsx("li",{children:"Adresse IP"}),Fr.jsx("li",{children:"Cookies et traceurs"}),Fr.jsx("li",{children:"Données de géolocalisation (avec consentement)"}),Fr.jsx("li",{children:"Préférences utilisateur"})]})]})]})]}),Fr.jsxs(nf,{className:"mb-6",children:[Fr.jsx(rf,{children:Fr.jsx(af,{className:"text-gray-900",children:"Finalités du traitement"})}),Fr.jsxs(lf,{className:"space-y-4",children:[Fr.jsxs("div",{children:[Fr.jsx("h3",{className:"font-semibold mb-2",children:"Exécution du contrat :"}),Fr.jsxs("ul",{className:"list-disc pl-6 space-y-1",children:[Fr.jsx("li",{children:"Traitement et suivi des commandes"}),Fr.jsx("li",{children:"Facturation et paiement"}),Fr.jsx("li",{children:"Livraison et collecte des bennes"}),Fr.jsx("li",{children:"Service client et support"})]})]}),Fr.jsxs("div",{children:[Fr.jsx("h3",{className:"font-semibold mb-2",children:"Obligations légales :"}),Fr.jsxs("ul",{className:"list-disc pl-6 space-y-1",children:[Fr.jsx("li",{children:"Respect des réglementations environnementales"}),Fr.jsx("li",{children:"Traçabilité des déchets (bordereau de suivi)"}),Fr.jsx("li",{children:"Conservation des documents comptables"})]})]}),Fr.jsxs("div",{children:[Fr.jsx("h3",{className:"font-semibold mb-2",children:"Intérêts légitimes :"}),Fr.jsxs("ul",{className:"list-disc pl-6 space-y-1",children:[Fr.jsx("li",{children:"Amélioration de nos services"}),Fr.jsx("li",{children:"Sécurité des systèmes informatiques"}),Fr.jsx("li",{children:"Prévention de la fraude"})]})]})]})]}),Fr.jsxs(nf,{className:"mb-6",children:[Fr.jsx(rf,{children:Fr.jsx(af,{className:"text-gray-900",children:"Base légale du traitement"})}),Fr.jsx(lf,{className:"space-y-4",children:Fr.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[Fr.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[Fr.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:"Exécution du contrat"}),Fr.jsx("p",{className:"text-blue-800 text-sm",children:"Traitement des commandes, livraison des services, facturation"})]}),Fr.jsxs("div",{className:"bg-amber-50 p-4 rounded-lg",children:[Fr.jsx("h3",{className:"font-semibold text-amber-900 mb-2",children:"Obligation légale"}),Fr.jsx("p",{className:"text-amber-800 text-sm",children:"Respect du Code de l'environnement, traçabilité des déchets"})]}),Fr.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[Fr.jsx("h3",{className:"font-semibold text-green-900 mb-2",children:"Consentement"}),Fr.jsx("p",{className:"text-green-800 text-sm",children:"Marketing, géolocalisation, cookies non essentiels"})]}),Fr.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[Fr.jsx("h3",{className:"font-semibold text-purple-900 mb-2",children:"Intérêt légitime"}),Fr.jsx("p",{className:"text-purple-800 text-sm",children:"Sécurité, amélioration des services, prévention fraude"})]})]})})]}),Fr.jsxs(nf,{className:"mb-6",children:[Fr.jsx(rf,{children:Fr.jsx(af,{className:"text-gray-900",children:"Durée de conservation"})}),Fr.jsx(lf,{className:"space-y-4",children:Fr.jsxs("div",{className:"space-y-3",children:[Fr.jsxs("div",{className:"flex justify-between items-center py-2 border-b",children:[Fr.jsx("span",{className:"font-medium",children:"Données de compte client"}),Fr.jsx("span",{className:"text-gray-600",children:"3 ans après dernière activité"})]}),Fr.jsxs("div",{className:"flex justify-between items-center py-2 border-b",children:[Fr.jsx("span",{className:"font-medium",children:"Données de commande"}),Fr.jsx("span",{className:"text-gray-600",children:"10 ans (obligation légale)"})]}),Fr.jsxs("div",{className:"flex justify-between items-center py-2 border-b",children:[Fr.jsx("span",{className:"font-medium",children:"Bordereau de suivi déchets"}),Fr.jsx("span",{className:"text-gray-600",children:"5 ans minimum"})]}),Fr.jsxs("div",{className:"flex justify-between items-center py-2 border-b",children:[Fr.jsx("span",{className:"font-medium",children:"Documents comptables"}),Fr.jsx("span",{className:"text-gray-600",children:"10 ans"})]}),Fr.jsxs("div",{className:"flex justify-between items-center py-2",children:[Fr.jsx("span",{className:"font-medium",children:"Cookies et traceurs"}),Fr.jsx("span",{className:"text-gray-600",children:"13 mois maximum"})]})]})})]}),Fr.jsxs(nf,{className:"mb-6",children:[Fr.jsx(rf,{children:Fr.jsxs(af,{className:"text-emerald-600 flex items-center",children:[Fr.jsx(pc,{className:"h-5 w-5 mr-2"}),"Vos droits"]})}),Fr.jsxs(lf,{className:"space-y-4",children:[Fr.jsx("p",{className:"text-gray-700 mb-4",children:"Conformément au RGPD, vous disposez des droits suivants :"}),Fr.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[Fr.jsxs("div",{className:"border border-emerald-200 p-4 rounded-lg",children:[Fr.jsx("h3",{className:"font-semibold text-emerald-900 mb-2",children:"Droit d'accès"}),Fr.jsx("p",{className:"text-gray-600 text-sm",children:"Obtenir une copie de vos données personnelles"})]}),Fr.jsxs("div",{className:"border border-emerald-200 p-4 rounded-lg",children:[Fr.jsx("h3",{className:"font-semibold text-emerald-900 mb-2",children:"Droit de rectification"}),Fr.jsx("p",{className:"text-gray-600 text-sm",children:"Corriger ou modifier vos données"})]}),Fr.jsxs("div",{className:"border border-emerald-200 p-4 rounded-lg",children:[Fr.jsx("h3",{className:"font-semibold text-emerald-900 mb-2",children:"Droit à l'effacement"}),Fr.jsx("p",{className:"text-gray-600 text-sm",children:"Demander la suppression de vos données"})]}),Fr.jsxs("div",{className:"border border-emerald-200 p-4 rounded-lg",children:[Fr.jsx("h3",{className:"font-semibold text-emerald-900 mb-2",children:"Droit d'opposition"}),Fr.jsx("p",{className:"text-gray-600 text-sm",children:"Vous opposer au traitement de vos données"})]}),Fr.jsxs("div",{className:"border border-emerald-200 p-4 rounded-lg",children:[Fr.jsx("h3",{className:"font-semibold text-emerald-900 mb-2",children:"Droit à la portabilité"}),Fr.jsx("p",{className:"text-gray-600 text-sm",children:"Récupérer vos données dans un format structuré"})]}),Fr.jsxs("div",{className:"border border-emerald-200 p-4 rounded-lg",children:[Fr.jsx("h3",{className:"font-semibold text-emerald-900 mb-2",children:"Droit à la limitation"}),Fr.jsx("p",{className:"text-gray-600 text-sm",children:"Limiter le traitement de vos données"})]})]}),Fr.jsxs("div",{className:"bg-emerald-50 p-4 rounded-lg mt-6",children:[Fr.jsx("h3",{className:"font-semibold text-emerald-900 mb-2",children:"Comment exercer vos droits ?"}),Fr.jsx("p",{className:"text-emerald-800 text-sm mb-2",children:"Contactez notre DPO à l'adresse : dpo@remondis.fr"}),Fr.jsx("p",{className:"text-emerald-700 text-xs",children:"Nous vous répondrons dans un délai d'un mois. Une pièce d'identité pourra être demandée."})]})]})]}),Fr.jsxs(nf,{className:"mb-6",children:[Fr.jsx(rf,{children:Fr.jsx(af,{className:"text-gray-900",children:"Sécurité des données"})}),Fr.jsxs(lf,{className:"space-y-4",children:[Fr.jsx("p",{className:"text-gray-700",children:"Nous mettons en œuvre des mesures techniques et organisationnelles appropriées pour protéger vos données :"}),Fr.jsxs("ul",{className:"list-disc pl-6 space-y-1 text-gray-600",children:[Fr.jsx("li",{children:"Chiffrement des données sensibles (SSL/TLS)"}),Fr.jsx("li",{children:"Contrôle d'accès strict aux données"}),Fr.jsx("li",{children:"Sauvegarde régulière et sécurisée"}),Fr.jsx("li",{children:"Formation du personnel à la protection des données"}),Fr.jsx("li",{children:"Audit de sécurité régulier"}),Fr.jsx("li",{children:"Notification des violations de données à la CNIL"})]})]})]}),Fr.jsxs(nf,{className:"mb-6",children:[Fr.jsx(rf,{children:Fr.jsx(af,{className:"text-gray-900",children:"Contact et réclamation"})}),Fr.jsxs(lf,{className:"space-y-4",children:[Fr.jsxs("div",{children:[Fr.jsx("h3",{className:"font-semibold mb-2",children:"Contact DPO :"}),Fr.jsx("p",{children:"Email : dpo@remondis.fr"}),Fr.jsx("p",{children:"Courrier : REMONDIS France SAS - DPO, Zone Industrielle Nord, 60000 Beauvais"})]}),Fr.jsx(Jx,{}),Fr.jsxs("div",{children:[Fr.jsx("h3",{className:"font-semibold mb-2",children:"Réclamation auprès de la CNIL :"}),Fr.jsx("p",{className:"text-gray-600",children:"Si vous estimez que vos droits ne sont pas respectés, vous pouvez introduire une réclamation auprès de la Commission Nationale de l'Informatique et des Libertés (CNIL)."}),Fr.jsxs("p",{className:"mt-2",children:[Fr.jsx("strong",{children:"Site web :"})," www.cnil.fr",Fr.jsx("br",{}),Fr.jsx("strong",{children:"Adresse :"})," 3 Place de Fontenoy - TSA 80715 - 75334 PARIS CEDEX 07"]})]})]})]}),Fr.jsxs(nf,{className:"mb-6",children:[Fr.jsx(rf,{children:Fr.jsx(af,{className:"text-gray-900",children:"Politique des cookies"})}),Fr.jsxs(lf,{className:"space-y-4",children:[Fr.jsx("p",{className:"text-gray-700",children:"Notre site utilise des cookies pour améliorer votre expérience de navigation :"}),Fr.jsxs("div",{className:"space-y-3",children:[Fr.jsxs("div",{children:[Fr.jsx("h3",{className:"font-semibold",children:"Cookies essentiels :"}),Fr.jsx("p",{className:"text-gray-600 text-sm",children:"Nécessaires au fonctionnement du site (authentification, panier)"})]}),Fr.jsxs("div",{children:[Fr.jsx("h3",{className:"font-semibold",children:"Cookies de performance :"}),Fr.jsx("p",{className:"text-gray-600 text-sm",children:"Analyse de l'utilisation du site pour l'améliorer (Google Analytics)"})]}),Fr.jsxs("div",{children:[Fr.jsx("h3",{className:"font-semibold",children:"Cookies de préférence :"}),Fr.jsx("p",{className:"text-gray-600 text-sm",children:"Mémorisation de vos choix et préférences"})]})]}),Fr.jsx("div",{className:"bg-blue-50 p-4 rounded-lg",children:Fr.jsx("p",{className:"text-blue-800 text-sm",children:"Vous pouvez gérer vos préférences de cookies dans les paramètres de votre navigateur ou via notre bandeau de consentement."})})]})]}),Fr.jsxs(nf,{children:[Fr.jsx(rf,{children:Fr.jsx(af,{className:"text-gray-900",children:"Modifications de cette politique"})}),Fr.jsxs(lf,{children:[Fr.jsx("p",{className:"text-gray-700",children:"Cette politique de confidentialité peut être modifiée pour refléter les changements dans nos pratiques ou la réglementation. Nous vous informerons de toute modification importante par email ou via un avis sur notre site."}),Fr.jsxs("div",{className:"mt-4 text-sm text-gray-500",children:[Fr.jsx("p",{children:"Version : 2.0"}),Fr.jsxs("p",{children:["Dernière mise à jour : ",(new Date).toLocaleDateString("fr-FR")]})]})]})]})]})]})}function IO(){const[,e]=va();return Fr.jsxs("div",{className:"min-h-screen bg-gray-50",children:[Fr.jsx(iD,{variant:"retraction",subtitle:"DROIT DE RÉTRACTATION",title:"Exercer votre droit de rétractation",description:"Vous disposez d'un délai de 14 jours pour annuler votre commande sans justification. Consultez les modalités et conditions d'exercice de ce droit.",children:Fr.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[Fr.jsxs(Lp,{variant:"secondary",size:"lg",onClick:()=>e("/"),className:"bg-white/20 hover:bg-white/30 text-white border-white/30",children:[Fr.jsx(Cl,{className:"h-5 w-5 mr-2"}),"Retour à l'accueil"]}),Fr.jsxs(Lp,{variant:"secondary",size:"lg",onClick:()=>e("/legal"),className:"bg-orange-600 hover:bg-orange-700 text-white border-0",children:[Fr.jsx(ac,{className:"h-5 w-5 mr-2"}),"Mentions légales"]})]})}),Fr.jsxs("div",{className:"container mx-auto px-4 py-12 max-w-4xl -mt-8 relative z-10",children:[Fr.jsxs(nf,{className:"mb-6",children:[Fr.jsx(rf,{children:Fr.jsxs(af,{className:"text-orange-600 flex items-center",children:[Fr.jsx(wc,{className:"h-5 w-5 mr-2"}),"Votre droit de rétractation"]})}),Fr.jsxs(lf,{className:"space-y-4",children:[Fr.jsx("p",{className:"text-gray-700",children:"Conformément aux articles L. 221-18 et suivants du Code de la consommation, vous disposez d'un droit de rétractation que vous pouvez exercer dans un délai de quatorze jours sans avoir à justifier de motifs ni à payer de pénalité."}),Fr.jsx("div",{className:"bg-orange-50 p-4 rounded-lg border-l-4 border-orange-500",children:Fr.jsxs("p",{className:"text-orange-800 font-medium",children:[Fr.jsx(Il,{className:"h-4 w-4 inline mr-2"}),"Délai : 14 jours calendaires à compter de la conclusion du contrat de service"]})})]})]}),Fr.jsxs(nf,{className:"mb-6",children:[Fr.jsx(rf,{children:Fr.jsx(af,{className:"text-gray-900",children:"Délai de rétractation"})}),Fr.jsxs(lf,{className:"space-y-4",children:[Fr.jsxs("div",{children:[Fr.jsx("h3",{className:"font-semibold mb-2",children:"Point de départ du délai :"}),Fr.jsx("p",{className:"text-gray-700 mb-3",children:"Le délai de rétractation de 14 jours expire 14 jours après le jour de la conclusion du contrat de service."}),Fr.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[Fr.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[Fr.jsx("h4",{className:"font-semibold text-blue-900 mb-2",children:"Services de collecte"}),Fr.jsx("p",{className:"text-blue-800 text-sm",children:"14 jours à compter de la confirmation de commande"})]}),Fr.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[Fr.jsx("h4",{className:"font-semibold text-green-900 mb-2",children:"Location de bennes"}),Fr.jsx("p",{className:"text-green-800 text-sm",children:"14 jours à compter de la signature du contrat"})]})]})]}),Fr.jsxs("div",{className:"bg-amber-50 p-4 rounded-lg",children:[Fr.jsxs("h3",{className:"font-semibold text-amber-900 mb-2",children:[Fr.jsx(Rc,{className:"h-4 w-4 inline mr-2"}),"Attention"]}),Fr.jsx("p",{className:"text-amber-800 text-sm",children:"Si le délai expire un samedi, un dimanche ou un jour férié, il est prorogé jusqu'au premier jour ouvrable suivant."})]})]})]}),Fr.jsxs(nf,{className:"mb-6",children:[Fr.jsx(rf,{children:Fr.jsx(af,{className:"text-gray-900",children:"Comment exercer votre droit de rétractation"})}),Fr.jsxs(lf,{className:"space-y-4",children:[Fr.jsxs("div",{children:[Fr.jsx("h3",{className:"font-semibold mb-2",children:"1. Notification de votre décision :"}),Fr.jsx("p",{className:"text-gray-700 mb-3",children:"Pour exercer votre droit de rétractation, vous devez nous notifier votre décision de rétractation au moyen d'une déclaration dénuée d'ambiguïté."}),Fr.jsxs("div",{className:"space-y-3",children:[Fr.jsxs("div",{className:"border border-gray-200 p-4 rounded-lg",children:[Fr.jsx("h4",{className:"font-semibold mb-2",children:"Par email :"}),Fr.jsx("p",{className:"text-gray-700",children:"retractation@remondis.fr"})]}),Fr.jsxs("div",{className:"border border-gray-200 p-4 rounded-lg",children:[Fr.jsx("h4",{className:"font-semibold mb-2",children:"Par courrier :"}),Fr.jsxs("p",{className:"text-gray-700",children:["REMONDIS France SAS",Fr.jsx("br",{}),"Service Rétractation",Fr.jsx("br",{}),"Zone Industrielle Nord",Fr.jsx("br",{}),"60000 Beauvais"]})]}),Fr.jsxs("div",{className:"border border-gray-200 p-4 rounded-lg",children:[Fr.jsx("h4",{className:"font-semibold mb-2",children:"Via votre espace client :"}),Fr.jsx("p",{className:"text-gray-700",children:'Connectez-vous à votre compte et utilisez le formulaire de rétractation dans la section "Mes commandes"'})]})]})]}),Fr.jsxs("div",{children:[Fr.jsx("h3",{className:"font-semibold mb-2",children:"2. Informations à fournir :"}),Fr.jsxs("ul",{className:"list-disc pl-6 space-y-1 text-gray-700",children:[Fr.jsx("li",{children:"Vos nom, prénom et adresse"}),Fr.jsx("li",{children:"Numéro de commande concerné"}),Fr.jsx("li",{children:"Date de conclusion du contrat"}),Fr.jsx("li",{children:"Description du service commandé"}),Fr.jsx("li",{children:"Date de la notification de rétractation"})]})]})]})]}),Fr.jsxs(nf,{className:"mb-6",children:[Fr.jsx(rf,{children:Fr.jsx(af,{className:"text-gray-900",children:"Formulaire type de rétractation"})}),Fr.jsxs(lf,{className:"space-y-4",children:[Fr.jsx("p",{className:"text-gray-700",children:"Vous pouvez utiliser le modèle de formulaire de rétractation ci-dessous :"}),Fr.jsx("div",{className:"bg-gray-50 p-6 rounded-lg border-2 border-dashed border-gray-300",children:Fr.jsxs("div",{className:"space-y-4 text-sm",children:[Fr.jsx("p",{className:"font-semibold",children:"À l'attention de REMONDIS France SAS :"}),Fr.jsx("p",{children:"Je/Nous (*) vous notifie/notifions (*) par la présente ma/notre (*) rétractation du contrat portant sur la prestation de services ci-dessous :"}),Fr.jsxs("div",{className:"space-y-2",children:[Fr.jsx("p",{children:"Numéro de commande : ________________________"}),Fr.jsx("p",{children:"Commandé le (*) : ________________________"}),Fr.jsx("p",{children:"Service concerné : ________________________"}),Fr.jsx("p",{children:"Nom du/des consommateur(s) : ________________________"}),Fr.jsx("p",{children:"Adresse du/des consommateur(s) : ________________________"}),Fr.jsx("p",{children:"________________________"}),Fr.jsx("p",{children:"________________________"})]}),Fr.jsxs("div",{className:"space-y-2",children:[Fr.jsx("p",{children:"Date : ________________________"}),Fr.jsx("p",{children:"Signature (uniquement en cas de notification du présent formulaire sur papier) :"}),Fr.jsx("p",{children:"________________________"})]}),Fr.jsx("p",{className:"text-xs text-gray-500",children:"(*) Rayez la mention inutile."})]})}),Fr.jsx("div",{className:"bg-blue-50 p-4 rounded-lg",children:Fr.jsxs("p",{className:"text-blue-800 text-sm",children:[Fr.jsx(ac,{className:"h-4 w-4 inline mr-2"}),"Ce formulaire n'est fourni qu'à titre indicatif. Vous pouvez formuler votre demande de rétractation dans vos propres termes, à condition qu'elle soit claire et non ambiguë."]})})]})]}),Fr.jsxs(nf,{className:"mb-6",children:[Fr.jsx(rf,{children:Fr.jsx(af,{className:"text-gray-900",children:"Effets de la rétractation"})}),Fr.jsxs(lf,{className:"space-y-4",children:[Fr.jsxs("div",{children:[Fr.jsx("h3",{className:"font-semibold mb-2",children:"Remboursement :"}),Fr.jsx("p",{className:"text-gray-700 mb-3",children:"En cas de rétractation, nous vous rembourserons tous les paiements reçus de votre part, sans retard injustifié et, en tout état de cause, au plus tard quatorze jours à compter du jour où nous sommes informés de votre décision de rétractation."}),Fr.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[Fr.jsx("h4",{className:"font-semibold text-green-900 mb-2",children:"Modalités de remboursement :"}),Fr.jsxs("ul",{className:"list-disc pl-6 space-y-1 text-green-800 text-sm",children:[Fr.jsx("li",{children:"Même moyen de paiement que celui utilisé pour la transaction initiale"}),Fr.jsx("li",{children:"Aucun frais supplémentaire pour ce remboursement"}),Fr.jsx("li",{children:"Délai maximum : 14 jours après notification"})]})]})]}),Fr.jsxs("div",{children:[Fr.jsx("h3",{className:"font-semibold mb-2",children:"Arrêt immédiat du service :"}),Fr.jsx("p",{className:"text-gray-700",children:"L'exercice du droit de rétractation entraîne l'arrêt immédiat de la prestation de service. Si le service a déjà commencé, vous ne paierez que la partie du service effectivement fournie."})]})]})]}),Fr.jsxs(nf,{className:"mb-6",children:[Fr.jsx(rf,{children:Fr.jsxs(af,{className:"text-gray-900 flex items-center",children:[Fr.jsx(Rc,{className:"h-5 w-5 mr-2 text-red-500"}),"Exceptions au droit de rétractation"]})}),Fr.jsxs(lf,{className:"space-y-4",children:[Fr.jsx("p",{className:"text-gray-700",children:"Conformément à l'article L. 221-28 du Code de la consommation, le droit de rétractation ne peut être exercé dans les cas suivants :"}),Fr.jsxs("div",{className:"space-y-3",children:[Fr.jsxs("div",{className:"bg-red-50 p-4 rounded-lg border-l-4 border-red-500",children:[Fr.jsx("h4",{className:"font-semibold text-red-900 mb-2",children:"Services d'urgence :"}),Fr.jsx("p",{className:"text-red-800 text-sm",children:"Prestations de services d'urgence pour dépollution ou collecte d'urgence de déchets dangereux, exécutées immédiatement."})]}),Fr.jsxs("div",{className:"bg-red-50 p-4 rounded-lg border-l-4 border-red-500",children:[Fr.jsx("h4",{className:"font-semibold text-red-900 mb-2",children:"Services entièrement exécutés :"}),Fr.jsx("p",{className:"text-red-800 text-sm",children:"Prestations de services entièrement exécutées avant la fin du délai de rétractation et dont l'exécution a commencé après accord préalable exprès du consommateur et renoncement exprès à son droit de rétractation."})]}),Fr.jsxs("div",{className:"bg-red-50 p-4 rounded-lg border-l-4 border-red-500",children:[Fr.jsx("h4",{className:"font-semibold text-red-900 mb-2",children:"Services personnalisés :"}),Fr.jsx("p",{className:"text-red-800 text-sm",children:"Prestations de services de collecte spécialisée confectionnées selon les spécifications du consommateur ou nettement personnalisées."})]})]})]})]}),Fr.jsxs(nf,{className:"mb-6",children:[Fr.jsx(rf,{children:Fr.jsx(af,{className:"text-gray-900",children:"Besoin d'aide ?"})}),Fr.jsxs(lf,{className:"space-y-4",children:[Fr.jsxs("div",{children:[Fr.jsx("h3",{className:"font-semibold mb-2",children:"Service client :"}),Fr.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[Fr.jsxs("div",{className:"border border-gray-200 p-4 rounded-lg",children:[Fr.jsx("h4",{className:"font-semibold mb-2",children:"Email :"}),Fr.jsx("p",{className:"text-gray-700",children:"contact@remondis.fr"}),Fr.jsx("p",{className:"text-gray-500 text-sm",children:"Réponse sous 24h"})]}),Fr.jsxs("div",{className:"border border-gray-200 p-4 rounded-lg",children:[Fr.jsx("h4",{className:"font-semibold mb-2",children:"Téléphone :"}),Fr.jsx("p",{className:"text-gray-700",children:"03 44 XX XX XX"}),Fr.jsx("p",{className:"text-gray-500 text-sm",children:"Lun-Ven 8h-18h"})]})]})]}),Fr.jsxs("div",{children:[Fr.jsx("h3",{className:"font-semibold mb-2",children:"Questions spécifiques à la rétractation :"}),Fr.jsx("p",{className:"text-gray-700",children:"retractation@remondis.fr"}),Fr.jsx("p",{className:"text-gray-500 text-sm",children:"Service dédié au traitement des demandes de rétractation"})]})]})]}),Fr.jsxs(nf,{children:[Fr.jsx(rf,{children:Fr.jsx(af,{className:"text-gray-900",children:"Médiation de la consommation"})}),Fr.jsxs(lf,{className:"space-y-4",children:[Fr.jsx("p",{className:"text-gray-700",children:"En cas de litige persistant, vous pouvez recourir gratuitement à un médiateur de la consommation dans les conditions prévues à l'article L. 616-1 du Code de la consommation."}),Fr.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[Fr.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:"Médiateur compétent :"}),Fr.jsxs("p",{className:"text-blue-800 text-sm mb-2",children:[Fr.jsx("strong",{children:"Médiation Inter-Entreprises"}),Fr.jsx("br",{}),"11 Place Dauphine - 75001 Paris",Fr.jsx("br",{}),"contact@mediation-inter-entreprises.org",Fr.jsx("br",{}),"www.mediation-inter-entreprises.org"]}),Fr.jsx("p",{className:"text-blue-700 text-xs",children:"La médiation n'est recevable qu'après avoir tenté de résoudre le litige directement auprès de notre service client."})]})]})]})]})]})}function MO(){const{toast:e}=Ui(),t=Ni(),[s,n]=hr.useState(null),[r,a]=hr.useState([]),[i,o]=hr.useState(hb(new Date,1)),[l,c]=hr.useState(hb(new Date,8)),[d,u]=hr.useState(""),[m,p]=hr.useState(""),[h,x]=hr.useState(""),[f,v]=hr.useState([]),[g,y]=hr.useState(!1),[b,j]=hr.useState(null),[N,w]=hr.useState(!1),[k,C]=hr.useState({firstName:"Test",lastName:"Simulation",email:"test@simulation.fr",phone:"0123456789",company:"Entreprise Test",siret:"12345678901234",notes:"Commande de test pour simulation de prix"}),{data:S}=Pi({queryKey:["/api/services"]}),{data:_}=Pi({queryKey:["/api/waste-types"]});Array.isArray(S)&&S.find(e=>e.id===s);const P=i&&l?function(e,t){const s=mb(e),n=mb(t),r=Db(s,n),a=Math.abs(kb(s,n));s.setDate(s.getDate()-r*a);const i=r*(a-Number(Db(s,n)===-r));return 0===i?0:i}(l,i):7,E=Ei({mutationFn:async()=>{if(!s||!b)throw new Error("Données manquantes");const e=await Oi("POST","/api/orders/test",{serviceId:s,wasteTypes:r,deliveryDate:null==i?void 0:i.toISOString(),pickupDate:null==l?void 0:l.toISOString(),durationDays:P,address:d,postalCode:m,city:h,pricing:b.pricing,customer:k,isTestOrder:!0});return await e.json()},onSuccess:s=>{e({title:"Commande test créée",description:`Numéro de commande: ${s.orderNumber}. Emails d'envoi en cours...`}),t.invalidateQueries({queryKey:["/api/admin/orders"]})},onError:t=>{e({title:"Erreur",description:t.message||"Impossible de créer la commande test",variant:"destructive"})}});return Fr.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:Fr.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[Fr.jsxs("div",{className:"mb-8",children:[Fr.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Simulation de Prix"}),Fr.jsx("p",{className:"text-gray-600",children:"Testez le système de calcul de prix et de génération de commandes avec envoi d'emails"})]}),Fr.jsxs("div",{className:"grid lg:grid-cols-3 gap-8",children:[Fr.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[Fr.jsxs(nf,{children:[Fr.jsx(rf,{children:Fr.jsxs(af,{className:"flex items-center",children:[Fr.jsx(Fc,{className:"h-5 w-5 mr-2 text-red-600"}),"Choisissez votre benne"]})}),Fr.jsx(lf,{children:Fr.jsx("div",{className:"space-y-4",children:Array.isArray(S)&&S.map(e=>Fr.jsx("div",{className:"relative cursor-pointer transition-all border rounded-lg p-4 "+(s===e.id?"border-red-500 bg-red-50":"border-gray-200 hover:border-red-300"),onClick:()=>n(e.id),children:Fr.jsxs("div",{className:"flex justify-between items-start",children:[Fr.jsxs("div",{children:[Fr.jsx("h4",{className:"text-lg font-semibold text-gray-900",children:e.name}),Fr.jsxs("p",{className:"text-sm text-gray-600",children:["Volume: ",e.volume,"m³"]}),e.description&&Fr.jsx("p",{className:"text-sm text-gray-500 mt-1",children:e.description})]}),Fr.jsxs("span",{className:"text-red-600 font-bold text-xl",children:[parseFloat(e.basePrice).toFixed(0),"€"]})]})},e.id))})})]}),Fr.jsxs(nf,{children:[Fr.jsx(rf,{children:Fr.jsxs(af,{className:"flex items-center",children:[Fr.jsx(gc,{className:"h-5 w-5 mr-2 text-red-600"}),"Types de déchets"]})}),Fr.jsx(lf,{children:Fr.jsx("div",{className:"space-y-3",children:Array.isArray(_)&&_.map(e=>Fr.jsxs("div",{className:"flex items-center space-x-2",children:[Fr.jsx(BE,{id:`waste-${e.id}`,checked:r.includes(e.id),onCheckedChange:t=>{a(t?[...r,e.id]:r.filter(t=>t!==e.id))}}),Fr.jsxs("label",{htmlFor:`waste-${e.id}`,className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:[e.name,e.description&&Fr.jsxs("span",{className:"text-gray-500 ml-2",children:["- ",e.description]})]})]},e.id))})})]}),Fr.jsxs(nf,{children:[Fr.jsx(rf,{children:Fr.jsxs(af,{className:"flex items-center",children:[Fr.jsx(Rl,{className:"h-5 w-5 mr-2 text-red-600"}),"Dates de livraison et enlèvement"]})}),Fr.jsxs(lf,{children:[Fr.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[Fr.jsxs("div",{children:[Fr.jsx(Wx,{children:"Date de livraison"}),Fr.jsxs(vA,{children:[Fr.jsx(gA,{asChild:!0,children:Fr.jsxs(Lp,{variant:"outline",className:"w-full justify-start text-left font-normal",children:[Fr.jsx(Rl,{className:"mr-2 h-4 w-4"}),i?fj(i,"PPP",{locale:Dj}):"Sélectionner"]})}),Fr.jsx(yA,{className:"w-auto p-0",children:Fr.jsx(KT,{mode:"single",selected:i,onSelect:o,disabled:e=>e<new Date,initialFocus:!0})})]})]}),Fr.jsxs("div",{children:[Fr.jsx(Wx,{children:"Date d'enlèvement"}),Fr.jsxs(vA,{children:[Fr.jsx(gA,{asChild:!0,children:Fr.jsxs(Lp,{variant:"outline",className:"w-full justify-start text-left font-normal",children:[Fr.jsx(Rl,{className:"mr-2 h-4 w-4"}),l?fj(l,"PPP",{locale:Dj}):"Sélectionner"]})}),Fr.jsx(yA,{className:"w-auto p-0",children:Fr.jsx(KT,{mode:"single",selected:l,onSelect:c,disabled:e=>e<(i||new Date),initialFocus:!0})})]})]})]}),Fr.jsx("div",{className:"mt-4",children:Fr.jsxs(Hx,{variant:"outline",children:["Durée: ",P," jour",P>1?"s":""]})})]})]}),Fr.jsxs(nf,{children:[Fr.jsx(rf,{children:Fr.jsxs(af,{className:"flex items-center",children:[Fr.jsx(fc,{className:"h-5 w-5 mr-2 text-red-600"}),"Adresse de livraison"]})}),Fr.jsx(lf,{children:Fr.jsxs("div",{className:"space-y-4",children:[Fr.jsxs("div",{className:"relative",children:[Fr.jsx(Wx,{htmlFor:"address",children:"Adresse complète"}),Fr.jsx(zx,{id:"address",value:d,onChange:e=>(async e=>{if(u(e),e.length>3)try{const t=await Oi("GET",`/api/places/autocomplete?input=${encodeURIComponent(e)}`),s=await t.json();v(s.suggestions||[]),y(!0)}catch(t){console.error("Erreur autocomplete:",t)}else y(!1)})(e.target.value),placeholder:"Tapez votre adresse...",className:"w-full"}),g&&f.length>0&&Fr.jsx("div",{className:"absolute z-10 w-full bg-white border border-gray-300 rounded-md shadow-lg mt-1 max-h-60 overflow-auto",children:f.map((e,t)=>Fr.jsx("div",{className:"px-3 py-2 hover:bg-gray-100 cursor-pointer text-sm",onClick:()=>(e=>{u(e.description),p(e.postal_code||""),x(e.city||""),y(!1)})(e),children:e.description},t))})]}),Fr.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[Fr.jsxs("div",{children:[Fr.jsx(Wx,{htmlFor:"postalCode",children:"Code postal"}),Fr.jsx(zx,{id:"postalCode",value:m,onChange:e=>p(e.target.value),placeholder:"75001"})]}),Fr.jsxs("div",{children:[Fr.jsx(Wx,{htmlFor:"city",children:"Ville"}),Fr.jsx(zx,{id:"city",value:h,onChange:e=>x(e.target.value),placeholder:"Paris"})]})]})]})})]}),Fr.jsxs(nf,{children:[Fr.jsx(rf,{children:Fr.jsxs(af,{className:"flex items-center",children:[Fr.jsx(xc,{className:"h-5 w-5 mr-2 text-red-600"}),"Données client (pour test d'envoi d'emails)"]})}),Fr.jsxs(lf,{children:[Fr.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[Fr.jsxs("div",{children:[Fr.jsx(Wx,{children:"Prénom"}),Fr.jsx(zx,{value:k.firstName,onChange:e=>C({...k,firstName:e.target.value})})]}),Fr.jsxs("div",{children:[Fr.jsx(Wx,{children:"Nom"}),Fr.jsx(zx,{value:k.lastName,onChange:e=>C({...k,lastName:e.target.value})})]}),Fr.jsxs("div",{children:[Fr.jsx(Wx,{children:"Email (pour recevoir les emails de test)"}),Fr.jsx(zx,{type:"email",value:k.email,onChange:e=>C({...k,email:e.target.value})})]}),Fr.jsxs("div",{children:[Fr.jsx(Wx,{children:"Téléphone"}),Fr.jsx(zx,{value:k.phone,onChange:e=>C({...k,phone:e.target.value})})]}),Fr.jsxs("div",{children:[Fr.jsx(Wx,{children:"Entreprise"}),Fr.jsx(zx,{value:k.company,onChange:e=>C({...k,company:e.target.value})})]}),Fr.jsxs("div",{children:[Fr.jsx(Wx,{children:"SIRET"}),Fr.jsx(zx,{value:k.siret,onChange:e=>C({...k,siret:e.target.value})})]})]}),Fr.jsxs("div",{className:"mt-4",children:[Fr.jsx(Wx,{children:"Notes"}),Fr.jsx(Ux,{value:k.notes,onChange:e=>C({...k,notes:e.target.value}),placeholder:"Notes pour la commande de test..."})]})]})]})]}),Fr.jsx("div",{className:"lg:col-span-1",children:Fr.jsx(nf,{className:"sticky top-4 shadow-lg border-red-100",children:Fr.jsxs(lf,{className:"p-6",children:[Fr.jsxs("h3",{className:"text-xl font-semibold text-gray-900 mb-4 flex items-center",children:[Fr.jsx(Al,{className:"h-5 w-5 mr-2"}),"Simulation de Prix"]}),Fr.jsxs("div",{className:"space-y-4",children:[Fr.jsx(Lp,{onClick:async()=>{if(s&&d&&m&&h&&0!==r.length){w(!0);try{const t=await Oi("POST","/api/calculate-pricing",{serviceId:s,address:d,postalCode:m,city:h,wasteTypes:r,deliveryDate:null==i?void 0:i.toISOString(),pickupDate:null==l?void 0:l.toISOString(),durationDays:P}),n=await t.json();n.success&&(j(n),e({title:"Prix calculé",description:"Le devis a été calculé avec succès"}))}catch(t){e({title:"Erreur de calcul",description:t.message||"Impossible de calculer le prix",variant:"destructive"})}finally{w(!1)}}else e({title:"Informations manquantes",description:"Veuillez remplir tous les champs requis",variant:"destructive"})},disabled:N||!s||!d||0===r.length,className:"w-full bg-red-600 hover:bg-red-700",children:N?"Calcul en cours...":"Calculer le prix"}),b&&Fr.jsxs(Fr.Fragment,{children:[Fr.jsx(Jx,{}),Fr.jsxs("div",{className:"space-y-3",children:[Fr.jsxs("div",{className:"flex justify-between text-sm",children:[Fr.jsx("span",{children:"Service de base"}),Fr.jsxs("span",{children:[b.pricing.service.toFixed(2),"€"]})]}),b.pricing.durationSupplement>0&&Fr.jsxs("div",{className:"flex justify-between text-sm",children:[Fr.jsxs("span",{children:["Supplément durée (",P," jours)"]}),Fr.jsxs("span",{children:[b.pricing.durationSupplement.toFixed(2),"€"]})]}),Fr.jsxs("div",{className:"flex justify-between text-sm",children:[Fr.jsxs("span",{children:["Transport (",b.distance.roundTripKm.toFixed(1)," km aller-retour)"]}),Fr.jsxs("span",{children:[b.pricing.transport.toFixed(2),"€"]})]}),b.pricing.treatment>0&&Fr.jsxs("div",{className:"flex justify-between text-sm",children:[Fr.jsx("span",{children:"Traitement des déchets"}),Fr.jsxs("span",{children:[b.pricing.treatment.toFixed(2),"€"]})]}),Fr.jsx(Jx,{}),Fr.jsxs("div",{className:"flex justify-between font-bold text-lg",children:[Fr.jsx("span",{children:"Total TTC"}),Fr.jsxs("span",{className:"text-red-600",children:[b.pricing.total.toFixed(2),"€"]})]})]}),Fr.jsxs(vD,{children:[Fr.jsx(Wl,{className:"h-4 w-4"}),Fr.jsxs(gD,{children:["Distance calculée: ",b.distance.kilometers.toFixed(1)," km",Fr.jsx("br",{}),"Temps de trajet: ",b.distance.duration," minutes"]})]}),Fr.jsx(Lp,{onClick:()=>E.mutate(),disabled:E.isPending,className:"w-full bg-green-600 hover:bg-green-700",children:E.isPending?"Création...":"Créer commande test (0€)"}),Fr.jsxs(vD,{children:[Fr.jsx(Ul,{className:"h-4 w-4"}),Fr.jsx(gD,{className:"text-xs",children:"La commande test sera créée à 0€ pour tester uniquement l'envoi d'emails et le workflow."})]})]})]})]})})})]})]})})}function LO(){const[e,t]=va(),{toast:s}=Ui(),[n,r]=hr.useState(!1),[a,i]=hr.useState(null),[o,l]=hr.useState("loading"),c=new URLSearchParams(window.location.search),d=c.get("token"),u=c.get("action");hr.useEffect(()=>{l(d?"valid":"error")},[d]);const m=async e=>{if(d){r(!0);try{await Oi("POST",`/api/orders/validate-delivery-date/${d}`,{accepted:e});s({title:e?"Date acceptée":"Date refusée",description:e?"Merci ! Votre date de livraison est confirmée.":"Votre refus a été pris en compte. Nous vous proposerons une nouvelle date."}),setTimeout(()=>{t("/")},3e3)}catch(n){s({title:"Erreur",description:"Impossible de traiter votre réponse. Veuillez réessayer.",variant:"destructive"})}r(!1)}};return hr.useEffect(()=>{u&&"valid"===o&&!n&&("accept"===u?m(!0):"reject"===u&&m(!1))},[u,o]),"loading"===o?Fr.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:Fr.jsx(nf,{className:"w-full max-w-md",children:Fr.jsxs(lf,{className:"p-6 text-center",children:[Fr.jsx(Zl,{className:"h-12 w-12 text-blue-500 mx-auto mb-4 animate-spin"}),Fr.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Chargement..."}),Fr.jsx("p",{className:"text-gray-600",children:"Vérification de votre demande en cours"})]})})}):"error"===o?Fr.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:Fr.jsx(nf,{className:"w-full max-w-md",children:Fr.jsxs(lf,{className:"p-6 text-center",children:[Fr.jsx(Vc,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),Fr.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Lien invalide"}),Fr.jsx("p",{className:"text-gray-600 mb-4",children:"Ce lien de validation n'est pas valide ou a expiré."}),Fr.jsx(Lp,{onClick:()=>t("/"),className:"bg-red-600 hover:bg-red-700",children:"Retour à l'accueil"})]})})}):"expired"===o?Fr.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:Fr.jsx(nf,{className:"w-full max-w-md",children:Fr.jsxs(lf,{className:"p-6 text-center",children:[Fr.jsx(Zl,{className:"h-12 w-12 text-orange-500 mx-auto mb-4"}),Fr.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Lien expiré"}),Fr.jsx("p",{className:"text-gray-600 mb-4",children:"Ce lien de validation a expiré. Veuillez contacter notre service client."}),Fr.jsxs("div",{className:"space-y-2 text-sm text-gray-600",children:[Fr.jsxs("p",{children:[Fr.jsx("strong",{children:"Email :"})," contact@remondis.fr"]}),Fr.jsxs("p",{children:[Fr.jsx("strong",{children:"Téléphone :"})," 03 44 45 11 58"]})]})]})})}):u?Fr.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:Fr.jsx(nf,{className:"w-full max-w-md",children:Fr.jsxs(lf,{className:"p-6 text-center",children:[Fr.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-red-600 mx-auto mb-4"}),Fr.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Traitement en cours..."}),Fr.jsxs("p",{className:"text-gray-600",children:["accept"===u?"Acceptation":"Refus"," de la date de livraison en cours"]})]})})}):Fr.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:Fr.jsxs(nf,{className:"w-full max-w-lg",children:[Fr.jsxs(rf,{className:"text-center bg-gradient-to-r from-red-600 to-red-700 text-white rounded-t-lg",children:[Fr.jsx(Rl,{className:"h-12 w-12 mx-auto mb-2"}),Fr.jsx(af,{className:"text-2xl",children:"Validation de date de livraison"}),Fr.jsx("p",{className:"text-red-100",children:"REMONDIS France"})]}),Fr.jsxs(lf,{className:"p-6",children:[Fr.jsxs("div",{className:"text-center mb-6",children:[Fr.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Nouvelle date de livraison proposée"}),Fr.jsx("p",{className:"text-gray-600 mb-4",children:"Nous vous proposons une nouvelle date pour la livraison de votre benne. Merci de nous indiquer si cette date vous convient."}),Fr.jsxs("div",{className:"bg-yellow-50 border-2 border-yellow-200 rounded-lg p-4 mb-6",children:[Fr.jsx("p",{className:"font-semibold text-yellow-800",children:"Date proposée"}),Fr.jsx("p",{className:"text-lg text-yellow-900",children:"À définir selon la commande"})]})]}),Fr.jsxs("div",{className:"space-y-3",children:[Fr.jsxs(Lp,{onClick:()=>m(!0),disabled:n,className:"w-full bg-green-600 hover:bg-green-700 text-white py-3",children:[Fr.jsx(ql,{className:"h-5 w-5 mr-2"}),"✓ J'accepte cette date"]}),Fr.jsxs(Lp,{onClick:()=>m(!1),disabled:n,variant:"outline",className:"w-full border-red-600 text-red-600 hover:bg-red-50 py-3",children:[Fr.jsx(Vc,{className:"h-5 w-5 mr-2"}),"✗ Je refuse cette date"]})]}),Fr.jsxs("div",{className:"mt-6 text-center text-sm text-gray-500",children:[Fr.jsx("p",{children:"Ce lien expire dans 7 jours"}),Fr.jsx("p",{className:"mt-2",children:"Besoin d'aide ? Contactez-nous au 03 44 45 11 58"})]})]})]})})}DO.displayName=PO.displayName;var qO="Collapsible",[zO,VO]=Gi(qO),[BO,$O]=zO(qO),WO=hr.forwardRef((e,t)=>{const{__scopeCollapsible:s,open:n,defaultOpen:r,disabled:a,onOpenChange:i,...o}=e,[l,c]=Co({prop:n,defaultProp:r??!1,onChange:i,caller:qO});return Fr.jsx(BO,{scope:s,disabled:a,contentId:Hd(),open:l,onOpenToggle:hr.useCallback(()=>c(e=>!e),[c]),children:Fr.jsx(ao.div,{"data-state":GO(l),"data-disabled":a?"":void 0,...o,ref:t})})});WO.displayName=qO;var UO="CollapsibleTrigger",KO=hr.forwardRef((e,t)=>{const{__scopeCollapsible:s,...n}=e,r=$O(UO,s);return Fr.jsx(ao.button,{type:"button","aria-controls":r.contentId,"aria-expanded":r.open||!1,"data-state":GO(r.open),"data-disabled":r.disabled?"":void 0,disabled:r.disabled,...n,ref:t,onClick:Ki(e.onClick,r.onOpenToggle)})});KO.displayName=UO;var HO="CollapsibleContent",ZO=hr.forwardRef((e,t)=>{const{forceMount:s,...n}=e,r=$O(HO,e.__scopeCollapsible);return Fr.jsx(No,{present:s||r.open,children:({present:e})=>Fr.jsx(QO,{...n,ref:t,present:e})})});ZO.displayName=HO;var QO=hr.forwardRef((e,t)=>{const{__scopeCollapsible:s,present:n,children:r,...a}=e,i=$O(HO,s),[o,l]=hr.useState(n),c=hr.useRef(null),d=Qi(t,c),u=hr.useRef(0),m=u.current,p=hr.useRef(0),h=p.current,x=i.open||o,f=hr.useRef(x),v=hr.useRef(void 0);return hr.useEffect(()=>{const e=requestAnimationFrame(()=>f.current=!1);return()=>cancelAnimationFrame(e)},[]),bo(()=>{const e=c.current;if(e){v.current=v.current||{transitionDuration:e.style.transitionDuration,animationName:e.style.animationName},e.style.transitionDuration="0s",e.style.animationName="none";const t=e.getBoundingClientRect();u.current=t.height,p.current=t.width,f.current||(e.style.transitionDuration=v.current.transitionDuration,e.style.animationName=v.current.animationName),l(n)}},[i.open,n]),Fr.jsx(ao.div,{"data-state":GO(i.open),"data-disabled":i.disabled?"":void 0,id:i.contentId,hidden:!x,...a,ref:d,style:{"--radix-collapsible-content-height":m?`${m}px`:void 0,"--radix-collapsible-content-width":h?`${h}px`:void 0,...e.style},children:x&&r})});function GO(e){return e?"open":"closed"}var YO=WO,JO=KO,XO=ZO,eR="Accordion",tR=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[sR,nR,rR]=ro(eR),[aR,iR]=Gi(eR,[rR,VO]),oR=VO(),lR=vr.forwardRef((e,t)=>{const{type:s,...n}=e,r=n,a=n;return Fr.jsx(sR.Provider,{scope:e.__scopeAccordion,children:"multiple"===s?Fr.jsx(hR,{...a,ref:t}):Fr.jsx(pR,{...r,ref:t})})});lR.displayName=eR;var[cR,dR]=aR(eR),[uR,mR]=aR(eR,{collapsible:!1}),pR=vr.forwardRef((e,t)=>{const{value:s,defaultValue:n,onValueChange:r=()=>{},collapsible:a=!1,...i}=e,[o,l]=Co({prop:s,defaultProp:n??"",onChange:r,caller:eR});return Fr.jsx(cR,{scope:e.__scopeAccordion,value:vr.useMemo(()=>o?[o]:[],[o]),onItemOpen:l,onItemClose:vr.useCallback(()=>a&&l(""),[a,l]),children:Fr.jsx(uR,{scope:e.__scopeAccordion,collapsible:a,children:Fr.jsx(vR,{...i,ref:t})})})}),hR=vr.forwardRef((e,t)=>{const{value:s,defaultValue:n,onValueChange:r=()=>{},...a}=e,[i,o]=Co({prop:s,defaultProp:n??[],onChange:r,caller:eR}),l=vr.useCallback(e=>o((t=[])=>[...t,e]),[o]),c=vr.useCallback(e=>o((t=[])=>t.filter(t=>t!==e)),[o]);return Fr.jsx(cR,{scope:e.__scopeAccordion,value:i,onItemOpen:l,onItemClose:c,children:Fr.jsx(uR,{scope:e.__scopeAccordion,collapsible:!0,children:Fr.jsx(vR,{...a,ref:t})})})}),[xR,fR]=aR(eR),vR=vr.forwardRef((e,t)=>{const{__scopeAccordion:s,disabled:n,dir:r,orientation:a="vertical",...i}=e,o=Qi(vr.useRef(null),t),l=nR(s),c="ltr"===Cf(r),d=Ki(e.onKeyDown,e=>{var t;if(!tR.includes(e.key))return;const s=e.target,n=l().filter(e=>{var t;return!(null==(t=e.ref.current)?void 0:t.disabled)}),r=n.findIndex(e=>e.ref.current===s),i=n.length;if(-1===r)return;e.preventDefault();let o=r;const d=i-1,u=()=>{o=r+1,o>d&&(o=0)},m=()=>{o=r-1,o<0&&(o=d)};switch(e.key){case"Home":o=0;break;case"End":o=d;break;case"ArrowRight":"horizontal"===a&&(c?u():m());break;case"ArrowDown":"vertical"===a&&u();break;case"ArrowLeft":"horizontal"===a&&(c?m():u());break;case"ArrowUp":"vertical"===a&&m()}null==(t=n[o%i].ref.current)||t.focus()});return Fr.jsx(xR,{scope:s,disabled:n,direction:r,orientation:a,children:Fr.jsx(sR.Slot,{scope:s,children:Fr.jsx(ao.div,{...i,"data-orientation":a,ref:o,onKeyDown:n?void 0:d})})})}),gR="AccordionItem",[yR,bR]=aR(gR),jR=vr.forwardRef((e,t)=>{const{__scopeAccordion:s,value:n,...r}=e,a=fR(gR,s),i=dR(gR,s),o=oR(s),l=Hd(),c=n&&i.value.includes(n)||!1,d=a.disabled||e.disabled;return Fr.jsx(yR,{scope:s,open:c,disabled:d,triggerId:l,children:Fr.jsx(YO,{"data-orientation":a.orientation,"data-state":PR(c),...o,...r,ref:t,disabled:d,open:c,onOpenChange:e=>{e?i.onItemOpen(n):i.onItemClose(n)}})})});jR.displayName=gR;var NR="AccordionHeader",wR=vr.forwardRef((e,t)=>{const{__scopeAccordion:s,...n}=e,r=fR(eR,s),a=bR(NR,s);return Fr.jsx(ao.h3,{"data-orientation":r.orientation,"data-state":PR(a.open),"data-disabled":a.disabled?"":void 0,...n,ref:t})});wR.displayName=NR;var kR="AccordionTrigger",CR=vr.forwardRef((e,t)=>{const{__scopeAccordion:s,...n}=e,r=fR(eR,s),a=bR(kR,s),i=mR(kR,s),o=oR(s);return Fr.jsx(sR.ItemSlot,{scope:s,children:Fr.jsx(JO,{"aria-disabled":a.open&&!i.collapsible||void 0,"data-orientation":r.orientation,id:a.triggerId,...o,...n,ref:t})})});CR.displayName=kR;var SR="AccordionContent",_R=vr.forwardRef((e,t)=>{const{__scopeAccordion:s,...n}=e,r=fR(eR,s),a=bR(SR,s),i=oR(s);return Fr.jsx(XO,{role:"region","aria-labelledby":a.triggerId,"data-orientation":r.orientation,...i,...n,ref:t,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...e.style}})});function PR(e){return e?"open":"closed"}_R.displayName=SR;var ER=jR,DR=wR,TR=CR,AR=_R;const OR=lR,RR=hr.forwardRef(({className:e,...t},s)=>Fr.jsx(ER,{ref:s,className:Fd("border-b",e),...t}));RR.displayName="AccordionItem";const FR=hr.forwardRef(({className:e,children:t,...s},n)=>Fr.jsx(DR,{className:"flex",children:Fr.jsxs(TR,{ref:n,className:Fd("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",e),...s,children:[t,Fr.jsx(zl,{className:"h-4 w-4 shrink-0 transition-transform duration-200"})]})}));FR.displayName=TR.displayName;const IR=hr.forwardRef(({className:e,children:t,...s},n)=>Fr.jsx(AR,{ref:n,className:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...s,children:Fr.jsx("div",{className:Fd("pb-4 pt-0",e),children:t})}));function MR(){return Fr.jsxs("div",{className:"min-h-screen bg-gray-50",children:[Fr.jsx("div",{className:"bg-white border-b",children:Fr.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:Fr.jsxs("div",{className:"text-center",children:[Fr.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:"FAQ - Questions et Réponses"}),Fr.jsx("p",{className:"text-lg text-gray-600 max-w-3xl mx-auto",children:"Vous avez des questions sur la procédure de commande et d'élimination ? Vous cherchez des informations sur nos services de conteneurs et de location de toilettes ? Dans notre section FAQ, vous trouverez des réponses et des faits intéressants concernant votre commande dans la boutique REMONDIS."})]})})}),Fr.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[Fr.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-4 mb-12",children:[Fr.jsx(nf,{className:"hover:shadow-md transition-shadow cursor-pointer",children:Fr.jsxs(lf,{className:"p-6 text-center",children:[Fr.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Questions générales"}),Fr.jsx("p",{className:"text-sm text-gray-600",children:"sur l'ordonnance"})]})}),Fr.jsx(nf,{className:"hover:shadow-md transition-shadow cursor-pointer",children:Fr.jsxs(lf,{className:"p-6 text-center",children:[Fr.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Service de conteneurs"}),Fr.jsx("p",{className:"text-sm text-gray-600",children:"Questions sur les bennes"})]})}),Fr.jsx(nf,{className:"hover:shadow-md transition-shadow cursor-pointer",children:Fr.jsxs(lf,{className:"p-6 text-center",children:[Fr.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Livraison et collecte"}),Fr.jsx("p",{className:"text-sm text-gray-600",children:"Questions logistiques"})]})}),Fr.jsx(nf,{className:"hover:shadow-md transition-shadow cursor-pointer",children:Fr.jsxs(lf,{className:"p-6 text-center",children:[Fr.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Service clients"}),Fr.jsx("p",{className:"text-sm text-gray-600",children:"Aide et contact"})]})})]}),Fr.jsxs("section",{className:"mb-12",children:[Fr.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Questions générales sur l'ordonnance"}),Fr.jsx(nf,{children:Fr.jsx(lf,{className:"p-6",children:Fr.jsxs(OR,{type:"single",collapsible:!0,className:"w-full",children:[Fr.jsxs(RR,{value:"q1",children:[Fr.jsx(FR,{className:"text-left",children:"Comment puis-je commander une solution d'élimination sur mesure auprès du magasin REMONDIS?"}),Fr.jsx(IR,{children:Fr.jsxs("div",{className:"space-y-2",children:[Fr.jsx("p",{className:"font-medium",children:"C'est aussi simple que cela:"}),Fr.jsxs("ol",{className:"list-decimal list-inside space-y-1",children:[Fr.jsx("li",{children:"Sélection des déchets à éliminer"}),Fr.jsx("li",{children:"Indication du code postal de votre lieu de livraison"}),Fr.jsx("li",{children:"Choix de la solution d'élimination appropriée"}),Fr.jsx("li",{children:"Saisie de vos données personnelles"}),Fr.jsx("li",{children:"Paiement à l'avance"}),Fr.jsx("li",{children:"Vérifiez et envoyez votre commande - C'est fait !"})]})]})})]}),Fr.jsxs(RR,{value:"q2",children:[Fr.jsx(FR,{className:"text-left",children:"Est-il possible de commander plusieurs conteneurs (différents) en même temps?"}),Fr.jsx(IR,{children:"Si vous le souhaitez, vous pouvez commander jusqu'à cinq conteneurs différents. Veuillez noter qu'il peut ne pas être possible de fournir toutes les solutions d'élimination en une seule livraison en même temps. Votre interlocuteur personnel se fera un plaisir de vous informer à ce sujet et de fixer un rendez-vous avec vous."})]}),Fr.jsxs(RR,{value:"q3",children:[Fr.jsx(FR,{className:"text-left",children:"Un enregistrement obligatoire est-il nécessaire pour passer une commande dans le magasin REMONDIS?"}),Fr.jsx(IR,{children:"Non, vous n'avez pas besoin de vous inscrire pour passer une commande dans le REMONDIS Shop! Toutefois, au cours du processus de commande, il vous sera demandé de saisir vos données personnelles pour le traitement de la commande et, le cas échéant, pour la facturation."})]}),Fr.jsxs(RR,{value:"q4",children:[Fr.jsx(FR,{className:"text-left",children:"Quel est le coût de la commande dans la boutique REMONDIS? Devrai-je payer des frais supplémentaires?"}),Fr.jsx(IR,{children:"Le prix total indiqué dans le panier d'achat et également lorsque vous terminez votre commande est le prix complet. Cela vous garantit une période de stationnement de 14 jours pour le service de conteneurs. La période de location peut être prolongée à volonté moyennant une redevance appropriée. Il n'y a pas de coûts supplémentaires dans le cadre des conditions contractuelles."})]}),Fr.jsxs(RR,{value:"q5",children:[Fr.jsx(FR,{className:"text-left",children:"Existe-t-il une solution d'élimination pour l'accumulation régulière des déchets?"}),Fr.jsx(IR,{children:"Bien entendu, nos conteneurs et nos services d'élimination sont également à votre disposition à intervalles réguliers. Pour les clients commerciaux et les demandes individuelles d'élimination des déchets, nous vous proposons un service d'élimination des déchets sur mesure. Il suffit de nous contacter en utilisant notre formulaire de contact ou notre service d'assistance téléphonique gratuit +33 (0) 800 54 438!"})]}),Fr.jsxs(RR,{value:"q6",children:[Fr.jsx(FR,{className:"text-left",children:"Vous avez des questions concernant votre commande ou vous avez fait une erreur?"}),Fr.jsx(IR,{children:"Vous pouvez alors contacter directement votre interlocuteur personnel sur place. Vous le trouverez dans votre e-mail de confirmation de commande. Vous y trouverez un aperçu de votre commande ainsi que l'adresse de la société REMONDIS qui fournit le service, votre adresse de livraison et les conditions de paiement choisies."})]})]})})})]}),Fr.jsxs("section",{className:"mb-12",children:[Fr.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Questions sur le service de conteneurs"}),Fr.jsx(nf,{children:Fr.jsx(lf,{className:"p-6",children:Fr.jsxs(OR,{type:"single",collapsible:!0,className:"w-full",children:[Fr.jsxs(RR,{value:"c1",children:[Fr.jsx(FR,{className:"text-left",children:"Quelle est la bonne taille de conteneur?"}),Fr.jsx(IR,{children:"Dans la boutique REMONDIS, vous trouverez un grand nombre de conteneurs de différentes tailles, selon le type de service d'élimination des déchets que vous souhaitez. La taille du conteneur nécessaire dépend du volume de vos déchets. Vous trouverez un aperçu des différentes tailles de conteneurs dans les informations sur les articles correspondants et dans notre lexique détaillé des conteneurs."})]}),Fr.jsxs(RR,{value:"c2",children:[Fr.jsx(FR,{className:"text-left",children:"Quelles sont les dimensions des différents conteneurs?"}),Fr.jsxs(IR,{children:["Dans la boutique REMONDIS, vous trouverez un grand nombre de conteneurs de différentes dimensions selon le type de service d'élimination des déchets que vous souhaitez. Vous trouverez toutes les informations sur nos solutions de gestion des déchets dans la description détaillée.",Fr.jsxs("div",{className:"mt-4 space-y-2",children:[Fr.jsx("p",{className:"font-medium",children:"C'est aussi simple que cela:"}),Fr.jsxs("ol",{className:"list-decimal list-inside space-y-1",children:[Fr.jsx("li",{children:"Sélectionnez les déchets à éliminer et indiquez votre code postal"}),Fr.jsx("li",{children:"Sélection du conteneur approprié parmi notre vaste gamme de services"}),Fr.jsx("li",{children:"Appelez les informations sous les images des conteneurs"})]})]})]})]}),Fr.jsxs(RR,{value:"c3",children:[Fr.jsx(FR,{className:"text-left",children:"Quel est le contenu autorisé dans mon conteneur? Qu'est-ce qui ne l'est pas?"}),Fr.jsx(IR,{children:"Les déchets que vous êtes autorisé à remplir dans votre conteneur dépendent du type de déchets que vous avez choisi lors de votre commande. Vous trouverez les définitions correspondantes des différents types de déchets dans la description détaillée des différentes fractions : Que peut-on mettre dans le conteneur? Qu'est-ce qui n'est pas autorisé dans le conteneur?"})]}),Fr.jsxs(RR,{value:"c4",children:[Fr.jsx(FR,{className:"text-left",children:"Jusqu'à quelle hauteur le conteneur peut-il être rempli?"}),Fr.jsx(IR,{children:"Tous les conteneurs peuvent être remplis uniformément sur toute la surface du conteneur, au maximum jusqu'au bord de chargement avant ou arrière, afin de garantir la sécurité du transport. La hauteur des parois avant et arrière ne doit pas être dépassée par le matériel chargé stocké de manière centralisée. Il n'est pas permis de soulever les murs sous votre propre responsabilité. En outre, aucun objet ne doit dépasser du conteneur."})]}),Fr.jsxs(RR,{value:"c5",children:[Fr.jsx(FR,{className:"text-left",children:"Que se passe-t-il si mon conteneur n'est pas correctement rempli?"}),Fr.jsx(IR,{children:"Les déchets que vous êtes autorisé à remplir dans votre conteneur dépendent du type de déchets que vous avez choisi lors de votre commande. Si votre conteneur contient d'autres types de déchets, le conteneur entier sera à nouveau déclaré et facturé en fonction du contenu effectivement rempli. Vous devez donc vérifier attentivement les conditions et modalités de remplissage avant de passer votre commande."})]}),Fr.jsxs(RR,{value:"c6",children:[Fr.jsx(FR,{className:"text-left",children:"Comment puis-je protéger mon conteneur contre le remplissage extérieur?"}),Fr.jsx(IR,{children:"Pour presque tous les conteneurs, nous proposons un couvercle à charnière ou une bâche enroulable. Elles offrent non seulement une protection contre le remplissage par des personnes extérieures, mais aussi contre le vol ou les influences climatiques. Il suffit de choisir l'équipement supplémentaire couvercle à charnière / bâche roulante lors du choix du conteneur approprié."})]})]})})})]}),Fr.jsxs("section",{className:"mb-12",children:[Fr.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Questions sur la livraison et la collecte"}),Fr.jsx(nf,{children:Fr.jsx(lf,{className:"p-6",children:Fr.jsxs(OR,{type:"single",collapsible:!0,className:"w-full",children:[Fr.jsxs(RR,{value:"d1",children:[Fr.jsx(FR,{className:"text-left",children:"Quand la livraison de mon conteneur aura-t-elle lieu?"}),Fr.jsx(IR,{children:"La livraison est toujours effectuée à la date de votre choix : il vous suffit de sélectionner la date de livraison souhaitée dans votre commande et, après avoir vérifié la disponibilité, vous recevrez une confirmation de votre commande de la part de la société REMONDIS locale qui fournit le service dans les plus brefs délais. Plus vous commandez tôt, plus la position de votre conteneur à la date souhaitée est sûre."})]}),Fr.jsxs(RR,{value:"d2",children:[Fr.jsx(FR,{className:"text-left",children:"Où peut-on placer le conteneur?"}),Fr.jsx(IR,{children:"Lors de la commande, vous avez le choix : vous pouvez placer votre conteneur sur un espace public (par exemple, rue, trottoir, etc.) ou sur votre propriété privée. Aucun permis spécial n'est nécessaire pour l'installation sur votre propre site. Si vous souhaitez installer le système sur un espace public, vous devrez obtenir une autorisation spéciale d'utilisation auprès de votre ville ou de votre municipalité."})]}),Fr.jsxs(RR,{value:"d3",children:[Fr.jsx(FR,{className:"text-left",children:"De combien d'espace le camion a-t-il besoin pour la livraison et l'enlèvement?"}),Fr.jsx(IR,{children:"Pour garantir une installation/collecte sans problème, la route d'accès doit être accessible au camion et ne pas être bloquée par des arbres bas, des lanternes, des panneaux, etc. Les règles de circulation prévues par la loi sur la circulation routière doivent être respectées. En outre, les conteneurs ne peuvent être installés/collectés que dans un parking avec une aire de stationnement fixe ou une aire de roulement."})]}),Fr.jsxs(RR,{value:"d4",children:[Fr.jsx(FR,{className:"text-left",children:"Ma présence est-elle requise pour la livraison/collecte?"}),Fr.jsx(IR,{children:"Nous vous recommandons d'être présent lors de la livraison et de la collecte afin de vous assurer que le conteneur est placé au bon endroit. En outre, la livraison ou la collecte doit être confirmée au conducteur du véhicule porte-conteneurs. Si la condition paiement comptant est choisie, la commande doit également être payée directement au chauffeur."})]}),Fr.jsxs(RR,{value:"d5",children:[Fr.jsx(FR,{className:"text-left",children:"Quelle est la durée de la période de positionnement? Peut-elle être prolongée?"}),Fr.jsx(IR,{children:"Le prix d'un conteneur comprend une période de stockage maximale de 14 jours. Pendant cette période, vous pouvez quitter le conteneur et le remplir sans problème. Après cette période, nous vous facturerons un prix de location mensuel. Vous pouvez demander à votre interlocuteur personnel les conditions applicables et, si nécessaire, convenir immédiatement d'une période de location prolongée."})]}),Fr.jsxs(RR,{value:"d6",children:[Fr.jsx(FR,{className:"text-left",children:"Puis-je déplacer, relocaliser ou retourner le conteneur?"}),Fr.jsx(IR,{children:"Afin de garantir une collecte sans problème, vous ne devez pas déplacer, déplacer ou tourner le conteneur, surtout si le site d'installation est limité. En fonction de la taille et du contenu de votre conteneur, il peut s'avérer impossible de le remettre dans sa position initiale après le remplissage. Les frais supplémentaires qui en découlent vous seront facturés dans une facture séparée."})]})]})})})]}),Fr.jsx("section",{className:"mb-12",children:Fr.jsx(nf,{className:"bg-red-50 border-red-200",children:Fr.jsxs(lf,{className:"p-8",children:[Fr.jsxs("div",{className:"text-center mb-8",children:[Fr.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"D'autres questions ? Contactez-nous !"}),Fr.jsx("p",{className:"text-gray-600",children:"Notre équipe d'experts est à votre disposition pour répondre à toutes vos questions spécifiques"})]}),Fr.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-6",children:[Fr.jsxs("div",{className:"text-center",children:[Fr.jsx("div",{className:"w-12 h-12 bg-red-600 rounded-full flex items-center justify-center mx-auto mb-3",children:Fr.jsx(bc,{className:"h-6 w-6 text-white"})}),Fr.jsx("h4",{className:"font-semibold mb-1",children:"Assistance téléphonique"}),Fr.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Service gratuit"}),Fr.jsx("p",{className:"font-medium text-red-600",children:"+33 (0) 800 54 438"})]}),Fr.jsxs("div",{className:"text-center",children:[Fr.jsx("div",{className:"w-12 h-12 bg-blue-600 rounded-full flex items-center justify-center mx-auto mb-3",children:Fr.jsx(xc,{className:"h-6 w-6 text-white"})}),Fr.jsx("h4",{className:"font-semibold mb-1",children:"Email"}),Fr.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Réponse sous 24h"}),Fr.jsx("p",{className:"font-medium text-blue-600",children:"commercial@remondis.fr"})]}),Fr.jsxs("div",{className:"text-center",children:[Fr.jsx("div",{className:"w-12 h-12 bg-green-600 rounded-full flex items-center justify-center mx-auto mb-3",children:Fr.jsx(Zl,{className:"h-6 w-6 text-white"})}),Fr.jsx("h4",{className:"font-semibold mb-1",children:"Horaires"}),Fr.jsx("p",{className:"text-sm text-gray-600",children:"Lun-Ven: 8h-18h"}),Fr.jsx("p",{className:"text-sm text-gray-600",children:"Sam: 8h-12h"})]}),Fr.jsxs("div",{className:"text-center",children:[Fr.jsx("div",{className:"w-12 h-12 bg-purple-600 rounded-full flex items-center justify-center mx-auto mb-3",children:Fr.jsx(fc,{className:"h-6 w-6 text-white"})}),Fr.jsx("h4",{className:"font-semibold mb-1",children:"Agences"}),Fr.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Partout en France"}),Fr.jsx("p",{className:"font-medium text-purple-600",children:"Trouver une agence"})]})]}),Fr.jsx("div",{className:"text-center mt-8",children:Fr.jsx(Na,{href:"/booking",children:Fr.jsx(Lp,{className:"bg-red-600 hover:bg-red-700 text-white px-8 py-3",children:"Commencer ma commande"})})})]})})})]})]})}function LR(){return Fr.jsx("footer",{className:"bg-gray-900 text-white mt-auto",children:Fr.jsxs("div",{className:"container mx-auto px-4 py-8",children:[Fr.jsxs("div",{className:"grid md:grid-cols-4 gap-8",children:[Fr.jsxs("div",{children:[Fr.jsx("h3",{className:"font-bold text-red-500 text-lg mb-4",children:"REMONDIS DD"}),Fr.jsxs("div",{className:"space-y-2 text-sm text-gray-300",children:[Fr.jsx("p",{children:"3 Rue du bois d'Aumont"}),Fr.jsx("p",{children:"ZI de Warluis, 60000 Allonne"}),Fr.jsx("p",{children:"Tél: 03 44 45 11 58"}),Fr.jsx("p",{children:"Email: contact@remondis.fr"})]})]}),Fr.jsxs("div",{children:[Fr.jsx("h3",{className:"font-bold text-white text-lg mb-4",children:"Nos services"}),Fr.jsxs("div",{className:"space-y-2 text-sm text-gray-300",children:[Fr.jsx("p",{children:"Collecte de déchets"}),Fr.jsx("p",{children:"Location de bennes"}),Fr.jsx("p",{children:"Traitement agréé"}),Fr.jsx("p",{children:"Transport sécurisé"})]})]}),Fr.jsxs("div",{children:[Fr.jsx("h3",{className:"font-bold text-white text-lg mb-4",children:"Informations"}),Fr.jsxs("div",{className:"space-y-2 text-sm",children:[Fr.jsx(Na,{href:"/legal",className:"text-gray-300 hover:text-red-400 block",children:"Mentions légales & CGV"}),Fr.jsx(Na,{href:"/legal",className:"text-gray-300 hover:text-red-400 block",children:"Politique de confidentialité"}),Fr.jsx(Na,{href:"/legal",className:"text-gray-300 hover:text-red-400 block",children:"Droit de rétractation"})]})]}),Fr.jsxs("div",{children:[Fr.jsx("h3",{className:"font-bold text-white text-lg mb-4",children:"Certifications"}),Fr.jsxs("div",{className:"space-y-2 text-sm text-gray-300",children:[Fr.jsx("p",{children:"ISO 14001"}),Fr.jsx("p",{children:"MASE ISO Privé"}),Fr.jsx("p",{children:"Centres agréés ICPE"}),Fr.jsx("p",{children:"Conformité BSD"}),Fr.jsx("p",{children:"Code environnement"})]})]})]}),Fr.jsx(Jx,{className:"my-6 bg-gray-700"}),Fr.jsxs("div",{className:"space-y-4",children:[Fr.jsxs("div",{className:"grid md:grid-cols-2 gap-4 text-xs text-gray-400",children:[Fr.jsxs("div",{children:[Fr.jsxs("p",{children:[Fr.jsx("strong",{children:"REMONDIS DD SAS"})," - SAS au capital de 1 000 000 €"]}),Fr.jsx("p",{children:"SIRET: 379 163 413 00047 - RCS Beauvais B 379 163 413"}),Fr.jsx("p",{children:"Code APE: 3811Z - TVA: FR 81 379 163 413"})]}),Fr.jsxs("div",{children:[Fr.jsx("p",{children:"Activité soumise au Code de l'environnement"}),Fr.jsx("p",{children:"Prestation de collecte et traitement de déchets"}),Fr.jsx("p",{children:"Prix TTC - TVA 20% - Facturation après prestation"})]})]}),Fr.jsx(Jx,{className:"bg-gray-700"}),Fr.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center text-xs text-gray-400",children:[Fr.jsx("div",{className:"mb-2 md:mb-0",children:Fr.jsx("p",{children:"© 2025 REMONDIS DD. Tous droits réservés."})}),Fr.jsxs("div",{className:"flex space-x-4",children:[Fr.jsx("span",{children:"Juridiction: Beauvais"}),Fr.jsx("span",{children:"Droit applicable: France"})]})]}),Fr.jsxs("div",{className:"bg-gray-800 p-3 rounded text-xs text-gray-300",children:[Fr.jsx("p",{className:"font-semibold mb-1",children:"Information réglementaire :"}),Fr.jsx("p",{children:"Service de collecte et traitement de déchets conforme au Code de l'environnement. Traitement exclusivement en centres agréés ICPE. Bordereau de suivi fourni. Droit de rétractation 14 jours (Art. L221-18). Réclamations: service.client@remondis.fr"})]})]})]})})}function qR(){const{data:e}=Pi({queryKey:["/api/services"]}),{user:t}=Fp(),s=Ip(),[n,r]=hr.useState(!1);return Fr.jsxs("div",{className:"min-h-screen bg-white",children:[Fr.jsxs("nav",{className:"bg-white shadow-lg border-b-2 border-red-600 sticky top-0 z-50",children:[Fr.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:Fr.jsxs("div",{className:"flex justify-between items-center h-20",children:[Fr.jsxs("div",{className:"flex items-center space-x-4",children:[Fr.jsx("img",{src:"https://upload.wikimedia.org/wikipedia/commons/3/32/Remondis_logo.svg",alt:"Remondis",className:"h-10 sm:h-12 w-auto"}),Fr.jsxs("div",{className:"hidden md:flex items-center space-x-8 ml-8",children:[Fr.jsx("a",{href:"#services",className:"text-gray-700 hover:text-red-600 font-medium transition-colors cursor-pointer",onClick:e=>{var t;e.preventDefault(),null==(t=document.getElementById("services"))||t.scrollIntoView({behavior:"smooth"})},children:"Services"}),Fr.jsx("a",{href:"#process",className:"text-gray-700 hover:text-red-600 font-medium transition-colors cursor-pointer",onClick:e=>{var t;e.preventDefault(),null==(t=document.getElementById("process"))||t.scrollIntoView({behavior:"smooth"})},children:"Comment ça marche"}),Fr.jsx(Na,{href:"/faq",className:"text-gray-700 hover:text-red-600 font-medium transition-colors",children:"FAQ"}),Fr.jsx("a",{href:"#contact",className:"text-gray-700 hover:text-red-600 font-medium transition-colors cursor-pointer",onClick:e=>{var t;e.preventDefault(),null==(t=document.getElementById("contact"))||t.scrollIntoView({behavior:"smooth"})},children:"Contact"})]})]}),Fr.jsx("div",{className:"hidden md:flex items-center space-x-2 lg:space-x-4",children:t?Fr.jsxs(Fr.Fragment,{children:[Fr.jsx(Na,{href:"admin"===t.role?"/dashboard":"/client-dashboard",children:Fr.jsx(Lp,{variant:"outline",className:"border-red-600 text-red-600 hover:bg-red-50 text-sm lg:text-base px-3 lg:px-4",children:"admin"===t.role?"Admin Panel":"Mon Dashboard"})}),Fr.jsx(Na,{href:"/booking",children:Fr.jsx(Lp,{className:"bg-red-600 hover:bg-red-700 text-white shadow-lg text-sm lg:text-base px-3 lg:px-4",children:"Réserver maintenant"})}),Fr.jsx(Lp,{variant:"ghost",className:"text-gray-600 hover:text-red-600",onClick:()=>s.mutate(),children:"Déconnexion"})]}):Fr.jsxs(Fr.Fragment,{children:[Fr.jsx(Na,{href:"/auth",children:Fr.jsx(Lp,{variant:"outline",className:"border-red-600 text-red-600 hover:bg-red-50 text-sm lg:text-base px-3 lg:px-4",children:"Se connecter"})}),Fr.jsx(Na,{href:"/auth",children:Fr.jsx(Lp,{className:"bg-red-600 hover:bg-red-700 text-white shadow-lg text-sm lg:text-base px-3 lg:px-4",children:"Réserver maintenant"})})]})}),Fr.jsx(Lp,{variant:"ghost",size:"icon",className:"md:hidden",onClick:()=>r(!n),children:n?Fr.jsx(Vc,{className:"h-6 w-6"}):Fr.jsx(vc,{className:"h-6 w-6"})})]})}),n&&Fr.jsx("div",{className:"md:hidden absolute top-20 left-0 right-0 bg-white shadow-lg border-b-2 border-red-600 z-50",children:Fr.jsxs("div",{className:"px-4 py-4 space-y-3",children:[Fr.jsx("a",{href:"#services",className:"block text-gray-700 hover:text-red-600 font-medium transition-colors py-2",onClick:e=>{var t;e.preventDefault(),null==(t=document.getElementById("services"))||t.scrollIntoView({behavior:"smooth"}),r(!1)},children:"Services"}),Fr.jsx("a",{href:"#process",className:"block text-gray-700 hover:text-red-600 font-medium transition-colors py-2",onClick:e=>{var t;e.preventDefault(),null==(t=document.getElementById("process"))||t.scrollIntoView({behavior:"smooth"}),r(!1)},children:"Comment ça marche"}),Fr.jsx(Na,{href:"/faq",className:"block text-gray-700 hover:text-red-600 font-medium transition-colors py-2",onClick:()=>r(!1),children:"FAQ"}),Fr.jsx("a",{href:"#contact",className:"block text-gray-700 hover:text-red-600 font-medium transition-colors py-2",onClick:e=>{var t;e.preventDefault(),null==(t=document.getElementById("contact"))||t.scrollIntoView({behavior:"smooth"}),r(!1)},children:"Contact"}),Fr.jsx("div",{className:"pt-4 border-t border-gray-200 space-y-3",children:t?Fr.jsxs(Fr.Fragment,{children:[Fr.jsx(Na,{href:"admin"===t.role?"/dashboard":"/client-dashboard",onClick:()=>r(!1),children:Fr.jsx(Lp,{variant:"outline",className:"w-full border-red-600 text-red-600 hover:bg-red-50",children:"admin"===t.role?"Admin Panel":"Mon Dashboard"})}),Fr.jsx(Na,{href:"/booking",onClick:()=>r(!1),children:Fr.jsx(Lp,{className:"w-full bg-red-600 hover:bg-red-700 text-white shadow-lg",children:"Réserver maintenant"})}),Fr.jsx(Lp,{variant:"ghost",className:"w-full text-gray-600 hover:text-red-600",onClick:()=>{s.mutate(),r(!1)},children:"Déconnexion"})]}):Fr.jsxs(Fr.Fragment,{children:[Fr.jsx(Na,{href:"/auth",onClick:()=>r(!1),children:Fr.jsx(Lp,{variant:"outline",className:"w-full border-red-600 text-red-600 hover:bg-red-50",children:"Se connecter"})}),Fr.jsx(Na,{href:"/auth",onClick:()=>r(!1),children:Fr.jsx(Lp,{className:"w-full bg-red-600 hover:bg-red-700 text-white shadow-lg",children:"Réserver maintenant"})})]})})]})})]}),Fr.jsxs("div",{className:"relative bg-gradient-to-br from-red-600 via-red-700 to-black text-white overflow-hidden",children:[Fr.jsx("div",{className:"absolute inset-0 bg-black/20"}),Fr.jsx("div",{className:"relative container-responsive py-12 md:py-20 lg:py-24",children:Fr.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 md:gap-12 items-center",children:[Fr.jsxs("div",{className:"space-y-8",children:[Fr.jsxs("div",{className:"space-y-4 md:space-y-6",children:[Fr.jsx(Hx,{className:"bg-white/20 text-white border-white/30 px-3 py-1.5 md:px-4 md:py-2 text-xs md:text-sm inline-block",children:"🏆 Votre partenaire dans la gestion de vos déchets"}),Fr.jsxs("h1",{className:"text-3xl sm:text-4xl md:text-5xl lg:text-6xl xl:text-7xl font-bold leading-tight",children:["Location de",Fr.jsx("span",{className:"block text-white",children:"Bennes"}),Fr.jsx("span",{className:"block text-red-200",children:"Particulier & Professionnel"})]}),Fr.jsx("p",{className:"text-base sm:text-lg md:text-xl lg:text-2xl text-red-100 leading-relaxed",children:"Simplifiez la gestion de vos déchets avec notre plateforme digitale. Devis instantané, planification de la livraison minimum 24h avant intervention, traitement éco-responsable."})]}),Fr.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4 justify-center",children:[Fr.jsx(Na,{href:"/booking",className:"w-full sm:w-auto",children:Fr.jsxs(Lp,{size:"lg",className:"w-full bg-white text-red-600 hover:bg-red-50 px-6 sm:px-8 py-4 text-base sm:text-lg font-semibold shadow-xl btn-touch",children:[Fr.jsx(Il,{className:"mr-2 h-5 w-5"}),"Réserver ma benne"]})}),Fr.jsx(Na,{href:"/auth/register",className:"w-full sm:w-auto",children:Fr.jsxs(Lp,{size:"lg",variant:"outline",className:"w-full border-2 border-white text-white hover:bg-white/20 px-6 sm:px-8 py-4 text-base sm:text-lg font-semibold btn-touch",children:[Fr.jsx(Sl,{className:"mr-2 h-5 w-5"}),"Créer mon Compte Pro"]})})]}),Fr.jsxs("div",{className:"grid grid-cols-3 gap-4 sm:gap-8 pt-4",children:[Fr.jsxs("div",{className:"text-center",children:[Fr.jsx("div",{className:"text-xl sm:text-2xl md:text-3xl font-bold",children:"24h"}),Fr.jsx("div",{className:"text-xs sm:text-sm text-red-200",children:"Planification minimum"})]}),Fr.jsxs("div",{className:"text-center",children:[Fr.jsx("div",{className:"text-xl sm:text-2xl md:text-3xl font-bold",children:"98%"}),Fr.jsx("div",{className:"text-xs sm:text-sm text-red-200",children:"Satisfaction client"})]}),Fr.jsxs("div",{className:"text-center",children:[Fr.jsx("div",{className:"text-xl sm:text-2xl md:text-3xl font-bold",children:"700+"}),Fr.jsx("div",{className:"text-xs sm:text-sm text-red-200",children:"Bennes livrées"})]})]})]}),Fr.jsx("div",{className:"relative",children:Fr.jsx(Na,{href:"/booking",children:Fr.jsxs(Lp,{size:"lg",className:"w-full bg-white text-red-600 hover:bg-red-50 font-semibold py-6 text-xl shadow-2xl",children:["Calculer mon devis",Fr.jsx(Sl,{className:"ml-3 h-6 w-6"})]})})})]})})]}),Fr.jsx("section",{id:"services",className:"py-20 bg-gray-50",children:Fr.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[Fr.jsxs("div",{className:"text-center mb-16",children:[Fr.jsx(Hx,{className:"bg-red-100 text-red-600 border-red-200 px-4 py-2 mb-4",children:"🚛 Nos Solutions"}),Fr.jsxs("h2",{className:"text-4xl md:text-5xl font-bold text-black mb-6",children:["Gamme Complète de",Fr.jsx("span",{className:"block text-red-600",children:"Bennes Particulier & Professionnel"})]}),Fr.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:"Des solutions adaptées à chaque projet, du particulier aux grands chantiers industriels"})]}),Fr.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 sm:gap-6 lg:gap-8 px-2 sm:px-4 md:px-0 justify-items-center",children:Array.isArray(e)&&e.length>0?e.map((e,t)=>{const s=(n=e.volume)<=8?{icon:Fr.jsx(oc,{className:"h-8 w-8"}),title:"Particuliers",description:"Idéale pour rénovations, jardinage et déménagements",color:"from-blue-500 to-blue-600",bgColor:"bg-blue-50",iconColor:"text-blue-600",features:["Planification 24h","Jusqu'à 7 jours","2 tonnes max"]}:n<=15?{icon:Fr.jsx(Dl,{className:"h-8 w-8"}),title:"Artisans",description:"Parfaite pour travaux moyens et rénovations professionnelles",color:"from-green-500 to-green-600",bgColor:"bg-green-50",iconColor:"text-green-600",features:["Planning flexible","Service adapté","4 tonnes max"]}:n<=22?{icon:Fr.jsx(Ql,{className:"h-8 w-8"}),title:"Entreprises",description:"Pour chantiers de grande envergure et projets industriels",color:"from-orange-500 to-orange-600",bgColor:"bg-orange-50",iconColor:"text-orange-600",features:["Service dédié","Planning adapté","6 tonnes max"]}:{icon:Fr.jsx(rc,{className:"h-8 w-8"}),title:"Industries",description:"Volume maximal pour les plus gros projets industriels",color:"from-red-500 to-red-600",bgColor:"bg-red-50",iconColor:"text-red-600",features:["Solution sur-mesure","Support dédié","10 tonnes max"]};var n;return Fr.jsxs(nf,{className:"group hover:shadow-2xl transition-all duration-300 hover:-translate-y-2 border-0 overflow-hidden",children:[Fr.jsx("div",{className:`h-2 bg-gradient-to-r ${s.color}`}),Fr.jsxs(lf,{className:"p-4 sm:p-6 md:p-8",children:[Fr.jsx("div",{className:`w-16 h-16 ${s.bgColor} rounded-2xl flex items-center justify-center mx-auto mb-6 group-hover:scale-110 transition-transform duration-300`,children:Fr.jsx("div",{className:s.iconColor,children:s.icon})}),Fr.jsxs("div",{className:"text-center space-y-3 sm:space-y-4",children:[Fr.jsxs("div",{className:"space-y-1 sm:space-y-2",children:[Fr.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-black",children:[e.volume,"m³"]}),Fr.jsx("h4",{className:"text-base sm:text-lg font-semibold text-gray-800",children:s.title}),Fr.jsx("p",{className:"text-gray-600 text-xs sm:text-sm leading-relaxed",children:s.description})]}),Fr.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[Fr.jsxs("div",{className:"text-lg sm:text-xl md:text-2xl font-bold text-red-600",children:["À partir de ",e.basePrice,"€"]}),Fr.jsx("ul",{className:"space-y-1",children:s.features.map((e,t)=>Fr.jsxs("li",{className:"text-xs text-gray-500 flex items-center justify-center",children:[Fr.jsx(Ul,{className:"h-3 w-3 text-green-500 mr-1"}),e]},t))})]}),Fr.jsx(Na,{href:"/booking",children:Fr.jsx(Lp,{className:"w-full bg-black text-white hover:bg-gray-800 group-hover:bg-red-600 transition-colors duration-300",children:"Choisir cette benne"})})]})]})]},t)}):Fr.jsx("div",{className:"col-span-full text-center text-gray-500",children:"Aucun service disponible"})})]})}),Fr.jsx("section",{className:"bg-white py-20",children:Fr.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[Fr.jsxs("div",{className:"text-center mb-16",children:[Fr.jsx(Hx,{className:"bg-black text-white px-4 py-2 mb-4",children:"🏆 Votre expert en gestion des déchets"}),Fr.jsxs("h2",{className:"text-4xl md:text-5xl font-bold text-black mb-6",children:["Pourquoi Choisir",Fr.jsx("span",{className:"block text-red-600",children:"REMONDIS ?"})]}),Fr.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:"Leader européen avec plus de 30 ans d'expertise dans la gestion des déchets et le recyclage"})]}),Fr.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 sm:gap-8 px-4 sm:px-0 mb-16",children:[{icon:Fr.jsx(Bc,{className:"h-8 w-8"}),title:"Planification Optimisée",description:"Planification minimum 24h avant intervention selon votre planning",color:"bg-yellow-500",bgColor:"bg-yellow-50",stat:"24h",statLabel:"Planification minimum"},{icon:Fr.jsx(dc,{className:"h-8 w-8"}),title:"Recyclage Écologique",description:"Traitement responsable et recyclage maximal de vos déchets",color:"bg-green-500",bgColor:"bg-green-50",stat:"90%",statLabel:"Taux recyclage 2022-2023-2024"},{icon:Fr.jsx(_c,{className:"h-8 w-8"}),title:"Service Garanti",description:"Assurance responsabilité civile et service client dédié",color:"bg-blue-500",bgColor:"bg-blue-50",stat:"100%",statLabel:"Sécurisé"},{icon:Fr.jsx(Al,{className:"h-8 w-8"}),title:"Devis Instantané",description:"Calculez votre prix en temps réel avec notre configurateur",color:"bg-purple-500",bgColor:"bg-purple-50",stat:"2min",statLabel:"Devis rapide"},{icon:Fr.jsx(Ul,{className:"h-8 w-8"}),title:"Conformité Légale",description:"Bordereaux de suivi et traçabilité complète des déchets",color:"bg-red-500",bgColor:"bg-red-50",stat:"ISO",statLabel:"Certifié"},{icon:Fr.jsx(_l,{className:"h-8 w-8"}),title:"Expert Reconnu",description:"Plus de 30 ans d'expérience dans la gestion des déchets",color:"bg-orange-500",bgColor:"bg-orange-50",stat:"30+",statLabel:"Ans expertise"}].map((e,t)=>Fr.jsx(nf,{className:"group hover:shadow-xl transition-all duration-300 border-0 overflow-hidden",children:Fr.jsxs(lf,{className:"p-8 text-center",children:[Fr.jsx("div",{className:`w-20 h-20 ${e.bgColor} rounded-2xl flex items-center justify-center mx-auto mb-6 group-hover:scale-110 transition-transform duration-300`,children:Fr.jsx("div",{className:`${e.color} text-white rounded-xl p-3`,children:e.icon})}),Fr.jsxs("div",{className:"space-y-4",children:[Fr.jsx("h3",{className:"text-xl font-bold text-black",children:e.title}),Fr.jsx("p",{className:"text-gray-600 leading-relaxed",children:e.description}),Fr.jsxs("div",{className:"pt-4 border-t border-gray-100",children:[Fr.jsx("div",{className:"text-2xl font-bold text-red-600",children:e.stat}),Fr.jsx("div",{className:"text-sm text-gray-500",children:e.statLabel})]})]})]})},t))}),Fr.jsxs("div",{className:"bg-gray-50 rounded-3xl p-12",children:[Fr.jsxs("div",{className:"text-center mb-12",children:[Fr.jsx("h3",{className:"text-3xl font-bold text-black mb-4",children:"Certifications & Partenaires"}),Fr.jsx("p",{className:"text-gray-600",children:"Nos labels de qualité et certifications professionnelles"})]}),Fr.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6 sm:gap-8 items-center px-4 sm:px-0",children:[{name:"ISO 14001",desc:"Management environnemental"},{name:"ICPE",desc:"Centres agréés"},{name:"BSD",desc:"Conformité légale"}].map((e,t)=>Fr.jsxs("div",{className:"text-center",children:[Fr.jsx("div",{className:"w-16 h-16 bg-white rounded-2xl shadow-md flex items-center justify-center mx-auto mb-4",children:Fr.jsx(_l,{className:"h-8 w-8 text-red-600"})}),Fr.jsx("h4",{className:"font-semibold text-black",children:e.name}),Fr.jsx("p",{className:"text-sm text-gray-500",children:e.desc})]},t))})]})]})}),Fr.jsx("section",{id:"process",className:"bg-black text-white py-20",children:Fr.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[Fr.jsxs("div",{className:"text-center mb-16",children:[Fr.jsx(Hx,{className:"bg-red-600 text-white px-4 py-2 mb-4",children:"⚡ Processus Simplifié"}),Fr.jsxs("h2",{className:"text-4xl md:text-5xl font-bold mb-6",children:["Comment Ça Marche ?",Fr.jsx("span",{className:"block text-red-400",children:"Simple comme bonjour"})]}),Fr.jsx("p",{className:"text-xl text-gray-300 max-w-3xl mx-auto",children:"Notre processus digital optimisé vous fait gagner du temps à chaque étape"})]}),Fr.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 sm:gap-8 px-4 sm:px-0",children:[{step:"01",title:"Configurez",desc:"Sélectionnez vos déchets et votre localisation",icon:Fr.jsx(fc,{className:"h-8 w-8"}),color:"from-red-500 to-red-600"},{step:"02",title:"Choisissez",desc:"Sélectionnez la benne adaptée à vos besoins",icon:Fr.jsx(Ql,{className:"h-8 w-8"}),color:"from-orange-500 to-orange-600"},{step:"03",title:"Planifiez",desc:"Choisissez vos créneaux de livraison et collecte",icon:Fr.jsx(Il,{className:"h-8 w-8"}),color:"from-yellow-500 to-yellow-600"},{step:"04",title:"Renseignez",desc:"Complétez vos informations de contact et livraison",icon:Fr.jsx(zc,{className:"h-8 w-8"}),color:"from-green-500 to-green-600"},{step:"05",title:"Payez",desc:"Réglez en ligne de façon 100% sécurisée",icon:Fr.jsx(_c,{className:"h-8 w-8"}),color:"from-blue-500 to-blue-600"},{step:"06",title:"Recevez",desc:"Votre benne arrive selon le planning convenu",icon:Fr.jsx(Fc,{className:"h-8 w-8"}),color:"from-purple-500 to-purple-600"}].map((e,t)=>Fr.jsx(nf,{className:"bg-gray-900 border-gray-800 group hover:bg-gray-800 transition-all duration-300",children:Fr.jsx(lf,{className:"p-8",children:Fr.jsxs("div",{className:"flex items-start space-x-4",children:[Fr.jsx("div",{className:`w-16 h-16 bg-gradient-to-r ${e.color} rounded-2xl flex items-center justify-center flex-shrink-0 group-hover:scale-110 transition-transform duration-300`,children:Fr.jsx("div",{className:"text-white",children:e.icon})}),Fr.jsxs("div",{className:"flex-1",children:[Fr.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[Fr.jsx("span",{className:"text-3xl font-bold text-red-400",children:e.step}),Fr.jsx("h3",{className:"text-xl font-bold text-white",children:e.title})]}),Fr.jsx("p",{className:"text-gray-400 leading-relaxed",children:e.desc})]})]})})},t))}),Fr.jsxs("div",{className:"mt-16 text-center",children:[Fr.jsxs("div",{className:"flex items-center justify-center space-x-4 mb-8",children:[Fr.jsxs("div",{className:"flex items-center space-x-2",children:[Fr.jsx(Zl,{className:"h-5 w-5 text-red-400"}),Fr.jsx("span",{className:"text-gray-300",children:"Durée totale:"}),Fr.jsx("span",{className:"text-white font-bold",children:"Moins de 5 minutes"})]}),Fr.jsx(Jx,{className:"w-12 bg-gray-700"}),Fr.jsxs("div",{className:"flex items-center space-x-2",children:[Fr.jsx(Oc,{className:"h-5 w-5 text-green-400"}),Fr.jsx("span",{className:"text-gray-300",children:"Satisfaction:"}),Fr.jsx("span",{className:"text-white font-bold",children:"98% des clients"})]})]}),Fr.jsx(Na,{href:"/booking",children:Fr.jsxs(Lp,{size:"lg",className:"bg-red-600 hover:bg-red-700 text-white px-8 py-4 text-lg shadow-xl",children:[Fr.jsx(Sl,{className:"mr-2 h-5 w-5"}),"Commencer maintenant"]})})]})]})}),Fr.jsx("section",{className:"bg-gradient-to-r from-red-600 via-red-700 to-red-800 text-white py-20",children:Fr.jsx("div",{className:"max-w-6xl mx-auto text-center px-4 sm:px-6 lg:px-8",children:Fr.jsxs("div",{className:"space-y-8",children:[Fr.jsx(Hx,{className:"bg-white/20 text-white border-white/30 px-6 py-3 text-lg",children:"Démarrez votre projet dès maintenant"}),Fr.jsxs("h2",{className:"text-4xl md:text-6xl font-bold leading-tight",children:["Prêt à Commander",Fr.jsx("span",{className:"block text-red-200",children:"Votre Benne ?"})]}),Fr.jsx("p",{className:"text-xl md:text-2xl text-red-100 max-w-4xl mx-auto leading-relaxed",children:"Obtenez votre devis personnalisé en moins de 2 minutes et bénéficiez de notre expertise reconnue dans toute la France"}),Fr.jsx("div",{className:"flex justify-center",children:Fr.jsx(Na,{href:"/booking",children:Fr.jsxs(Lp,{size:"lg",className:"bg-white text-red-600 hover:bg-red-50 px-10 py-5 text-xl font-bold shadow-2xl",children:[Fr.jsx(Il,{className:"mr-3 h-6 w-6"}),"Commencer ma commande"]})})}),Fr.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 pt-12 border-t border-white/20",children:[Fr.jsxs("div",{className:"text-center",children:[Fr.jsx("div",{className:"text-3xl font-bold",children:"24h"}),Fr.jsx("div",{className:"text-red-200",children:"Planification minimum"})]}),Fr.jsxs("div",{className:"text-center",children:[Fr.jsx("div",{className:"text-3xl font-bold",children:"700+"}),Fr.jsx("div",{className:"text-red-200",children:"Clients satisfaits"})]}),Fr.jsxs("div",{className:"text-center",children:[Fr.jsx("div",{className:"text-3xl font-bold",children:"98%"}),Fr.jsx("div",{className:"text-red-200",children:"Taux de satisfaction"})]})]})]})})}),Fr.jsx("section",{id:"contact",className:"bg-gray-50 py-20",children:Fr.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:Fr.jsxs("div",{className:"grid lg:grid-cols-2 gap-12 items-center",children:[Fr.jsxs("div",{className:"space-y-8",children:[Fr.jsxs("div",{className:"space-y-4",children:[Fr.jsx(Hx,{className:"bg-red-100 text-red-600 border-red-200 px-4 py-2",children:"Support personnalisé"}),Fr.jsxs("h3",{className:"text-4xl font-bold text-black",children:["Besoin d'une Solution",Fr.jsx("span",{className:"block text-red-600",children:"Personnalisée ?"})]}),Fr.jsx("p",{className:"text-xl text-gray-600 leading-relaxed",children:"Notre équipe d'experts est à votre disposition pour étudier vos besoins spécifiques et vous proposer la solution la plus adaptée à votre projet."})]}),Fr.jsxs("div",{className:"space-y-4",children:[Fr.jsxs("div",{className:"flex items-center space-x-4",children:[Fr.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-xl flex items-center justify-center",children:Fr.jsx(bc,{className:"h-6 w-6 text-red-600"})}),Fr.jsxs("div",{children:[Fr.jsx("h4",{className:"font-semibold text-black",children:"Assistance téléphonique"}),Fr.jsx("p",{className:"text-gray-600",children:"Du lundi au vendredi, 8h-18h"})]})]}),Fr.jsxs("div",{className:"flex items-center space-x-4",children:[Fr.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-xl flex items-center justify-center",children:Fr.jsx(xc,{className:"h-6 w-6 text-red-600"})}),Fr.jsxs("div",{children:[Fr.jsx("h4",{className:"font-semibold text-black",children:"Support par email"}),Fr.jsx("p",{className:"text-gray-600",children:"Réponse sous 2h en moyenne"})]})]}),Fr.jsxs("div",{className:"flex items-center space-x-4",children:[Fr.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-xl flex items-center justify-center",children:Fr.jsx(zc,{className:"h-6 w-6 text-red-600"})}),Fr.jsxs("div",{children:[Fr.jsx("h4",{className:"font-semibold text-black",children:"Équipe dédiée"}),Fr.jsx("p",{className:"text-gray-600",children:"Conseillers spécialisés par secteur"})]})]})]})]}),Fr.jsx(nf,{className:"bg-white border-0 shadow-2xl",children:Fr.jsxs(lf,{className:"p-8",children:[Fr.jsx("h4",{className:"text-2xl font-bold text-black mb-6",children:"Contactez-nous"}),Fr.jsxs("div",{className:"space-y-6",children:[Fr.jsxs(Lp,{className:"w-full bg-red-600 hover:bg-red-700 text-white py-4 text-lg justify-start",children:[Fr.jsx(bc,{className:"mr-3 h-5 w-5"}),"03 44 45 11 58"]}),Fr.jsxs(Lp,{variant:"outline",className:"w-full border-red-600 text-red-600 hover:bg-red-50 py-4 text-lg justify-start",children:[Fr.jsx(xc,{className:"mr-3 h-5 w-5"}),"contact@remondis.fr"]}),Fr.jsx(Jx,{className:"my-6"}),Fr.jsxs("div",{className:"text-center space-y-3",children:[Fr.jsx("h5",{className:"font-semibold text-black",children:"Disponibilité"}),Fr.jsx("div",{className:"text-sm text-gray-600 space-y-1",children:Fr.jsx("p",{children:"Lundi - Vendredi: 8h00 - 18h00"})})]})]})]})})]})})}),Fr.jsx(LR,{})]})}function zR(){const[e,t]=hr.useState(!1);hr.useEffect(()=>{localStorage.getItem("cookieConsent")||t(!0)},[]);return e?Fr.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-slate-900 text-white p-4 shadow-2xl z-50",children:Fr.jsxs("div",{className:"max-w-7xl mx-auto flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[Fr.jsx("div",{className:"flex-1",children:Fr.jsxs("p",{className:"text-sm",children:[Fr.jsx(Gl,{className:"inline h-4 w-4 mr-2 text-amber-400"}),"Nous utilisons des cookies pour améliorer votre expérience. En continuant, vous acceptez notre"," ",Fr.jsx("a",{href:"#",className:"underline hover:no-underline",children:"politique de confidentialité"}),"."]})}),Fr.jsxs("div",{className:"flex gap-3",children:[Fr.jsx(Lp,{variant:"outline",size:"sm",onClick:()=>{localStorage.setItem("cookieConsent","declined"),t(!1)},className:"border-slate-600 text-white hover:bg-slate-800",children:"Refuser"}),Fr.jsx(Lp,{size:"sm",onClick:()=>{localStorage.setItem("cookieConsent","accepted"),t(!1)},className:"bg-primary-600 hover:bg-primary-700",children:"Accepter"})]})]})}):null}function VR(){const{isLoading:e}=Fp();return e?Fr.jsxs("div",{className:"min-h-screen-safe bg-white flex flex-col items-center justify-center container-responsive",children:[Fr.jsx("div",{className:"spacing-md",children:Fr.jsx("img",{src:"https://upload.wikimedia.org/wikipedia/commons/3/32/Remondis_logo.svg",alt:"Remondis",className:"h-12 w-auto img-responsive"})}),Fr.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-red-600 border-t-transparent rounded-full"}),Fr.jsx("p",{className:"spacing-sm text-gray-600",children:"Chargement..."})]}):Fr.jsxs(ka,{children:[Fr.jsx(ja,{path:"/auth",component:nD}),Fr.jsx(ja,{path:"/booking",component:TO}),Fr.jsx(ja,{path:"/profile",component:aD}),Fr.jsx(ja,{path:"/client-dashboard",component:cD}),Fr.jsx(ja,{path:"/dashboard",component:yg}),Fr.jsx(ja,{path:"/dashboard/*",component:yg}),Fr.jsx(ja,{path:"/admin/fids",component:Tj}),Fr.jsx(ja,{path:"/admin/users",component:Aj}),Fr.jsx(ja,{path:"/admin/*",component:kg}),Fr.jsx(ja,{path:"/admin",component:kg}),Fr.jsx(ja,{path:"/checkout",component:AO}),Fr.jsx(ja,{path:"/payment-success",component:OO}),Fr.jsx(ja,{path:"/legal",component:RO}),Fr.jsx(ja,{path:"/privacy-policy",component:FO}),Fr.jsx(ja,{path:"/retraction-rights",component:IO}),Fr.jsx(ja,{path:"/price-simulation",component:MO}),Fr.jsx(ja,{path:"/validate-delivery",component:LO}),Fr.jsx(ja,{path:"/faq",component:MR}),Fr.jsx(ja,{path:"/introduction",component:qR}),Fr.jsx(ja,{path:"/",component:qR}),Fr.jsx(ja,{component:dD})]})}function BR(){return Fr.jsx(wi,{client:Ri,children:Fr.jsxs(Ap,{children:[Fr.jsx(Wd,{}),Fr.jsx(zR,{}),Fr.jsx(VR,{})]})})}IR.displayName=AR.displayName,Rr(document.getElementById("root")).render(Fr.jsx(vr.StrictMode,{children:Fr.jsx(BR,{})}));export{Sg as _};
⚠️  Clés de test trouvées dans le build

► Redémarrage de l'application
[PM2] Applying action restartProcessId on app [bennespro](ids: [ 0 ])
[PM2] [bennespro](0) ✓
┌────┬──────────────┬─────────────┬─────────┬─────────┬──────────┬────────┬──────┬───────────┬──────────┬──────────┬──────────┬──────────┐
│ id │ name         │ namespace   │ version │ mode    │ pid      │ uptime │ ↺    │ status    │ cpu      │ mem      │ user     │ watching │
├────┼──────────────┼─────────────┼─────────┼─────────┼──────────┼────────┼──────┼───────────┼──────────┼──────────┼──────────┼──────────┤
│ 0  │ bennespro    │ default     │ N/A     │ cluster │ 118292   │ 0s     │ 1024 │ online    │ 0%       │ 40.3mb   │ root     │ disabled │
└────┴──────────────┴─────────────┴─────────┴─────────┴──────────┴────────┴──────┴───────────┴──────────┴──────────┴──────────┴──────────┘
✓ Application redémarrée

✅ DÉPLOIEMENT TERMINÉ!
================================

Vérifications :
- PM2 status : pm2 status
- Logs : pm2 logs bennespro
- Test API : curl http://localhost:5000/api/health

⚠️  N'oubliez pas de vider le cache du navigateur!
ubuntu@vps-41d62757:~/JobDone$
